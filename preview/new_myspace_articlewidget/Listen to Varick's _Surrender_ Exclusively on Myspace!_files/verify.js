/* 2.1.2 */ var Adt1023 = true;!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(c){function d(a){this.runtime=new g(a)}var e=function(a){return"string"!=typeof a?{}:(a=a.substring(a.indexOf("?")+1),a=a.trim().replace(/^(\?|#)/,""),a?a.trim().split("&").reduce(function(a,b){var c=b.replace(/\+/g," ").split("="),d=c[0],e=c[1];if(d=decodeURIComponent(d),e=void 0===e||"undefined"==e?null:decodeURIComponent(e),"string"==typeof e){var f=e.split(",");e=1==f.length?f[0]:f}return a.hasOwnProperty(d)?Array.isArray(a[d])?a[d].push(e):a[d]=[a[d],e]:a[d]=e,a},{}):{})},f=function(){var a=document.getElementsByTagName("script");for(i=0;i<a.length;i++)if(a[i].src.indexOf("verify.js")>-1)return a[i].src;return null},g=a("./adtricity.runtime.js"),h=a("./constants.js");d.prototype.setDebug=function(a){this.runtime.setDebug(a)},d.prototype.showDebugger=function(a){this.runtime.showDebugger(a)},d.prototype.VERSION=h.VERSION,d.prototype.addEventListener=function(a,b){this.runtime.addEventListener(a,b)},d.prototype.removeEventListener=function(a,b){this.runtime.removeEventListener(a,b)},d.prototype.adtPublishEvent=function(a,b){this.runtime.adtPublishEvent(a,b)},d.prototype.init=function(a,b,c,d,e){this.runtime.videoInit.apply(this.runtime,arguments)},d.prototype.complete=function(){this.runtime.metadata=null},d.prototype.impression=function(){};var j=f(),k=e(j);c.adtricity=new d(k),b.exports=c.adtricity}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adtricity.runtime.js":2,"./constants.js":3}],2:[function(a,b,c){(function(c){function d(a){try{return a.element.ownerDocument.defaultView.self!==a.element.ownerDocument.defaultView.top}catch(b){return n.debug("vjs - _inIframe error "+b),!0}}function e(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}function f(a){var b=!1,c=a.iid;if(a.isVideo){if(c&&"string"==typeof c&&c.indexOf("_")>=0){var d=c.split("_")[1];try{b="1"==d[1]&&"1"==d[2]&&"1"==d[3]}catch(e){}}}else a.isDisplay&&(b=1==a.parameters.dinf);return b}function g(){var a="http:";try{window.location.protocol&&"https:"==window.location.protocol&&(a="https:")}catch(b){}return a}function h(a){var b,c,d=null;try{b=a.ownerDocument,c=b.parentWindow||b.defaultView,d=c.top.location.hostname}catch(e){}return d}function i(a){this._dispatch=new l,this.runtime={},this.runtime.parameters=a;var b=a.iid,c="1457560481783_3763891219",i=b?b:c,k=document.getElementById(i);this.__iid=i,this.runtime.iid=i,k&&(this.__setCreativeElement(k),this.runtime.inIframe=d(this.runtime)),o.runtime=this.runtime,o.setQueryStringURL(this.runtime.parameters.uebu),n.debug("vjs - UEBU query params: "+this.runtime.parameters.uebu),this.snvd=0,this.snvd_callback="",this.runtime.isDisplay=this.runtime.parameters.pt==j.adtricity.DISPLAY,this.runtime.isVideo=!this.runtime.isDisplay,this.runtime.constants=j.video,this.runtime.adImpressionReceived=!1,this.runtime.isDisplay&&(this.runtime.constants=j.display,this.snvd=this.runtime.parameters.snvd,n.debug("vjs - snvd: "+this.snvd),this.snvd_callback=this.runtime.parameters.snvd_callback,n.debug("vjs - snvd_callback: "+this.snvd_callback),1==this.snvd&&this.snvd_callback&&"string"==typeof this.snvd_callback&&""!=this.snvd_callback&&p.fire(j.Pixel.SNVD_INIT)),this.runtime.mobile=e(),this.runtime.useInfoPixels=f(this.runtime),this.runtime.infoPixels=[],this.runtime.errorPixels=[],this.runtime.protocol=g(),this.runtime.determinedDomain=h(this.runtime.element),this.events=new q(this._dispatch,this.runtime),this.runtime.events=this.events,this.runtime.isProduction=this.setProduction(),this.setDebug(this.runtime.parameters.debug),n.runtime=this.runtime,n.dispatch=this._dispatch,this.runtime.element?this.start():this.debug&&n.debug("Debug enabled")}var j=a("./constants.js"),k=(a("./monitor/environment.js"),a("./monitor/monitor")),l=a("./notification/notification.js"),m=a("./support/debug.ui.js"),n=a("./support/log.js"),o=a("./tracking/uebu.js"),p=a("./tracking/pixel.js"),q=a("./monitor/events");i.prototype.addEventListener=function(a,b){this._dispatch.subscribe(a,b)},i.prototype.removeEventListener=function(a,b){this._dispatch.unsubscribe(a,b)},i.prototype.adtPublishEvent=function(a,b){this._dispatch&&this._dispatch.publish(a,b)},i.prototype.videoInit=function(a,b,c,e,g){if("string"==typeof e)o.addURL(e);else for(var h=0;h<e.length;h++)o.addURL(e[h]);n.debug("UEBU",e),this._sugrInitializationParameters=g,c&&"undefined"!=typeof c&&(this.__iid=c),b.nodeName&&b.tagName?(n.debug("vjs - setCreativeElement(videoSlot)"),this.__setCreativeElement(b)):(n.debug("vjs - setCreativeElement(slot)"),this.__setCreativeElement(a)),this.runtime.inIframe=d(this.runtime),this.runtime.useInfoPixels=f(this.runtime),this.start()},i.prototype.start=function(){if(!this._started){this.monitor=new k(this.runtime.element,this.runtime),this.events.adtRequestFullscreen(),this.runtime.monitor=this.monitor;var a=function(a){this.__setCreativeElement(a.video),this.monitor.element=a.video};this.addEventListener("updateCreativeElement",a.bind(this));var b=function(a){n.debug("Viewable percentage",a)};this.monitor.addEventListener(j.notificationEvents.viewablePercentageChange,b.bind(this));var c=function(a){p.fireInfoPixel(this.runtime,a)};this.monitor.addEventListener(j.notificationEvents.adtricityInfoPixel,c.bind(this));var d=function(a){p.fireErrorPixel(this.runtime,a)};this.monitor.addEventListener(j.notificationEvents.adtricityErrorPixel,d.bind(this));var e=function(a){this.runtime.isVideo?this.events.adtHalfInView():this.runtime.isDisplay&&1==this.snvd&&this.snvd_callback&&"string"==typeof this.snvd_callback&&""!=this.snvd_callback&&(n.debug("vjs - adtHalfInView invoking snvd_callback function: "+this.snvd_callback),window[this.snvd_callback](),p.fire(j.Pixel.SNVD_INVIEW,{time:a}),this.runtime.monitor.onAdImpressionReceived(),this.runtime.adImpressionReceived=!0)};this.monitor.addEventListener(j.notificationEvents.notifyAdtHalfInView,e.bind(this));var f=function(){p.fire(j.Pixel.InViewport)};this.monitor.addEventListener(j.notificationEvents.inviewport,f.bind(this));var g=function(a,b){this.runtime.isDisplay?(p.fire(j.Pixel.DISPLAY.Viewable,{tv:a,ttv:b}),this.monitor.stop()):p.fire(j.Pixel.VIDEO.Viewable,{tv:a,ttv:b})};this.monitor.addEventListener(j.notificationEvents.viewableThreshold,g.bind(this));var h=function(){var a=j.Pixel.VIDEO.Measurable;this.runtime.isDisplay&&(a=j.Pixel.DISPLAY.Measurable),p.fire(a)};this.monitor.addEventListener(j.notificationEvents.measurable,h.bind(this)),this.monitor.init(),this.__enabledMonitorDebugUI(),this.__enabledDebugLogUI(),o.setValue("adtricity_version",j.VERSION),o.setValue("adtricity_location",j.LOCATION),o.setValue("domain",this.runtime.determinedDomain),this.runtime.isDisplay?(o.setValue("sugr_location",j.uebu.DISPLAY.sls),o.setValue("sugr_version",j.uebu.DISPLAY.svn)):(o.setValue("sugr_location",j.uebu.VIDEO.sls),o.setValue("sugr_version",null),this._sugrInitializationParameters&&o.setValue("sugr_query_string",this._sugrInitializationParameters));var i;try{i=this.runtime.element.getBoundingClientRect()}catch(l){}o.setValue("ad_width",i.width),o.setValue("ad_height",i.height);var m=this.monitor.getSnapshotState();o.setValue("snapshot_viewability",m),o.addEventArgument("iid",this.__iid),this.runtime.isDisplay?(p.fire(j.Pixel.DISPLAY.Injection,{}),m==j.snapshot.states.viewable?p.fire(j.Pixel.DISPLAY.SnaphotViewable,{}):m==j.snapshot.states.nonviewable&&p.fire(j.Pixel.DISPLAY.SnaphotNonViewable,{})):p.fire(j.Pixel.VIDEO.Injection,{});var b=function(a){n.debug("Viewable percentage",a)};this.monitor.addEventListener(j.notificationEvents.viewablePercentageChange,b.bind(this));var q=function(a){n.debug("vjs - __nonviewabletimeUpdate ",a),this.runtime.isVideo?p.fire(j.Pixel.VIDEO.NonViewableTimeUpdate,{time:a}):this.runtime.isDisplay&&(p.fire(j.Pixel.DISPLAY.NonViewableTimeUpdate,{time:a}),1==this.snvd&&p.fire(j.Pixel.SNVD_PING,{time:a}))};this.monitor.addEventListener(j.notificationEvents.nonviewabletimeUpdate,q.bind(this));var r=function(a){n.debug("vjs - __nonviewabletimeTotal ",a),this.runtime.isVideo?p.fire(j.Pixel.VIDEO.NonViewableTimeTotal,{time:a}):this.runtime.isDisplay&&p.fire(j.Pixel.DISPLAY.NonViewableTimeTotal,{time:a})};this.monitor.addEventListener(j.notificationEvents.nonviewabletimeTotal,r.bind(this));var s=function(a,b,c,d){n.debug("vjs - quartileUpdate "+a+" "+b);var e=j.Pixel.VIDEO.Quartiles[a].Viewable;b||(e=j.Pixel.VIDEO.Quartiles[a].NonViewable),p.fire(e,{qtv:c,ttv:d})};this.monitor.addEventListener(j.notificationEvents.quartilePublished,s.bind(this)),this.runtime.isDisplay&&(this.runtime.monitor.start(),1==!this.snvd&&(this.runtime.monitor.onAdImpressionReceived(),this.runtime.adImpressionReceived=!0)),this._started=!0}},i.prototype.setDebug=function(a){this.runtime.debug=a,n.debug("vjs - debugEnabled "+a),a?(n.debug("vjs - Debug Enabled"),n.debug("Initialization Parameters: ",this.runtime.parameters),n.debug("Monitoring Element: ",this.runtime.element),n.debug("Determined Domain: ",this.runtime.determinedDomain)):a===!1&&(n.debug("Debug Disabled"),this.showDebugger(!1))},i.prototype.setProduction=function(){var a=!1;try{Adt1023&&(a=!0)}catch(b){}return n.debug("vjs - setProduction "+a),a},i.prototype.showDebugger=function(a){this.runtime.showDebugger=a,a?(n.debug("Debugger UI Enabled"),this.__enabledDebugLogUI(),this.__enabledMonitorDebugUI()):a===!1&&(n.debug("Debugger UI Disabled"),this.debugUI&&(this.debugUI.showLogger(!1),this.debugUI.remove()),this.debugUI=null)},i.prototype.__enabledMonitorDebugUI=function(){if(this.monitor&&this.runtime.debug){this.debugUI||(this.debugUI=new m(this.runtime.element,this.runtime)),this.debugUI.show();var a=function(a){this.debugUI.update(a)};this.monitor.addEventListener(j.notificationEvents.viewablePercentageChange,a.bind(this))}},i.prototype.__enabledDebugLogUI=function(){function a(a,b){var c=[];for(var d in a)c.push(d);for(var e=c.length-1;e>=0;e--)b.call(a,c[e])}if(this.monitor&&this.runtime.showDebugger){this.debugUI||(this.debugUI=new m(this.runtime.element,this.runtime)),this.debugUI.showUEBULogger(!0);var b=function(a,b){this.debugUI.prependToLogger("[ "+a+" ] "+b)};this.addEventListener(j.notificationEvents.logPublished,b.bind(this));var c=function(a,b,c){this.debugUI.prependToLogger("[ UEBU ] "+a),this.debugUI.appendUEBU(a,c)};this.addEventListener(j.notificationEvents.uebuPublished,c.bind(this)),a(n.logs,function(a){var b=n.logs[a];this.debugUI.prependToLogger("[ "+b[0]+" ] "+b[1])}.bind(this))}},i.prototype.__setCreativeElement=function(a){a||n.error("Invalid initialization element"),this.runtime.element=a,this.runtime.document=this.runtime.element.ownerDocument,this.runtime.window=this.runtime.document.parentWindow||this.runtime.document.defaultView,this.runtime.isMraid=!!this.runtime.window.mraid,this.runtime.window.mraid=null,this.runtime.isMraid?this.runtime.mraid=this.runtime.window.mraid:c.mraid&&(this.runtime.isMraid=!0,this.runtime.mraid=c.mraid)},b.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./constants.js":3,"./monitor/environment.js":4,"./monitor/events":5,"./monitor/monitor":7,"./notification/notification.js":9,"./support/debug.ui.js":10,"./support/log.js":11,"./tracking/pixel.js":13,"./tracking/uebu.js":14}],3:[function(a,b,c){var d={};d.VERSION="2.1.2",d.LOCATION="4",d.sugrEvents={adtRequestFullscreen:"adtRequestFullscreen",adtHalfInView:"adtHalfInView"},d.notificationEvents={viewablePercentageChange:"viewablePercentageChange",viewableThreshold:"viewableThreshold",visibilityChange:"visibilityChange",logPublished:"logPublished",networkPublished:"networkEvent",uebuPublished:"uebuEvent",quartilePublished:"quartileEvent",nonviewabletimeUpdate:"nonviewabletimeUpdate",nonviewabletimeTotal:"nonviewabletimeTotal",inviewport:"inviewport",measurable:"measurableEvent",notifyAdtRequestFullscreen:"notifyAdtRequestFullscreen",notifyAdtHalfInView:"notifyAdtHalfInView",adtricityInfoPixel:"adtricityInfoPixel",adtricityErrorPixel:"adtricityErrorPixel"},d.pixels={5310:"VideoNotinviewTimeUpdate",5311:"VideoNotinviewTimeTotal",5312:"DisplayNotinviewTimeUpdate",5313:"DisplayNotinviewTimeTotal",5320:"Adtricity_Info",5330:"Adtricity_Error",5340:"Adtricity_InViewport",5300:"Adtricity_Loaded",5351:"Adtricity_VideoInjection",5303:"Adtricity_VideoViewable",5307:"Adtricity_VideoMeasurable",5352:"Adtricity_Quartile_0_Viewable",5353:"Adtricity_Quartile_0_NonViewable",5354:"Adtricity_Quartile_25_Viewable",5355:"Adtricity_Quartile_25_NonViewable",5356:"Adtricity_Quartile_50_Viewable",5357:"Adtricity_Quartile_50_NonViewable",5358:"Adtricity_Quartile_75_Viewable",5359:"Adtricity_Quartile_75_NonViewable",5360:"Adtricity_Quartile_100_Viewable",5361:"Adtricity_Quartile_100_NonViewable",5350:"Adtricity_DisplayInjection",5308:"Adtricity_DisplaySnaphotViewable",5309:"Adtricity_DisplaySnapshotNonViewable",5304:"Adtricity_DisplayViewable",5306:"Adtricity_DisplayMeasurable"},d.Pixel={},d.Pixel.INFO=5320,d.Pixel.ERROR=5330,d.Pixel.InViewport=5340,d.Pixel.LOADED=5300,d.Pixel.VIDEO={Injection:5351,Viewable:5303,Measurable:5307,NonViewableTimeUpdate:5310,NonViewableTimeTotal:5311,Quartiles:{0:{Viewable:5352,NonViewable:5353},25:{Viewable:5354,NonViewable:5355},50:{Viewable:5356,NonViewable:5357},75:{Viewable:5358,NonViewable:5359},100:{Viewable:5360,NonViewable:5361}}},d.Pixel.DISPLAY={Injection:5350,SnaphotViewable:5308,SnaphotNonViewable:5309,Viewable:5304,Measurable:5306,NonViewableTimeUpdate:5312,NonViewableTimeTotal:5313},d.Pixel.SNVD_INIT=5400,d.Pixel.SNVD_PING=5401,d.Pixel.SNVD_INVIEW=5402,d.VPAID={version:"2.0",wrapperLimit:3,event:{AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdEnded:"AdEnded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog"}},d.events={event:{adtConfirmFullScreen:"adtConfirmFullScreen",adtRequestFullscreen:"adtRequestFullscreen",adtHalfInView:"adtHalfInView",visibilityChange:"visibilityChange",adtSignalVPAID:"adtSignalVPAID",adtRequestViewabilityData:"adtRequestViewabilityData",adtQueryViewabilityData:"adtQueryViewabilityData",adtViewabilityData:"adtViewabilityData",adtAddUEBUToArray:"adtAddUEBUToArray",adtAdError:"AdError"}},d.snapshot={largeThreshold:30,threshold:50,states:{nonviewable:0,viewable:1,error:2}},d.pixelCodes={info:{VideoGeometricInstantiated:2100,VideoGeometricTrackingStart:2101,VideoGeometricTrackingStop:2102,VideoGeometricViewable:2103,VideoFlashInstantiated:2200,VideoFlashTrackingStart:2201,VideoFlashTrackingStop:2202,VideoFlashViewable:2203,VideoSWFContainerCreated:2204,VideoSWFMarkerCreated:2205,VideoSWFCommunicationInit:2206,VideoSWFRemoved:2207,DisplayGeometricInstantiated:3100,DisplayGeometricTrackingStart:3101,DisplayGeometricTrackingStop:3102,DisplayGeometricViewable:3103,DisplayFlashInstantiated:3200,DisplayFlashTrackingStart:3201,DisplayFlashTrackingStop:3202,DisplayFlashViewable:3203,DisplaySWFContainerCreated:3204,DisplaySWFMarkerCreated:3205,DisplaySWFCommunicationInit:3206,DisplaySWFRemoved:3207},error:{ViewabilityInit:200,MarkersInit:300,MarkersInview:301,MarkersStop:302,MarkersInitViewabilityPixels:303,MarkersCreateMarker:304,MarkersDNT0:305,MarkersDNT1:306,MarkersSWFCommunicationInit:307,MarkersSWFCommunicationUpdate:308}},d.flash={mimeType:"application/x-shockwave-flash",classID:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"},d.swf={count:{DISPLAY:2,VIDEO:4},settings:{DEV:{markerSize:40,markerMode:"window",markerColor:"00FF00",markerSrc:"//viant-adtricity.com:8001/dist/vip.swf"},PROD:{markerSize:1,markerMode:"transparent",markerColor:"808080",markerSrc:"//sdk.vindicosuite.com/verify/"+d.VERSION+"/vip.swf"}},positions:{VIDEO:{top:1,left:2,right:3,bottom:4},DISPLAY:{sideA:1,sideB:2}}},d.uebu={DISPLAY:{sls:0,svn:"NON_SUGR"},VIDEO:{sls:3}},d.adtricity={DISPLAY:3,VAST:0,VPAID:2},d.display={updateInterval:100,viewableDuration:1e3,viewableAreaThreshold:50},d.video={updateInterval:200,viewableDuration:2e3,viewableAreaThreshold:50},b.exports=d},{}],4:[function(a,b,c){function d(){this.useragent=navigator.userAgent.toLowerCase()}var e=a("./../constants.js"),f=a("./../support/log.js");d.prototype.setUserAgent=function(a){this.useragent=a.toLowerCase()},d.resetUserAgent=function(){this.useragent=navigator.userAgent.toLowerCase()},d.prototype.isOSWindows=function(){return this.useragent.indexOf("windows")>=0},d.prototype.isOSMac=function(){return this.useragent.indexOf("macintosh")>=0},d.prototype.isOSOther=function(){return!this.isOSWindows()&&!this.isOSMac()},d.prototype.isBrowserInternetExplorer=function(){return this.useragent.indexOf("trident/")>=0},d.prototype.isBrowserIE11=function(){return this.useragent.indexOf("trident/7")>=0},d.prototype.isBrowserMicrosoftEdge=function(){return this.useragent.indexOf("edge/")>=0},d.prototype.isBrowserChrome=function(){return this.useragent.indexOf("chrome/")>=0&&this.useragent.indexOf("edge/")<0},d.prototype.isBrowserFirefox=function(){return this.useragent.indexOf("firefox/")>=0},d.prototype.isBrowserSafari=function(){return this.useragent.indexOf("safari/")>=0&&this.useragent.indexOf("chrome/")<0&&this.useragent.indexOf("edge/")<0},d.prototype.isBrowserOpera=function(){return this.useragent.indexOf("opera/")>=0||this.useragent.indexOf("opr")>=0},d.prototype.isFlashInstalled=function(){var a=!1;try{if(navigator.plugins&&navigator.plugins.length>0){var b=e.flash.mimeType;navigator.mimeTypes&&navigator.mimeTypes[b]&&navigator.mimeTypes[b].enabledPlugin&&navigator.mimeTypes[b].enabledPlugin.description&&(a=!0)}}catch(c){f.debug("vjs - Environment.isFlashInstalled error "+c.description)}return a},d.prototype.isFlashSupported=function(){var a=!1;try{if(navigator.plugins&&navigator.plugins.length>0){var b=e.flash.mimeType;if(navigator.mimeTypes&&navigator.mimeTypes[b]&&navigator.mimeTypes[b].enabledPlugin&&navigator.mimeTypes[b].enabledPlugin.description){var c=navigator.mimeTypes[b].enabledPlugin.description,d=c.split(/ +/)[2].split(/\./),g=parseInt(d[0],10),h=parseInt(d[1],10);(g>11||11==g&&h>=2)&&(a=!0)}}}catch(i){f.debug("vjs - Environment.isFlashSupported error "+i.description)}return a},d.prototype.__getOSCode=function(){var a="f";try{this.isOSWindows()&&(a="1"),this.isOSMac()&&(a="2"),this.isOSOther()&&(a="3")}catch(b){f.debug("vjs - Environment.__getOSCode error "+b.description)}return a},d.prototype.__getBrowserCode=function(){var a="f";try{this.isBrowserInternetExplorer()&&(a=1),this.isBrowserChrome()&&(a=2),this.isBrowserSafari()&&(a=3),this.isBrowserFirefox()&&(a=4),this.isBrowserOpera()&&(a=5),this.isBrowserIE11()&&(a=7),this.isBrowserMicrosoftEdge()&&(a=8)}catch(b){f.debug("vjs - Environment.__getBrowserCode error "+b.description)}return a},d.prototype.getDebugString=function(a){var b="";try{b+=this.__getOSCode(),b+=this.__getBrowserCode(),b+=this.isFlashInstalled()?"1":"0",b+=this.isFlashSupported()?"1":"0",b+=a.monitor._viewability.getDeterminationMethod(),b+=a.inIframe?"1":"0",6!=b.length&&(b="ffffff")}catch(c){f.debug("vjs - getDebugString output error "+b+" "+c.description),b="ffffff"}return b},d.instance=null,d.singleton=function(){return null===this.instance&&(this.instance=new d),this.instance},b.exports=d.singleton()},{"./../constants.js":3,"./../support/log.js":11}],5:[function(a,b,c){function d(a,b){this._dispatch=a,this._runtime=b,this._currentQuartile=-1,this._event=e.events.event,this._dispatch.subscribe(this._event.adtConfirmFullScreen,this.adtConfirmFullScreen.bind(this)),this._dispatch.subscribe(this._event.visibilityChange,this.adtViewabilityThreshold.bind(this)),this._dispatch.subscribe(this._event.adtSignalVPAID,this.adtSignalVPAID.bind(this)),this._dispatch.subscribe(this._event.adtRequestViewabilityData,this.adtRequestViewabilityData.bind(this)),this._dispatch.subscribe(this._event.adtQueryViewabilityData,this.adtQueryViewabilityData.bind(this)),this._dispatch.subscribe(this._event.adtAddUEBUToArray,this.adtAddUEBUToArray.bind(this)),this._dispatch.subscribe(this._event.adtAdError,this.adtAdError.bind(this))}var e=a("./../constants.js"),f=a("./../support/log.js"),g=a("./../tracking/uebu.js");d.prototype.adtConfirmFullScreen=function(a){a&&f.events(this._event.adtConfirmFullScreen,a)},d.prototype.adtRequestFullscreen=function(){this._dispatch&&this._dispatch.publish(e.sugrEvents.adtRequestFullscreen)},d.prototype.adtHalfInView=function(){f.debug("vjs - adtHalfInView"),this._dispatch&&this._dispatch.publish(e.sugrEvents.adtHalfInView)},d.prototype.adtViewabilityThreshold=function(a){f.events(this._event.adtViewabilityThreshold,a)},d.prototype.adtSignalVPAID=function(a){if(f.debug("vjs - adtSignalVPAID "+a.eventName),f.events(this._event.adtSignalVPAID,a),a&&a.eventName){var b=a.eventName,c=e.VPAID.event;if(b===c.AdImpression){this._runtime.adImpressionReceived=!0;try{this._runtime.monitor&&this._runtime.monitor.onAdImpressionReceived()}catch(d){}}else b===c.AdVideoStart?this._currentQuartile=0:b===c.AdVideoFirstQuartile?this._currentQuartile=25:b===c.AdVideoMidpoint?this._currentQuartile=50:b===c.AdVideoThirdQuartile?this._currentQuartile=75:b===c.AdVideoComplete&&(this._currentQuartile=100)}f.debug("Events Current Quartile: "+this._currentQuartile),this.adtRequestViewabilityData()},d.prototype.adtRequestViewabilityData=function(){f.events(this._event.adtRequestViewabilityData),this.adtQueryViewabilityData()},d.prototype.adtQueryViewabilityData=function(){var a=null;if(this._runtime.monitor)try{var b=this._runtime.monitor._viewability.getState(),c=!1;b.viewablePercentage>0&&(c=!0);var d=b.method,g=this._runtime.monitor._totalViewableTime,h=this._currentQuartile;a={viewable:c,viewablePercentage:b.viewablePercentage,iid:this._runtime.__iid,status:"",vmi:d,tcvt:g,ufo:"2",qrt:h,als:e.LOCATION,avn:e.VERSION}}catch(i){return}f.events(this._event.adtQueryViewabilityData,a),this._dispatch.publish(this._event.adtViewabilityData,a)},d.prototype.adtAddUEBUToArray=function(a){if(f.debug("vjs - adtAddUEBUToArray"),f.events(this._event.adtAddUEBUToArray,a),"string"==typeof a)g.addURL(a);else for(var b=Object.keys(a),c=0;c<b.length;c++)g.addURL(a[c])},d.prototype.adtAdError=function(a){f.debug("vjs - adtAdError "+a),f.events(this._event.adtAdError,a)},b.exports=d},{"./../constants.js":3,"./../support/log.js":11,"./../tracking/uebu.js":14}],6:[function(a,b,c){function d(a,b){this.element=a,this.index=b,this.active=!1,this.inview=!1,this.dnt=!1}function e(a,b){this._runtime=b,this._element=a,this._document=this._runtime.document,this._window=this._runtime.window,this._dispatch=new i}var f=a("./../constants.js"),g=a("./environment.js"),h=a("./../support/log.js"),i=a("./../notification/notification.js");e.prototype.init=function(){this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoFlashInstantiated):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayFlashInstantiated),this.markerSize=f.swf.settings.PROD.markerSize,this.markerMode=f.swf.settings.PROD.markerMode,this.markerColor=f.swf.settings.PROD.markerColor;try{var a=this._element.getBoundingClientRect();this.adWidth=a.width,this.adHeight=a.height}catch(b){h.debug("vjs - Markers.init error = "+b),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersInit)}this._communication_init=!1,this._markers=[],this.__initViewabilityPixels(this._element),this._window.adt_swf_communication_init=this.__swf_communication_init,this._window.adt_swf_communication_update=this.__swf_communication_update,this._window.adt_swf_external_interface_check=this.__swf_external_interface_check,this._window.adt_swf_send_error_pixel=this.__swf_send_error_pixel},e.prototype.addEventListener=function(a,b){this._dispatch.subscribe(a,b)},e.prototype.removeEventListener=function(a,b){this._dispatch.unsubscribe(a,b)},e.prototype.dnt=function(){if(this._markers)for(var a=this._markers.length,b=a;b>=1;b--)try{var c=this._markers[b-1];if(c&&c.dnt)return!0}catch(d){}return!1},e.prototype.getInView=function(a){var b=!1;if(this._markers){for(var c=0,d=0,e=this._markers.length,g=e;g>=1;g--)try{var i=this._markers[g-1];i&&i.active&&(c+=1,i.inview&&(d+=1))}catch(j){h.debug("vjs - Markers.inview error = "+j),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersInview)}c&&d&&(b=a>=Math.floor(d/c*100))}return b},e.prototype.getPercentInView=function(a){var b=0;if(this._markers){for(var c=0,d=0,e=this._markers.length,g=e;g>=1;g--)try{var i=this._markers[g-1];i&&i.active&&(c+=1,i.inview&&(d+=1))}catch(j){h.debug("vjs - Markers.inview error = "+j),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersInview)}c&&d&&(b=Math.floor(d/c*100))}return b},e.prototype.fireViewable=function(){this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoFlashViewable):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayFlashViewable)},e.prototype.start=function(){},e.prototype.onAdImpressionReceived=function(){this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoFlashTrackingStart):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayFlashTrackingStart)},e.prototype.stop=function(){if(this._markers){for(var a=this._markers.length,b=!1,c=a;c>=1;c--)try{var d=this._markers[c-1].element,e=this._document.getElementById("adt_marker__swf_"+this._runtime.iid+"_"+c);d&&e&&(e.adt_vip_cleanup&&e.adt_vip_cleanup(),d.parentNode.removeChild(d),b=!0)}catch(g){h.debug("vjs - Markers.stop error = "+g),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersStop)}b&&(this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoSWFRemoved):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplaySWFRemoved))}this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoFlashTrackingStop):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayFlashTrackingStop)},e.prototype.__initViewabilityPixels=function(a){try{this._runtime.isProduction?(h.debug("vjs - __initViewabilityPixels PROD"),this.markerSize=f.swf.settings.PROD.markerSize,this.markerMode=f.swf.settings.PROD.markerMode,this.markerColor=f.swf.settings.PROD.markerColor):(h.debug("vjs - __initViewabilityPixels DEV"),this.markerSize=f.swf.settings.DEV.markerSize,this.markerMode=f.swf.settings.DEV.markerMode,this.markerColor=f.swf.settings.DEV.markerColor);var b,c=this.__determineInsertTarget(a),e=this.__insertMarkerContainer(c,a);this._runtime.isDisplay&&(b=f.swf.count.DISPLAY),this._runtime.isVideo&&(b=f.swf.count.VIDEO);for(var g=1;b>=g;g++){var i=this.__createMarker(g,this.markerMode,this.markerSize,this.markerColor);this._markers[g-1]=new d(i,g),e.appendChild(i)}this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoSWFMarkerCreated):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplaySWFMarkerCreated)}catch(j){h.debug("vjs __initViewabilityPixels error - ",j.description),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersInitViewabilityPixels)}},e.prototype.__calculatePagePosition=function(a){var b=-1,c=-1;try{if(a){var d=a.getBoundingClientRect();if(d){var e=this._document.body,f=this._document.documentElement,g=this._window.pageYOffset||f.scrollTop||e.scrollTop,h=this._window.pageXOffset||f.scrollLeft||e.scrollLeft,i=f.clientTop||e.clientTop||0,j=f.clientLeft||e.clientLeft||0,c=d.top+g-i,b=d.left+h-j;c=Math.round(c),b=Math.round(b),c>5e4&&(c=-1),b>5e4&&(b=-1)}}}catch(k){b=-1,c=-1}return[b,c]},e.prototype.__determineInsertTarget=function(a){return this._element.parentNode},e.prototype.__createMarkerContainer=function(a,b){var c=this._document.createElement("div");return c.id="adt_vip_marker_"+this._runtime.iid,c.className="adt_marker_container",c.style.setProperty("zIndex","2147483647","important"),c.style.setProperty("z-index","2147483647","important"),c.style.setProperty("backgroundColor","transparent","important"),c.style.setProperty("width","0px","important"),c.style.setProperty("height","0px","important"),c.style.setProperty("margin","0px","important"),c.style.setProperty("padding","0px","important"),c.style.setProperty("lineHeight","0px","important"),
c.style.setProperty("verticalAlign","top","important"),c.style.setProperty("border","0","important"),c.style.setProperty("fontSize","0px","important"),c.style.setProperty("position","relative","important"),c.style.setProperty("left","0px","important"),c.style.setProperty("top","0px","important"),c},e.prototype.__insertMarkerContainer=function(a,b){var c=this.__createMarkerContainer();if(a.childNodes.length<=1)a.appendChild(c);else for(var d=0;d<a.childNodes.length;d++)a.childNodes[d]===b&&(d==a.childNodes.length-1?a.appendChild(c):a.insertBefore(c,a.childNodes[d+1]));var e=this.__calculatePagePosition(b),g=this.__calculatePagePosition(c),h=e[1]+b.offsetHeight-g[1];0!==h&&c.style.setProperty("top",h+"px","important");var i=e[0]-g[0];return 0!==i&&c.style.setProperty("left",i+"px","important"),this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoSWFContainerCreated):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplaySWFContainerCreated),c},e.prototype.__createMarker=function(a,b,c,d){var e=this._document.createElement("div");try{e.id="adt_marker_"+this._runtime.iid+"_"+a,e.style.setProperty("position","absolute","important"),e.style.setProperty("zIndex","2147483647","important"),e.style.setProperty("z-index","2147483647","important"),e.style.setProperty("backgroundColor","transparent","important"),e.style.setProperty("width",c+"0px","important"),e.style.setProperty("height",c+"0px","important"),e.style.setProperty("margin","0px","important"),e.style.setProperty("padding","0px","important"),e.style.setProperty("lineHeight","0px","important"),e.style.setProperty("verticalAlign","top","important"),e.style.setProperty("border","0","important"),e.style.setProperty("fontSize","0px","important"),e.style.setProperty("display","block","important"),e.style.setProperty("pointerEvents","none","important");var i=Math.floor(this.adWidth/2),j=Math.floor(this.adHeight/2),k=Math.floor(c/2),l=2;this._runtime.inIframe&&(l=4);var m=1;m>1&&(l+=(m-1)%3*c),this._runtime.isVideo?a==f.swf.positions.VIDEO.top?(e.style.setProperty("top","-"+(this.adHeight-l)+"px","important"),e.style.setProperty("left",i-k+"px","important")):a==f.swf.positions.VIDEO.left?(e.style.setProperty("top","-"+(j+k)+"px","important"),e.style.setProperty("left",l+"px","important")):a==f.swf.positions.VIDEO.right?(e.style.setProperty("top","-"+(j+k)+"px","important"),e.style.setProperty("left",this.adWidth-c-l+"px","important")):a==f.swf.positions.VIDEO.bottom&&(e.style.setProperty("top","-"+(c+l)+"px","important"),e.style.setProperty("left",i-k+"px","important")):this._runtime.isDisplay&&(this.adWidth>this.adHeight?a==f.swf.positions.DISPLAY.sideA?(e.style.setProperty("top","-"+(j+k)+"px","important"),e.style.setProperty("left",l+"px","important")):a==f.swf.positions.DISPLAY.sideB&&(e.style.setProperty("top","-"+(j+k)+"px","important"),e.style.setProperty("left",this.adWidth-c-l+"px","important")):a==f.swf.positions.DISPLAY.sideA?(e.style.setProperty("top","-"+(this.adHeight-l)+"px","important"),e.style.setProperty("left",i-k+"px","important")):a==f.swf.positions.DISPLAY.sideB&&(e.style.setProperty("top","-"+(c+l)+"px","important"),e.style.setProperty("left",i-k+"px","important")));var n,o="adt_marker__swf_"+this._runtime.iid+"_"+a;n=this._runtime.isProduction?f.swf.settings.PROD.markerSrc:f.swf.settings.DEV.markerSrc;var p={};p.style="position:absolute !important; top:0px !important; left:0px !important; display:block !important; line-height:0px !important; margin:0 !important; padding:0 !important; width:"+c+"px !important; height:"+c+"px !important; pointer-events:none !important",p.id=o,p["class"]="adt_marker_swf",p.name=o,p.width=c,p.height=c,g.isBrowserInternetExplorer()&&!g.isBrowserMicrosoftEdge()?(p.classid=f.flash.classID,g.is_IE_11()&&(p.type=f.flash.mimeType,p.data=n)):g.isBrowserMicrosoftEdge()?(p.type=f.flash.mimeType,p.data=n):(p.type=f.flash.mimeType,p.data=n);var q=[];for(var r in p)p.hasOwnProperty(r)&&q.push([r+'="'+p[r]+'"']);var s=q.join(""),t={};t.markerIndex=a,t.iid=this._runtime.iid,t.adwidth=this.adWidth,t.adheight=this.adHeight;var u=[];for(var v in t)t.hasOwnProperty(v)&&u.push([v+"="+t[v]]);var w=u.join("&"),x={};x.movie=n,x.quality="low",x.bgcolor=d,x.play="true",x.loop="true",x.wmode=b,x.allowscriptaccess="always",x.hasPriority="true",x.flashVars=w;var y=[];for(var z in x)x.hasOwnProperty(z)&&y.push(['<param name="'+z+'" value="'+x[z]+'"/>']);var A=y.join(""),B="<object "+s+">"+A+"</object>";e.innerHTML=B,this.markerSize=c,this.markerMode=b,this.markerColor=d}catch(C){h.debug("vjs __createMarker error - ",C.description),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersCreateMarker)}return e},e.prototype.__swf_communication_init=function(a,b){h.debug("vjs - __swf_communication_init "+b);var c,d=adtricity.runtime.monitor._viewability._markers;try{if(c=d._markers[b-1]){c.active=!0;try{var e=d._document.getElementById("adt_marker__swf_"+a+"_"+c.index);e.style.setProperty("width","0px","important"),c.dnt=!0}catch(g){h.debug("vjs - __swf_communication_init error (DNT 0) "+g),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersDNT0)}setTimeout(function(){try{var b=d._document.getElementById("adt_marker__swf_"+a+"_"+c.index);b.style.setProperty("width",d.markerSize+"px","important"),c.dnt=!1}catch(e){h.debug("vjs - __swf_communication_init error (DNT 1) "+e),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersDNT1)}},30)}}catch(g){h.debug("vjs - __swf_communication_init error "+g),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersSWFCommunicationInit)}d._communication_init||(d._communication_init=!0,d._runtime.isVideo?d._dispatch&&d._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoSWFCommunicationInit):d._runtime.isDisplay&&d._dispatch&&d._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplaySWFCommunicationInit))},e.prototype.__swf_communication_update=function(a,b,c){h.debug("vjs - __swf_communication_update - "+b+" "+c);var d,e=adtricity.runtime.monitor._viewability._markers;try{d=e._markers[b-1],d&&d.active&&(d.inview=c)}catch(g){h.debug("vjs - __swf_communication_update error "+g),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersSWFCommunicationUpdate)}},e.prototype.__swf_external_interface_check=function(a){return a},e.prototype.__swf_send_error_pixel=function(a,b,c){},b.exports=e},{"./../constants.js":3,"./../notification/notification.js":9,"./../support/log.js":11,"./environment.js":4}],7:[function(a,b,c){function d(a,b){this.runtime=b,this.element=a,this._updateInterval=this.runtime.constants.updateInterval,this._viewableDuration=this.runtime.constants.viewableDuration,this._dispatch=new f,this._viewable=!1,this._viewableQuartiles=null,this._publishedQuartiles={0:!1,25:!1,50:!1,75:!1,100:!1},this._currentQuartile=-1}var e=a("./viewability"),f=a("./../notification/notification.js"),g=a("./../constants.js"),h=a("./../support/log.js");d.prototype.init=function(){this._viewability=new e(this.element,this.runtime),this._viewability.addEventListener(g.notificationEvents.visibilityChange,this.__intervalCallback.bind(this)),this._viewability.addEventListener(g.notificationEvents.nonviewabletimeUpdate,function(a){this._dispatch&&this._dispatch.publish(g.notificationEvents.nonviewabletimeUpdate,a)}.bind(this)),this._viewability.addEventListener(g.notificationEvents.nonviewabletimeTotal,function(a){this._dispatch&&this._dispatch.publish(g.notificationEvents.nonviewabletimeTotal,a)}.bind(this)),this._viewability.addEventListener(g.notificationEvents.notifyAdtHalfInView,function(a){this._dispatch&&this._dispatch.publish(g.notificationEvents.notifyAdtHalfInView,a)}.bind(this)),this._viewability.addEventListener(g.notificationEvents.adtricityInfoPixel,function(a){this._dispatch&&this._dispatch.publish(g.notificationEvents.adtricityInfoPixel,a)}.bind(this)),this._viewability.addEventListener(g.notificationEvents.adtricityErrorPixel,function(a){this._dispatch&&this._dispatch.publish(g.notificationEvents.adtricityErrorPixel,a)}.bind(this)),this._viewability.addEventListener(g.notificationEvents.inviewport,function(){this._dispatch&&this._dispatch.publish(g.notificationEvents.inviewport)}.bind(this)),this._viewability.init(),this._previousViewabilityPercentage=-1,this._snapshotState=null,this._stopped=!1,this._totalViewableTime=0,this._publishedQuartiles={0:!1,25:!1,50:!1,75:!1,100:!1},this._viewableQuartiles={0:0,25:0,50:0,75:0,100:0},this.start()},d.prototype.onAdImpressionReceived=function(){var a=this.getSnapshotState();a!==g.snapshot.states.error&&this._dispatch&&this._dispatch.publishOnce(g.notificationEvents.measurable),this._viewability.onAdImpressionReceived()},d.prototype.start=function(){h.debug("vjs - monitor.start"),this._viewability.start(),h.debug("Starting monitor"),this._intervalId||(this._intervalId=setInterval(this.__intervalCallback.bind(this),this._updateInterval),this._timeViewable=0)},d.prototype.stop=function(){this._stopped=!0,this._viewability.stop(),this._intervalId&&(clearInterval(this._intervalId),this._timeViewable=0,this._intervalId=null)},d.prototype.addEventListener=function(a,b){this._dispatch.subscribe(a,b)},d.prototype.removeEventListener=function(a,b){this._dispatch.unsubscribe(a,b)},d.prototype.getSnapshotState=function(){if(this._snapshotState)return this._snapshotState;var a=this._viewability.getState(0);h.debug("SNAPSHOT STATE",a);var b=a.viewablePercentage;return b>=g.snapshot.threshold?this._snapshotState=g.snapshot.states.viewable:b<g.snapshot.threshold&&b>=0?this._snapshotState=g.snapshot.states.nonviewable:this._snapshotState=g.snapshot.states.error,this._snapshotState},d.prototype.__intervalCallback=function(){if(!this._stopped){var a=this._viewability.getState(this._updateInterval);if(a&&this.runtime.adImpressionReceived){if(this._previousViewabilityPercentage!==a.viewablePercentage&&(this._previousViewabilityPercentage=a.viewablePercentage,this._dispatch&&this._dispatch.publish(g.notificationEvents.viewablePercentageChange,a.viewablePercentage)),a.viewablePercentage>=this.runtime.constants.viewableAreaThreshold?(this._timeViewable+=this._updateInterval,this._totalViewableTime+=this._updateInterval,this._timeViewable>=this._viewableDuration&&(this._dispatch&&this._dispatch.publishOnce(g.notificationEvents.viewableThreshold,this._timeViewable,this._totalViewableTime),this._viewable||(this._viewable=!0,this._viewability.fireViewable())),this._viewableQuartiles&&this._currentQuartile>=0&&(this._viewableQuartiles[this._currentQuartile]=this._viewableQuartiles[this._currentQuartile]+this._updateInterval)):(this._timeViewable=0,this._viewableQuartiles&&this._viewableQuartiles[this._currentQuartile]<this._viewableDuration&&(this._viewableQuartiles[this._currentQuartile]=0)),this._currentQuartile!==this.runtime.events._currentQuartile){if(0==this._publishedQuartiles[this.runtime.events._currentQuartile]){var b=this._viewableQuartiles[this._currentQuartile],c=!1,d=this.runtime.events._currentQuartile,e=this._totalViewableTime;if(0==d){var f=this.getSnapshotState();f==g.snapshot.states.viewable&&(c=!0)}else b>=this._viewableDuration&&(c=!0);this._dispatch&&this._dispatch.publish(g.notificationEvents.quartilePublished,d,c,b,e),this._publishedQuartiles[this.runtime.events._currentQuartile]=!0}this._currentQuartile=this.runtime.events._currentQuartile}100==this._currentQuartile&&(this._publishedQuartiles[this._currentQuartile]=!0,this.stop(),this._currentQuartile=-1)}}},b.exports=d},{"./../constants.js":3,"./../notification/notification.js":9,"./../support/log.js":11,"./viewability":8}],8:[function(a,b,c){function d(a){this.runtime=a,this._dispatch=new f,this._document=this.runtime.document||document,this._window=this.runtime.window||window,this.__inspectorOpen=!1,this.__monitorInspector();var b,c;if("undefined"!=typeof document.hidden?(b="hidden",c="visibilitychange"):"undefined"!=typeof document.mozHidden?(b="mozHidden",c="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(b="msHidden",c="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(b="webkitHidden",c="webkitvisibilitychange"),this._hidden=b,this._initialPageVisbility=!document[this._hidden],this._initialPageVisbilityState=document.visibilityState,h.debug("Initial Page Visbility:",!document[this._hidden]),"undefined"==typeof this._document.addEventListener||"undefined"==typeof this._document[b])h.error("This code requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API.");else{var d=this.__visibilityChanged.bind(this);this._document.addEventListener(c,this.__tabChange.bind(this),!1),this._window.addEventListener("blur",d,!1),this._window.addEventListener("focus",d,!1)}var e;e=0==this._initialPageVisbility?!1:this.runtime.isMraid||this._document.hasFocus()||this.runtime.inIframe||this.__inspectorOpen||this._initialPageVisbility,h.debug("Initial visibility:",e),h.debug("Initial focus:",this._document.hasFocus()),this.visible=e}function e(a,b){this.runtime=b,this.element=a,this._document=this.runtime.document,this._window=this.runtime.window,this._dispatch=new f,this._visibility=new d(this.runtime),this._in_viewport_pixel_sent=!1,this._adtHalfInView_sent=!1,this._nonviewable=!0,this._nonviewabletime=0,this._nonviewabletime_started=!1,this._nonviewabletime_complete=!1,this._nonviewabletime_total=0,this._nonviewabletime_callback=null,this._nonviewabletime_callbacktime_prev=0,this._nonviewabletime_callbacktime_current=1,this._nonviewabletime_callbacktime_next=1,this._nonviewabletime_callbacktime=1}var f=a("./../notification/notification.js"),g=a("./markers.js"),h=a("./../support/log.js"),i=a("./environment.js"),j=a("./../constants.js");d.prototype.__monitorInspector=function(a){var b={open:!1,orientation:null},c=160,d=this,e=function(a,b){if(d.__inspectorOpen=a,document.createEvent){var c=document.createEvent("CustomEvent");c.initCustomEvent("devtoolschange",!1,!1,{open:a,orientation:b}),window.dispatchEvent(c)}else window.dispatchEvent(new CustomEvent("devtoolschange",{detail:{open:a,orientation:b}}))},f=function(){var a=window.outerWidth-window.innerWidth>c,d=window.outerHeight-window.innerHeight>c,f=a?"vertical":"horizontal";window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized||a||d?(b.open&&b.orientation===f||e(!0,f),b.open=!0,b.orientation=f):(b.open&&e(!1,null),b.open=!1,b.orientation=null)};f(),setInterval(f,500)},d.prototype.detectActiveTab=function(){var a=0;try{"undefined"==typeof document.addEventListener&&"undefined"==typeof document.attachEvent||"undefined"==typeof hidden_attr||(a=document[hidden_attr]?2:1)}catch(b){a=0}return a},d.prototype.isVisible=function(){return this.visible},d.prototype.addEventListener=function(a,b){this._dispatch.subscribe(a,b)},d.prototype.removeEventListener=function(a,b){this._dispatch.unsubscribe(a,b)},d.prototype.__tabChange=function(a){this.visible=!this._document[this._hidden],this._dispatch&&this._dispatch.publish("visibilityChange",this.visible),h.debug("Visibility changed:",this.visible,a.type)},d.prototype.__visibilityChanged=function(a){if(window.self===window.top){var b="blur"===a.type?!1:!this._document[this._hidden];this.visible=b,this._dispatch&&this._dispatch.publish("visibilityChange",b),h.debug("Visibility changed:",b,a.type)}};var k={MOBILE_VIEWABILITY_SDK:4,MRAID:3,GEOMETRIC:2,BROWSER_OPTIMIZATION:1};e.prototype.init=function(){if(this.method=this.setDeterminationMethod(),this.method==k.BROWSER_OPTIMIZATION)try{this._markers=new g(this.element,this.runtime),this._markers.addEventListener(j.notificationEvents.adtricityInfoPixel,function(a){this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityInfoPixel,a)}.bind(this)),this._markers.addEventListener(j.notificationEvents.adtricityErrorPixel,function(a){this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityErrorPixel,a)}.bind(this)),this._markers.init()}catch(a){h.debug("vjs - error = "+a.description),this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityErrorPixel,j.pixelCodes.error.ViewabilityInit),this.method=k.GEOMETRIC,h.debug("vjs - fallback to GEOMETRIC")}this.method==k.GEOMETRIC&&(this.runtime.isVideo?this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityInfoPixel,j.pixelCodes.info.VideoGeometricInstantiated):this.runtime.isDisplay&&this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityInfoPixel,j.pixelCodes.info.DisplayGeometricInstantiated)),this.isFullscreen=!1,this.__watchFullscreen(this.element),this._visibility.addEventListener("visibilityChange",function(a){this._dispatch&&this._dispatch&&this._dispatch.publish(j.notificationEvents.visibilityChange,a)}.bind(this))},e.METHODS=k,e.prototype.getDeterminationMethod=function(){return this.method},e.prototype.setDeterminationMethod=function(){var a=k.GEOMETRIC;return this.runtime.inIframe&&i.isFlashInstalled()&&i.isFlashSupported()&&(a=k.BROWSER_OPTIMIZATION),h.debug("Viewability Determination Method : ",a),a},e.prototype.getState=function(a){var b=this.__getPercentInView(),c=this.getDeterminationMethod();if(b>0){if(this.method==k.BROWSER_OPTIMIZATION&&this._markers.dnt())return;!this._adtHalfInView_sent&&b>=50&&(this._adtHalfInView_sent=!0,this._dispatch&&this._dispatch.publish(j.notificationEvents.notifyAdtHalfInView,this._nonviewabletime)),this._in_viewport_pixel_sent||(this._dispatch&&this._dispatch.publish(j.notificationEvents.inviewport),this._in_viewport_pixel_sent=!0),"undefined"!=typeof a&&a>0&&this._nonviewabletime_started&&!this._nonviewabletime_complete&&(this._nonviewabletime_complete=!0,this._dispatch&&this._dispatch.publish(j.notificationEvents.nonviewabletimeTotal,this._nonviewabletime)),this._nonviewable=!1}else"undefined"!=typeof a&&a>0&&this._nonviewabletime_started&&!this._nonviewabletime_complete&&(this._nonviewabletime+=a),this._nonviewable=!0;return{viewablePercentage:b,method:c}},e.prototype.fireViewable=function(){this.method==k.BROWSER_OPTIMIZATION&&this._markers&&this._markers.fireViewable(),this.method==k.GEOMETRIC&&(this.runtime.isVideo?this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityInfoPixel,j.pixelCodes.info.VideoGeometricViewable):this.runtime.isDisplay&&this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityInfoPixel,j.pixelCodes.info.DisplayGeometricViewable))},e.prototype.start=function(){this.method==k.BROWSER_OPTIMIZATION&&this._markers&&this._markers.start(),this.start_nonviewabletime_count()},e.prototype.onAdImpressionReceived=function(){this.method==k.GEOMETRIC&&(this.runtime.isVideo?this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityInfoPixel,j.pixelCodes.info.VideoGeometricTrackingStart):this.runtime.isDisplay&&this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityInfoPixel,j.pixelCodes.info.DisplayGeometricTrackingStart)),this.method==k.BROWSER_OPTIMIZATION&&this._markers&&this._markers.onAdImpressionReceived()},e.prototype.stop=function(){this.method==k.BROWSER_OPTIMIZATION&&this._markers&&this._markers.stop(),this.method==k.GEOMETRIC&&(this.runtime.isVideo?this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityInfoPixel,j.pixelCodes.info.VideoGeometricTrackingStop):this.runtime.isDisplay&&this._dispatch&&this._dispatch.publish(j.notificationEvents.adtricityInfoPixel,j.pixelCodes.info.DisplayGeometricTrackingStop))},e.prototype.start_nonviewabletime_count=function(){h.debug("vjs - start_nonviewabletime_count"),this._nonviewabletime_started||(this._nonviewabletime_started=!0,this._nonviewabletime_complete=!1,this._nonviewabletime_total=0,this._nonviewabletime_callbacktime_prev=0,this._nonviewabletime_callbacktime_current=1,this._nonviewabletime_callbacktime_next=1,this.update_nonviewabletime_callback(!1))},e.prototype.update_nonviewabletime_callback=function(a){h.debug("vjs - update_nonviewabletime_callback "+a+" "+this._nonviewabletime);var b=this.runtime.monitor._viewability;this._nonviewable?(a&&this._dispatch&&this._dispatch.publish(j.notificationEvents.nonviewabletimeUpdate,this._nonviewabletime),this._nonviewabletime_callbacktime_prev=this._nonviewabletime_callbacktime_current,this._nonviewabletime_callbacktime_current=this._nonviewabletime_callbacktime_next,this._nonviewabletime_callbacktime_next=this._nonviewabletime_callbacktime_prev+this._nonviewabletime_callbacktime_current,this._nonviewabletime_callbacktime=this._nonviewabletime_callbacktime_next-this._nonviewabletime_callbacktime_current,this._nonviewabletime_callback=setTimeout(function(){b.update_nonviewabletime_callback(!0)},1e3*this._nonviewabletime_callbacktime)):this._nonviewabletime_callback&&clearTimeout(this._nonviewabletime_callback)},e.prototype.addEventListener=function(a,b){this._dispatch.subscribe(a,b)},e.prototype.removeEventListener=function(a,b){this._dispatch.unsubscribe(a,b)},e.prototype.__watchFullscreen=function(a){var b=function(){this.isFullscreen=!0,this._dispatch&&this._dispatch.publish("fullscreenChange",!0)},c=function(){this.isFullscreen=!1,this._dispatch&&this._dispatch.publish("fullscreenChange",!1)};"VIDEO"===a.tagName&&(a.addEventListener("webkitbeginfullscreen",b.bind(this),!1),a.addEventListener("webkitendfullscreen",c.bind(this),!1))},e.prototype.__getPercentInView=function(){function a(a,b,c){var d=0,e=0;return b.x>a.x&&(d=b.x-a.x),b.width<a.width&&(d=a.width-b.width),b.y>a.y&&(e=1===c?a.height-(b.y-a.y):b.y-a.y),a.width=a.width-d,a.height=a.height-e,a}var b=!0,c=100;if(this.method==k.BROWSER_OPTIMIZATION&&!this._markers.dnt())if(this.runtime.isVideo)try{b=this._markers.getInView(j.video.viewableAreaThreshold),c=this._markers.getPercentInView()}catch(d){h.debug("vjs - markers.video.__getPercentInView error")}else if(this.runtime.isDisplay)try{b=this._markers.getInView(j.display.viewableAreaThreshold),c=this._markers.getPercentInView()}catch(d){h.debug("vjs - markers.display.__getPercentInView error")}if(this.runtime.mraid){var e=function(){return 1114181},f=function(){return 56769},g=function(){return 7}(),i=function(){return 14}(),l=function(a){var b=(a^a>>i)&f(),c=a^b^b<<i,d=(c^c>>g)&e(),h=c^d^d<<g;return h};try{var m,n,o=0,p=window.viant.viewability;for(var q in p){m=q,n=p[q];break}n=l(n);var o=parseFloat(Math.round(100*n)/100).toFixed(0);return this.method=k.MOBILE_VIEWABILITY_SDK,o}catch(d){return this.runtime.mraid&&this.runtime.mraid.isViewable&&(isViewable=this.runtime.mraid.isViewable()),this.method=k.MRAID,isViewable?100:0}}if(this.isFullscreen)return 100;if(!this._visibility.isVisible())return 0;var r,s={left:0,top:0,width:0,height:0},t={},u={},v={},w=this._window;t.left=0,t.top=0,t.width=w.outerWidth?w.screen.width:w.innerWidth,t.height=w.outerHeight?w.screen.height:w.innerHeight,w.screen.availHeight===-w.screen.availTop?(t.top=-t.height,t.left=w.screen.availLeft):w.screen.availWidth===-w.screen.availLeft?(t.left=-t.width,t.top=w.screen.availTop):w.screen.availLeft&&w.screen.availTop&&(t.left=w.screen.availLeft,t.top=w.screen.availTop),u.left=null!==w.screenX?w.screenX:w.screenLeft,u.left+=w.pageXOffset,u.top=null!==w.screenY?w.screenY:w.screenTop,u.top+=w.pageYOffset,u.width=w.innerWidth,u.height=w.innerHeight,t.width<u.width&&(t.width=u.width),t.height<u.height&&(t.height=u.height);try{s=this.element.getBoundingClientRect()}catch(d){return-1}var v={x:s.left+w.pageXOffset,y:s.top+w.pageYOffset,width:s.width,height:s.height,SA:s.width*s.height},x={x:w.pageXOffset,y:w.innerHeight+w.pageYOffset,width:w.innerWidth,height:w.innerHeight,SB:w.innerWidth*w.innerHeight},y=w.pageYOffset+w.innerHeight-v.y,z=v.y+v.height;if(y>0&&z>w.pageYOffset){var A;w.pageYOffset<x.height||w.pageYOffset>v.y&&v.y+v.height?(A=0,v.y+=x.height):A=1;var B=a(v,x,A);r=Math.round(B.width*B.height/B.SA*100),r>=100&&(r=100)}else h.debug("NOT IN VIEW");return(isNaN(r)||0===r)&&(r=0),r=Math.min(r,c)},b.exports=e},{"./../constants.js":3,"./../notification/notification.js":9,"./../support/log.js":11,"./environment.js":4,"./markers.js":6}],9:[function(a,b,c){function d(){this._events={},this._publishOnce={}}d.prototype.publishOnce=function(a,b,c,d){if(!this._events[a])return!1;if(this._publishOnce[a])return!1;for(var e,f,g=this._events[a],h=0;h<g.length;h++)e=g[h].callback,f=g[h].context,iterArguments=g[h].arguments,e.apply(f,iterArguments.concat(Array.prototype.slice.call(arguments,1)));this._publishOnce[a]=!0},d.prototype.publish=function(a,b,c,d){if(!this._events[a])return!1;for(var e,f,g=this._events[a],h=0;h<g.length;h++)e=g[h].callback,f=g[h].context,iterArguments=g[h].arguments,e.apply(f,iterArguments.concat(Array.prototype.slice.call(arguments,1)))},d.prototype.subscribe=function(a,b,c,d,e,f){c=c||null,this._events[a]=this._events[a]||[],this._events[a].push({callback:b,context:c,arguments:Array.prototype.slice.call(arguments,3)||[]})},d.prototype.unsubscribe=function(a,b){var c,d=this._events[a];if(!d)return!1;for(var e=0;e<d.length;e++)d[e].callback===b&&(c=d.splice(e,1))},d.instance=null,d.singleton=function(){return null===this.instance&&(this.instance=new d),this.instance},b.exports=d},{}],10:[function(a,b,c){function d(a,b){this._visible=!1,this._logger=null,this._upperLeftCorner=null,this._upperRightCorner=null,this._lowerLeftCorner=null,this._lowerRightCorner=null,this._wrapperElement=a,this.history={},this._wrapperElement||e.error("No valid element found for Debug UI to attach to")}var e=a("./log.js");Date.now||(Date.now=function(){return(new Date).getTime()});var f=a("./../constants.js");d.prototype.remove=function(){this._wrapperElement.removeChild(this._upperLeftCorner),this._wrapperElement.removeChild(this._upperRightCorner),this._wrapperElement.removeChild(this._lowerLeftCorner),this._wrapperElement.removeChild(this._lowerRightCorner),this._visible=!1},d.prototype.update=function(a){var b=function(a){var b="#D12D30";return a>90&&100>=a?b="#188559":a>50&&90>=a&&(b="#ECE636"),b},c=b(a),d=Date.now();this.history[d]=a;var e=parseFloat(Math.round(100*a)/100).toFixed(1),f="<span style='float:left; font-weight:bold;width:100%; padding-top:15px; font-size:15px; text-align:center;font-family:San Francisco,Helvetica,san-serif;'>"+e+"%</span>";this._upperLeftCorner.style.background=c,this._upperLeftCorner.innerHTML=f,this._upperRightCorner.style.background=c,this._upperRightCorner.innerHTML=f,this._lowerLeftCorner.style.background=c,this._lowerLeftCorner.innerHTML=f,this._lowerRightCorner.style.background=c,this._lowerRightCorner.innerHTML=f},d.prototype.show=function(){if(!this._visible&&this._wrapperElement){this._visible=!0;var a=document.createElement("div");a["class"]="viewabilityDebug",a.style.width="50px",a.style.height="50px",a.style.background="black",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.zIndex=999999999;var b=document.createElement("div");b["class"]="viewabilityDebug",b.style.width="50px",b.style.height="50px",b.style.background="black",b.style.position="absolute",b.style.top="0",b.style.right="0",b.style.zIndex=999999999;var c=document.createElement("div");c["class"]="viewabilityDebug",c.style.width="50px",c.style.height="50px",c.style.background="black",c.style.position="absolute",c.style.bottom="0",c.style.left="0",c.style.zIndex=999999999;var d=document.createElement("div");d["class"]="viewabilityDebug",d.style.width="50px",d.style.height="50px",d.style.background="black",d.style.position="absolute",d.style.bottom="0",d.style.right="0",d.style.zIndex=999999999,this._upperLeftCorner=a,this._upperRightCorner=b,this._lowerLeftCorner=c,this._lowerRightCorner=d,this._wrapperElement.appendChild(a),this._wrapperElement.appendChild(b),this._wrapperElement.appendChild(c),this._wrapperElement.appendChild(d)}},d.prototype.prependToLogger=function(a){this._logger&&(this._logger.innerHTML=a+"<br/>"+this._logger.innerHTML)},d.prototype.appendUEBU=function(a,b,c){if(this._uebuLogger){c||(c=Date.now());var d=e.loggedUEBU(),g=d[d.length-1],h=e.timeZero;g&&(h=g[2]);var i=c-h;this._uebuLogger.innerHTML="<b>"+f.pixels[a]+" | "+a+" - TDiff ("+i/1e3+"s) </b><br/>"+this._uebuLogger.innerHTML}},d.prototype.showUEBULogger=function(a){if(0==a&&this._logger)return this._wrapperElement.ownerDocument.removeChild(this._uebuLogger),void(this._uebuLogger=null);if(!this._uebuLogger&&this._wrapperElement&&a){var b=document.createElement("div");b["class"]="uebuLogger",b.style.width="35%",b.style.height="100%",b.style.background="#ddd",b.style.position="absolute",b.style.top="0",b.style.right="0",b.style.bottom="0",b.style.zIndex=999999999,b.style.overflowY="scroll",b.style.color="#000",this._uebuLogger=b,this._wrapperElement.ownerDocument.body.appendChild(b);var c=e.loggedUEBU();for(var d in c){var f=c[d];this.appendUEBU(f[0],f[1],f[2])}}},d.prototype.showLogger=function(a){if(0==a&&this._logger)return this._wrapperElement.ownerDocument.removeChild(this._logger),void(this._logger=null);if(!this._logger&&this._wrapperElement&&a){var b=document.createElement("div");b["class"]="viewabilityDebug",b.style.width="35%",b.style.height="100%",b.style.background="black",b.style.position="absolute",b.style.top="0",b.style.right="0",b.style.bottom="0",b.style.zIndex=999999999,b.style.overflowY="scroll",b.style.color="#fff",this._logger=b,this._wrapperElement.ownerDocument.body.appendChild(b)}},b.exports=d},{"./../constants.js":3,"./log.js":11}],11:[function(a,b,c){function d(a,b){var c=[];void 0===b&&(b=!1);for(var d in a){var e=a[d];"object"==typeof e?e instanceof HTMLElement&&!b?c.push(e):e instanceof HTMLElement&&b?c.push(e.id):b?c.push(JSON.stringify(e)):c.push(JSON.parse(JSON.stringify(e))):c.push(e)}return c}function e(){this.runtime={debug:!1},this.logs={},this.timeZero=Date.now(),this._loggedUEBU=[]}Date.now||(Date.now=function(){return(new Date).getTime()});var f=a("./../constants.js");e.prototype.loggedUEBU=function(){return this._loggedUEBU},e.prototype.uebu=function(a,b,c){var e=["%c[Adtricity UEBU]","background: #008040; color: #fff;"],b=d(arguments),g=e.concat(b),h="UEBU";if(console.log.apply(console,g),this.dispatch){var i=c;c&&h&&(i=h+" : "+c);var j=Date.now();this.dispatch.publish(f.notificationEvents.logPublished,"network",i),this.dispatch.publish(f.notificationEvents.uebuPublished,a,b,c),this._loggedUEBU.push([a,c,j]),this.logs[j]=["uebu",i]}},e.prototype.events=function(a,b){var c=["%c[Adtricity Events]","background: #008040; color: #fff;"],b=d(arguments),e=c.concat(b);if(console.log.apply(console,e),this.dispatch){var g=a;g&&b&&(g=a+" : "+b),this.dispatch.publish(f.notificationEvents.logPublished,"events",g),this.logs[Date.now()]=["events",g]}},e.prototype.network=function(a,b){var c=["%c[Adtricity Network]","background: #008040; color: #fff;"],e=d(arguments),g=c.concat(e);if(console.log.apply(console,g),this.dispatch){var h=a;a&&b&&(h=b+" : "+a),this.dispatch.publish(f.notificationEvents.logPublished,"network",h),this.dispatch.publish(f.notificationEvents.networkPublished,a),this.logs[Date.now()]=["network",h]}},e.prototype.log=function(a,b){var c=["%c[Adtricity]","background: #008040; color: #fff;"],e=d(arguments),g=c.concat(e);if(console.log.apply(console,g),this.dispatch){var h=d(arguments,!0).join(" ");this.dispatch.publish(f.notificationEvents.logPublished,"log",h),this.logs[Date.now()]=["log",h]}},e.prototype.error=function(a,b){var c=["%c[Adtricity Error]","background: #D12D30; color: #fff;"],e=d(arguments),g=c.concat(e);if(console.error.apply(console,g),this.dispatch){var h=d(arguments,!0).join(" ");this.dispatch.publish(f.notificationEvents.logPublished,"error",h),this.logs[Date.now()]=["error",h]}},e.prototype.debug=function(){if(this.runtime.debug){var a=["%c[Adtricity Debug]","background: #10627F; color: #fff;"],b=d(arguments),c=a.concat(b);
if(console.log.apply(console,c),this.dispatch){var e=d(arguments,!0).join(" ");this.dispatch.publish(f.notificationEvents.logPublished,"debug",e),this.logs[Date.now()]=["debug",e]}}},e.instance=null,e.singleton=function(){return null===this.instance&&(this.instance=new e),this.instance},b.exports=e.singleton()},{"./../constants.js":3}],12:[function(a,b,c){function d(){this.macroStore={}}d.prototype.set=function(a,b){return this.macroStore||(this.macroStore={}),this.macroStore[a]=b,b},d.prototype.append=function(a,b){this.macroStore||(this.macroStore={});this.macroStore[a];return this.macroStore[a]?(this.macroStore[a]+=b,this.macroStore[a]):this.set(a,b)},d.prototype.processString=function(a){var b=a;if("undefined"==typeof b||null===b)return null;var c,d;for(c in this.macroStore)d=this.macroStore[c],"undefined"!=typeof d&&null!==d||(d=""),b=b.replace(c,d);return b},d.prototype.clone=function(){var a=new d;return a.macroStore=this.macroStore,a},b.exports=d},{}],13:[function(a,b,c){function d(){}var e=a("./../constants.js"),f=a("./../monitor/environment.js"),g=a("./../support/log.js"),h=a("./uebu.js");d.setValue=function(a,b,c,d){h.setValue(a,b,c,d)},d.fire=function(a,b,c,d){g.debug("vjs - Pixel.fire "+a),h.fire(a,b,c,d)},d.fireInfoPixel=function(a,b){if(a.useInfoPixels&&!a.infoPixels.indexOf(b)>=0){var c="";try{c=f.getDebugString(a)}catch(d){}var g={code:b,debug:c};h.fire(e.Pixel.INFO,g),a.infoPixels.push(b)}},d.fireErrorPixel=function(a,b){if(!a.errorPixels.indexOf(b)>=0){var c="";try{c=f.getDebugString(a)}catch(d){}var g={code:b,debug:c};h.fire(e.Pixel.ERROR,g),a.errorPixels.push(b)}},b.exports=d},{"./../constants.js":3,"./../monitor/environment.js":4,"./../support/log.js":11,"./uebu.js":14}],14:[function(a,b,c){function d(){f.apply(this);var a={event_id:"$SUGR_CUSTOM_EVENT_ID$",event_arguments:"$SUGR_EVENT_ARGUMENT$",event_parameters:"$SUGR_EVENT_PARAM$",event_object:"$SUGR_EVENT_OBJ$",sugr_json:"$SUGR_JSON_USED$",sugr_location:"$APP_SUGR_LOCATION$",sugr_version:"$APP_SUGR_VERSION$",adtricity_location:"$APP_ADT_LOCATION$",adtricity_version:"$APP_ADT_VERSION$",sugr_query_string:"$SUGR_QUERY_PARAMETERS$",callback_result:"$REASON_FOR_CALLBACK$",ad_width:"$SUGR_AD_WIDTH$",ad_height:"$SUGR_AD_HEIGHT$",domain:"$SUGR_DETERMINED_DOMAIN$",snapshot_viewability:"$SNAP_IN_VIEW$"};this.propertyMacroMap=a,this._injection_pixel_fired=!1;for(var b in a)this.set(a[b],"");this.uebuURLs={},this.datastore={}}function e(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}var f=a("./macros.abstract"),g=a("./../support/log.js"),h=a("./../constants.js");d.prototype=Object.create(f.prototype),d.prototype.setValue=function(a,b,c,d){"undefined"==typeof d&&(d=!0);var e=this.propertyMacroMap[a];if(e){if("undefined"!=typeof b&&null!=b||(b=c?c:""),typeof b==typeof{}){var f=Object.keys(b),g=f.length;b=0===g?"":JSON.stringify(b)}d&&(b=encodeURIComponent(b)),this.set(e,b)}},d.prototype.setQueryStringURL=function(a){this.queryStringURL=a},d.prototype.addURL=function(a){function b(a){var b=a.match(/l\=\w*/)[0],c=a.match(/b\=\w*/)[0],d=a.match(/c\=\w*/)[0];return b+c+d}function c(a){var b=a.match(/xid\=\w*/)[0];return b}if(g.debug("vjs - addURL "+a),a){var d=b(a);c(a);this.uebuURLs[d]||(this.uebuURLs[d]=a),this._injection_pixel_fired&&this.fire_single(a,5351)}},d.prototype.urls=function(){var a=[];for(var b in this.uebuURLs)a.push(this.uebuURLs[b]);return this.queryStringURL&&a.push(this.queryStringURL),a},d.prototype.addParameter=function(a,b){this.datastore[this.propertyMacroMap.event_parameters]+=a+"="+b+";"},d.prototype.addEventArgument=function(a,b){this.datastore[this.propertyMacroMap.event_arguments]||(this.datastore[this.propertyMacroMap.event_arguments]={}),this.datastore[this.propertyMacroMap.event_arguments][a]=b},d.prototype.fire=function(a,b,c,d){function f(a){var b=[];for(var c in a)b.push(c+":"+a[c]);return b.join("|")}5351==a&&(this._injection_pixel_fired=!0);var i=a;if(this.runtime&&this.runtime.debug)try{a=h.pixels[a]+"_"+a}catch(j){}var k=e(this.datastore[this.propertyMacroMap.event_arguments],b),l=[];this.setValue("event_id",a,"-99"),this.setValue("event_arguments",f(k),{},!1),this.setValue("event_parameters",c,{},!1),this.setValue("event_object",d,{});var m=this.urls();for(var n in m){var o=m[n],p=this.processString(o);l.push(p),this.__writeURL(p),g.uebu(i,k,p)}return this.setValue("event_id",null),this.setValue("event_args",null),this.setValue("event_params",null),this.setValue("event_object",null),l},d.prototype.fire_single=function(a,b,c,d,f){function i(a){var b=[];for(var c in a)b.push(c+":"+a[c]);return b.join("|")}5351==b&&(this._injection_pixel_fired=!0);var j=b;if(this.runtime&&this.runtime.debug)try{b=h.pixels[b]+"_"+b}catch(k){}var l=e(this.datastore[this.propertyMacroMap.event_arguments],c),m=[];this.setValue("event_id",b,"-99"),this.setValue("event_arguments",i(l),{},!1),this.setValue("event_parameters",d,{},!1),this.setValue("event_object",f,{});var n=this.processString(a);return m.push(n),this.__writeURL(n),g.uebu(j,l,n),this.setValue("event_id",null),this.setValue("event_args",null),this.setValue("event_params",null),this.setValue("event_object",null),m},d.prototype.__writeURL=function(a,b){if(b||(b=""),document){var c=document.createElement("img");c.className="adtricity",c.src=a,c.width=0,c.height=0,c.style.display="none",document.body.appendChild(c),g.network(a)}else g.error("No document available to write pixels")},d.instance=null,d.singleton=function(){return null===this.instance&&(this.instance=new d),this.instance},b.exports=d.singleton()},{"./../constants.js":3,"./../support/log.js":11,"./macros.abstract":12}]},{},[1]);