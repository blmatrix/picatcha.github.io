var VindicoInterface;!function(){var a=function(){for(var a=document.getElementsByTagName("script"),b=0;b<a.length;++b){var c=a[b];if(c.src&&c.src.indexOf("vindico.appear")>-1)return c.src}}(),b=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+a()+a()},c=function(a){return"string"!=typeof a?{}:(a=a.substring(a.indexOf("?")+1),a=a.trim().replace(/^(\?|#)/,""),a?a.trim().split("&").reduce(function(a,b){var c=b.replace(/\+/g," ").split("="),d=c[0],e=c[1];if(d=decodeURIComponent(d),e=void 0===e?null:decodeURIComponent(e),"string"==typeof e){var f=e.split(",");e=1==f.length?f[0]:f}return a.hasOwnProperty(d)?Array.isArray(a[d])?a[d].push(e):a[d]=[a[d],e]:a[d]=e,a},{}):{})},d=c(a);console.log(d);var e={version:"2.0.7",_target:null,_playerInit:!1,bind:function(a,b){return function(){b.apply(a,arguments)}},isViewableInViewport:function(a){for(var b=a.offsetTop,c=a.offsetHeight;a=a.offsetParent;)b+=a.offsetTop;var d=c/2,e=b+d,f=b<window.pageYOffset+window.innerHeight-d&&e>=window.pageYOffset;return f},checkViewability:function(){console.log("checking viewability",this._targets.length);for(var a=this._targets.length,b=0;a>b;b++){var c=this._targets[b];if(c._previousViewability=c._targetViewable,c._targetViewable=this.isViewableInViewport(c),this._tabHidden&&(c._targetViewable=!1),c._targetViewable)if(console.log(c._adInitted,c._adLoaded,c._startAdCalled),c._adInitted&&c._adLoaded&&!c._startAdCalled&&(c._startAdCalled=!0,c._sugr.playAd()),"undefined"!=typeof c._sugr&&0==c._previousViewability)c._adInitted&&c._adPaused?(c._adPaused=!1,1==d.ap&&c._sugr.resumeAd()):c.startAdCalled||1==d.ap&&c.adLoaded&&(c._startAdCalled=!0,c._sugr.playAd());else{if(console.log("init check"),c._adInitted)return void console.log("already initted an ad");this.initPlayer(c)}else"undefined"!=typeof c._sugr&&c._startAdCalled&&(1!=d.ap||c._adPaused||(c._adPaused=!0,c._sugr.pauseAd()))}},windowVisibilityChanged:function(a){for(var b=this._targets.length,c=0;b>c;c++){var e=this._targets[c];console.log("window visibility changed"),this._previousTabHidden=this._tabHidden,this._tabHidden=document.hidden,this._tabHidden?"undefined"!=typeof e._sugr&&e._startAdCalled&&(1!=d.ap||e._adPaused||(e._adPaused=!0,e._sugr.pauseAd())):"undefined"!=typeof e._sugr&&1==this._previousTabHidden&&(e._adInitted&&e._adPaused?this.isViewableInViewport(e)&&(e._adPaused=!1,1==d.ap&&e._sugr.resumeAd()):e._adInitted&&e._adLoaded&&!e._startAdCalled&&(e._startAdCalled=!0,e._sugr.playAd()))}},windowBlurred:function(a){console.log("Blurred"),this._blurred=!0,this._focused=!1},windowFocused:function(a){console.log("Focused"),this._focused=!0,this._blurred=!1},flashAvailable:function(){var a=!1;try{a=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(b){a="undefined"!=typeof navigator.mimeTypes["application/x-shockwave-flash"]}return a},initPlayer:function(a){if(0==a._playerInit){if(console.log("INIT PLAYER",a.id),a._adInitted=!0,this.flashAvailable()){var b=d.w,c=d.h,e=a.id,f=document.createElement("object");f.setAttribute("width",b),f.setAttribute("height",c),f.setAttribute("id","vindico_player");var g=null,h="sdk.vindicosuite.com/sugr/swf/latest/sugr.swf",i=document.location.protocol+"//sdk.vindicosuite.com/ad/unit/appear/"+this.version,j="",k={plurl:function(a){i=document.location.protocol+"//"+a}};if(d.jlp){var l=decodeURIComponent(d.jlp),m=JSON.parse(l);for(var n in m)k[n](m[n])}if(d.pflp&&(j+="&pflp="+d.pflp),d.sflp&&(j+="&sflp="+d.sflp),d.vasturl)g=i+"/player.swf?guid="+e+"&w="+b+"&h="+c+"&vasturl="+encodeURIComponent(d.vasturl);else if(d.rid)d.lid=d.rid;else{if(!d.lid)return void console.error("Invalid initialization parameters");g=i+"/player.swf?guid="+e+"&w="+b+"&h="+c+"&vasturl="+encodeURIComponent(document.location.protocol+"//x.vindicosuite.com/?l="+d.lid+"&t=x")}g=g+"&surl="+h,g+=j,f.setAttribute("data",g);var o=document.createElement("param");o.name="allowScriptAccess",o.value="always",f.appendChild(o),a.appendChild(f),a._sugr=f,a._checkViewabilityOnLoad=function(){this.checkViewability()}.bind(this),a.slideIntoView=function(){console.log(this.style.height),"0px"!=this.style.width&&"0px"!=this.style.height||(this.style.height=c+"px",this.style.width=b+"px")},a.addEventListener("mouseenter",this.bind(a,function(){console.log(this);try{console.log(this._sugr.unmute),this._sugr&&"undefined"!=typeof this._sugr.unmute&&this._sugr.unmute()}catch(a){console.error(a)}})),a.addEventListener("mouseleave",this.bind(a,function(){this._sugr&&"undefined"!=typeof this._sugr.mute&&this._sugr.mute()})),a.onAdStopped=this.bind(a,function(){console.log("Ad Stopped"),this.removeChild(this._sugr),this.style.height="0px",this._sugr=void 0,d.lh&&window.onAdStopped()}),a.onAdLoaded=this.bind(a,function(){console.log("Ad Loaded"),this._adLoaded=!0,this._checkViewabilityOnLoad(),this._sugr&&"undefined"!=typeof this._sugr.mute&&this._sugr.mute(),d.lh&&window.onAdLoaded()}),a.onAdStarted=this.bind(a,function(){a._adStarted=!0,d.lh&&window.onAdStarted()}),a.onAdVideoStart=this.bind(a,function(){console.log("Ad Video Started"),this.slideIntoView(),d.lh&&window.onAdVideoStart()}),a.onAdImpression=this.bind(a,function(){console.log("AdImpression"),this.slideIntoView()}),a.onAdError=this.bind(a,function(){d.lh&&window.onAdError()}),window["div_"+e]=a}else console.error("Flash not available");a._playerInit=!0}},init:function(){if(this._tabHidden=document.hidden,this._previousTabHidden=this._tabHidden,!d.t)return void console.error("No Target Name Provided");if(this._targets=document.getElementsByClassName(d.t),0===this._targets.length&&(this._targets=[document.getElementById(d.t)]),0===this._targets.length)return void console.error("Target '",d.t,"' Not Found");document.addEventListener("visibilitychange",this.bind(this,this.windowVisibilityChanged),!1),window.addEventListener("scroll",this.bind(this,this.checkViewability),!1),console.log(this._targets);for(var a=this._targets.length,c=0;a>c;c++){var e=this._targets[c],f=b();e.setAttribute("id",f),console.log("target",e),e._sugr=void 0,e._adInitted=!1,e._adPaused=!1,e._playerInit=!1,e._adLoaded=!1,e._adStarted=!1,e._startAdCalled=!1,e.setAttribute("style","height: 0px;overflow: hidden;transition: height 1.2s;-moz-transition: height 1.2s;-webkit-transition: height 1.2s;-o-transition: height 1.2s;"),e._targetViewable=this.isViewableInViewport(e),e._targetViewable&&this.initPlayer(e)}}};e.init()}();