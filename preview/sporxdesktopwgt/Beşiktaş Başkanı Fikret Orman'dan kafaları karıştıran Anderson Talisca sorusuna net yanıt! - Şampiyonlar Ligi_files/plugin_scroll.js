/*
Copyright (C) 2012-2016 CoAdvertise GmbH
Unauthorized copying of this file, via any medium is strictly prohibited
Author: F.Himmel
*/
"undefined"!=typeof ClassCoAd&&"undefined"==typeof ClassCoAd.plugin_scroll&&(ClassCoAd.prototype.plugin_scroll=function(t){var e="06.07.2016",s=this,n=s.collect_debug,r={trigger:"trigger_line",speed:"effect_speed",close:"hideontop",timer:"showtimer",buttontime:"closebutton",zindex:"zindex",effect:"effect"},d="cdxhd_scroll",l=("cdxhd_scroll_"+s.bpid+"_"+s.slot,!1);if(s.switchtotop)var o=window.top;else var o=window;var a=new ClassCdxhdHelper(s,!1,o),c={bg:0,ad:100,brand:200,button:300},p={effect:"slideY",speed:.3,trigger:0,close:!0,timer:!1,buttontime:0,zindex:8e3};cdxhd_class_debug.prototype.hasplugin={scroll:{name:"scroll",version:e}};var f={plugin_loaded:!0,plugin_css:["overlay_v2.css"],plugin_csstarget:o,plugin_version:e,SetHide:!1,settings:function(t,e){return"undefined"!=typeof s.settings[r[t]]||(s.settings[r[t]]=p[t]),"undefined"!=typeof e&&(s.settings[r[t]]=e),s.settings[r[t]]},chksettings:function(){for(i in r)if("undefined"!=typeof s.settings[r[i]]){var t=s.settings[r[i]];"false"==t||"true"==t?f.settings(i,"true"===t):t==parseInt(t)?f.settings(i,parseInt(t)):t==parseFloat(t)?f.settings(i,parseFloat(t)):f.settings(i,t)}},setadvsettings:function(t){if("undefined"==typeof t||!t||"undefined"==typeof t.js)return!1;for(i in r)"undefined"!=typeof t.js[r[i]]&&f.settings(i,t.js[r[i]]);return f.chksettings(),!0},init:function(){function t(){if(a(o).scrollTop()>=f.settings("trigger")&&(s.SetHide&&(clearTimeout(s.SetHide),s.SetHide=!1),"init"==cdxhd[e].rendered?(cdxhd[e].rendered="scroll",cdxhd[e].cdxhd_plugin="display",n("### Init new Scroll Ad ###"),l="init",a(o).binder_unregister(["scroll"],"scrollad"),new ClassCoAd("scroll",!1,!1,o)):("ok"==cdxhd[e].rendered||"true"==cdxhd[e].debug)&&("down"!=l&&(("fade"==f.settings("effect")||"blur"==f.settings("effect"))&&(p.setStyle({opacity:"1"}),"blur"==f.settings("effect")&&p.setStyle({filter:"blur(0px)"})),a("cdxhd_scroll").setStyle({transform:"translate(0px,0px)",webkitTransform:"translate(0px,0px)",width:cdxhd[e].cdxhd_width+2+"px",height:cdxhd[e].cdxhd_height+2+"px"})),l="down"),f.settings("close")===!1&&f.settings("trigger")>0&&(a(o).binder_unregister(["scroll"],"scrollad"),l="close")),f.settings("close")&&a(o).scrollTop()<=f.settings("trigger")&&"up"!=l){var t=cdxhd[e].cdxhd_width+50,i=cdxhd[e].cdxhd_height+50;"fade"==f.settings("effect")||"blur"==f.settings("effect")?(p.setStyle({opacity:"0"}),"blur"==f.settings("effect")&&p.setStyle({filter:"blur(2px)"}),s.SetHide&&clearTimeout(s.SetHide),s.SetHide=setTimeout(function(){a("cdxhd_scroll").setStyle({transform:"translateX("+t+"px)",webkitTransform:"translateX("+t+"px)",width:"0px",height:"0px"})},1e3*f.settings("speed")+200)):"slideX"==f.settings("effect")?a("cdxhd_scroll").setStyle({transform:"translateX("+t+"px)",webkitTransform:"translateX("+t+"px)"}):"slideY"==f.settings("effect")?a("cdxhd_scroll").setStyle({transform:"translateY("+i+"px)",webkitTransform:"translateY("+i+"px)"}):a("cdxhd_scroll").setStyle({transform:"translate("+t+"px,"+i+"px)",webkitTransform:"translate("+t+"px,"+i+"px)"}),l="up"}}if(n("*** ScrollAd *** init()"),a(d).element())return!1;if(f.chksettings(),f.settings("zindex"))for(i in c)c[i]=f.settings("zindex")+c[i];a("cdxhd_bpid_"+s.bpid+"_"+s.slot).remove();var e=s.key,r=50;cdxhd[e].cdxhd_width=0,cdxhd[e].cdxhd_height=0;var p,g;p=a().create("div"),p.setAttr({"class":d,"data-cdxhdscroll":s.bpid+"_"+s.slot}),p.setStyle({zIndex:c.bg,display:"block",position:"fixed",bottom:"5px",right:"5px",display:"block",width:"0px",height:"0px"}),"fade"==f.settings("effect")?p.setStyle({opacity:"0"}):p.setStyle({transform:"translateX("+r+"px)",webkitTransform:"translateX("+r+"px)"}),g='<div class="'+d+'_body"  style="z-index:'+(c.bg+1)+'; box-sizing: content-box; position:relative; background-color:rgba(0,0,0,0.5); padding-right:0px; padding-bottom:0px; padding-left:0px; padding-top:0px; box-shadow: 0px 0px 8px -1px rgba(0,0,0,0.8);">',g+='<div class="'+d+'_timer" style="display:none; z-index:'+(c.button+1)+'" id="'+d+'_timer"></div>',g+='<div class="'+d+'_info" id="'+d+'_info">',g+="</div>",g+='<div class="'+d+'_clbtn" id="'+d+'_clbtn" style="display:none; z-index:'+c.button+'"></div>',g+='<div class="'+d+'_content" style="z-index:'+c.ad+'; position:relative; box-sizing: content-box; border:none; padding-right:0px; padding-bottom:0px; padding-left:0px; padding-top:0px; background-color: white; top:0px; left:0px;">',g+='<div class="cdxhd_'+s.bpid+' cdxhd_slot" style="border: 1px solid #c3c3c3; box-sizing: content-box; text-align:left; margin:0px; padding:0px;" id="cdxhd_bpid_'+s.bpid+"_"+s.slot+'"></div>',g+="</div>",g+="</div>",p.html(g),p.id(d),o.document.body.appendChild(p.element()),cdxhd[e].REGISTER_EVENT=[];var x=function(t){t--,t>=0?setTimeout(function(t,e){return function(){t.html(e),x(e)}}(a(d+"_timer"),t),1e3):a(d+"_timer").css("display","none")};return cdxhd[e].REGISTER_EVENT.destroy=t,cdxhd[e].REGISTER_EVENT.onad=function(s){f.setadvsettings(s.result_config);try{var i=s.result_size.split("x");s.w=i[0],s.h=i[1]}catch(n){return console.log(n),!1}var r=parseInt(s.w),l=parseInt(s.h);if(cdxhd[s.key].cdxhd_width=r,cdxhd[s.key].cdxhd_height=l,s.iframe.style.width=r+"px",s.iframe.style.height=l+"px",s.iframe.style.position="absolute",a("cdxhd_bpid_"+s.bpid+"_"+s.slot).setStyle({width:r+"px",height:l+"px"}),a(d).setStyle({width:r+2+"px",height:l+"px"}),"fade"==f.settings("effect")||"blur"==f.settings("effect")?a(d).setStyle({transition:"opacity "+f.settings("speed")+"s ease-out, filter "+f.settings("speed")+"s ease-out"}):"slideX"==f.settings("effect")?a(d).setStyle({transition:"transform "+f.settings("speed")+"s ease-out, width "+f.settings("speed")+"s ease-out"}):"slideY"==f.settings("effect")?a(d).setStyle({transition:"transform "+f.settings("speed")+"s ease-out, height "+f.settings("speed")+"s ease-out"}):a(d).setStyle({transition:"all "+f.settings("speed")+"s ease-out"}),a(d+"_clbtn").onClick(function(){a(o).binder_unregister(["scroll"],"scrollad"),cdxhd[s.key].rendered="kill";var t=top.window.document.getElementById(d);if("fade"==f.settings("effect")||"blur"==f.settings("effect")){try{t.style.opacity="0"}catch(i){}try{t.style.webkitOpacity="0"}catch(i){}if(s.SetHide&&clearTimeout(s.SetHide),"blur"==f.settings("effect")){try{t.style.filter="blur(2px)"}catch(i){}try{t.style.webkitFilter="blur(2px)"}catch(i){}}s.SetHide=setTimeout(function(){try{t.style.transform="translateX("+(r+50)+"px)"}catch(e){}try{t.style.webkitTransform="translateX("+(r+50)+"px)"}catch(e){}},1e3*f.settings("speed")+200)}else if("slideX"==f.settings("effect")){try{t.style.transform="translateX("+(r+50)+"px)"}catch(i){}try{t.style.webkitTransform="translateX("+(r+50)+"px)"}catch(i){}}else if("slideY"==f.settings("effect")){try{t.style.transform="translateY("+(l+50)+"px)"}catch(i){}try{t.style.webkitTransform="translateY("+(l+50)+"px)"}catch(i){}}else{try{t.style.transform="translateX("+(r+50)+"px)"}catch(i){}try{t.style.webkitTransform="translateX("+(r+50)+"px)"}catch(i){}try{t.style.transform="translateY("+(l+50)+"px)"}catch(i){}try{t.style.webkitTransform="translateY("+(l+50)+"px)"}catch(i){}}try{top.window.removeEventListener?top.window.removeEventListener("scroll",cdxhd[e].REGISTER_EVENT.destroy,!1):top.window.DetachEvent&&top.window.DetachEvent("onscroll",cdxhd[e].REGISTER_EVENT.destroy)}catch(i){}setTimeout(function(){t.parentNode.removeChild(t)},1e3*f.settings("speed")+200)}),f.settings("buttontime")!==!1&&(f.settings("buttontime")>1&&f.settings("timer")===!0&&(a(d+"_timer").show().html(f.settings("buttontime")),x(f.settings("buttontime"))),setTimeout(function(t){return function(){f.settings("timer")===!0?t.css("display","block"):t.fadeIn("",.8)}}(a("cdxhd_scroll_clbtn"),f.settings("timer")),1e3*f.settings("buttontime"))),"fade"==f.settings("effect")||"blur"==f.settings("effect")?a(d).setStyle({opacity:"0",display:"block"}):a(d).setStyle({transform:"translateX(0px)",webkitTransform:"translateX(0px)"}),s.result_branding>0&&""!=s.result_style.name){var p='<span style="z-index:'+c.brand+'" title="'+s.result_style.text+'" onclick="window.open(\''+s.result_style.url+"', '_blank'); return false;\" class=\""+d+"_brand "+s.result_style.name+'" id="'+d+"_"+s.bpid+"_"+s.slot+'_brand">&nbsp;</span>';a("cdxhd_scroll_info").html(p)}return a(o).binder_register("sync",["scroll"],"scrollad",t),!0},n("Wait for user action (scroll)"),window.requestAnimFrame=function(t){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),f.settings("trigger")>0?a(o).binder_register("sync",["scroll"],"scrollad",t):t(),!1}};return f});