var _min=_min||{_publisher:""};_min=function(e){function t(e,t){var n=function(){var e=new E;return function(){return e}}(),i=function(){var e=new E(t.ServerAnalytics);return e.enableStorage("_minEE0"),function(){return e}}(),r=function(){var e=new E(t.UrlReporter);return function(){return e}}(),o=function(){var e=new E(t.UrlReporter);return e.enableStorage("_minEE1"),function(){return e}}(),a=function(){var n=new E(t.VideoData,!1);return function(){return n.setValidator(e.validateScraperURL),n}}(),s=function(){var n=new E(t.UrlReporter,!1);return function(){return n.setValidator(e.validateScraperURLForDelayedInternal),n}}();return{getError:n,getAnalytics:i,getVideoViewsReporter:r,getUrlReporter:o,getPlayerContent:a,getPlayerContentDelayed:s}}function n(e,t){function n(){var t=o(),n=e.getlistAsArray(t[b]);n=i(n),n.length>0&&c([n]),t[b]=[],s(t)}function i(e){if(e.length<=1)return e;var t=[];e.forEach(function(e,n,i){t.push(JSON.stringify(e))});var n=t.filter(function(e,n){return t.indexOf(e)==n});return t=[],n.forEach(function(e,n,i){t.push(JSON.parse(e))}),t}function r(t,n){var i,r=o();r[n]=e.getlistAsArray(r[n]),i=r[n],i.push(t),s(r)}function o(){var e=w.getItem(P);return e=e?O?u(e):JSON.parse(e):{}}function s(e){var t;t=O?d(e):JSON.stringify(e),w.setItem(P,t,C)}function l(e,t){var n,i,r=typeof e;if("string"==r||"number"==r){if(n=o(),n[t]=n[t]||[],i=n[t],0===i.length)return null;for(var a=0;a<i.length;a++)if(i[a].id==e)return i[a];return null}}function c(t){if(!e.isArray(t))return void e.log("Report not an array");for(var n,i="Test:"+te.getGroupCode(),r=0;r<t.length;r++){n=e.isArray(t[r])?t[r]:[t[r]];var o=JSON.parse(JSON.stringify(n));T.push(h.Emitter.ANALYTICS_EVENT,o);for(var a=0;a<n.length;a++){var s=n[a];i+=","+s.id+":PClick:"+(s.product||"0");var l=$.get(s.id,s.placementFunction,h.Emitter.CLICK_TYPE_CLICK,s.test_mode,s.product);l.isSent()||(s.uniq=!0,T.push(h.Emitter.ANALYTICS_EVENT,s),i+=","+s.id+":UClick:"+(s.product||"0")),e.optimizely.trackEvent(0==s.product?"click_minute_apv":"click_minute_ia"),l.setAnalyticState()}}p.forceFlush(i),T.flush()}function u(e){for(var t=e.split("-"),n=[],i=0;i<t.length;i++){var r=t[i].split("."),o={id:r[0],highlight_id:r[1],test_mode:!!parseInt(r[2]),playMode:r[3],source:r[4],type:r[5],placementFunction:r[6],uniq:!!parseInt(r[7]),product:r[8]};n.push(o)}return{clicks:n}}function d(e){for(var t=e.clicks,n=[],i="",r=0;r<t.length;r++){var o=t[r],a=[];a.push(o.id),a.push(o.highlight_id),a.push(0==o.test_mode?0:1),a.push(o.playMode),a.push(o.source),a.push(o.type),a.push(o.placementFunction),a.push(0==o.uniq?0:1),a.push(o.product),a=a.join("."),n.push(a)}return i+=n.join("-")}function g(e,i){w=t.getLocalStorageInstance(),L=e,T=i,O=ne.isCookieDomain(),O&&(w=q,P="MinTestClick",C={path:"/",domain:ne.getCookieDomain()}),n(),Y.addEventListener(h.Events.DomWindow.URL_CHANGE,n,this),ne.isForceFlushAnalytics()&&f()}function f(){A=new a.utils.Timer(h.FLUSH_ANALYTICS,n,this),A.start()}function v(){e.log("sent Logs Due To In Article or placement force Click"),n()}function m(e){r(e,b)}function E(e){r(e,I)}function y(e,t){var n,i,r=typeof e;if(("string"==r||"number"==r)&&(n=o(),n[t]=n[t]||[],i=n[t],0!==i.length)){for(var a=0;a<i.length;a++)if(i[a].id==e){i.splice(a,1);break}s(n)}}function _(e){y(e,I)}function S(e){var t=l(e,I);t&&(t.type=h.Emitter.ANALYTICS_CLICK_EVENT,c([t]),_(e))}var A,P="minAnalytics",b="clicks",I="clicksDelay",w=null,L=null,T=null,C={},O=!1;return{init:g,startForceFlush:f,sendLogsDueToInArticleClick:v,log:m,logDelay:E,removeLogFromList:y,removeLogDelayById:_,sendLogDelayById:S}}function r(e){this.name=e,this.states={BEFORE_START:0,PLAY:1,PAUSE:2,FINISHED:3},this.properties={status:{last_state:this.states.BEFORE_START},pause:{second:void 0,paused_timestamp:0},seek:{from:void 0,to:void 0},mute:{second:void 0,status:void 0},buffering:{buffering_timestamp:0},watched:{from:void 0}}}function o(e,t,n){this._sessionId=e,this._apvId=t,this._minVidId=n,this.queue=[],this.INTERVAL_TIME=2e3,this._interactionId=0,this._myTimeout=null}e=e,e.ver="1.7.4.8",e._publisher=e._publisher||"",e._publisherDebugUrl=e._publisherDebugUrl||"";var a={},s={},l="production",c="time",u=(new Date).getTime(),d=window.performance?window.performance.timing.navigationStart:u,p=null,h={};h.Urls=function(){var e="https:"==window.location.protocol?1:0;return{ServerData:["http://data.minute.ly/","https://z2d7c5q4.map2.ssl.hwcdn.net/"][e],ServerAnalytics:["http://data.minute.ly/","https://z2d7c5q4.map2.ssl.hwcdn.net/"][e],UrlReporter:["http://counter.snackly.co/","https://counter.snackly.co/"][e],VideoData:["http://vdata.minute.ly/","https://b3g8i8r3.map2.ssl.hwcdn.net/"][e],Configuration:["http://apv.configuration.minute.ly/","https://r7c2k6b3.map2.ssl.hwcdn.net/"][e],Logger:["http://logger.snackly.co/","https://logger.snackly.co/"][e]}}(),h.SELECTOR="selectors",h.Selectors={PREVIEW_SELECTOR:"preview",LINK_SELECTOR:"link",CLICK_SELECTOR:"click",CONTAINER_SELECTOR:"container",HOVER_SELECTOR:"hover",OBSERVER_SELECTOR:"observer",CAROUSEL_SELECTOR:"carousel",VIRTUAL_CLICK_SELECTOR:"virtualClick"},h.styleOverrides={CONTAINER:"container",APV:"apv",CLONE:"clone",ELEMENT_TO_REPLACE:"elementToReplace",LOGO:"logo"},h.DEFAULT_MEDIAQUERY="active",h.USE_APV_ORIGIN="apvOrigin",h.styles={},h.styles.MARGIN_TOP="margin-top",h.styles.PARENT="parent",h.styles.HEIGHT="height",h.styles.WIDTH="width",h.styles.OBJECT_FIT="object-fit",h.values={},h.values.RELATIVE="relative",h.values.ABSOLUTE="absolute",h.values.HIDDEN="hidden",h.values.COVER="cover",h.values.NONE="none",h.values.BLOCK="block",h.values.HUNDRED_PERCENT="100%",h.APV={Origin:{source:"[ORIGIN]",target:"",size:450}},h.APVStates={Disposed:"disposed",New:"new",Blocked:"blocked",Disabled:"disabled",Active:"active"},h.Analytics={},h.Analytics.PlayModes={unknown:0,viewport:2,semihover:4,hover:5},h.config={},h.config.WindowIntervals={SCROLL:"scroll",RESIZE:"resize",URL:"url",ECHO_TIME:"echoTime",ECHO_REPEAT:"echoRepeat"},h.config.PlayModes={Viewport:"viewport",SemiHover:"semihover",Hover:"hover",InArticle:"in_article",BrightcovePlugin:"brightcove_plugin"},h.DOM_ADAPTER_TYPE="domAdapter",h.LOGO_TYPE="logoType",h.LOGO_SMALLEST_WIDTH=12,h.DEFAULT_LOGO_SIZE="16px",h.DEFAULT_MOBILE_LOGO_SIZE="12px",h.FLUSH_ANALYTICS=5e3,h.APPEND_CHILD_CODE=-1,h.APV_MOUSE_ENTER_SEND_TIMEOUT=2e3,h.HOVER_IMPRESSION_DELAY=1e4,h.TIMER_ELEMENT_CHECK=5e3,h.PLACEMENTS_DOM_REFRESH_INTERVAL=5e3,h.PlacementKeys={COMPATIBILITY:"compatibility",CHILD:"child"},h.Events={WINDOW_DISPOSE:"windowDispose",TEST_MODE_READY:"testModeReady",WINDOW_SERVICE_READY:"windowServiceReady",POST_MESSAGE_RESPONSE:"postMessageResponse"},h.Events.Element={VISIBLE:"elmVisible",NON_VISIBLE:"elmNonVisible",ANALYTICS_VISIBLE:"elmVisibleAnalytics",CLICK:"elmClick",CONTEXT_MENU_OPEN:"elmContextMenuOpen",CONTEXT_MENU_CLOSE:"elmContextMenuClose",MUTANT:"elmMutant",MOUSE_ENTER:"mouseenter",MOUSE_OUT:"mouseout",READY:"ready",UPDATE_CAROUSEL_ELEMENT:"updateCarouselContainer"},h.Events.Players={PLAYING:"playing",PAUSED:"paused",LOADED:"loaded",ENDED:"ended",ERROR:"error"},h.Events.DomWindow={SCROLL:"scroll",RESIZE:"resize",URL_CHANGE:"urlChange",CHECK_VISIBILITY:"checkVisibility"},h.UrlStructure={Origin:"origin",PathName:"pathname",Search:"search",Hash:"hash"},h.Effects={APV_FADE:500},h.Emitter={ANALYTICS_EVENT:0,STATS_EVENT:1,NEW_VIDEO_EVENT:2,ERROR:3,VIDEO_VIEWS:42,VIEWPORT:95,NEW_SCRAPE_EVENT:97,URL_REPORT:98,VIDEO_PRESENT:96,CLIENT_DESCRIPTION:99,CONTEXT_MENU_OPEN_EVENT:4,ANALYTICS_CLICK_EVENT:0,ANALYTICS_IMPRESSION_EVENT:1,ANALYTICS_BLOCKING_DISTANCE_POTENTIAL:2,ANALYTICS_SOURCE_WEB_MOBILE:2,ANALYTICS_SOURCE_WEB_DESKTOP:1,PRODUCT_APV:0,PRODUCT_IN_ARTICLE:1,CLICK_TYPE_NONE:"n",CLICK_TYPE_CLICK:"c"},h.Placements={VIEWPORT_IMPRESSION:1,HOVER_IMPRESSION:2},h.Scraper={},h.Scraper.PlayerList={FLOW_PLAYER:1,OOYALA:2,SMPFLASH:3,VIDEOJS_PLAYER:4,YOUTUBE:6,HTML5_PLAYER:7,JW_PLAYER:8,DAILY_PLAYER:20,CLUBIC_PLAYER:10,LEMONDE_PLAYER:11,KALTURA_PLAYER:12,BRIGHTCOVE_PLAYER:13,CNN_PLAYER:14,NBA_PLAYER:15,ABC_PLAYER:16,BET_PLAYER:17,KOTAKU_PLAYER:18,SPORTING_PLAYER:21,HEATST_PLAYER:23,RGJBRIGHTCOVE_PLAYER:24,AOL_PLAYER:25,FOXSPORTS_PLAYER:26,VJSBRIGHTCOVE_PLAYER:27,OOYALA_TELEGRAPH_PLAYER:28},h.LocalStorage={POTENTIAL:"_minPotentialScrapers"},h.Scraper.ALL_PLAYERS=[h.Scraper.PlayerList.FLOW_PLAYER,h.Scraper.PlayerList.OOYALA,h.Scraper.PlayerList.SMPFLASH,h.Scraper.PlayerList.YOUTUBE,h.Scraper.PlayerList.HTML5_PLAYER,h.Scraper.PlayerList.JW_PLAYER,h.Scraper.PlayerList.VIDEOJS_PLAYER,h.Scraper.PlayerList.DAILY_PLAYER,h.Scraper.PlayerList.CLUBIC_PLAYER,h.Scraper.PlayerList.LEMONDE_PLAYER,h.Scraper.PlayerList.KALTURA_PLAYER,h.Scraper.PlayerList.BRIGHTCOVE_PLAYER,h.Scraper.PlayerList.RGJBRIGHTCOVE_PLAYER,h.Scraper.PlayerList.CNN_PLAYER,h.Scraper.PlayerList.NBA_PLAYER,h.Scraper.PlayerList.ABC_PLAYER,h.Scraper.PlayerList.BET_PLAYER,h.Scraper.PlayerList.KOTAKU_PLAYER,h.Scraper.PlayerList.SPORTING_PLAYER,h.Scraper.PlayerList.AOL_PLAYER,h.Scraper.PlayerList.HEATST_PLAYER,h.Scraper.PlayerList.VJSBRIGHTCOVE_PLAYER,h.Scraper.PlayerList.FOXSPORTS_PLAYER,h.Scraper.PlayerList.OOYALA_TELEGRAPH_PLAYER],h.MinuteUiTests={},h.MinuteUiTests.HtmlAttributes={EXISTS:"minute-ui-test",ACTIVE:"minute-ui-test-active"},h.ReportMethods={GIF:"gif",GET:"get",POST:"post"},h.GROUP_42="__42_group",a.utils=a.utils||{},a.utils.Signal=function(){function e(e,t,n,i,r){this._listener=t,this._isOnce=n,this.context=i,this._signal=e,this._priority=r||0}function t(e,t){if("function"!=typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function n(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){n.prototype.dispatch.apply(e,arguments)}}return e.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,n,i,r){var o,a=this._indexOfListener(t,i);if(-1!==a){if(o=this._bindings[a],o.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else o=new e(this,t,n,i,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===e&&n.context===t)return i;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,n,i){return t(e,"add"),this._registerListener(e,!1,n,i)},addOnce:function(e,n,i){return t(e,"addOnce"),this._registerListener(e,!0,n,i)},remove:function(e,n){t(e,"remove");var i=this._indexOfListener(e,n);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){t=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(t[i]&&this._shouldPropagate&&t[i].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},n}();var g=g||{};!function(t,n){if(e.debug!==!0){var r={};!function(){var e=document.getElementsByTagName("script"),t=e[e.length-1];if(t){var n,o=t.attributes;for(i=0,len=o.length;i<len;i++)/data-(\w+)$/.test(o[i].nodeName)&&(n=o[i].nodeValue,"false"===n&&(n=!1),r[RegExp.$1]=n)}}();var o=function(){var e=n(),t=e(r);return t.factory=e,t};t.Honeybadger=o()}}(g,function(){function e(e,t){var n={};for(k in e)n[k]=e[k];for(k in t)n[k]=t[k];return n}function t(e){return a?a.name!==e.name?!1:a.message!==e.message?!1:a.stack!==e.stack?!1:!0:!1}function n(){var e={};return e.HTTP_USER_AGENT=navigator.userAgent,document.referrer.match(/\S/)&&(e.HTTP_REFERER=document.referrer),e}function i(e){return e.stacktrace||e.stack||void 0}function r(e){var t,n=10;if(e&&(t=i(e)))return{stack:t,generator:void 0};try{throw new Error("")}catch(r){if(t=i(r))return{stack:t,generator:"throw"}}t=["<call-stack>"];for(var o=arguments.callee;o&&t.length<n;){/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?t.push(RegExp.$1||"<anonymous>"):t.push("<anonymous>");try{o=o.caller}catch(r){break}}return{stack:t.join("\n"),generator:"walk"}}function o(e,t){var n,i,r;for(i=0,r=e.length;r>i;i++)if(n=e[i],n(t)===!1)return!0;return!1}var a,s,l="0.4.2",c={name:"honeybadger.js",url:"https://github.com/honeybadger-io/honeybadger-js",version:l,language:"javascript"},u=!1,d=!1,p=function(p){function h(e){g("debug")&&this.console&&console.log(e)}function g(e,t){var n;return void 0!==b[e]&&(n=b[e]),"false"===n&&(n=!1),void 0!==n?n:t}function f(){return"http"+(g("ssl",!0)&&"s"||"")+"://"+g("host","api.honeybadger.io")}function v(e,t,n){var i,r,o,a;if(o=[],n||(n=0),n>=g("max_depth",8))return encodeURIComponent(t)+"=[MAX DEPTH REACHED]";for(i in e)a=e[i],a instanceof Function&&(a="[FUNC]"),e.hasOwnProperty(i)&&null!=i&&null!=a&&(r=t?t+"["+i+"]":i,o.push("object"==typeof a?v(a,r,n+1):encodeURIComponent(r)+"="+encodeURIComponent(a)));return o.join("&")}function m(e){try{return x=new(this.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0"),x.open("GET",e,!0),void x.send()}catch(t){h("Error encountered during XHR request (will retry): "+t)}img=new Image,img.src=e}function E(e){return a=s=null,g("api_key")?(url=f()+"/v1/notices/js.gif?"+v({notice:e})+"&api_key="+g("api_key")+"&t="+(new Date).getTime(),m(url),!0):(h("Unable to send error report: no API key has been configured."),!1)}function y(r,l){if(g("disabled",!1))return!1;if(!(r instanceof Object))return!1;if(r instanceof Error){var d=r;r={name:d.name,message:d.message,stack:i(d)}}if(t(r))return!1;if(s&&u&&E(s),0===function(){var e,t;t=[];for(e in r)({}).hasOwnProperty.call(r,e)&&t.push(e);return t}().length)return!1;if(l&&(r=e(r,l)),o(b.beforeNotifyHandlers,r))return!1;var p={notifier:c,error:{"class":r.name||"Error",message:r.message,backtrace:r.stack,generator:r.generator,fingerprint:r.fingerprint},request:{url:r.url||document.URL,component:r.component||g("component"),action:r.action||g("action"),context:e(b.context,r.context),cgi_data:n()},server:{project_root:r.project_root||g("project_root",window.location.protocol+"//"+window.location.host),environment_name:r.environment||g("environment")}};return s=p,a=r,u?(h("Defering notice.",r,p),window.setTimeout(function(){t(r)&&E(p)})):(h("Queuing notice.",r,p),P.push(p)),r}function _(e,t){try{return"function"!=typeof e?e:(e.___hb||(e.___hb=function(){var n=g("onerror",!0);if(I&&(n||t)||t&&!n)try{return e.apply(this,arguments)}catch(i){}else try{return e.apply(this,arguments)}catch(i){}}),e.___hb)}catch(n){return e}}function S(e,t,n){if(!d&&e&&t&&n){var i=e[t];e[t]=n(i)}}var A=[],P=[],b={context:{},beforeNotifyHandlers:[]};if(p instanceof Object)for(k in p)b[k]=p[k];var I=!0;if(window.atob||(I=!1),window.ErrorEvent)try{0===new window.ErrorEvent("").colno&&(I=!1)}catch(w){}b.notify=function(t,n,o){if(t||(t={}),t instanceof Error){var a=t;t={name:a.name,message:a.message,stack:i(a)}}if(!(t instanceof Object)){var s=String(t);t={message:s}}if(n&&!(n instanceof Object)){var l=String(n);n={name:l}}return n&&(t=e(t,n)),o instanceof Object&&(t=e(t,o)),y(t,r(t))},b.wrap=function(e){return _(e,!0)},b.setContext=function(t){return t instanceof Object&&(b.context=e(b.context,t)),b},b.resetContext=function(t){return t instanceof Object?b.context=e({},t):b.context={},b},b.configure=function(e){for(k in e)b[k]=e[k];return b},b.beforeNotify=function(e){return b.beforeNotifyHandlers.push(e),b};var L=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};b.reset=function(){b.context={},b.beforeNotifyHandlers=[];for(k in b)-1==L.call(A,k)&&(b[k]=void 0);return b},b.getVersion=function(){return l};var T=function(e){return function(t,n){if(t instanceof Function){var i=Array.prototype.slice.call(arguments,2);return t=_(t),e(function(){t.apply(null,i)},n)}return e(t,n)}};S(window,"setTimeout",T),S(window,"setInterval",T),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(e){prototype=window[e]&&window[e].prototype,prototype&&prototype.hasOwnProperty&&prototype.hasOwnProperty("addEventListener")&&(S(prototype,"addEventListener",function(e){return function(t,n,i,r){try{n&&null!=n.handleEvent&&(n.handleEvent=_(n.handleEvent))}catch(o){h(o)}return e.call(this,t,_(n),i,r)}}),S(prototype,"removeEventListener",function(e){return function(t,n,i,r){return e.call(this,t,n,i,r),e.call(this,t,_(n),i,r)}}))}),d=!0;for(k in b)A.push(k);if(h("Initializing honeybadger.js "+l),/complete|interactive|loaded/.test(document.readyState))u=!0,h("honeybadger.js "+l+" ready");else{h("Installing ready handler");var C=function(){for(u=!0,h("honeybadger.js "+l+" ready");notice=P.pop();)E(notice)};document.addEventListener?document.addEventListener("DOMContentLoaded",C,!0):window.attachEvent("onload",C)}return b};return p});var f={HIGHLIGHT_APVS:"highlightAPV",ENABLE_DEBUG:"enableDebug",FORCE_TEST:"forceTest",FORCE_YOUTUBE_API:"forceYtApi",DISABLE_PROD:"disableProd",BYPASS_WINDOW_LOAD:"bypassWindowLoad",ACTIVE_ALL:"activeAll",PREVENT_PAGE_LOAD:"preventPageLoad",IGNORE_REFERRERS:"ignoreReferrers",DISABLE_SCRIPT:"disableScript",ENABLE_BLOCKING_DISTANCE:"enableBD",ENABLE_BLOCKING_DISTANCE_DEBUG:"enableBDDebug",FORCE_SPRITE:"forceSprite",MINUTE_UI_TEST:"uiTest"},v={SCRIPT_HOSTNAME:"scriptHostname",IS_PROCUTION:"isProduction"};e.debugParams={},a.utils=a.utils||{},a.utils.Debounce=function(e,t,n){function i(e){v=e||u}function r(e,t){E=e||u,y=t||y}function o(){var e=arguments.length>0?g.cloneArray(arguments):h;S(e),A(e)}function a(){c()}function s(){c(),d=null,p=null,h=null}function l(){return f>0}function c(){l()&&(clearTimeout(f),f=0)}var u=e,d=t,p=n||null,h=g.cloneArray(arguments).slice(3),f=0,v=0,m=0,E=0,y=1,_=0,S=function(e){if(!(0>=v)){var t=g.getDateNow(),n=t>m+v;n&&(d.apply(p,e),m=t)}},A=function(e){var t=g.cloneArray(e);c(),_=0,f=setTimeout(function n(){_+1===y&&(t=t.concat(!0)),d.apply(p,t),_++,y>_&&setTimeout(n,u),a()},u)};return{enableFilter:i,setEcho:r,start:o,stop:a,kill:s,isRunning:l}},a.utils=a.utils||{},a.utils.Timer=function(e,t,n){function i(){if(0===S){var e=arguments.length>0?g.cloneArray(arguments):_;w(e)}}function r(e){P=e||0}function o(){return b}function s(){b=0}function l(){I=null,f()}function c(){f(),E=null,y=null,_=null,I=null,A.removeAllEventListener()}function u(){return 0!==S}function d(){A.addEventListener.apply(A,g.cloneArray(arguments))}function p(){A.removeEventListener.apply(A,g.cloneArray(arguments))}function h(e){E&&E.apply(y,e),0===P||P>b?(b++,A.dispatchEvent(a.utils.Timer.Tick)):f()}function f(){S>0&&(clearInterval(S),S=0)}var v=e,E=t,y=n||null,_=g.cloneArray(arguments).slice(3),S=0,A=new m,P=0,b=0,I=null,w=function(e){I=e,f(),S=setInterval(function(){h(I)},v)};return{start:i,stop:l,kill:c,reset:s,isRunning:u,setCounterLimit:r,getCounter:o,addEventListener:d,removeEventListener:p}},a.utils.Timer.Tick="timerTick",a.utils.Timer.start=function(e){var t=new a.utils.Timer(e);return t.start(),t};var m=function(){function e(e){return Array.prototype.slice.call(e)}var t=function(){this.listeners={}};return t.prototype.addEventListener=function(t,n,i){var r=e(arguments);r=r.length>3?r.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:i,callback:n,args:r})},t.prototype.removeEventListener=function(e,t,n){if(this.listeners[e]){for(var i=this.listeners[e].length,r=[],o=0;i>o;o++){var a=this.listeners[e][o];a.context==n&&a.callback==t||r.push(a)}this.listeners[e]=r}},t.prototype.removeAllEventListener=function(){this.listeners={}},t.prototype.dispatchEvent=function(t,n){var i=0,r={type:t,data:n},o=e(arguments).slice(2);if(o=[r].concat(o),this.listeners[t])for(var a=this.listeners[t].length,s=0;a>s;s++){var l=this.listeners[t][s];if(l&&l.callback){var c=o.concat(l.args);l.callback.apply(l.context,c),i+=1}}},t}(),E=function(e,t){var n=3e3;this.queue=[],this.max_queue_length=50,this.service_url=e||h.Urls.ServerData,this.is_send_timestamp="undefined"!=typeof t?t:!0,this.isAllowSend=!0,this._validatorFunc=null,this.STORAGE_KEY=null,this._enableStorage=!1,this._storage=K.getLocalStorageInstance(),setInterval(this.flush.bind(this),n)};E.prototype.enableStorage=function(e){this.STORAGE_KEY=e,this._enableStorage=!0},E.prototype.push=function(t,n){if(this.isAllowSend){var i={ver:e.ver,type:t,payload:n};this.is_send_timestamp&&(i.timestamp=(new Date).getTime()),this._enableStorage&&this._logEvent(i),this.queue.push(i),this.queue.length>this.max_queue_length&&this.flush()}},E.prototype.disable=function(){this.isAllowSend=!1},E.prototype.flush=function(){var e=this.queue;if(document&&document.body&&0!==e.length){if(this._enableStorage&&(e=this._readStorage(),this._writeStorage([])),0===e.length||this._validatorFunc&&!this._validatorFunc())return void(this.queue=[]);var t,n=e.slice();this.queue=[];var i=!0;if("string"==typeof n&&""!==n)t=0===n.indexOf('"[{\\"')?JSON.parse(n):n;else if(g.isArray(n)&&n.length>0)t=JSON.stringify(n);else if(g.isArray(n)&&0===n.length)i=!1;else{var r=new Error("Emitter Events Corrupt");r.name="Emitter Events Corrupt",r.data={events:encodeURIComponent(n)},g.Honeybadger.notify(r,"Emitter Events Corrupt"),i=!1}if(!re.isDebug()&&i&&!re.isActiveAll()){var o="data="+encodeURIComponent(g.b64EncodeUnicode(t));g.sendReportByUrl(this.service_url,o)}g.log("Emitter Send: "+t),g.log(n)}},E.prototype.setValidator=function(e){this._validatorFunc=e},E.prototype._logEvent=function(e){var t=this._readStorage();t.push(e),this._writeStorage(t)},E.prototype._readStorage=function(){var e=this._storage.getItem(this.STORAGE_KEY);return e=e?JSON.parse(e):[]},E.prototype._writeStorage=function(e){this._storage.setItem(this.STORAGE_KEY,JSON.stringify(e))};var y=function(){function e(e,i){var r=n(e.split("."),4),o=n(i.split("."),4);return t(r,o)}function t(e,t){if(e.length!==t.length)return null;for(var n=0;n<t.length;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}function n(e,t){for(var n=t?t:3,i=e.map(function(e){return parseInt(e,10)}),r=n-i.length,o=r;o>0;o--)i.push(0);return i}return{compare:t,convertVersionToNumbers:n,compareStr:e}},g=g||{};g.urls={},g.urls.setReferrerUrl=function(){window.parent===window&&(_min.referrer=window.location.href||"")},g.urls.getReferrerUrl=function(){var e;if(ne.getIsTopWindowReferrerEnabled()&&window.parent!==window)try{e=window.parent._min.referrer||""}catch(t){}return e||(e=document.referrer||""),e.length<1e3?e:g.urls.getStructuredByUrl(e,[h.UrlStructure.Origin])},g.hasOwnProperty=Object.prototype.hasOwnProperty,g.isObjEmpty=function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(g.hasOwnProperty.call(e,t))return!1;return!0},g.urls.getCurrentUrl=function(){return window.location.href},g.urls.removeOrigin=function(){var e=document.createElement("a");return function(t){return e.href=t,t.split(e.origin)[1]}}(),g.urls.getCanonicalUrl=function(){var e=null;return function(){return e||(e=g.urls.getCurrentUrl().replace(/^(https?:\/\/)www\./i,"$1")),e}}(),g.urls.getStructuredByUrl=function(){var e=document.createElement("a");return function(t,n){e.href=t;var i="",r=n||ne.getUrlStructure();if(0===r.length)return t;for(var o=0;o<r.length;o++)i+=r[o]!==h.UrlStructure.Origin||e.origin?r[o]!==h.UrlStructure.PathName||"/"==e[r[o]].charAt(0)?e[r[o]]:"/"+e[r[o]]:window.location.origin;return i}}(),g.urls.getStructuredByUrlWithoutOrigin=function(e){var t=g.cloneArray(ne.getUrlStructure());return t.indexOf(h.UrlStructure.Origin)>-1&&t.splice(0,1),g.urls.getStructuredByUrl(e,t)};var g=g||{};!function(){!function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))}(),function(){String.prototype.endsWith||(String.prototype.endsWith=function(e,t){if(void 0===e)return!1;var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return-1!==i&&i===t})}()}(),function(){function t(){n&&n();var t=e.debugParams[f.PREVENT_PAGE_LOAD]||"";return Y&&""===t&&Y.dispatchEvent(h.Events.WINDOW_DISPOSE),""!==t?t:void 0}var n=window.onbeforeunload;window.onbeforeunload=t}(),g.globalTasks={},g.globalTasks.listenToWindowErrors=function(){return g.isDebugEnabled()||!window.addEventListener?void(g.Honeybadger={notify:function(){}}):(window.addEventListener("error",function(e){e.error&&g.reportErrorIfNeeded(e.error)}),void g.Honeybadger.configure({api_key:"6204b2e3",host:"api.honeybadger.io",ssl:!0,project_root:c,environment:l,onerror:!1}))},g.config={},g.config.getIndexLocation=function(e){return"undefined"==typeof e.getContainerIndexLocation()?h.APPEND_CHILD_CODE:parseInt(e.getContainerIndexLocation(),10)},g.config.isParentAppend=function(e){return":parent"===e.getContainerIndexLocation()},g.DomAdapter={},g.DomAdapter.getContainingsElements=function(e,t,n){var i,r,o=a.utils.DomFinder,s=o.selector(t.getLinkSelector(),e),l=t.getContainerSelector();return"undefined"==typeof l||""===l||"self"==l?(i=o.getLinkElement(n,s),r=i):(r=o.getElementByType(e,t,h.Selectors.CONTAINER_SELECTOR),r&&(i=o.getLinkElementFromContainer(r,n,s,t))),r||g.log("no wrapper element was found."),i||g.log("no link element was found."),{wrapperElement:r,linkElement:i}},g.flags={},g.flags.isNewScraper=function(){return a.scrap&&a.scrap.ScraperService},g.isDebugEnabled=function(){return g.debugParamsOverrides(),e.debug},g.reportErrorIfNeeded=function(e){var t=/(mi-[\d\w_-]*\.js|mi\.js)/i;if(e&&e.stack&&t.test(e.stack)){g.log("Error found!");var n={message:e.message,agent:navigator.userAgent||navigator.vendor||window.opera,stack:e.stack};g.Honeybadger.notify(e,n)}},g.loadJSONP=function(e,t){t||(t={});var n=t.callbackName||"void",i=t.onSuccess||function(){},r=t.onTimeout||function(){},o=t.timeout||10,a=window.setTimeout(function(){window[n]=function(){},r()},1e3*o);window[n]=function(e){window.clearTimeout(a),i(e)};var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,document.getElementsByTagName("head")[0].appendChild(s)},g.sendReportByUrl=function(e,t){_.send(e,t)},g.sendLoggerReport=function(e){_.sendLog(e),g.log("sendLoggerReport: "+e)},g.log=function(){if(e.debug===!0&&("string"==typeof arguments[0]&&(arguments[0]=g.getDateNow()-d+"ms >> "+arguments[0]),console.log.apply(console,arguments)),X.isUserAgentDebug()){var t=g.cloneArray(arguments).join(" ");g.sendLoggerReport(t)}},g.logWarning=function(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var n="color:#FFAD33;font-weight: bold;font-size:14px";g.log(t,n)},g.generateUID=function(){function e(){return Math.floor((1+Math.random())*g.getDateNow()).toString(16).substring(1)}return e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},g.timestampDiffInSec=function(e,t){return Math.floor((e-t)/1e3)},g.b64EncodeUnicode=function(e){function t(e){function t(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}var n,i,r,o,a,s,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",d=0;for(e=t(e);d<e.length;)n=e.charCodeAt(d++),i=e.charCodeAt(d++),r=e.charCodeAt(d++),o=n>>2,a=(3&n)<<4|i>>4,s=(15&i)<<2|r>>6,l=63&r,isNaN(i)?s=l=64:isNaN(r)&&(l=64),u=u+c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(l);return u}return(window.btoa||t)(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},g.timeRounder=function(e){return Math.round(10*e)/10},g.getComputedStyle=function(e){var t={},n=window.getComputedStyle(e);for(var i in n)t[i]=n[i];return t},g.win_lose_focus=function(e,t){function n(){e.call(t,1)}function i(){e.call(t,0)}t&&(X.isIE()?(window.onfocus=n,window.onblur=i):window.addEventListener?(window.addEventListener("focus",n,!1),window.addEventListener("blur",i,!1)):window.attachEvent&&(window.attachEvent("focus",n),window.attachEvent("blur",i)))},g.restore_style_property=function(e,t,n){var i=n[t];i?e.style[t]=n[t]:e.style.removeProperty(t)},g.extend=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},g.setMediaElementSize=function(e,t,n){t=t||e.videoWidth||e.naturalWidth,n=n||e.videoHeight||e.naturalHeight,e.setAttribute("data-media_dimensions",t+","+n)},g.extractElementSize=function(e){var t=window.getComputedStyle(e),n=Math.round(parseFloat(t.width)),i=Math.round(parseFloat(t.height)),r="";return("auto"===t.width||"auto"===t.height)&&(r="auto"),(t.width.indexOf("%")>-1||t.height.indexOf("%")>-1)&&(r="%"),{width:n,height:i,error:r}},g.getMediaElementSize=function(e){var t=e.getAttribute("data-media_dimensions");return t?(t=t.split(","),t.length<0&&(t[0]*=1,t[1]*=1),t):null},g.ElementObjectFit=function(){function e(e,t,n){var i,r=e.parentNode;if(r&&(i=g.getMediaElementSize(e))){n=n||{};var o,a,s=n.origin||"0% 0%",l=g.getComputedStyle(t);if("100%"!==l.width||"100%"!==l.height){var c,u=i[0],d=i[1],p=parseFloat(l.width),h=parseFloat(l.height),f=h/d;p>u*f&&(f=p/u),c=(u*f-p)/2,f=Math.ceil(10*f)/10,o="scale("+f+")",e.style.transformOrigin=s,e.style.webkitTransformOrigin=s,e.style.msTransformOrigin=s,e.style.mozTransformOrigin=s,e.style.oTransformOrigin=s,e.style.transform=o,e.style.msTransform=o,e.style.mozTransform=o,e.style.webkitTransform=o,e.style.oTransform=o,e.style.width="auto",e.style.height="auto",e.style.maxWidth="none",e.style.maxHeight="none",e.style.left="-"+c+"px",a=e.style.borderRadius,0!=a&&(r.style.borderRadius=a,r.style.overflow="hidden")}}}function t(t,r,o){if(!X.isObjectFitSupported()){var a;if(o=o||{},o[i])return void e(t,r,o[i]);a=o[n]?o[n]||t.style.objectFit:t.style.objectFit||"cover","cover"===a&&e(t,r)}}var n="object-fit",i="object-fit-polyfill";return{set:t}}(),g.getProtocol=function(){var e="https:"==document.location.protocol?"https":"http";return function(){return e}}(),g.setUrlProtocol=function(){return function(e){return 0===e.indexOf("http")?e:g.getProtocol()+"://"+e}}(),g.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},g.isFunction=function(e){return"function"==typeof e||!!(e&&e.constructor&&e.call&&e.apply)},g.cloneArray=function(e){return Array.prototype.slice.call(e)},g.cloneObject=function(e){
var t={};for(var n in e)if(g.isArray(e[n]))t[n]=g.cloneArray(e[n]);else if(null!==e[n])switch(typeof e[n]){case"boolean":case"number":case"string":case"undefined":t[n]=e[n];break;case"object":t[n]=g.cloneObject(e[n])}else t[n]=null;return t},g.extentObject=function(e,t){for(var n in e)if(null!==e[n]&&void 0!==e[n]||null===t[n])if(g.isArray(e[n]))t[n]=g.cloneArray(e[n]);else if(void 0!==t[n])switch(typeof e[n]){case"boolean":case"number":case"string":t[n]=e[n];break;case"object":t[n]=g.extentObject(e[n],t[n])}else t[n]=e[n];return t},g.debugParamsOverrides=function(t){if(t||!(Object.keys(e.debugParams).length>0)){var n=g.parseUrlDebugParams();e.debugParams=n,"undefined"!=typeof n[f.ENABLE_DEBUG]&&(e.debug="true"==n[f.ENABLE_DEBUG]),g.parseScriptDomain()}},g.parseUrlDebugParams=function(){var e=g.urls.getStructuredByUrl(D.getWindowLocationHref(),[h.UrlStructure.Search]),t={};if(""===e)return t;0===e.indexOf("?")&&(e=e.slice(1));for(var n,i,r=e.split("&"),o=/^qadt([\d\w]+)$/,a=0;a<r.length;a++)n=r[a].split("="),i=n[0],o.test(i)&&(i=i.replace(o,"$1"),t[i]=n[1]);return t},g.parseScriptDomain=function(){var t="snippet.minute.ly",n="d2d4r7w8.map2.ssl.hwcdn.net",i=g.getScriptHostname();e.debugParams[v.IS_PROCUTION]=i===t||i===n,e.debugParams[v.IS_PROCUTION]&&(i=""),e.debugParams[v.SCRIPT_HOSTNAME]=i},g.getScriptHostname=function(){var e="";if(document.currentScript){var t=document.createElement("a");t.href=document.currentScript.src,e=t.hostname}return function(){return e}}(),g.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n},g.ceil_style_value=function(){var e=/[0-9,\.]*/;return function(t,n){return n=n||0,Math.ceil(parseFloat(t)+n)+""+t.toString().replace(e,"")}}(),g.checkPotentialScraperUrls=function(){var t=null,n=null,i=K.getSessionStorageInstance();return function(){if(e.debugParams[f.IGNORE_REFERRERS])return!0;if(!i)return!0;if(t||(t=decodeURIComponent(i.getItem(h.LocalStorage.POTENTIAL))),!t)return!0;try{n=n||JSON.parse(t)}catch(r){return!0}if(!n||0===n.length)return!0;for(var o=g.urls.getStructuredByUrl(window.location.href),a=0;a<n.length;a++)if(n[a]==o)return!0;return!1}},g.scrapperWouldHaveBeenBlocked=function(){return!g.validateScraperReferrerURL()||!g.checkPotentialScraperUrls()},g.validateScraperURLForDelayedInternal=function(){return g.isCurrentUrlFilterValid(ne.getFilterScraper())&&!g.isApvExists()},g.validateScraperURL=function(){if(X.isScraperEnabled())if(ne.isEnableNewScrapper())if(g.checkPotentialScraperUrls(),g.isCurrentUrlFilterValid(ne.getFilterScraper())){if(!g.isApvExists())return!0;g.log("** Scraper blocked by APV already exist. **")}else g.log("** Scraper blocked by Filter URL. **");else if(g.validateScraperReferrerURL())if(g.isCurrentUrlFilterValid(ne.getFilterScraper()))if(g.isApvExists())g.log("** Scraper blocked by APV already exist. **");else{if(g.checkPotentialScraperUrls())return!0;g.log("** Scraper blocked by no Potential Urls. **")}else g.log("** Scraper blocked by Filter URL. **");else g.log("** Scraper blocked by Referrer URL. **");else;return Q.getPlayerContent().disable(),Q.getPlayerContentDelayed().disable(),!1},g.isPlacementEnabled=function(){return"undefined"!=typeof e.debugParams[f.ACTIVE_ALL]?!0:g.isCurrentUrlFilterValid(ne.getFilterPlacements())},g.validateScraperReferrerURL=function(){if("undefined"!=typeof e.debugParams[f.IGNORE_REFERRERS])return!0;var t=ne.getReferrers(),n=g.urls.getReferrerUrl();if(0===t.length)return!0;for(var i,r=0;r<t.length;r++)if(i=new RegExp(t[r],"i"),i.test(n))return!0;return g.log("Referrer URL not match."),!1},g.isCurrentUrlFilterValid=function(e){var t=g.urls.getCurrentUrl();return g.isUrlMatchPattern(t,e.white)?!0:0!==e.white.length?!1:g.isUrlMatchPattern(t,e.black)?!1:!0},g.isApvExists=function(){for(var e,t=g.urls.getStructuredByUrl(D.getWindowLocationHref()),n=0;n<re.getVideosCount();n++){e=re.getByIndex(n);var i=g.urls.getStructuredByUrl(e.getArticleUrl());if(i===t)return g.log("ContentScraper - video is already known! no need to update server! "+e.getArticleUrl()),!0}return!1},g.isUrlMatchPattern=function(e,t){for(var n,i=0;i<t.length;i++)if(n=new RegExp(t[i],"i"),null!==e.match(n))return!0;return!1},g["extends"]=function(e,t){e.__superCtor__=t,e.__super__=t.prototype,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},g.overrideObjectItems=function(e,t){for(var n in t)e.hasOwnProperty(n)&&(t[n]=e[n])},g.fadeout=function(e){var t=1,n=setInterval(function(){.1>=t&&(clearInterval(n),e.style.opacity=0),e.style.opacity=t,e.style.filter="alpha(opacity="+100*t+")",t-=.1*t},50)},g.getlistAsArray=function(e){return"string"!=typeof e?e||[]:""===e?[]:JSON.parse(e)},g.createArrayFromDictinary=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},g.extractImageUrlFromStyle=function(){var e=/^url\("?([^"]+)"?\)$/i;return function(t){return t&&e.test(t)?t.replace(e,"$1"):null}}(),g.getIFrameWindow=function(e){try{var t=e.contentWindow,n=Object.keys(t);if(n.length>0)return t}catch(i){}return null},g.isElementHasSize=function(e){if(g.plugins.isPlugin())return!0;if(!e)return!1;var t=window.getComputedStyle(e),n=parseInt(t.height,10),i=parseInt(t.width,10);if(n>0&&i>0||"auto"===t.height&&"auto"===t.width)return!0;var r=e.getBoundingClientRect();return r.width>0&&r.height>0},g.plugins=function(){function e(e){if(n())return!0;if(e)switch(e.getPlayMode()){case h.config.PlayModes.BrightcovePlugin:case h.config.PlayModes.InArticle:return!0}return!1}function t(){for(var e=[],t=[],n=0;n<o.length;n++){t=o[n].getIframeWindows();for(var i=0;i<t.length;i++)e.push(t[i])}return e}function n(){for(var e=0;e<o.length;e++)if(o[e].checkPlugin())return!0;return!1}function i(e){e&&o.push({checkPlugin:e.checkPlugin,getIframeWindows:e.getIframeContentWindow||function(){return[]},addPlayEventListener:e.addPlayEventListener})}function r(e,t,n){for(var i=0;i<o.length;i++)o[i].addPlayEventListener(e,t,n)}var o=[];return{addSpecialCheck:i,isInArticle:e,isPlugin:n,getIframeWindows:t,addPlayEventListener:r}}(),g.getProductByPlayMode=function(e){var t=h.config.PlayModes;switch(e){case t.InArticle:case t.BrightcovePlugin:return h.Emitter.PRODUCT_IN_ARTICLE}return h.Emitter.PRODUCT_APV},g.parseBool=function(e){return"true"===e||e===!0},g.generateUnique=function(){return"xxxxxxxxxxxx-xxxx-4xxx-yxxxxxx-xxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},g.getDateNow=function(){return(new Date).getTime()},g.trackMinuteGenesis=function(){p.add("MinGenesis*T"+(u-d))},g.getTrackerTiming=function(e){return e+"*T"+(g.getDateNow()-d)},g.getRequestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}},g.getCancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(){}},g.optimizely={},g.optimizely.trackEvent=function(e){ne.getIsOptimizelyEnabled()&&("undefined"==typeof window.optimizely&&(window.optimizely=[]),window.optimizely.push(["trackEvent",e]))};var g=g||{};g.adapters={},g.adapters.wrap=function(e,t,n){this.originalHandler=e[t];var i=this;e[t]=function(){return n.apply(i,arguments),i.originalHandler.apply(e,arguments)}},g.adapters.unWrap=function(e,t){"function"==typeof this.originalHandler&&(e[t]=this.originalHandler)},g.adapters.VirtualClickOrganizer=function(){function e(e){return e.isApvEnabled()&&!t[e.getId()]?(t[e.getId()]=!0,!0):!1}var t={};return{isValid:e}}(),function(){function e(e){function t(){return S}function n(){if(!h){var e=void 0;h=new XMLHttpRequest,f===l?g+="_.gif?"+E:(f=c,g+="_a",e=E),h.open(f,g,!0),v&&h.setRequestHeader(r,v),h.onload=i,h.onerror=p,h.ontimeout=d,h.timeout=m,h.send(e)}}function i(){h.status>=200&&h.status<300?y.dispatch():_.dispatch("XHR_Complete:"+h.status)}function d(){_.dispatch("timeout")}function p(){_.dispatch("error:"+h.status)}var h,g=e.url||"",f=e.method||l,v=f===l?o:s,m=e.timeout||5e3,E=e.data,y=new a.utils.Signal,_=new a.utils.Signal,S="XHR"+u++;return{getID:t,load:n,onComplete:y,onError:_,Methods:{GET:l,POST:c}}}function t(t,n){var i=new e(t),r=function(e){d[i.getID()]=void 0,i.onComplete.removeAll(),i.onError.removeAll(),n(e)};return d[i.getID()]=i,i.onComplete.addOnce(r),i.onError.addOnce(r),i.load(),i}function n(e,n){return e.method=l,t(e,n)}function i(e,n){return e.method=c,t(e,n)}var r="Content-Type",o="image/gif",s="application/text",l="get",c="post",u=0;a.utils=a.utils||{},a.utils.ajax=a.utils.ajax||{},a.utils.ajax.XHRRequest=e;var d={};a.utils.ajax.sendGetRequest=n,a.utils.ajax.sendPostRequest=i}();var _=function(){function e(e){t(h.Urls.Logger,e,h.ReportMethods.GIF)}function t(e,t,r){if(!r&&N)return void l(e+"_.gif?"+t);r=r||ne.getReportMethod()||h.ReportMethods.GIF;var o=a.utils.ajax;switch(r){case h.ReportMethods.GIF:i(e,t);break;case h.ReportMethods.GET:o.sendGetRequest({url:e,data:t},n);break;case h.ReportMethods.POST:o.sendPostRequest({url:e,data:t},n)}}function n(e){if(e){var n=new Error("XHRError: "+e);n.name="XHRError: "+e,g.Honeybadger.notify(n,"XHRError_"+e,{content:e}),t(h.Urls.Logger,e,h.ReportMethods.GIF)}}function i(e,t){var n=new Image;n.onload=function(){document.body.removeChild(this)},n.onerror=function(){var e=new Error("Emitter Error Content");e.name="Emitter Error Content",g.Honeybadger.notify(e,"Emitter Error Content",{content:t}),document.body.removeChild(this)},n.src=e+"_.gif?"+t,document.body.appendChild(n)}function r(){var e=N.getItem(P);e=e?JSON.parse(e):[],k=e}function o(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push({owner:i.owner,url:i.url,state:i.state,time:i.time,retry:i.retry})}return t}function s(){clonedList=o(k),N.setItem(P,JSON.stringify(clonedList)),k=null}function l(e){var t={owner:V,url:e,image:null,state:b,time:0,retry:-1};r(),c(t),k.push(t),s()}function c(e){e.image=u(e),e.time=g.getDateNow(),e.retry+=1,e.state=I,document.body.appendChild(e.image)}function u(e){var t=new Image;return t.onload=function(){d(e)},t.onerror=function(){p(e)},t.src=e.url,t}function d(e){r(),v(e),s()}function p(e){var t=new Error("Emitter Error Content");if(t.name="Emitter Error Content",g.Honeybadger.notify(t,"Emitter Error Content",{content:e.url}),e.retry===D)return r(),v(e),void s();var n=e.retry*R;setTimeout(function(){r(),f(e),s()},n)}function f(e){E(e),m(e),c(e),k.push(e)}function v(e){E(e),m(e)}function m(e){for(var t=-1,n=0;n<k.length;n++)e.url===k[n].url&&(t=n);t>-1&&k.splice(t,1)}function E(e){try{document.body.removeChild(e.image)}catch(t){}}function y(){r(),_(),s()}function _(){for(var e,t=0;t<k.length;t++)e=k[t],S(e)&&A(e)}function S(e){if(e.guid===V)return!0;var t=g.getDateNow()-e.time;return t>C?(e.guid=V,e.retry=-1,!0):!1}function A(e){var t=!1;switch(e.state){case b:case w:t=!0;break;case L:v(e);break;case I:var n=g.getDateNow()-e.time;n>T&&(t=!0)}t&&f(e)}var P="_minRTrs",b=0,I=1,w=2,L=3,T=2e4,C=35e3,O=5e3,R=5e3,D=20,V=g.generateUnique(),N=null,k=null,U=null;return N&&(U=new a.utils.Timer(O,y),U.start()),{send:t,sendLog:e}}(),S=function(){function e(e,t){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=i.right>n.right,a=i.left<n.left,s=i.top>=n.bottom,l=i.bottom<=n.top,c={state:r.FULLY_VISIBLE,percentage:1};return s||l?(c.percentage=0,c.state=r.HIDDEN,c):(a?c.percentage=(i.right-n.left)/i.width:o&&(c.percentage=(i.width-(i.right-n.right))/i.width),c.percentage>0&&c.percentage<1?c.state=r.ANALYTICS_VISIBLE:c.percentage<=0?c.state=r.HIDDEN:c.state=r.FULLY_VISIBLE,c.percentage=c.percentage<0?0:100*c.percentage,c)}function t(t,n){if(g.plugins.isPlugin())return{state:r.FULLY_VISIBLE,percentage:100};var i,a=100*o(t);return i=0===a?r.HIDDEN:100===a?r.FULLY_VISIBLE:r.ANALYTICS_VISIBLE,i!==r.HIDDEN&&n?e(t,n):{state:i,percentage:a}}function n(e,n){if(g.plugins.isPlugin())return!0;var i=t(e,n).state;return i!==r.HIDDEN}function i(e,n){return t(e,n).percentage}var r={HIDDEN:0,ANALYTICS_VISIBLE:1,FULLY_VISIBLE:2},o=function(){function e(e){return e&&1===e.nodeType||!1}function t(e){var t=e||window;return{height:t.innerHeight,width:t.innerWidth}}function n(e,t){return(t||window).getComputedStyle(e,null)}function i(e,t){return e.getPropertyValue(t)}function r(t,o){o||(o=n(t));var a=i(o,"display");if("none"===a)return!1;var s=t.parentNode;return e(s)?r(s):!0}function o(e,t){if(e===(t||window).document)return!0;if(!e||!e.parentNode)return!1;var o=n(e,t),a=i(o,"visibility");return"hidden"===a||"collapse"===a?!1:r(e,o)}function a(e,t){return!e||e.width<=0||e.height<=0?!1:e.bottom>0&&e.right>0&&e.top<t.height&&e.left<t.width}return function(e,n){var i=e.getBoundingClientRect(),r=t(n);if(!a(i,r)||!o(e,n))return 0;var s=0,l=0;return i.top>=0?s=Math.min(i.height,r.height-i.top):i.bottom>0&&(s=Math.min(r.height,i.bottom)),i.left>=0?l=Math.min(i.width,r.width-i.left):i.right>0&&(l=Math.min(r.width,i.right)),s*l/(i.height*i.width)}}();return{isElementVisible:n,getViewportState:t,getElementVisiblePercents:i,state:r}}(),A=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,r,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if(o=e({path:"/"},i.defaults,o),"number"==typeof o.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(l){}return r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var p=c[d].split("="),h=p.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var g=p[0].replace(u,decodeURIComponent);if(h=n.read?n.read(h,g):n(h,g)||h.replace(u,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(l){}if(t===g){a=h;break}t||(a[g]=h)}catch(l){}}return a}}return i.setItem=i,i.getItem=function(e){return i(e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.removeItem=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i.isCookiesEnable=function(){var e=!1;try{i.setItem("_minTest","exist"),e=!!i.getItem("_minTest"),i.removeItem("_minTest","true")}catch(t){return!1}return e}(),i}return t(function(){})},P=function(e){function t(t){return i?localStorage:r?sessionStorage:t!==!1&&e.isCookiesEnable?e:null}function n(){return r?sessionStorage:i?localStorage:null}var i=function(){try{localStorage.setItem("_minTest","test value"),localStorage.removeItem("_minTest")}catch(e){return!1}return"undefined"!=typeof Storage}(),r=function(){try{sessionStorage.setItem("_minTest","test value"),sessionStorage.removeItem("_minTest")}catch(e){return!1}return!0}();return{getLocalStorageInstance:t,getSessionStorageInstance:n,isLocalStorageEnable:i,isSessionStorageEnable:r}},b=function(e,t){function n(e){return l[e]}function i(t,n){l[t]=n,l[d]=e.getDateNow(),p.setItem(c,JSON.stringify(l))}function r(t){var n=Math.abs(e.getDateNow()-t);return n>u}function o(){if(p=t.getLocalStorageInstance())if(l=JSON.parse(p.getItem(c)||"{}")){var n=Math.abs(e.getDateNow()-l[d]);n>u&&(p.removeItem(c),a())}else a()}function a(){var t={};t[d]=e.getDateNow(),p.setItem(c,JSON.stringify(t)),l=t}function s(){l={},p.removeItem(c)}var l={},c="minSessionToken",u=18e5,d="__timestamp__",p=null;return{get:n,set:i,isSessionTimeExpired:r,reset:s,init:o}};!function(){var e={};a.utils=a.utils||{},a.utils.DomFinder=e;var t=[];e.AddSpecialElement=function(e){t.push({getPattern:e.getPattern,getElement:e.getElement})},e.getCustomSelectors=function(){return/(:parent|:contentDocument)/},e.getElementToReplace=function(t,n){return e.getElementByType(t,n,h.Selectors.PREVIEW_SELECTOR)},e.setElementAsReplaced=function(e){e.setAttribute("data-apv_replaced","true")},e.getIsElementReplaced=function(e){return"true"===e.getAttribute("data-apv_replaced")},e.getElementByType=function(t,n,i){return n.getSelectorByType(i)?e.getElement_Default(t,n,i):null},e.getElementBySelector=function(t){if(!t)return null;var n=t.split(e.getCustomSelectors());return n.length>1?e.traverse(n.slice(0),document):e.querySelector(t)},e.getElementsClicks=function(t,n,i){for(var r,o,a=n.getSelectorByType(i).split(","),s=[],l=0;l<a.length;l++)r=e.selector(a[l],t),r&&(o=this.getElementBySelector(r),o&&s.push(o));return s.length>0?s:null},e.getElement_Default=function(t,n,i){for(var r,o,a=n.getSelectorByType(i).split(","),s=0;s<a.length;s++)if(r=e.selector(a[s],t),r&&(o=this.getElementBySelector(r)))return o;return null},e.traverse=function(t,n){if(null===n)return null;if(0===t.length)return n;var i=t.shift();if(""===i)return e.traverse(t,n);if(i.match(e.getCustomSelectors()))switch(i){case":parent":n=n.parentNode;break;case":contentDocument":n=n.contentDocument}else n=e.querySelector(i,n);return e.traverse(t,n)},e.querySelector=function(e,t){for(var n=(t||document).querySelectorAll(e),i=0;i<n.length;i++){var r=n[i];if(g.isElementHasSize(r))return r}return null},e.selector=function(e,n){if(!e||!n)return null;for(var i,r,o,a={},s=ne.getVideoDataSearch(),l=0;l<s.length;l++)a[s[l]]=n.getOriginData()[s[l]];for(var c in a){for(i=new RegExp("{"+c+"}","g"),r=0;r<t.length;r++)o=t[r],e.indexOf(o.getPattern())>-1&&(e=e.replace(i,o.getElement(a[c])));e=e.replace(i,a[c])}for(r=0;r<t.length;r++)o=t[r],e.indexOf(o.getPattern())>-1&&(e=e.replace(o.getPattern(),""));return e},e.changeSelectorAttributes=function(e,t){if(!e||arguments.length<=1)return e;for(var n,i=ne.getVideoDataSearch(),r=0;r<i.length;r++){var o=i[r];n=new RegExp("{"+o+"}"),e=e.replace(n,t)}return e},e.getLinkElement=function(e,t){for(var n=document.querySelectorAll(t),i=0;i<n.length;i++){var r=n[i];if(r.contains(e))return r}return null},e.getLinkElementFromContainer=function(e,t,n,i){return e.contains(t)||i.doesContainsIframe()?e.querySelector(n):void 0},e.getAttrBySelector=function(e){var t=/(?:\[([^=*$]+)[=*$]+'\{[^}]+}'])/gi,n=/^\[([^=*$]+)[^\n]+$/,i=e.match(t);return i&&0!==i.length?i[0].match(n)[1]:null}}();var I=function(e,t,n,i){function r(){t.parent.postMessage(o(),"*")}function o(){return JSON.stringify({origin:v,type:E.DATA_REQUEST,window_origin:t.location.origin})}function a(t){var n=d(t.data);n.type==E.DATA_REQUEST&&(e.log("got request from post message: "+t.data),s())}function s(){for(var t=e.plugins.getIframeWindows(),n=0;n<t.length;n++)t[n].postMessage(l(),"*")}function l(){return JSON.stringify({origin:v,type:E.DATA_RESPONSE,isTestGroup:m,window_origin:t.location.origin,href:t.location.href})}function c(){n||t.addEventListener("message",a)}function u(e){m=e,n?r():s()}function d(e){try{var t=JSON.parse(e);if(t.origin===v)return t}catch(n){}return{type:E.INVALID}}function p(e,t){var n=d(e.data);n.type==E.DATA_RESPONSE&&t(n)}function h(e){t.addEventListener("message",function(t){var n=d(t.data);n.type==E.MINUTE_REQUEST_FROM_IFRAME&&e(n)})}function g(e,t){e.addEventListener("message",function(e){p(e,t)})}function f(n){var i={origin:v,type:E.MINUTE_REQUEST_FROM_IFRAME,window_origin:t.location.origin};e.extend(i,n),e.log("********* sendToParent "+JSON.stringify(i)),t.parent.postMessage(JSON.stringify(i),"*")}var v="minute",m=null,E={DATA_REQUEST:"minuteDataRequest",DATA_RESPONSE:"minuteDataResponse",INVALID:"invalid",MINUTE_REQUEST_FROM_IFRAME:"minuteRequestFromIFrame"};return{broadcast:u,listen:c,addPostMessageListener:g,DataTypes:E,sendToParent:f,addParentListener:h}};!function(){function e(e,t,n){function i(){f||(f=new a.utils.Timer(d,o),f.setCounterLimit(u)),v=null,o(),f.start(),f.reset()}function r(){f.kill(),f=null,p.removeAll(),p=null,c=null}function o(){var e=g.extractElementSize(c);if(!e.error)return v?void(v.width!==e.width||v.height!==e.height?(v=e,f.reset(),p.dispatch()):f.getCounter()>=u&&h.dispatch()):void(v=e)}function s(){return p.add.bind(p)}function l(){return h}var c=e,u=t,d=n,p=new a.utils.Signal,h=new a.utils.Signal,f=null,v=null;return{start:i,addSizeChangedListener:s,addSizeChangeFailedListener:l,dispose:r}}a.utils=a.utils||{},a.utils.ElementSizeTracer=e}();var w=function(e,t,n){function i(e){var t,n,i=e.compatibility;switch(typeof i){case"undefined":return;case"string":i=JSON.parse(i)}w?(t=i.mobile||{},n=i.os||{},O.overrideObjectItems(n,C)):t=i.desktop||{},O.overrideObjectItems(t,T)}function r(){var e=D.match(/android\s*(\d+\.?\d*\.?\d*)/i);return e&&2===e.length?n.convertVersionToNumbers(e[1].split(".")):null}function o(e,t,n,i){var r=null;if(n&&e.match(n))return r;i=i||2;var o=e.match(t);return o&&(r=parseInt(o[i],10)),r}function a(e){return{firefox:function(){return o(e,/mozilla\/[\w\.]+.+rv\:.+gecko\/\d+.+(firefox)\/([\w\.]+)/i,V)},edge:function(){return o(e,/(edge)\/((\d+)?[\w\.]+)/i,V)},chrome:function(){return o(e,/(chrome)\/v?([\w\.]+)/i,V)},msie:function(){var t=o(e,/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i),n=o(e,/(?:ms|\()(ie)\s([\w\.]+)/i);return t||n},safari:function(){return o(e,/version\/([\w\.]+).+?(mobile\s?safari|safari)/i,V,1)},crios:function(){return o(e,/(CriOS)\/v?([\w\.]+)/i,V,2)}}}function s(){var e,t=/(?:iPhone|iPod|iPad)/i;return t.test(D)?(e=D.match(/OS (\d+)_(\d+)_?(\d+)?/i),e?n.convertVersionToNumbers(e.slice(1,3)):null):null}function l(){var e,t;if(!w)return!1;if(e=r())return t=N.chrome(),P=t>=T.chrome||n.compare(e,C.android)>=0?t:0,A="chrome",b=T.chrome,!0;if(e=s()){var i=n.compare(e,C.ios)>=0;if(i){var o=N.crios();return o?(P=o,b=T.crios,A="crios"):(P=e[0],A="safari",b=T.safari),!0}}return!1}function c(){var e;for(var t in T)if(N[t]){if(e=N[t]())return P=e,A=t,b=T[t],!0}else O.log("Can't find vendor '"+t+"' version function in comparability");return!1}function u(e){for(var t,n=e.userAgentDebug||[],i=0;i<n.length;i++)if(t=new RegExp(n[i],"i"),t.test(D))return void(L=!0);L=!1}function d(){"boolean"!=typeof w&&(w=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(D)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(D.substr(0,4)))}function p(e){i(e);var t=l();t||c(),u(e)}function h(){if(b>P)return!1;if(w){var e=r();if(e)return n.compare(e,C.android)>=0;if(e=s())return n.compare(e,C.ios)>=0}return!0}function g(){return/^((?!chrome|android|crios).)*(safari|iphone|ipad)/i.test(D)}function f(){return k}function v(){return U}function m(){if("undefined"!=typeof I)return I;var e={firefox:36,safari:7.1,chrome:31,crios:99};return I=!!e[A]&&P>=e[A]}function E(){return L}function y(){return!k&&!U}function _(e){if(!e||!e.desktop)return!0;var t;for(var n in e.desktop)if(N[n]&&(t=N[n]()))return t>=e.desktop[n];return!0}function S(){return w}var A,P,b,I,w,L,T={firefox:34,msie:9,edge:12,chrome:31,safari:9,crios:40},C={android:[4,4,4],ios:[9,0,0]},O=e,R=t,D=(R.userAgent||"").toLowerCase(),V=/opr|opera|Yandex|SeaMonkey|Maxthon|Avant|Deepnet|Comodo_Dragon|Dooble|Palemoon|Flock/i;d();var N=a(D),k=!!N.msie(),U=!!N.edge();return{init:p,isBrowserSupported:h,isSafari:g,isIE:f,isEdge:v,isObjectFitSupported:m,isUserAgentDebug:E,isScraperEnabled:y,checkPlacement:_,isMobile:S}},L=function(e,t,n){function i(e,t,n,i,o){be=e,De=n,Ie=i,we=o,Le=t,Te=!0,Ae="true"===be.enableMobile||be.enableMobile===!0,r()}function r(){"undefined"==typeof be.disableMobileScrap?be.disableMobileScrap=!0:Pe=be.disableMobileScrap=be.disableMobileScrap===!0||"true"==be.disableMobileScrap,Le.isMobile()?be.playMode=h.config.PlayModes.Viewport:be.playMode=be.playMode||h.config.PlayModes.Viewport,be.forceFlushAnalytics="undefined"==typeof be.forceFlushAnalytics||t.parseBool(be.forceFlushAnalytics),"undefined"!=typeof be.allowedAnalytics&&(Re=100*Math.random()<parseInt(be.allowedAnalytics)),be.urlStruct=be.urlStruct||[h.UrlStructure.Origin,h.UrlStructure.PathName],be.numberOfLoops=parseInt(be.numOfLoops||"0",10),be.enableOptimizely=t.parseBool(be.enableOptimizely),be.enableSprite=t.parseBool(be.enableSprite),o(),v(),s(),be.videoDataSearch=be.videoDataSearch||["articleUrl","videoId"],u(),l(),d(),p(),g(),f()}function o(){if(void 0!==Ie&&(be.disableScript=Ie),void 0===be.disableScript||be.disableScript===!1||"false"===be.disableScript)be.disableScript=!1;else if(be.disableScript===!0||"true"===be.disableScript)be.disableScript=!0;else{var e=parseInt(be.disableScript,10);be.disableScript=100*Math.random()<e}}function s(){be.window=be.window||{},be.window.intervals=be.window.intervals||{},Se=be.window.loadTimeout?parseInt(be.window.loadTimeout,10):2e4,be.window.topWindowReferrer=be.window.topWindowReferrer||!1}function l(){c(),t.isArray(be.pageFilterBlackList)?be.filter.scraper.black=be.pageFilterBlackList:"string"==typeof be.pageFilterBlackList&&be.filter.scraper.black.push(be.pageFilterBlackList),t.isArray(be.pageFilter)?be.filter.scraper.white=be.pageFilter:"string"==typeof be.pageFilter&&be.filter.scraper.white.push(be.pageFilter)}function c(){be.filters&&(be.filter=be.filters),be.filter&&(be.filter.mobile&&Le.isMobile()?be.filter=be.filter.mobile:be.filter.desktop&&!Le.isMobile()&&(be.filter=be.filter.desktop)),be.filter=be.filter||{},be.filter.scraper=be.filter.scraper||{},be.filter.scraper.white=be.filter.scraper.white||[],be.filter.scraper.black=be.filter.scraper.black||[],be.filter.placements=be.filter.placements||{},be.filter.placements.white=be.filter.placements.white||[],be.filter.placements.black=be.filter.placements.black||[],be.filter.blocking=be.filter.blocking||{},be.filter.blocking.white=be.filter.blocking.white||[],be.filter.blocking.black=be.filter.blocking.black||[]}function u(){var e=be.rezList||["s","m","l","xl"],t=function(t){for(var n,i={},r=0;r<e.length;r++)n=t[e[r]],n&&(i[e[r]]=n);return i};be.rezGif||(be.rezGif={s:50,m:100,l:150}),be.rezVideo||(be.rezVideo={s:100,m:200,l:300}),be.rezSprite||(be.rezSprite={s:100,m:200,l:300,xl:400}),be.rezGif=t(be.rezGif),be.rezVideo=t(be.rezVideo),be.rezSprite=t(be.rezSprite)}function d(){be.scraper=be.scraper||{},be.scraper.checkInternal=parseInt(be.scraper.checkInternal||"5000"),be.scraper.maxCheckCount=parseInt(be.scraper.maxCheckCount||"0"),be.scraper.maxFound=parseInt(be.scraper.maxFound||"1"),be.scraper.eventsInternal=parseInt(be.scraper.eventsInternal||"250"),be.scraper.players?t.isArray||(be.scraper.players=[be.scraper.players]):be.scraper.players=[]}function p(){be.pollVisibility=parseInt(be.pollVisibility||"0",10),be.viewportAnalytics=be.viewportAnalytics||{},be.viewportAnalytics.percentage=parseInt(be.viewportAnalytics.percentage||"50",10),n.isTestGroup()?be.viewportAnalytics.timeSpan=1:be.viewportAnalytics.timeSpan=parseInt(be.viewportAnalytics.timeSpan||"3000",10)}function g(){be.viewport=be.viewport||{},be.viewport.percentage=parseInt(be.viewport.percentage||"1",10)}function f(){be.effects=be.effects||{},be.effects.apvShowDelay=parseInt(be.effects.apvShowDelay||"500",10),be.effects.apvTransitionVideo=be.effects.apvTransitionVideo||"opacity 0.5s ease-out",be.effects.apvTransitionLogo=be.effects.apvTransitionLogo||"opacity 0.5s ease-out"}function v(){be.placementService=be.placementService||{},be.placementService.wrapperCenterElement=be.placementService.wrapperCenterElement===!0||"true"===be.placementService.wrapperCenterElement,be.placementService.baseHeightPercent=parseFloat(be.placementService.baseHeightPercent||.5),be.placementService.baseThumbPx=parseInt(be.placementService.baseThumbPx||250),be.placementService.domRefresh=parseInt(be.placementService.domRefresh||5e3),void 0!==we?be.placementService.enableBlockingDistance=we:be.placementService.enableBlockingDistance=be.placementService.enableBlockingDistance===!0||"true"===be.placementService.enableBlockingDistance,void 0!==we?be.placementService.debug="true"==we:"production"!==De?be.placementService.debug=be.placementService.debug===!0||"true"===be.placementService.debug:be.placementService.debug=!1,be.placementService.naRankPercent=parseInt(be.placementService.naRankPercent||80)}function m(){return be.playerIdPattern||be.brightcovePlayerPattern}function E(){return be.trackingFunnel}function y(){return Te}function _(){return Oe}function S(){return be.filter.scraper}function A(){return be.filter.placements}function P(){return be.filter.blocking}function b(){return be.window.scrollElement?document.querySelector(be.window.scrollElement):null}function I(){return be.window.intervals}function w(){return Se}function L(){return be.window.topWindowReferrer}function T(){return be.rezVideo}function C(){return be.rezGif}function O(){return be.rezSprite}function R(){return Ae}function D(){return Pe}function V(){return"true"===be.disableScript||be.disableScript===!0}function N(){return be.forceFlushAnalytics}function k(){return Ce?Ce:Ce=be.activePlayers&&t.isArray(be.activePlayers)?be.activePlayers:t.flags.isNewScraper()?a.scrap.ScrapEnumAll:h.Scraper.ALL_PLAYERS}function U(){return be.scraper.checkInternal}function M(){return be.scraper.maxCheckCount}function x(){return be.scraper.maxFound}function B(){return be.scraper.eventsInternal}function F(e){for(var t=be.scraper.players,n=0;n<t.length;n++)if(t[n].id===e)return JSON.parse(JSON.stringify(t[n]));return{id:e}}function H(){return be.placementService.naRankPercent}function W(){return be.pollVisibility}function z(){return be.viewportAnalytics.percentage}function G(){return be.viewportAnalytics.timeSpan}function Y(){return be.viewport.percentage}function j(){return be.placementService.baseHeightPercent<=10&&(be.placementService.baseHeightPercent=window.innerHeight*be.placementService.baseHeightPercent),be.placementService.baseHeightPercent}function q(){return be.placementService.debug}function K(){return be.placementService.wrapperCenterElement}function J(){return be.placementService.baseThumbPx}function X(){return be.playMode}function Z(){return Re}function Q(){return be.enableOptimizely}function $(){return be.urlStruct}function ee(){
return be.referrers||be.referrer||[]}function te(){return be.placementService.domRefresh}function ne(){var e=t.isCurrentUrlFilterValid(be.filter.blocking);return be.placementService.enableBlockingDistance&&e}function ie(){return be.videoDataSearch}function re(){return void 0!==e.test?parseInt(e.test):parseInt(be.testGroupSize||"10")}function oe(){return be.effects.apvShowDelay}function ae(){return be.effects.apvTransitionVideo}function se(){return be.effects.apvTransitionLogo}function le(){return t.parseBool(be.newScrap)}function ce(){return be.enableSprite}function ue(){return be.apvSpriteDomain||null}function de(){return be.numberOfLoops}function pe(){return be.playerSelector}function he(){return"undefined"==typeof be.overrideAllPlacements?!0:t.parseBool(be.overrideAllPlacements)}function ge(){return"undefined"==typeof be.cookieDomain?!1:!0}function fe(){return be.cookieDomain}function ve(){return be.minimumVer?be.minimumVer:"0"}function me(){return be.reportMethod}function Ee(){return be.placements||{}}function ye(){return be.mobile_placements||{}}function _e(){return be.tooltip||"Optimized by minute.ly"}var Se,Ae=!1,Pe=!0,be={},Ie=null,we=null,Le=null,Te=!1,Ce=null,Oe=e._publisher,Re=!0,De=null;return{init:i,isReady:y,getPublisherId:_,isMobileEnabled:R,isDisableMobileScrap:D,isDisableScript:V,getWindowLoadTimeout:w,getFilterScraper:S,getFilterPlacements:A,getFilterBlocking:P,getWindowScrollElement:b,getWindowIntervals:I,getIsTopWindowReferrerEnabled:L,getRezVideo:T,getRezGif:C,getRezSprite:O,isForceFlushAnalytics:N,getActivePlayers:k,getScraperInternal:U,getScraperMaxCheckCount:M,getScraperMaxFound:x,getScraperEventsInternal:B,getScraperPlayerById:F,getVideoNaRankPercent:H,getViewportAnalyticsPercentage:z,getViewportAnalyticsTimeSpan:G,getViewportPercentage:Y,getBaseHeightPercent:j,isPlacementsDebugEnabled:q,isWrapperCenterElement:K,getPollVisibility:W,getDefaultPlayMode:X,getBaseThumbPx:J,getIsAnalyticsEnabled:Z,getIsOptimizelyEnabled:Q,getUrlStructure:$,getReferrers:ee,getPlacementDomRefresh:te,isBlockingDistanceEnabled:ne,getPlayerIdPattern:m,getVideoDataSearch:ie,getTestGroupSize:re,getEffectApvShowDelay:oe,getEffectApvTransitionVideo:ae,getEffectApvTransitionLogo:se,getTrackingFunnel:E,isEnableNewScrapper:le,isSpriteEnabled:ce,getApvSpriteDomain:ue,getNumberOfLoops:de,getPlayerSelector:pe,isOverrideAllPlacements:he,isCookieDomain:ge,getCookieDomain:fe,getMinimumVer:ve,getReportMethod:me,getPlacements:Ee,getMobilePlacements:ye,getTooltip:_e}},T=function(e,t,n){function i(n,i){function r(){O=parseInt(G.id),R=G.videoId;var e=t.isMobileEnabled()&&o.isMobile();V=e?!1:G.doesCollect===!0||"true"===G.doesCollect,D=parseInt(G.minVidId),N=G.videoUrl,k=G.videoRatio?parseFloat(G.videoRatio):0,U=G.hltId?parseInt(G.hltId):null,M=G.articleUrl,x=G.force===!0||"true"===G.force,a(),N?B="undefined"!=typeof G.rank?parseInt(G.rank):t.getVideoNaRankPercent():(x=!1,B=0)}function a(){if(!G.sprite)return void(H=null);if(H=e.isArray(G.sprite)?G.sprite:G.sprite.split(",").map(function(e){return parseInt(e,10)}),0===H.length)return void(H=null);for(var t=0;t<H.length;t++)if(0===H[t])return void(H=null);W=G.spriteFPS||16,z=G.spriteCols||5}function s(){return O}function l(){return!!N}function c(){return Y}function u(){return j}function d(){return M}function p(){return V}function h(){return R}function g(){return D}function f(){return U}function v(){return N}function m(){return k}function E(){return x}function y(){return B}function _(e){B=e}function S(){return n}function A(e){F=e}function P(){return F}function b(e){return G[e]}function I(){return!(!U||!N)}function w(){return H&&H.length>0}function L(){return H}function T(){return W}function C(){return z}var O,R,D,V,N,k,U,M,x,B,F,H,W,z,G=n,Y=i||o.isMobile(),j=!0;return r(),{getId:s,getArticleUrl:d,getDoesCollect:p,getPublisherVideoId:h,getVideoDBId:g,getHighlightId:f,getAPVUrl:v,getVideoRatio:m,isForcePlacement:E,getRank:y,setRank:_,getOriginData:S,hasAPV:l,setAbsoluteCenter:A,getAbsoluteCenter:P,getValueByKey:b,isApvEnabled:I,hasSprite:w,getSpritesFrames:L,getSpritesFPS:T,getSpritesCols:C,shouldPlayRegular:c,shouldPlayInArticle:u}}function r(e,t){return new i(e,t)}var o=n;return{create:r}},C=function(t,n,i,r){function o(e,t,n){e[t]?e[t].push(n):e[t]=[n]}function a(e){L.push(e),o(C,e.getArticleUrl(),e),o(C,e.getPublisherVideoId(),e)}function s(e,t){for(var n,i,o=0;o<e.length;o++)i=e[o],n=r.create(i,t),a(n)}function l(t){S=t.videos||[],A=t.inArticle||[],P=e.debugParams[f.ACTIVE_ALL]||e.debugParams[f.MINUTE_UI_TEST],s(S,!0),s(A,!1),d()}function c(){return w!==b}function u(){return P}function d(){for(var e,t=0,i=0,r=0;r<L.length;r++){var o=L[r];o.getRank()===I||o.isForcePlacement()||(t+=o.getRank(),i++)}e=t/i*(n.getVideoNaRankPercent()/100);for(var r=0;r<L.length;r++){var o=L[r];o.getRank()!==I||o.isForcePlacement()||o.setRank(e)}}function p(){return L}function g(){return L.length}function v(e){return L[e]}function m(){return T}function E(){T++}function y(e,n){if(P)return _(e,n);var i=C[e];if(i){var r=t.urls.getStructuredByUrl(D.getWindowLocationHref()),o=t.urls.removeOrigin(r);if(1==i.length){if(!n||n.getPlayMode()!=h.config.PlayModes.InArticle)return i[0];var a=i[0].getArticleUrl()==o;if(!n.shouldInArticleMatchUrl())return i[0];if(n.shouldInArticleMatchUrl()&&a)return i[0]}for(var s=0;s<i.length;s++)if(i[s].getArticleUrl()==o)return i[s]}}function _(e,t){var n=e+t.getName(),i=e.indexOf("/")>-1;if(!O[n]){var o={id:Math.floor(1e8*Math.random()+1),videoId:e,doesCollect:!1,videoUrl:"apv-static.minute.ly/videos/v-5e58bd81-5a30-4cc5-29911-86fe-f9c941bb412b-s61-65",articleUrl:i?e:"articleUrl",rank:0,hltId:Math.floor(1e8*Math.random()+1),videoRatio:1.78};O[n]=r.create(o,!0)}return O[n]}var S,A,P,b=-2,I=-999,w=b,L=[],T=0,C={},O={};return{init:l,isDebug:c,isActiveAll:u,getVideoList:p,getVideosCount:g,getByIndex:v,getApvCounter:m,increaseApvCounter:E,getVideoDataByKey:y}},O=function(e,t){function n(t,n){function i(){var e={};return e.styleOverrides={},e}function a(){for(var e=0;e<ae.length;e++){var t=ae[e];re.styleOverrides[t]=re.styleOverrides[t]||{active:{}}}}function s(){for(var e=0;e<ae.length;e++){var t=ae[e];if(!re.styleOverrides[t].active){re.styleOverrides[t].active=r.cloneObject(re.styleOverrides[t]);var n=Object.keys(re.styleOverrides[t].active);n.forEach(function(e){delete re.styleOverrides[t][e]})}}}function l(){re.styleOverrides=r.extentObject(re.styleOverrides,r.cloneObject(oe.styleOverrides)),a(),s(),re.domAdapter=re.domAdapter||oe.domAdapter,re.domAdapterSprite=re.domAdapterSprite||oe.domAdapterSprite,re.logoType=re.logoType||oe.logoType,re.lazyBackgroundSrc=re.lazyBackgroundSrc||oe.lazyBackgroundSrc,re.containerIndexLocation=re.containerIndexLocation||oe.containerIndexLocation,re.apvOrigin=re.apvOrigin||oe.apvOrigin,re.pollVisibility=re.pollVisibility||oe.pollVisibility,re.compatibility=re.compatibility||oe.compatibility,re.playMode=re.playMode||oe.playMode||o.getDefaultPlayMode(),re.observerSelectorTimeout=re.observerSelectorTimeout||oe.observerSelectorTimeout||500,re.safariWebkitFix=r.parseBool(re.safariWebkitFix),re.enableSprite=e.parseBool(re.enableSprite),re.noClone=re.noClone||oe.noClone||!1,re.hasContainerOverlay=!(!re.containerOverlay&&!oe.containerOverlay),re.containerOverlay=re.containerOverlay||oe.containerOverlay||"none",re.isSingleClick=re.isSingleClick||r.getProductByPlayMode(re.playMode)===h.Emitter.PRODUCT_IN_ARTICLE,re.isAttributeUrl=void 0===re.isAttributeUrl||"true"===re.isAttributeUrl||re.isAttributeUrl===!0,re.isForceFlush=r.parseBool(re.isForceFlush),re.sizeObserveEcho=parseInt(re.sizeObserveEcho||"0",10),re.sizeObserveDelay=parseInt(re.sizeObserveDelay||"500",10)}function c(e){return u(e).styles}function u(e){if(!e)return r.logWarning("No type was sent for style overrides"),{};var t,n=re.styleOverrides[e];if(n){var i=Object.keys(n);"MimicInheritETRClasses"===re.domAdapter&&-1===i.indexOf(h.DEFAULT_MEDIAQUERY)&&r.logWarning("Make sure you set 'active' and sizes for different page media queries")}for(var o=h.DEFAULT_MEDIAQUERY,i=Object.keys(n),a=0;a<i.length;a++)if(i[a]!==h.DEFAULT_MEDIAQUERY){var s=parseInt(i[a]);s>window.innerWidth&&(o===h.DEFAULT_MEDIAQUERY||s<=parseInt(o))&&(o=i[a])}return t={size:o,styles:n[o]||{}}}function d(){return re.id}function p(){return re.selectors.preview}function g(){return re.selectors.link}function f(){return re.selectors.click}function v(){return re.selectors.hover}function m(){return re.selectors.carousel}function E(){return re.selectors.container}function y(){return re.selectors.observer}function _(){return re.selectors.indicators.placement}function S(){return re.selectors.indicators.linkElement}function A(){return re.priority}function P(){return re.name}function b(){return c(h.styleOverrides.CONTAINER)}function I(){return c(h.styleOverrides.APV)}function w(){return c(h.styleOverrides.CLONE)}function L(){return c(h.styleOverrides.ELEMENT_TO_REPLACE)}function T(){return c(h.styleOverrides.LOGO)}function C(){return re.domAdapter}function O(){return re.domAdapterSprite}function R(){return re.playMode}function D(){return re.logoType}function V(){return re.lazyBackgroundSrc}function N(){return re.containerIndexLocation}function k(){return re.apvOrigin}function U(){return re.pollVisibility}function M(){return re.compatibility}function x(){return re.isSingleClick}function B(){return re.isAttributeUrl}function F(){return!!re.selectors.indicators.placement}function H(e){return re.selectors[e]}function W(){return re.observerSelectorTimeout}function z(){return re.svgStyle}function G(){return re.safariWebkitFix}function Y(){return re.enableSprite}function j(){return re.additionalResizeEcho&&re.additionalResizeEcho.echoTime||0}function q(){return re.additionalResizeEcho&&re.additionalResizeEcho.echoRepeat||0}function K(){return re}function J(){return re.minuteLocation}function X(){return re.isForceFlush}function Z(){return re.noClone}function Q(){return re.hasContainerOverlay}function $(){return re.containerOverlay}function ee(){return re.sizeObserveEcho}function te(){return re.sizeObserveDelay}function ne(){var e=/.*'{(.*)}'.*/,t=re.selectors.preview.replace(e,"$1");return"videoId"==t}function ie(){return re.selectors.preview.indexOf(":contentDocument")>-1}var re=t,oe=n||i(),ae=["container","apv","clone","logo","elementToReplace"];return l(),{getPlacementId:d,getPreviewSelector:p,getLinkSelector:g,getClickSelector:f,getHoverSelector:v,getCarouselSelector:m,getContainerSelector:E,getObserverSelector:y,getIndicatorPlacement:_,getIndicatorLink:S,getContainerStyleOverride:b,getApvStyleOverride:I,getCloneStyleOverride:w,getElementToReplaceStyleOverride:L,getLogoStyleOverride:T,getPriority:A,getName:P,getDomAdapter:C,getDomAdapterSprite:O,getPlayMode:R,getLogoType:D,getLazyBackgroundSrc:V,getContainerIndexLocation:N,getApvOrigin:k,getPollVisibility:U,getCompatibility:M,getIsSingleClick:x,getIsAttributeUrl:B,hasIndicators:F,getSelectorByType:H,getActiveOverridesWithSize:u,getObserverSelectorTimeout:W,getSvgStyle:z,getSafariWebkitFix:G,isSpriteEnabled:Y,getAdditionalEchoTime:j,getAdditionalEchoRepeat:q,getPlacementDataForPrint:K,getMinuteLocation:J,getIsForceFlush:X,getNoClone:Z,hasContainerOverlay:Q,getContainerOverlayType:$,getSizeObserveEcho:ee,getSizeObserveDelay:te,shouldInArticleMatchUrl:ne,doesContainsIframe:ie}}function i(e,t){return new n(e,t)}var r=e,o=t;return{create:i}},R=function(e,t,n){function i(e){delete e.linkSelector,delete e.clickSelector,delete e.hoverSelector,delete e.carouselSelector,delete e.containerSelector,delete e.observerSelector,delete e.previewSelector,delete e.virtualClick,delete e.containerOverrides,delete e.apvStyleOverrides,delete e.cloneOverrides,delete e.elementToReplaceStyle,delete e.logoStyle,delete e.containerOverrides,delete e.elementToReplaceStyle,delete e.apvStyleOverrides,delete e.cloneOverrides,delete e.logoStyle}function r(){for(var e=0;e<E.length;e++){var t=E[e];t.selectors||(t.selectors={preview:t.previewSelector,link:t.linkSelector,click:t.clickSelector,hover:t.hoverSelector,carousel:t.carouselSelector,container:t.containerSelector,observer:t.observerSelector,virtualClick:t.virtualClick}),t.selectors.indicators||(t.indicators||(t.indicators={},t.indicators.placement=null,t.indicators.linkElement=null),t.selectors.indicators={placement:t.indicators.placement,linkElement:t.indicators.linkElement}),t.styleOverrides||(t.styleOverrides={container:t.containerOverrides,apv:t.apvStyleOverrides,clone:t.cloneOverrides,logo:t.logoStyle,elementToReplace:t.elementToReplaceStyle}),t.priority=S--,"AppendToElement"===t.domAdapter&&(t.minuteLocation=h.PlacementKeys.CHILD),i(t)}}function o(){for(var e,t=0;t<m.length;t++)e=m[t],e.parentId?(e.parentId=parseInt(e.parentId),_.push(e)):(e.inheritId&&(e.inheritId=parseInt(e.inheritId)),E.push(e))}function a(e){var t=e[h.PlacementKeys.COMPATIBILITY];return!(t&&!v.checkPlacement(t))}function s(e){if(e.inheritId){for(var t=0;t<_.length;t++){var n=_[t];if(n.parentId===e.inheritId)return n}g.log("No parent with parentId "+e.inheritId+" was found to be inherit from placement: "+e.name)}}function l(e){for(var t=e.getPlacements(),n=e.getMobilePlacements(),i=0;i<n.length;i++){for(var r=!1,o=0;o<t.length;o++)if(t[o].name==n[i].name){t[o]=n[i],r=!0;break}r||t.push(n[i])}return t}function c(e){var t,n,i=e.isMobileEnabled()&&v.isMobile();if(m=e.getPlacements()||[],i&&(m=e.isOverrideAllPlacements()?e.getMobilePlacements()||m:l(e)),0===m.length&&g.log("Configuration has NO PLACEMENTS!"),m.length){o(),r();for(var c=0;c<E.length;c++)n=E[c],a(n)&&(t=s(n),n.id="p"+y.length,y.push(f.create(n,t)))}}function u(){return y}function d(e){return y[e]}function p(){for(var e=[],t=0;t<y.length;t++){var n=y[t];e.push(n.getPlacementDataForPrint())}return e}var g=e,f=t,v=n,m=[],E=[],y=[],_=[],S=100;return{init:c,getAllPlacements:u,getAllPlacementsAsObject:p,getPlacementById:d}},D=function(){function e(){s(),l(),p(),r(),n()}function t(){return A}function n(){g.plugins.isPlugin()?ee.addPostMessageListener(window,i.bind(this)):A=!0}function i(e){P||(g.log("got window location message. href="+e.href),v=e.href,A=!0,Y.dispatchEvent(h.Events.WINDOW_SERVICE_READY),P=!0)}function r(){ne.getPollVisibility()&&setInterval(function(){d(h.Events.DomWindow.CHECK_VISIBILITY),(_!==window.innerWidth||S!==window.innerHeight)&&(_=window.innerWidth,S=window.innerHeight,d(h.Events.DomWindow.RESIZE))},ne.getPollVisibility())}function o(e,t){var n=new a.utils.Debounce(t,d,null,e);n.enableFilter(),c(h.config.WindowIntervals.ECHO_TIME)&&n.setEcho(c(h.config.WindowIntervals.ECHO_TIME),c(h.config.WindowIntervals.ECHO_REPEAT)),window.addEventListener(e,function(e){n.start()})}function s(){E=c(h.config.WindowIntervals.RESIZE)||E,o(h.Events.DomWindow.RESIZE,E)}function l(){var e=ne.getWindowScrollElement();m=c(h.config.WindowIntervals.SCROLL)||m,e?u(e):o(h.Events.DomWindow.SCROLL,m)}function c(e){var t=ne.getWindowIntervals()[e];return t?parseInt(t,10):null}function u(e){var t=0,n=5,i=200,r=0,o=setInterval(function(){return t++,t>=n?(clearInterval(o),void(o=0)):e?(setInterval(function(){e.scrollTop!==r&&(r=e.scrollTop,d(h.Events.DomWindow.SCROLL))},m),clearInterval(o),void(o=0)):void g.log("Attempt "+t+": No Scroll Element found!")},i)}function d(e,t){Y.dispatchEvent(e,!!t)}function p(){y=c(h.config.WindowIntervals.URL)||y,y>0&&(v=window.location.href,setInterval(function(){v!==window.location.href&&(v=window.location.href,d(h.Events.DomWindow.URL_CHANGE))},y))}function f(){return v?v:window.location.href}var v,m=100,E=50,y=0,_=0,S=0,A=!1,P=!1;return{init:e,getWindowLocationHref:f,isReady:t}}(),V=function(e,t){function n(t){e.sendLoggerReport(u+":"+t)}function i(){return d.getItem(l)||null}function r(e){d.setItem(l,e||"")}function o(e,t){var n=i();t&&n.indexOf(e)>-1||(n&&n.length>0?n+=",":n=u+":",n+=e,r(n))}function a(){var t=i();t&&t.length>0&&(e.sendLoggerReport(t),d.removeItem(l))}function s(e){return e?(u=c+e,d?(a(),{add:o,flush:a,forceFlush:n}):{add:function(){},flush:function(){},forceFlush:n}):{add:function(){},flush:function(){},forceFlush:function(){}}}var l="_minFlow",c="Flow",u=null,d=t.getLocalStorageInstance();return{get:s}},N=function(e,t,n,i,r,o){function a(){return Math.floor(100*Math.random()+1)<=I}function s(){if(100===I)return!0;var e=100*I/(100-I);return 100*Math.random()<=e}function l(){var t="undefined"!=typeof o;if(t){if("clear"!==o)return S="true"==o,n.set(E,!0),c(s,y),void e.log("Force test group: "+S);e.log("Force RESET test group"),n.reset()}else;S=c(a,E),A=c(s,y),P||(e.log("** Is Test Group: "+S),P=!0)}function c(e,t){var i=n.get(t);return void 0===i&&(i=e(),n.set(t,i)),i}function u(n,r){I=n,w=r,w?(b=_.PENDING,e.log("** Snippet is plugin."),i.addPostMessageListener(t,d)):(b=_.READY,l())}function d(t){b!=_.READY&&(e.log("plugin got message!"),S=Boolean(t.isTestGroup),b=_.READY,e.log("dispatching consts.Events.TEST_MODE_READY so the script can move on"),e.log("*** _isTestGroup:"+S),r.dispatchEvent(h.Events.TEST_MODE_READY,{isTestGroup:S}))}function p(){return b===_.READY}function g(){return S}function f(){return A}function v(){return S===!0?"1":"0"}function m(){S=null,A=null,P=!1,b=_.NONE,I=null,w=null,n.reset()}var E="_minTestModeEnabled",y="_minSubTestMode",_={NONE:0,PENDING:1,READY:2},S=null,A=null,P=!1,b=_.NONE,I=null,w=null;return{init:u,isReady:p,isTestGroup:g,getSubTestGroup:f,getGroupCode:v,reset:m}},U=function(e,t,n){function i(){return{time:e.getDateNow(),list:[]}}function r(){g=t.getLocalStorageInstance(),h=i(),a(),(void 0===h.list||0===h.list.length||n.isSessionTimeExpired(h.time))&&(h=i(),o())}function o(){var t;h.time=e.getDateNow(),d.test(h.time)||(h.time=(new Date).getTime()),t=JSON.stringify(h),t=t.replace(/"/g,""),g.setItem(p,t)}function a(){if(g){var e=g.getItem(p);h=e&&u.test(e)?s(e):h||i()}}function s(e){var t,n=e.replace("time:",'"time":').replace("list:",'"list":');return-1===n.indexOf("[]")&&(n=n.replace("[",'["').replace("]",'"]'),t=n.split("["),t[1]=t[1].replace(/,/g,'","'),n=t.join("[")),JSON.parse(n)}function l(t){function n(){return a(),h.list.indexOf(r)>-1}function i(){h.time=e.getDateNow(),-1===h.list.indexOf(r)&&h.list.push(r),o()}var r=t;return{isSent:n,setAnalyticState:i}}function c(e,t,n,i,r){var o=e.toString()+t+n+(i?"t":"f")+r;return new l(o)}var u=/\{(time)\:\d+,(list)\:\[([\d\w\,]*)+\]\}/,d=/^\d+$/,p="_minUsherData2",h={},g=null;return{get:c,init:r}};!function(){function e(){this._analytics={}}a.analytics=a.analytics||{};var t={IN_VIEWPORT_NOT_SENT:0,IN_VIEWPORT_SENT:1,OUT_OF_VIEWPORT:2};a.analytics.ViewportRestAnalyticsUsher=e,e.prototype.inViewport=function(e){var n=this._analytics[e];void 0===n?this._analytics[e]=t.IN_VIEWPORT_NOT_SENT:this._analytics[e]===t.OUT_OF_VIEWPORT&&(this._analytics[e]=t.IN_VIEWPORT_NOT_SENT)},e.prototype.outViewport=function(e){this._analytics[e]=t.OUT_OF_VIEWPORT},e.prototype.shouldSend=function(e){var n=this._analytics[e];return n===t.IN_VIEWPORT_NOT_SENT?(this._analytics[e]=t.IN_VIEWPORT_SENT,!0):!1}}();var M=function(){function t(){return s?h.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:h.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP}function n(){l=te.isTestGroup(),s=X.isMobile(),c=ne.getIsAnalyticsEnabled()}function i(e,t,n){if((c||n)&&(Q.getAnalytics().push(e,t),t&&0==t.uniq)){var i=g.cloneObject(t);i.stor=!!K.getLocalStorageInstance(),Q.getUrlReporter().push(h.Emitter.VIEWPORT,i)}}function r(e,t,n){var r=$.get(e.getId(),t.placementFunction,h.Emitter.CLICK_TYPE_NONE,l,n);r.isSent()||(i(h.Emitter.ANALYTICS_EVENT,t),r.setAnalyticState(),p.add(g.getTrackerTiming(e.getPublisherVideoId()+":UImpression:"+n),!0))}function o(e){var n={test_mode:l,playMode:h.Analytics.PlayModes[ne.getDefaultPlayMode()],source:t()};return g.extend(n,e)}function a(t,n){var i={id:t.getId(),highlight_id:t.getHighlightId(),comp:X.isBrowserSupported()?1:0,publisher:e._publisher};return g.extend(i,o(n))}var s,l=null,c=!1;return{init:n,pushAnalytics:i,sendSessionImpression:r,getAnalyticPayload:o,getAnalyticPayloadWithVideoData:a}}(),B=function(){function e(e,t){if(e){n(e.getId());var i=g.getProductByPlayMode(t.getPlayMode()),r=M.getAnalyticPayloadWithVideoData(e,{type:h.Emitter.ANALYTICS_CLICK_EVENT,placementFunction:h.Placements.HOVER_IMPRESSION,uniq:!1,product:i});g.optimizely.trackEvent(0==i?"click_apv":"click_ia"),oe.log(r),(i===h.Emitter.PRODUCT_IN_ARTICLE||t.getIsForceFlush())&&oe.sendLogsDueToInArticleClick()}}function t(t,n){if(g.plugins.isInArticle(n)){var o=function(t){return function(n){e(n,t)}}(n);return void g.plugins.addPlayEventListener(o,n,t)}var a=[],s=!1;n.getClickSelector()?(a=v.getElementsClicks(t,n,h.Selectors.CLICK_SELECTOR)||[],s=!0):a=document.querySelectorAll(v.selector(n.getSelectorByType(h.Selectors.LINK_SELECTOR),t));for(var l=0;l<a.length;l++){var c=a[l];if(!(S.indexOf(c)>-1)){var u=function(t,n,i){return function(){e(t,n),n.getIsSingleClick()&&i.removeEventListener("click",u,s)}}(t,n,c);c.addEventListener("click",u,s),X.isMobile()?i(t,c,n):r(t,c,n),S.push(c)}}}function n(e){m>0&&(clearTimeout(m),m=0,oe.removeLogDelayById(e))}function i(e,t,n){t.addEventListener("touchstart",function(){o(e,n)}),t.addEventListener("touchend",function(){l(e)})}function r(e,t,n){t.addEventListener?t.addEventListener("contextmenu",function(){u(e,n)}):t.attachEvent("oncontextmenu",function(){u(e,n)})}function o(e,t){E=setTimeout(function(){u(e,t)},p),_=setTimeout(function(){s(e)},f),y=g.getDateNow()}function s(e){_=0,l(e)}function l(e){if(0!==_&&(clearTimeout(_),_=0),0!==E){clearTimeout(E),E=0;var t=g.getDateNow()-y;p>t&&oe.removeLogDelayById(e.getId())}}function c(e){n(e),m=setTimeout(function(){n(e)},d)}function u(e,t){c(e.getId());var n=g.getProductByPlayMode(t.getPlayMode()),i=M.getAnalyticPayloadWithVideoData(e,{type:h.Emitter.CONTEXT_MENU_OPEN_EVENT,placementFunction:h.Placements.HOVER_IMPRESSION,uniq:!1,product:n});oe.logDelay(i)}var d=6e4,p=700,f=1500,v=a.utils.DomFinder,m=0,E=0,y=0,_=0,S=[];return{addLinkSelector:t}}(),F=function(){function t(){return X.isMobile()?h.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:h.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP}function n(n){var i={id:e._publisher,user_agent:navigator.userAgent,uniq:n,test_mode:te.isTestGroup(),sub_test_group:te.isTestGroup()?!1:te.getSubTestGroup(),url:g.urls.getStructuredByUrl(D.getWindowLocationHref()),referrer:g.urls.getReferrerUrl(),source:t(),comp:X.isBrowserSupported(),stor:!!K.getLocalStorageInstance()};Q.getUrlReporter().push(h.Emitter.URL_REPORT,g.cloneObject(i)),n&&(i.uniq=!1,Q.getUrlReporter().push(h.Emitter.URL_REPORT,i))}function i(){if(!g.plugins.isInArticle()){var e=!1;Z.get(r)||(Z.set(r,!0),e=!0),n(e)}}var r="minSessionAnalytics";return{sendUrlReport:i}}();!function(){function e(){this._observedElements=[],this._addObservedElementHandler=null,this._sentSubjects={}}a.analytics=a.analytics||{};var t=new a.analytics.ViewportRestAnalyticsUsher;a.analytics.BaseAnalyticsService=e,e.prototype.register=function(e){this._addObservedElementHandler=this.addObservedElement.bind(this),e.getDomAdapter().addEventListener(h.Events.Element.READY,this._addObservedElementHandler)},e.prototype.unregister=function(e){e.getDomAdapter().removeEventListener(h.Events.Element.READY,this._addObservedElementHandler),this._addObservedElementHandler=null},e.prototype.addObservedElement=function(e){var t=e.data,n={id:t.videoData.getId(),videoData:t.videoData,elem:t.apvElement,placement:t.placement};return this._observedElements.push(n),n},e.prototype.getUsher=function(){return t},e.prototype.findSubjectById=function(e){for(var t=0;t<this._observedElements.length;t++){var n=this._observedElements[t];if(n.id===e)return n}return null},e.prototype.sendImpression=function(e){var t=g.getProductByPlayMode(e.placement.getPlayMode()),n=M.getAnalyticPayloadWithVideoData(e.videoData,{type:h.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:h.Placements.VIEWPORT_IMPRESSION,uniq:!1,product:t}),i=""+e.videoData.getId()+t;this._sentSubjects[i]!==!0&&(this._sentSubjects[i]=!0,M.pushAnalytics(h.Emitter.ANALYTICS_EVENT,n),p.add(g.getTrackerTiming(e.videoData.getPublisherVideoId()+":AImpression:"+g.getProductByPlayMode(e.placement.getPlayMode()))))},e.prototype.sendSessionImpression=function(e){var t=g.getProductByPlayMode(e.placement.getPlayMode()),n=M.getAnalyticPayloadWithVideoData(e.videoData,{type:h.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:h.Placements.VIEWPORT_IMPRESSION,uniq:!0,product:t});M.sendSessionImpression(e.videoData,n,t)}}(),function(){function e(){e.__superCtor__.call(this),this._handleMouseEnterHandler=null}g["extends"](e,a.analytics.BaseAnalyticsService),a.analytics.SemiHoverAnalyticsService=e,e.prototype.register=function(t){e.__super__.register.call(this,t),this._handleMouseEnterHandler=this.handleMouseEnter.bind(this),t.getDomAdapter().addEventListener(h.Events.Element.MOUSE_ENTER,this._handleMouseEnterHandler)},e.prototype.unregister=function(t){e.__super__.unregister.call(this,t),t.getDomAdapter().removeEventListener(h.Events.Element.MOUSE_ENTER,this._handleMouseEnterHandler),this._handleMouseEnterHandler=null},e.prototype.addObservedElement=function(t){var n=e.__super__.addObservedElement.call(this,t);return n.sent=!1,n},e.prototype.handleMouseEnter=function(e){var t=e.data,n=t.videoData.getId(),i=this.findSubjectById(n);i.sent||(this.getUsher().inViewport(n),this.getUsher().shouldSend(n)&&this.sendSessionImpression(t),this.sendImpression(t),i.sent=!0)}}(),function(){function e(){e.__superCtor__.call(this)}g["extends"](e,a.analytics.SemiHoverAnalyticsService),a.analytics.HoverAnalyticsService=e,e.prototype.addObservedElement=function(t){var n=e.__super__.addObservedElement.call(this,t);return n.debounce=new a.utils.Debounce(h.HOVER_IMPRESSION_DELAY,this.handleElementMouseDelay,this,n),n},e.prototype.handleMouseEnter=function(e){var t=e.data,n=t.videoData.getId(),i=this.findSubjectById(n);return i.debounce.isRunning()?void i.debounce.start():(this.getUsher().inViewport(n),this.getUsher().shouldSend(n)&&this.sendSessionImpression(t),this.sendImpression(t),void i.debounce.start())},e.prototype.handleElementMouseDelay=function(e){this.getUsher().outViewport(e.id)}}(),function(){function e(){e.__superCtor__.call(this),this._updateCarouselElementHandler=null,this._notifyVisibleHandler=null,this._notifyVisibleTimeoutHandler=null;var i=this;t=ne.getViewportAnalyticsTimeSpan(),n=ne.getViewportAnalyticsPercentage(),Y.addEventListener(h.Events.DomWindow.RESIZE,function(){i._debounceStartAll()}),Y.addEventListener(h.Events.DomWindow.SCROLL,function(){i._debounceStartAll()}),Y.addEventListener(h.Events.DomWindow.URL_CHANGE,function(){i._debounceStartAll()}),window.addEventListener("load",function(){i._debounceStartAll()})}var t,n,i={INIT:0,IN_VIEWPORT:1,OUT_VIEWPORT:2,DONE:3};g["extends"](e,a.analytics.BaseAnalyticsService),a.analytics.ViewportAnalyticsService=e,e.prototype.register=function(t){e.__super__.register.call(this,t),this._updateCarouselElementHandler=this.updateCarouselElement.bind(this),this._notifyVisibleHandler=this.notifyVisible.bind(this),this._notifyVisibleTimeoutHandler=this.notifyVisibleTimeout.bind(this),t.getDomAdapter().addEventListener(h.Events.Element.UPDATE_CAROUSEL_ELEMENT,this._updateCarouselElementHandler),t.getDomAdapter().addEventListener(h.Events.Element.ANALYTICS_VISIBLE,this._notifyVisibleHandler),t.getDomAdapter().addEventListener(h.Events.Element.MUTANT,this._notifyVisibleTimeoutHandler)},e.prototype.unregister=function(t){e.__super__.unregister.call(this,t),t.getDomAdapter().removeEventListener(h.Events.Element.UPDATE_CAROUSEL_ELEMENT,this._updateCarouselElementHandler),t.getDomAdapter().removeEventListener(h.Events.Element.ANALYTICS_VISIBLE,this._notifyVisibleHandler),t.getDomAdapter().removeEventListener(h.Events.Element.MUTANT,this._notifyVisibleTimeoutHandler),this._updateCarouselElementHandler=null,this._notifyVisibleHandler=null,this._notifyVisibleTimeoutHandler=null},e.prototype.addObservedElement=function(n){var r=e.__super__.addObservedElement.call(this,n),o=n.data;return r.carouselElement=o.carouselElement,r.inViewport=g.getDateNow(),r.state=i.INIT,r.debounce=new a.utils.Debounce(t,this._handleObservedElementDebounce,this,r),r.debounce.enableFilter(),r},e.prototype.updateCarouselElement=function(e){var t=e.data,n=this.findSubjectById(t.videoData.getId());n&&(n.carouselElement=t.carouselElement)},e.prototype._debounceStartAll=function(){for(var e=0;e<this._observedElements.length;e++){var t=this._observedElements[e];t.debounce.start()}},e.prototype.notifyVisible=function(e){for(var t=e.data.videoData,n=0;n<this._observedElements.length;n++){var i=this._observedElements[n];if(i.videoData===t)return void i.debounce.start()}},e.prototype.notifyVisibleTimeout=function(e){var t=this;setTimeout(function(){t.notifyVisible(e)},e.data.timeout)},e.prototype._handleObservedElementDebounce=function(e){this.doUpdate(e),t>0&&setTimeout(this.doUpdate.bind(this,e),t)},e.prototype.doUpdate=function(e){var t=S.getViewportState(e.elem,e.carouselElement),r=t.percentage>=n;r?this._handleVisible(e):(e.state=i.OUT_VIEWPORT,this._outViewport(e.videoData))},e.prototype._handleVisible=function(e){switch(e.state){case i.IN_VIEWPORT:var n=g.getDateNow()-e.inViewport;n>t&&(this._inViewport(e),e.state=i.DONE);break;case i.INIT:case i.OUT_VIEWPORT:e.state=i.IN_VIEWPORT,e.inViewport=g.getDateNow()}},e.prototype._inViewport=function(e){this.getUsher().inViewport(e.videoData.getId()),this.getUsher().shouldSend(e.videoData.getId())&&this.sendImpression(e),this.sendSessionImpression(e)},e.prototype._outViewport=function(e){this.getUsher().outViewport(e.getId())}}(),function(){function e(){function e(e){for(var n in e)i[n]||(i[n]=e[n]);t()}function t(){var e={},t=!1;for(var o in i)r[o]||(e[o]=i[o],t=!0);t&&n(e)}function n(e){var t,n;for(var i in e)e[i]&&(t=e[i],n=M.getAnalyticPayloadWithVideoData(t.getVideoData(),{type:h.Emitter.ANALYTICS_BLOCKING_DISTANCE_POTENTIAL}),o.push(h.Emitter.ANALYTICS_EVENT,n),r[i]=t)}var i={},r={},o=Q.getAnalytics();return{addPotentialAPVs:e}}a.analytics=a.analytics||{},a.analytics.BlockingDistanceAnalytics=e}();var H=function(){function e(e){Q.getVideoViewsReporter().push(h.Emitter.VIDEO_VIEWS,e)}return{sendVideoView:e}}(),W=function(){function e(){return JSON.parse(r.getItem(s)||"{}")}function t(e,t){p[e]=t;var n=JSON.stringify(p);r.setItem(s,n)}function n(e,t,n,i){var r=t.exec(e);if(a.isArray(r)){var o=r[1].indexOf(n)>-1;if(o){var s=r[1].substring(n.length),l=r[2]?r[2]:void 0;i(s,l)}}}function i(e,t,n){return new h(e,t,n)}var r=null,o=null,a=null,s="__mff__",l="+mff",c="-mff",u=/[https?:\/\/]?.*#(\+\w+)=(.*)/g,d=/[https?:\/\/]?.*#(-\w+)/g,p={},h=function(i,s,h){r=s.getLocalStorageInstance(),r&&(o=h,a=i,p=e(),n(o.hash,u,l,function(e,n){t(e,n)}),n(o.hash,d,c,function(e){t(e,void 0)}))};return h.prototype.get=function(e){return p[e]},h.prototype.CONSTS={DISABLE_VERSION:"disableVersion"},{create:i}}();a.utils=a.utils||{},a.utils.SpritePlayerFactory=function(e,t){function n(i){function r(e,t){this.srcUrl=e,this.frames=t,this.image=null,this.hasLoaded=!1,this.currentFrame=0}function o(){return D.id}function a(){K||(K=!0,q=0,f()&&(M.dispatch(R),b()))}function s(){K=!1,I()}function l(){N&&(N.style.visibility="visible")}function c(){N&&(N.style.visibility="hidden")}function u(){return K}function d(){s(),B.removeAll(),B=null,U.removeAll(),U=null,x.removeAll(),x=null,M.removeAll(),M=null,N&&(V.removeChild(N),F=null,N=null),V=null,S()}function p(){return Z}function h(e){return 0>e||e>=J?!1:(u()||T(e),void(Z=e))}function g(e,t){if(D.containerWidth=parseInt(e||D.containerWidth||G),D.containerHeight=parseInt(t||D.containerHeight||Y),N){e=D.containerWidth,t=D.containerHeight,V.style.width=e+"px",V.style.height=t+"px";var n=e/G,i=t/Y;n>=i?(N.style.top=(t-Y*n)/2+"px",N.style.left="0px",N.style.width=e+"px",N.style.height=Y*n+"px"):(N.style.left=(e-G*i)/2+"px",N.style.top="0px",N.style.width=G*i+"px",N.style.height=t+"px")}}function f(){for(var e=0;e<k.length;e++)if(k[e].hasLoaded)return!0;return!1}function v(){for(var e=0;e<k.length;e++)if(!k[e].hasLoaded)return!1;return!0}
function m(){D={id:D.id||e.generateUnique(),selector:D.selector||null,video:D.video||{src:null,frames:1},loops:D.loops||0,cols:D.cols||1,fps:D.fps||16,containerWidth:D.containerWidth||0,containerHeight:D.containerHeight||0},V="string"==typeof D.selector?document.querySelector(D.selector):D.selector}function E(){return V?D.video?!0:(e.log("Error. You need to define a video."),!1):(e.log("Error. No element found for selector",D.selector),!1)}function y(){var t;e.isArray(D.video)||(D.video=[D.video]);for(var n=0;n<D.video.length;n++)t=D.video[n],k.push(new r(t.src,t.frames)),J+=t.frames;Z=0,j=0,q=0,O=1e3/D.fps,X=k.length}function _(){for(var e,t=0;t<k.length;t++){if(e=k[t],!e.image){e.image=new Image,e.image.onload=P.bind(this,e),e.image.onerror=function(t){A.call(this,t,e)},e.image.src=e.srcUrl;break}if(!e.hasLoaded)break}}function S(){for(var e,t=0;t<k.length;t++)e=k[t],e.image&&(e.image.onload=null,e.image.onerror=null,e.image=null)}function A(e,t){B.dispatch(R,t.srcUrl,e)}function P(e){G=G||e.image.width/D.cols,Y=Y||e.image.height/Math.ceil(e.frames/D.cols),e.hasLoaded=!0,w(),U.dispatch(R),v()||_(),u()&&(M.dispatch(R),b())}function b(){0===z&&(z=H(L))}function I(){z>0&&(W(z),z=0)}function w(){N||(N=document.createElement("canvas"),N.width=G,N.height=Y,N.style.position="absolute",V.style.overflow="hidden",V.style.position="relative",V.appendChild(N),F=N.getContext("2d"),g())}function L(){z=0;var t=e.getDateNow(),n=t-Q;n>=O&&(T(Z),Q=t,Z+=1,0>Z?Z+=J:Z>=J&&(Z=0),0===Z&&(q++,x.dispatch(R,q))),K&&J>1&&b()}function T(e){var t=k[e%X],n=t.currentFrame;if(t.currentFrame+=1,t.currentFrame===t.frames&&(t.currentFrame=0),t.image&&t.hasLoaded){var i=Math.floor(n%D.cols)*G,r=Math.floor(n/D.cols)*Y;F.clearRect(0,0,G,Y),F.drawImage(t.image,i,r,G,Y,0,0,G,Y)}}function C(){return R=null,n.isSupported?(m(),E()?(y(),_(),R={getId:o,play:a,pause:s,getIsPlaying:u,show:l,hide:c,dispose:d,getCurrentFrame:p,setCurrentFrame:h,updateSize:g,hasAllLoaded:v,hasLoaded:f,onImageLoaded:U,onPlaying:M,onLoopsEnded:x,onImageError:B}):R):R}var O,R=null,D=i,V=null,N=null,k=[],U=new t,M=new t,x=new t,B=new t,F=null,H=e.getRequestAnimationFrame(),W=e.getCancelAnimationFrame(),z=0,G=0,Y=0,j=0,q=0,K=!1,J=0,X=0,Z=0,Q=0;return C()}function i(e){return new n(e)}return n.isSupported=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),{create:i}},function(){function e(){e.__superCtor__.call(this),this.ATTR_MEDIA_SIZE="data-media_file_size",this.mediaHeightIndex="",this.lastMediaHeightIndex="",this._apvElement=null}a.apv=a.apv||{},a.apv.players=a.apv.players||{},g["extends"](e,m),a.apv.players.ApvPlayerBase=e,e.prototype.init=function(e,t,n){var i=this;this.elementToReplace=e,this._videoData=t,this._placement=n,this.displayType=g.getComputedStyle(this.elementToReplace).display,te.isTestGroup()||Y.addEventListener(h.Events.DomWindow.RESIZE,function(){i.updateMediaSources(),g.ElementObjectFit.set(i.getApvElement(),e)}),this.mediaHeightIndex=this.getNearestSize(this.elementToReplace),this.lastMediaHeightIndex=this.mediaHeightIndex},e.prototype.setOriginalImage=function(e){},e.prototype.play=function(){},e.prototype.pause=function(){},e.prototype.isPaused=function(){},e.prototype.sendEventPlaying=function(){g.log("APV Playing: "+this._videoData.getId()),this.dispatchEvent(h.Events.Players.PLAYING)},e.prototype.sendEventPaused=function(){g.log("APV Paused: "+this._videoData.getId()),this.dispatchEvent(h.Events.Players.PAUSED)},e.prototype.getApvElement=function(){return this._apvElement},e.prototype.getSizeData=function(){return{}},e.prototype.getStyle=function(e){return this._apvElement?this._apvElement.style[e]:null},e.prototype.setStyles=function(e){if(this._apvElement)for(var t in e)this._apvElement.style[t]=e[t]},e.prototype.getElementAttribute=function(e){return this._apvElement?this._apvElement.getAttribute(e):null},e.prototype.setElementAttribute=function(e,t){this._apvElement&&this._apvElement.setAttribute(e,t)},e.prototype.getNearestSize=function(e){var t,n,i,r="m",o=g.extractElementSize(e),a=this.getSizeData();if(!o.width||!o.height)return a[r]?r:Object.keys(a)[0];if(n=Math.ceil(o.width/o.height*100)/100,t=this._videoData.getVideoRatio(),o.width*=.9,o.height*=.9,!t||t>n){for(i in a)if(a.hasOwnProperty(i)&&a[i]>=o.height)return i}else{var s;for(i in a)if(a.hasOwnProperty(i)&&(s=a[i]*t,s>=o.width))return i}return i||"R"},e.prototype.getFullVideoUrl=function(e,t){var n=this._videoData.getAPVUrl()+this.mediaHeightIndex+(t||"")+"."+e;for(var i in h.APV)n=n.replace(h.APV[i].source,h.APV[i].target);return g.setUrlProtocol(n)},e.prototype.getValidHeightElement=function(){return this._apvElement.clientHeight>=20?this._apvElement:this.elementToReplace},e.prototype.updateMediaSources=function(){var e=this.getNearestSize(this.getValidHeightElement()),t=1*this._apvElement.getAttribute(this.ATTR_MEDIA_SIZE),n=this.getSizeData()[e];t>=n||(this.mediaHeightIndex=e,this._apvElement.setAttribute(this.ATTR_MEDIA_SIZE,n),g.log("update video size! (new size: "+this.mediaHeightIndex+" new: "+n+", old:"+t+" )"))},e.prototype.isShow=function(){return!0},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.handleMediaMetadataLoaded=function(){g.setMediaElementSize(this.getApvElement()),g.ElementObjectFit.set(this.getApvElement(),this.elementToReplace,this._placement.getApvStyleOverride())},e.prototype.updateSize=function(){}}(),function(){function e(){e.__superCtor__.call(this),this.SUPPORTED_TYPES=["mp4"],this._handleVideoEvent_CanPlayThrough=null,this._rezVideo=null}a.apv=a.apv||{},a.apv.players=a.apv.players||{},g["extends"](e,a.apv.players.ApvPlayerBase),a.apv.players.ApvVideoPlayer=e,e.States={STATE_HAVE_NOTHING:0,STATE_HAVE_METADATA:1,STATE_HAVE_CURRENT_DATA:2,STATE_HAVE_FUTURE_DATA:3,STATE_HAVE_ENOUGH_DATA:4},e.prototype.init=function(t,n,i){e.__super__.init.call(this,t,n,i),this._apvElement=document.createElement("video"),this._apvElement.setAttribute("minVideoID",this._videoData.getId()),this._apvElement.volume=0,this._apvElement.style.transition=ne.getEffectApvTransitionVideo(),this._apvElement.style.opacity=0,this.attachVideoEvents(),this.buildVideoSources()},e.prototype.buildVideoSources=function(){for(var e=0;e<this.SUPPORTED_TYPES.length;e++){var t=document.createElement("source");t.type="video/"+this.SUPPORTED_TYPES[e],t.src=this.getFullVideoUrl(this.SUPPORTED_TYPES[e]),this._apvElement.appendChild(t)}this._apvElement.setAttribute(this.ATTR_MEDIA_SIZE,ne.getRezVideo()[this.mediaHeightIndex])},e.prototype.attachVideoEvents=function(){var e=this,t=function(e){return e.stopImmediatePropagation(),!1};this._apvElement.addEventListener("loadedmetadata",function(){e.dispatchEvent("loadedmetadata"),e.handleMediaMetadataLoaded()}),this._apvElement.addEventListener("play",function(n){return e.handleVideoEvent_Play(),t(n)}),this._apvElement.addEventListener("pause",function(n){return e.handleVideoEvent_Pause(),t(n)}),this._apvElement.addEventListener("error",function(n){return e.handleVideoEvent_Error(),t(n)}),this._apvElement.addEventListener("ended",function(n){return e.handleVideoEvent_Ended(),t(n)}),this._apvElement.addEventListener("timeupdate",t),this._apvElement.addEventListener("playing",t),this._apvElement.addEventListener("waiting",t),this._apvElement.addEventListener("load",t),this._apvElement.addEventListener("progress",t),this._apvElement.addEventListener("durationchange",t);var n=function(){e.dispatchEvent(h.Events.Players.LOADED),e._apvElement.removeEventListener("canplaythrough",n)};this._apvElement.addEventListener("canplaythrough",n)},e.prototype.handleVideoEvent_Play=function(){this._apvElement.style.display=this.displayType,this.dispatchEvent(h.Events.Players.PLAYING),g.log("playing video for article "+this._videoData.getArticleUrl())},e.prototype.handleVideoEvent_Pause=function(){this.shouldPlay===!0?this._apvElement.play():this.sendEventPaused()},e.prototype.handleVideoEvent_Ended=function(){this.dispatchEvent("ended"),g.log("video ended for article "+this._videoData.getArticleUrl())},e.prototype.handleVideoEvent_Error=function(){this.dispatchEvent("error"),g.log("Browser cannot play video!")},e.prototype.setOriginalImage=function(e){this._apvElement&&e&&this._apvElement.setAttribute("poster",e)},e.prototype.play=function(){this.shouldPlay=!0,this._apvElement.readyState===e.States.STATE_HAVE_ENOUGH_DATA?(this._apvElement.play(),this.sendEventPlaying()):(this._handleVideoEvent_CanPlayThrough=this._handleVideoEvent_CanPlayThrough||this.handleVideoEvent_CanPlayThrough.bind(this),this._apvElement.addEventListener("canplaythrough",this._handleVideoEvent_CanPlayThrough))},e.prototype.pause=function(){this.shouldPlay=!1,this._apvElement.pause()},e.prototype.isShow=function(){return this._apvElement.style.opacity>0},e.prototype.show=function(){this._apvElement.style.opacity=1},e.prototype.hide=function(){this._apvElement.style.opacity=0},e.prototype.getSizeData=function(){return this._rezVideo?this._rezVideo:(this._rezVideo=g.cloneObject(ne.getRezVideo()),this._placement.getApvOrigin()===!0&&(this._rezVideo[h.APV.Origin.source]=h.APV.Origin.size),this._rezVideo)},e.prototype.isPaused=function(){return this._apvElement.paused},e.prototype.updateMediaSources=function(){if(e.__super__.updateMediaSources.call(this),this.lastMediaHeightIndex!==this.mediaHeightIndex){this.lastMediaHeightIndex=this.mediaHeightIndex;var t,n=this._apvElement.querySelectorAll("source"),i=!this._apvElement.paused;this.pause();for(var r=0;r<this.SUPPORTED_TYPES.length;r++)t=n[r],t.type="video/"+this.SUPPORTED_TYPES[r],t.src=this.getFullVideoUrl(this.SUPPORTED_TYPES[r]),this._apvElement.currentSrc.indexOf(this.SUPPORTED_TYPES[r],-5)>-1&&(this._apvElement.src=t.src);i&&this.play()}},e.prototype.handleVideoEvent_CanPlayThrough=function(){this.shouldPlay&&(this._apvElement.play(),this.sendEventPlaying()),this._apvElement.removeEventListener("canplaythrough",this._handleVideoEvent_CanPlayThrough)}}(),function(){function e(){e.__superCtor__.call(this)}a.apv=a.apv||{},a.apv.players=a.apv.players||{},g["extends"](e,a.apv.players.ApvPlayerBase),a.apv.players.ApvGifPlayer=e,e.prototype.init=function(t,n,i){e.__super__.init.call(this,t,n,i),g.log("Mobile detected. Loading GIFs.");var r=document.createElement("img");this._apvElement=r,r.setAttribute("data-apv_replaced","true"),r.setAttribute("minVideoID",this._videoData.getId()),r.setAttribute("src",g.setUrlProtocol(this._videoData.getAPVUrl()+this.mediaHeightIndex+".gif")),this.addGifEvents(r)},e.prototype.addGifEvents=function(){var e=this;if(g.plugins.isPlugin()){var t="gifCreatedPlugin:"+this._videoData.getPublisherVideoId();ee.sendToParent({funnelData:t})}else{var t="gifCreated:"+this._videoData.getPublisherVideoId();p.add(g.getTrackerTiming(t))}this._apvElement.addEventListener("load",function(t){if(e.dispatchEvent(h.Events.Players.LOADED),e.handleMediaMetadataLoaded(),g.plugins.isPlugin()){var n="gifLoadedPlugin:"+e._videoData.getPublisherVideoId();ee.sendToParent({funnelData:n})}else{var n="gifLoaded:"+e._videoData.getPublisherVideoId();p.add(g.getTrackerTiming(n))}})},e.prototype.getSizeData=function(){return ne.getRezGif()},e.prototype.updateMediaSources=function(){e.__super__.updateMediaSources.call(this),this.lastMediaHeightIndex!==this.mediaHeightIndex&&(document.contains(this._apvElement)||this.elementToReplace.setAttribute("src",this.getFullVideoUrl("gif")),this._apvElement.setAttribute("src",this.getFullVideoUrl("gif")),this.lastMediaHeightIndex=this.mediaHeightIndex)},e.prototype.hide=function(){this._apvElement.style.opacity=0}}(),function(){function e(){e.__superCtor__.call(this),this.SUPPORTED_TYPES="jpg",this._spritePlayer=null,this._spritePlayerTemp=null}a.apv=a.apv||{},a.apv.players=a.apv.players||{},g["extends"](e,a.apv.players.ApvPlayerBase),a.apv.players.ApvSpritePlayer=e,e.prototype.init=function(t,n,i){e.__super__.init.call(this,t,n,i),this._apvElement=document.createElement("div"),this._apvElement.setAttribute("minVideoID",this._videoData.getId()),this._apvElement.style.transition=ne.getEffectApvTransitionVideo(),this.hide(),this._spritePlayer=this.getNewSpritePlayer(),this._sizeCheckTimer=null},e.prototype.getNewSpritePlayer=function(){var e=this._videoData.getSpritesFrames(),t=s.utils.SpritePlayer.create({selector:this._apvElement,video:[{src:this.getFullVideoUrl(this.SUPPORTED_TYPES,"1"),frames:e[0]},{src:this.getFullVideoUrl(this.SUPPORTED_TYPES,"2"),frames:e[1]}],cols:this._videoData.getSpritesCols(),fps:this._videoData.getSpritesFPS()});return this.updatePlayerSize(t),t.onImageLoaded.add(this._handleSpriteLoaded,this),t.onPlaying.add(this._handleSpritePlaying,this),t.onLoopsEnded.add(this._handleLoopEnded,this),t.onImageError.add(this._handleImageLoadError,this),t},e.prototype.switchSpritePlayerQuality=function(){this._spritePlayerTemp=this.getNewSpritePlayer()},e.prototype.updateSize=function(){this.updateMediaSources()},e.prototype.updatePlayerSize=function(e){if(e=e||this._spritePlayer){var t=g.extractElementSize(this.elementToReplace);g.log("Sprite size: "+JSON.stringify(t)),t.error?this.startSizeCheckTimer(e):t.width&&t.height&&e.updateSize(t.width,t.height)}},e.prototype.startSizeCheckTimer=function(e){if(!this._sizeCheckTimer){var t=500,n=5;this._sizeCheckTimer=new a.utils.Timer(t,this.updatePlayerSize,this),this._sizeCheckTimer.setCounterLimit(n)}this._sizeCheckTimer.start(e)},e.prototype.stopSizeCheckTimer=function(){this._sizeCheckTimer&&this._sizeCheckTimer.stop()},e.prototype.getFullVideoUrl=function(e,t){var n=ne.getApvSpriteDomain(),i=this._videoData.getAPVUrl()+this.mediaHeightIndex+(t||"")+"."+e;for(var r in h.APV)i=i.replace(h.APV[r].source,h.APV[r].target);return n&&(i=n+"/"+i),g.setUrlProtocol(i)},e.prototype._handleSpriteLoaded=function(e){return e===this._spritePlayer?(e.onImageLoaded.remove(this._handleSpriteLoaded,this),void this.dispatchEvent(h.Events.Players.LOADED)):void(this._spritePlayerTemp.hasAllLoaded()&&(e.onImageLoaded.remove(this._handleSpriteLoaded,this),this._spritePlayer.getIsPlaying()&&this._spritePlayerTemp.play(),this.updatePlayerSize(this._spritePlayerTemp),this._spritePlayerTemp.show(),this._spritePlayer.dispose(),this._spritePlayer=this._spritePlayerTemp,this._spritePlayerTemp=null))},e.prototype._handleSpritePlaying=function(e){e===this._spritePlayer&&this.sendEventPlaying()},e.prototype._handleImageLoadError=function(e,t,n){e===this._spritePlayer&&(this.dispatchEvent(h.Events.Players.ERROR),g.log("Browser cannot load sprite image: "+t+", Error: "+JSON.stringify(n)))},e.prototype._handleLoopEnded=function(e,t){e===this._spritePlayer&&this.dispatchEvent(h.Events.Players.ENDED)},e.prototype.play=function(){this._spritePlayer.play()},e.prototype.pause=function(){this._spritePlayer.pause(),this.sendEventPaused()},e.prototype.isShow=function(){return this._apvElement.style.opacity>0},e.prototype.show=function(){g.log("APV Sprite Show: "+this._videoData.getId()),this._apvElement.style.opacity=1},e.prototype.hide=function(){g.log("APV Sprite Hide: "+this._videoData.getId()),this._apvElement.style.opacity=0},e.prototype.getSizeData=function(){return ne.getRezSprite()},e.prototype.isPaused=function(){return!this._spritePlayer.getIsPlaying()},e.prototype.getValidHeightElement=function(){return this.elementToReplace},e.prototype.updateMediaSources=function(){e.__super__.updateMediaSources.call(this),this.updatePlayerSize(),this.lastMediaHeightIndex!==this.mediaHeightIndex&&(this.switchSpritePlayerQuality(),this.lastMediaHeightIndex=this.mediaHeightIndex)},e.prototype.handleMediaMetadataLoaded=function(){},e.prototype.setStyles=function(t){e.__super__.setStyles.call(t),this.updatePlayerSize()}}(),function(){a.placements=a.placements||{},a.placements.getContainerOverlay=function(){return g.logWarning("config set with container overlay but no file was gulped"),document.createElement("img")}}(),a.apv=a.apv||{},a.apv.logos=a.apv.logos||{};var z=a.apv.logos;z.LogoElmBase=function(){z.LogoElmBase.__superCtor__.call(this)},g["extends"](z.LogoElmBase,m),z.LogoElmBase.prototype.init=function(e,t){this.currentPlacement=e,this.isMobile=t,this.buildLogoLinkElement(),this.hide()},z.LogoElmBase.prototype.buildLogoLinkElement=function(){var e=this.createElement();e.title=e.alt=ne.getTooltip(),this.logoSize=this.isMobile?h.DEFAULT_MOBILE_LOGO_SIZE:h.DEFAULT_LOGO_SIZE;var t=this.getLogoDefaultStyle(),n=this.currentPlacement.getLogoStyleOverride(),i=g.extend(t,n);e.innerHTML=this.getLogoInnerHtml();for(var r in i)e.style[r]=i[r],"width"==r&&(this.logoSize=i[r]);e.style.cursor="pointer",e.style.width=this.logoSize,e.style.height=this.logoSize,""==e.style.left&&""==e.style.right&&(e.style.right="2%"),""==e.style.top&&""==e.style.bottom&&(e.style.bottom="4%"),e.style.outline="none",e.style.transition=ne.getEffectApvTransitionLogo(),this.minuteLinkElm=e},z.LogoElmBase.prototype.createElement=function(){},z.LogoElmBase.prototype.getLogoElement=function(){return this.minuteLinkElm},z.LogoElmBase.prototype.show=function(){this.getLogoElement().style.opacity=.6},z.LogoElmBase.prototype.hide=function(){this.getLogoElement().style.opacity=0},a.apv=a.apv||{},a.apv.logos=a.apv.logos||{};var z=a.apv.logos;z.LogoElmReg=function(){z.LogoElmReg.__superCtor__.call(this)},g["extends"](z.LogoElmReg,z.LogoElmBase),z.LogoElmReg.prototype.getLogoDefaultStyle=function(){return{position:"absolute",display:"block",opacity:"0.7",backgroundImage:"url("+g.getProtocol()+"://videos.minute.ly/videos/watermark.png)","background-size":"100% 100%",border:"none",title:"minute.ly","background-color":"transparent","z-index":"9999"}},z.LogoElmReg.prototype.getLogoInnerHtml=function(){return""},z.LogoElmReg.prototype.createElement=function(){return document.createElement("a")},a.apv=a.apv||{},a.apv.logos=a.apv.logos||{};var z=a.apv.logos;z.LogoElmSVG=function(){z.LogoElmSVG.__superCtor__.call(this)},g["extends"](z.LogoElmSVG,z.LogoElmBase),z.LogoElmSVG.prototype.getLogoDefaultStyle=function(){var e="16px";return{position:"absolute",display:"block",width:e,height:"auto",border:"none",title:"minute.ly","background-color":"transparent","z-index":"9999"}},z.LogoElmSVG.prototype.getLogoInnerHtml=function(){return'<svg version="1.1" id="MinuteLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 46 46" style="'+this.currentPlacement.getSvgStyle()+'" xml:space="preserve"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;" d="M42.7,13.4L42.7,13.4l-6.8,3.3c1,2,1.5,4.2,1.5,6.5c0,8-6.5,14.4-14.4,14.4c-8,0-14.4-6.5-14.4-14.4 S15.1,8.8,23.1,8.8c1.3,0,2.5,0.2,3.6,0.5l2-7.4c-2-0.5-3.6-0.7-5.7-0.7h0h0c-3.4,0-6.5,0.7-9.6,2.2C2.5,8.6-2,21.7,3.3,32.6 C8.6,43.5,21.7,48,32.6,42.7C43.5,37.4,48,24.3,42.7,13.4"/><circle style="fill:#2ABFD5;" cx="23" cy="23" r="9"/> </svg>'},z.LogoElmSVG.prototype.createElement=function(){return document.createElement("a")},a.apv=a.apv||{},a.apv.logos=a.apv.logos||{};var z=a.apv.logos;z.LogoElmSpan=function(){z.LogoElmSpan.__superCtor__.call(this)},g["extends"](z.LogoElmSpan,z.LogoElmReg),z.LogoElmSpan.prototype.createElement=function(){return document.createElement("span")},a.apv=a.apv||{},a.apv.logos=a.apv.logos||{};var z=a.apv.logos;z.LogoElmSpanSVG=function(){z.LogoElmSpanSVG.__superCtor__.call(this)},g["extends"](z.LogoElmSpanSVG,z.LogoElmSVG),z.LogoElmSpanSVG.prototype.createElement=function(){return document.createElement("span")},function(){function e(){e.__superCtor__.call(this),this._handleWindowDisposeEvent=null,this._handleApvPlayerLoadedEvent=null,this.minContainer=null,this.blockingState=h.APVStates.Active,this._isLastVisibleAnalytics=!1,this._isLastVisible=!1}a.apv=a.apv||{},a.apv.domAdapter=a.apv.domAdapter||{};var t=a.apv.domAdapter,n=a.utils.DomFinder;t.Base=e,g["extends"](e,m),e.prototype.getState=function(){return this.state},e.prototype.init=function(e,t,n){this.apvData=e,this.elementToReplace=this.apvData.getElementToReplace(),this.apvPlayer=t,this.minuteLink=n,this.videoData=this.apvData.getVideoData(),this._placement=this.apvData.getPlacement(),this.elmToObserve=null,this.initElements(),this.wrapperElement&&this.linkElement?(g.log("initializing DOM adapter. videoData.getId(): "+this.videoData.getId()),this._init(),this.attachWrapperEvents(),this.attachWindowEvents()):g.log("DOM Adapter is disabled. videoData.id: "+this.videoData.getId()),this.addEvents(),this.dispatchReadyEvent(),this.dispatchViewportEvent()},e.prototype.addEvents=function(){var e=this;this._handleWindowDisposeEvent=this.handleWindowDisposeEvent.bind(this),Y.addEventListener(h.Events.WINDOW_DISPOSE,this._handleWindowDisposeEvent),this.apvPlayer.addEventListener(h.Events.Players.PLAYING,this.handlePlayerEvent_Playing,this),this.apvPlayer.addEventListener(h.Events.Players.PAUSED,this.handlePlayerEvent_Paused,this),Y.addEventListener(h.Events.DomWindow.CHECK_VISIBILITY,function(){e.dispatchViewportEvent()}),this.setElementToObserve()},e.prototype._init=function(){},e.prototype.createMinContainer=function(){this.minContainer=document.createElement("div"),this.decorateElementWithPlacementName(this.minContainer)},e.prototype.decorateElementWithPlacementName=function(e){e.setAttribute("selector",this._placement.getName())},e.prototype.createVideoElement=function(){var e={},t=this._placement.getApvStyleOverride();this.apvPlayer.setOriginalImage(this.getOriginalUrl()),e.position="relative",e[h.styles.OBJECT_FIT]="cover";for(var n in t)e[n]=t[n];this.apvPlayer.setStyles(e),this._handleApvPlayerLoadedEvent=this.handleApvPlayerLoadedEvent.bind(this),this.apvPlayer.addEventListener(h.Events.Players.LOADED,this._handleApvPlayerLoadedEvent)},e.prototype.insertContainerToDOM=function(e){var t=g.config.getIndexLocation(this._placement),n=g.config.isParentAppend(this._placement);n&&(t=0,e=e.parentElement),t===h.APPEND_CHILD_CODE?e.appendChild(this.minContainer):e.insertBefore(this.minContainer,e.childNodes[t])},e.prototype.getOriginalUrl=function(){return this.elementToReplace.src},e.prototype.dispose=function(){this.apvPlayer.removeEventListener(h.Events.Players.PLAYING,this.handlePlayerEvent_Playing,this),this.apvPlayer.removeEventListener(h.Events.Players.PAUSED,this.handlePlayerEvent_Paused,this)},e.prototype.initElements=function(){var e=g.DomAdapter.getContainingsElements(this.videoData,this._placement,this.elementToReplace);this.linkElement=e.linkElement,this.wrapperElement=e.wrapperElement,this.hoverElement=n.getElementByType(this.videoData,this._placement,h.Selectors.HOVER_SELECTOR),this.wrapperElement&&this.linkElement||g.log("No element were found for wrapperElement or link_elm")},e.prototype.getCarouselElement=function(){return this.carouselElement||(this.carouselElement=n.getElementByType(this.videoData,this._placement,h.Selectors.CAROUSEL_SELECTOR)),document.body.contains(this.carouselElement)||(this.carouselElement=n.getElementByType(this.videoData,this._placement,h.Selectors.CAROUSEL_SELECTOR),this.carouselElement&&this.dispatchUpdateCarouselElementEvent()),this.carouselElement},e.prototype.setElementToObserve=function(){!this._placement.getObserverSelector()||this.elmToObserve&&document.body.contains(this.elmToObserve)&&this.isElementVisible(this.elmToObserve)||(this.elmToObserve=n.getElementByType(this.videoData,this._placement,h.Selectors.OBSERVER_SELECTOR),this.observerAttrChange(this.elmToObserve))},e.prototype.handleWindowDisposeEvent=function(){Y.removeEventListener(h.Events.WINDOW_DISPOSE,this._handleWindowDisposeEvent),this.dispose()},e.prototype.handleApvPlayerLoadedEvent=function(e){this.minuteLink.show()},e.prototype.handlePlayerEvent_Playing=function(e){this.minuteLink.show()},e.prototype.handlePlayerEvent_Paused=function(e){},e.prototype.setLoopPlay=function(){this.apvPlayer.setElementAttribute("loop","")},e.prototype.keepVideoVisible=function(){"visible"!=this.apvPlayer.getStyle("visibility")&&(this.apvPlayer.setStyles({visibility:"visible"}),this.dispatchViewportEvent())},e.prototype.hide=function(){this.hideVideo(),this.hideLogo()},e.prototype.hideVideo=function(){this.apvPlayer.isShow()&&(this.apvPlayer.hide(),g.log("hide video send inactive"))},e.prototype.showLogo=function(){this.minuteLink&&this.minuteLink.show()},e.prototype.hideLogo=function(){this.minuteLink&&this.minuteLink.hide()},e.prototype.isElementVisible=function(){return S.isElementVisible(this.hoverElement||this.wrapperElement,this.getCarouselElement())},e.prototype.getElementVisiblePercents=function(){return S.getElementVisiblePercents(this.hoverElement||this.wrapperElement,this.getCarouselElement())},e.prototype.dispatchViewportEvent=function(){var e=this.getElementVisiblePercents();this._updateVisible(e>=ne.getViewportPercentage()),this._updateVisibleAnalytics(e>=ne.getViewportAnalyticsPercentage())},e.prototype._updateVisible=function(e){this._isLastVisible!==e&&(this._isLastVisible=e,e?this.dispatchEvent(h.Events.Element.VISIBLE,{videoData:this.videoData}):this.dispatchEvent(h.Events.Element.NON_VISIBLE,{videoData:this.videoData}))},e.prototype._updateVisibleAnalytics=function(e){this._isLastVisibleAnalytics!==e&&(this._isLastVisibleAnalytics=e,e&&this.dispatchEvent(h.Events.Element.ANALYTICS_VISIBLE,{videoData:this.videoData}))},e.prototype.dispatchReadyEvent=function(){this.dispatchEvent(h.Events.Element.READY,{videoData:this.videoData,apvElement:this.apvPlayer.getApvElement(),carouselElement:this.getCarouselElement(),placement:this._placement})},e.prototype.dispatchUpdateCarouselElementEvent=function(){this.dispatchEvent(h.Events.Element.UPDATE_CAROUSEL_ELEMENT,{videoData:this.videoData,apvElement:this.apvPlayer.getApvElement(),carouselElement:this.getCarouselElement()})},e.prototype.play=function(){this.apvPlayer.isPaused()&&(this.keepVideoVisible(),this.apvPlayer.play())},e.prototype.pause=function(){this.apvPlayer.isPaused()||this.apvPlayer.pause()},e.prototype.handlerResize=function(){this.resetLogoStyle(),this.dispatchViewportEvent(),this.apvPlayer.updateSize(),this.startSizeElementTracer()},e.prototype.startSizeElementTracer=function(){X.isMobile()&&0!==this._placement.getSizeObserveEcho()&&(this._elementSizeTracer||(this._elementSizeTracer=new a.utils.ElementSizeTracer(this.elementToReplace,this._placement.getSizeObserveEcho(),this._placement.getSizeObserveDelay()),this._elementSizeTracer.addSizeChangedListener(this.handleElementSizeChanged,this)),this._elementSizeTracer.start())},e.prototype.handleElementSizeChanged=function(){this.resetLogoStyle(),this.dispatchViewportEvent(),this.apvPlayer.updateSize()},e.prototype.attachWindowEvents=function(){var e=this;Y.addEventListener(h.Events.DomWindow.SCROLL,function(){e.dispatchViewportEvent()}),Y.addEventListener(h.Events.DomWindow.RESIZE,function(t){var n=t.data;if(n&&e._placement.getAdditionalEchoRepeat()>0){var i=new a.utils.Timer(e._placement.getAdditionalEchoTime(),e.handlerResize,e);i.setCounterLimit(e._placement.getAdditionalEchoRepeat()),i.start()}e.handlerResize()}),Y.addEventListener(h.Events.DomWindow.URL_CHANGE,function(){e.resetLogoStyle(),e.dispatchViewportEvent()})},e.prototype.attachWrapperEvents=function(){function e(){return{videoData:t.videoData,placement:t._placement}}var t=this,n=this.getObservedElement();X.isMobile()?g.log("hover analytics disabled in mobile"):(n.addEventListener(h.Events.Element.MOUSE_ENTER,function(){t.dispatchEvent(h.Events.Element.MOUSE_ENTER,e())}),n.addEventListener(h.Events.Element.MOUSE_OUT,function(i){var r=i.toElement||i.relatedTarget;n.contains(r)||t.dispatchEvent(h.Events.Element.MOUSE_OUT,e())}))},e.prototype.getObservedElement=function(){return this.hoverElement?this.hoverElement:this.wrapperElement.contains(this.minContainer)?this.wrapperElement:this.minContainer||this.wrapperElement},e.prototype.observerAttrChange=function(e){var t={attributes:!0},n=this,i=n._placement.getObserverSelectorTimeout();this.observer&&this.observer.disconnect(),this.observer=new MutationObserver(function(e){n.handlerResize(),n.dispatchEvent(h.Events.Element.MUTANT,{timeout:i,videoData:n.videoData})}),e&&this.observer.observe(e,t)},e.prototype.createLogoElement=function(){var e=this;this.minuteLinkElm=this.minuteLink.getLogoElement(),this.minuteLinkElm.addEventListener("click",function(t){e.handleMinuteLinkClick(t)})},e.prototype.resetLogoStyle=function(){if(this.minuteLinkElm){var e=window.getComputedStyle(this.minuteLinkElm);this.setLogoPadding(),this.setLogoSize(e)}},e.prototype.setLogoPadding=function(){function e(e,i){n&&""!==n.style[e]&&(t.minuteLinkElm.style[i]=parseInt(t._placement.getLogoStyleOverride()[i],10)+parseInt(n.style[e],10)+"px")}var t=this,n=t.minContainer||t.wrapperElement;e("paddingLeft","left"),e("paddingRight","right"),e("paddingTop","top"),e("paddingBottom","bottom")},e.prototype.setLogoSize=function(e){var t=parseInt(e.width,10),n=this.minuteLinkElm.style.width;t<h.LOGO_SMALLEST_WIDTH&&(n=h.LOGO_SMALLEST_WIDTH+"px"),this.minuteLinkElm.style.width=n,this.minuteLinkElm.style.height=n,this.minuteLinkElm.style.backgroundSize=n},e.prototype.handleMinuteLinkClick=function(e){var t=n.getAttrBySelector(this._placement.getLinkSelector());return e.preventDefault(),window.open(this.linkElement.getAttribute(t),"_blank"),window.open("http://www.minute.ly/publisher","_self"),e.stopImmediatePropagation(),!1},e.prototype.getBoundingClientRect=function(){return this.minContainer.getBoundingClientRect()},e.prototype.hideElementToReplace=function(){this.elementToReplace.style.visibility="hidden",this.elementToReplace.style.opacity=0},e.prototype.activateApv=function(){ne.isBlockingDistanceEnabled()&&g.log("BlockingD: "+this.videoData.getArticleUrl()+" is now active"),this.showElement(this.apvPlayer.getApvElement()),this.showLogo(),this.hideElementToReplace(),this.showDebugBlocking()},e.prototype.blockApv=function(){ne.isBlockingDistanceEnabled()&&g.log("BlockingD: "+this.videoData.getArticleUrl()+" is now Blocked"),this.hideElement(this.apvPlayer.getApvElement()),this.hideLogo(),this.hideDebugBlocking()},e.prototype.setState=function(e){if(this.videoData&&this.blockingState!==e)switch(this.blockingState=e,e){case h.APVStates.Active:this.activateApv();break;case h.APVStates.Disabled:case h.APVStates.Blocked:this.blockApv()}},e.prototype.hideElement=function(e){e&&(e.style.opacity=0)},e.prototype.showElement=function(e){e&&(e.style.opacity=1)},e.prototype.hideDebugBlocking=function(){this.apvData.getDebug()&&(this.apvData.getDebug().style.opacity=0)},e.prototype.showDebugBlocking=function(){this.apvData.getDebug()&&(this.apvData.getDebug().style.opacity=1)}}(),function(){function e(){e.__superCtor__.call(this),this.currentSize={},this.hasChanged=!1,this._cloneImageLoaded=!1}a.apv=a.apv||{},a.apv.domAdapter=a.apv.domAdapter||{};var t=a.apv.domAdapter,n={"box-shadow":"none",border:0};t.MimicInheritETRClasses=e,g["extends"](e,t.Base),e.getTypeName=function(){return"MimicInheritETRClasses"},e.prototype.dispose=function(){e.__super__.dispose.call(this),X.isSafari()||(this.cloneOriginal&&(this.cloneOriginal.style.opacity=1),this.apvPlayer.setStyles({opacity:0}))},e.prototype.buildMinuteDomElements=function(){if(this.createMinContainer(),this.createVideoElement(),this.createLogoElement(),this._placement.hasContainerOverlay()){var e=this._placement.getContainerOverlayType();this.containerOL=a.placements.getContainerOverlay(e),this.minContainer.appendChild(this.containerOL)}0==this._placement.getNoClone()&&(this.createCloneImg(),this.minContainer.appendChild(this.cloneOriginal)),this.minContainer.appendChild(this.apvPlayer.getApvElement()),this.minContainer.appendChild(this.minuteLinkElm),this.insertContainerToDOM(this.elementToReplace.parentNode),this.hideElementToReplace(),"self"==this._placement.containerSelector&&(this.wrapperElement=this.minContainer),this.resetLogoStyle(this.minContainer)},e.prototype._init=function(){this.buildMinuteDomElements();var e={attributes:!0},t=this;this.observer=new MutationObserver(function(e){t.handlerResize()}),this.observer.observe(this.elementToReplace,e),Y.addEventListener(h.Events.DomWindow.RESIZE,this.handlerResize,this),
Y.addEventListener(h.Events.DomWindow.URL_CHANGE,this.handlerResize,this)},e.prototype.createMinContainer=function(){e.__super__.createMinContainer.call(this),this._updateElementSizeFromOriginal();var t=this._placement.getContainerStyleOverride();for(var n in t)this.minContainer.style[n]=t[n];this._copyStylesFromElement(this.elementToReplace,this.minContainer),this.hasChanged=this._setOverridesAndReturnHasChanged(this.minContainer,h.styleOverrides.CONTAINER)},e.prototype.createVideoElement=function(){e.__super__.createVideoElement.call(this),this.apvPlayer.setOriginalImage(this.getOriginalUrl());var t=this._getApvDefaultStyles();t[h.styles.OBJECT_FIT]="cover",this.apvPlayer.setStyles(t),this._setOverridesAndReturnHasChanged(this.apvPlayer.getApvElement(),h.styleOverrides.APV),this.apvPlayer.setStyles({width:"100%",height:"100%"}),this._handleApvPlayerLoadedEvent=this.handleApvPlayerLoadedEvent.bind(this),this.apvPlayer.addEventListener(h.Events.Players.LOADED,this._handleApvPlayerLoadedEvent)},e.prototype.getOriginalUrl=function(){var e,t=this.elementToReplace.src||this.elementToReplace.srcset;return"undefined"!=typeof t&&""!=t||"PICTURE"!==this.elementToReplace.parentElement.tagName||(e=this.elementToReplace.parentElement.querySelector("source[src], source[srcset]"),t=e.src,("undefined"==typeof t||""==t)&&(t=e.getAttribute("srcset").substr(0,e.getAttribute("srcset").indexOf(" ")))),t},e.prototype.handleCloneImageLoaded=function(){this.cloneOriginal.removeEventListener("load",this._listenerCloneImageLoaded),this._listenerCloneImageLoaded=null,this._cloneImageLoaded=!0},e.prototype.createCloneImg=function(){this.cloneOriginal=document.createElement("img"),this._listenerCloneImageLoaded=this.handleCloneImageLoaded.bind(this),this.cloneOriginal.addEventListener("load",this._listenerCloneImageLoaded),this.cloneOriginal.src=this.getOriginalUrl();var e=this._getCloneImageDefaultStyles();for(var t in e)this.cloneOriginal.style[t]=e[t];this.decorateElementWithPlacementName(this.cloneOriginal),a.utils.DomFinder.setElementAsReplaced(this.cloneOriginal);for(var i in n)this.cloneOriginal.style[i]=n[i];this._setOverridesAndReturnHasChanged(this.cloneOriginal,h.styleOverrides.CLONE)},e.prototype.handlerResize=function(){e.__super__.handlerResize.call(this),this._updateElementSizeFromOriginal()},e.prototype._updateElementSizeFromOriginal=function(){var e=this,t=function(){var t=g.extractElementSize(e.elementToReplace);t.width&&t.height&&(e.minContainer.style.width=t.width+"px",e.minContainer.style.height=t.height+"px")};this.hasChanged=this._setOverridesAndReturnHasChanged(this.minContainer,h.styleOverrides.CONTAINER),this.apvPlayer.getApvElement()&&this._setOverridesAndReturnHasChanged(this.apvPlayer.getApvElement(),h.styleOverrides.APV),this._setOverridesAndReturnHasChanged(this.elementToReplace,h.styleOverrides.ELEMENT_TO_REPLACE),t(),setTimeout(function(){t()},0),this.handleSafariWebkitFixOnResize()},e.prototype._setOverridesAndReturnHasChanged=function(e,t,n){var i=this._getActiveOverridesIfChanged(t)||{},r=g.extentObject(i.styles,n||this.getDefaultContainerStyle());for(var o in r)r.hasOwnProperty(o)&&e.style[o]!==r[o]&&(e.style[o]=r[o]);var a="-"+e.style[h.styles.HEIGHT];return h.styles.MARGIN_TOP in r&&r[h.styles.MARGIN_TOP]==h.styles.PARENT&&e.style[h.styles.MARGIN_TOP]!==a&&(e.style[h.styles.MARGIN_TOP]=a),i.hasChanged},e.prototype._getActiveOverridesIfChanged=function(e){var t,n=this.currentSize[e];this.currentSize[e]||(this.currentSize[e]=h.DEFAULT_MEDIAQUERY);var i=this._placement.getActiveOverridesWithSize(e);return this.currentSize[e]=i.size,t={hasChanged:!1,styles:i.styles},n!==i.size&&(t.hasChanged=!0),t},e.prototype._copyStylesFromElement=function(e,t){var i=window.getComputedStyle(e);for(var r in n)t.style[r]=i[r]},e.prototype.handleSafariWebkitFixOnResize=function(){var e=this,t=function(){e.minContainer.style.display=h.values.NONE,setTimeout(function(){e.minContainer.style.display=h.values.BLOCK,e.shouldPlay===!0&&e.apvPlayer.play()},1)};X.isSafari()&&e._placement.getSafariWebkitFix()&&this.hasChanged&&(t(),setTimeout(function(){t()},500))},e.prototype.getDefaultContainerStyle=function(){return{position:"absolute",overflow:"hidden"}},e.prototype.hideElementToReplace=function(){function t(){if(n._cloneImageLoaded===!1)return void i(t);e.__super__.hideElementToReplace.call(n);var r=n._placement.getElementToReplaceStyleOverride()||n._getHideElementToReplaceStyleDefaults(),o=n.elementToReplace;for(var a in r)o.style[a]=r[a]}var n=this,i=g.getRequestAnimationFrame();i(t)},e.prototype.handlePlayerEvent_Playing=function(t){e.__super__.handlePlayerEvent_Playing.call(this),this.hideElementToReplace()},e.prototype._getHideElementToReplaceStyleDefaults=function(){return{position:h.values.RELATIVE,visibility:h.values.HIDDEN,opacity:0}},e.prototype._getApvDefaultStyles=function(){return{position:h.values.RELATIVE,display:h.values.BLOCK,width:h.values.HUNDRED_PERCENT,height:h.values.HUNDRED_PERCENT}},e.prototype._getCloneImageDefaultStyles=function(){return{position:h.values.ABSOLUTE,display:h.values.BLOCK,width:h.values.HUNDRED_PERCENT,height:h.values.HUNDRED_PERCENT}}}(),function(){function e(){e.__superCtor__.call(this),this.bgImageUrl=null}a.apv=a.apv||{},a.apv.domAdapter=a.apv.domAdapter||{};var t=a.apv.domAdapter;t.AppendToElement=e,g["extends"](e,t.Base),e.getTypeName=function(){return"AppendToElement"},e.prototype._init=function(){this.createMinContainer(),this.createVideoElement(),this.createLogoElement(),this.minContainer.appendChild(this.apvPlayer.getApvElement()),this.minContainer.appendChild(this.minuteLinkElm),this.insertContainerToDOM(this.elementToReplace),"self"==this._placement.containerSelector&&(this.wrapperElement=this.minContainer),this.resetLogoStyle(this.minContainer,this.minuteLink)},e.prototype.insertContainerToDOM=function(e){var t=e.childNodes&&e.childNodes.length>0,n=g.config.getIndexLocation(this._placement);return t&&n!==h.APPEND_CHILD_CODE?void(n!==h.APPEND_CHILD_CODE?e.insertBefore(this.minContainer,e.childNodes[n]):e.insertBefore(this.minContainer,e.childNodes[0])):void e.appendChild(this.minContainer)},e.prototype.initElements=function(){e.__super__.initElements.call(this);var t=a.utils.DomFinder.getElementByType(this.videoData,this._placement,h.Selectors.IMAGE_SELECTOR)||this.elementToReplace;this.bgImageUrl=g.extractImageUrlFromStyle(t.style.backgroundImage)},e.prototype.createMinContainer=function(){e.__super__.createMinContainer.call(this);var t=this._placement.getContainerStyleOverride();for(var n in t)this.minContainer.style[n]=t[n];this.minContainer.style.width="100%",this.minContainer.style.height="100%"},e.prototype.createVideoElement=function(){e.__super__.createVideoElement.call(this),this.apvPlayer.setStyles({width:"100%",height:"100%"})},e.prototype.getOriginalUrl=function(){return this.bgImageUrl},e.prototype.dispose=function(){e.__super__.dispose.call(this),X.isSafari()||this.apvPlayer.setStyles({opacity:0})},e.prototype.hideElementToReplace=function(){}}(),function(){function e(){e.__superCtor__.call(this)}a.apv=a.apv||{},a.apv.domAdapter=a.apv.domAdapter||{};var t=a.apv.domAdapter;t.TestGroup=e,g["extends"](e,t.Base),e.getTypeName=function(){return"TestGroup"},e.prototype._init=function(){this.wrapperElement=this.elementToReplace},e.prototype.dispatchReadyEvent=function(){this.dispatchEvent(h.Events.Element.READY,{videoData:this.videoData,apvElement:this.hoverElement||this.wrapperElement,carouselElement:this.getCarouselElement(),placement:this._placement})},e.prototype.getBoundingClientRect=function(){return this.elementToReplace.getBoundingClientRect()},e.prototype.hideElementToReplace=function(){}}(),function(){function e(){e.__superCtor__.call(this),this.domAdapter=null,this.videoData=null,this.currentPlacement=null}a.apv=a.apv||{},a.apv.playmodes=a.apv.playmodes||{},a.apv.playmodes.Base=e,g["extends"](e,m),e.prototype.setDomAdapter=function(e,t,n){this.apvData=n,this.domAdapter=e,this.apvPlayer=t,this.videoData=this.apvData.getVideoData(),this.currentPlacement=this.apvData.getPlacement()},e.prototype.start=function(){}}(),function(){function e(){e.__superCtor__.call(this)}a.apv.playmodes.Semihover=e,g["extends"](e,a.apv.playmodes.Base),e.prototype.start=function(){var e=this;this.domAdapter.setLoopPlay(),this.domAdapter.addEventListener(h.Events.Element.MOUSE_ENTER,function(){e.apvPlayer.show(),e.domAdapter.play()})}}(),function(){function e(){e.__superCtor__.call(this)}a.apv.playmodes.Hover=e,g["extends"](e,a.apv.playmodes.Semihover),e.prototype.start=function(){e.__super__.start.call(this);var t,n=this;this.domAdapter.addEventListener(h.Events.Element.MOUSE_OUT,function(){n.apvPlayer.hide(),t=setTimeout(function(){n.domAdapter.pause()},500),n.domAdapter.showLogo()}),this.domAdapter.addEventListener(h.Events.Element.MOUSE_ENTER,function(){clearTimeout(t),n.domAdapter.hideLogo()}),this.apvPlayer.addEventListener(h.Events.Players.PLAYING,function(){n.domAdapter.hideLogo()})}}(),function(){function e(){e.__superCtor__.call(this)}a.apv.playmodes.Viewport=e,g["extends"](e,a.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.domAdapter.setLoopPlay(),this.domAdapter.isElementVisible()&&this.domAdapter.play(),this.apvPlayer.addEventListener(h.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ne.getEffectApvShowDelay())}),this.domAdapter.addEventListener(h.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(h.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),this.domAdapter.addEventListener(h.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},e.data.timeout)}),this.domAdapter.hideLogo()}}(),function(){function e(){e.__superCtor__.call(this)}a.apv.playmodes.MobileGif=e,g["extends"](e,a.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this),this.domAdapter.showLogo()}}(),function(){function e(){e.__superCtor__.call(this)}a.apv.playmodes.MobileSprite=e,g["extends"](e,a.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.addEventListener(h.Events.Players.LOADED,function(){t.domAdapter.showLogo(),setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ne.getEffectApvShowDelay()),t.domAdapter.play()})}}(),function(){function e(){e.__superCtor__.call(this)}a.apv.playmodes.InArticleMobile=e,g["extends"](e,a.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.domAdapter.showLogo(),this.apvPlayer.addEventListener(h.Events.Players.LOADED,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ne.getEffectApvShowDelay()),t.domAdapter.play()}),this.currentPlacement.getClickSelector()?g.plugins.addPlayEventListener(function(){t.domAdapter.hide()},this.currentPlacement,this.videoData):g.logWarning("InArticleMobile without click selector, Placement: "+this.currentPlacement.getName())}}(),function(){function e(){e.__superCtor__.call(this)}a.apv.playmodes.TestGroup=e,g["extends"](e,a.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.domAdapter.addEventListener(h.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},e.data.timeout)})}}(),function(){function e(e){function t(e,t){c.has(e,t)||c.add(e,t)}function n(){return!c||c.getNumListeners()>0}function i(){l&&(u.disconnect(),u=null,c.removeAll(),c=null,l=null)}function r(){u=new MutationObserver(o),u.observe(l.getElementToReplace(),{attributes:!0})}function o(e){for(var t=0;t<e.length;t++){var n=e[t];if(("src"===n.attributeName||"srcset"===n.attributeName)&&n.target.currentSrc!==l.getPlacement().getLazyBackgroundSrc()){s();break}if("style"===n.attributeName&&g.extractImageUrlFromStyle(n.target.style.backgroundImage)){s();break}}}function s(){g.isElementHasSize(l.getElementToReplace())?c.dispatch(l):setTimeout(s,50)}var l=e,c=new a.utils.Signal,u=null;return r(),{addListener:t,isWatched:n,dispose:i}}a.apv=a.apv||{},a.apv.LazyLoadWatcher=e}(),function(){function e(){if(l[0]===s.INIT[0]){for(var e=0,t=le.getAllPlacements(),n=0;n<t.length;n++){var i=t[n];i.hasIndicators()&&e++}0===e?(l=s.WARNING,g.log("** Warning! Placements don't have placement indicators. Please add 'indicators' key to ALL placements for optimized placement performance.")):e>0&&e!==le.getAllPlacements().length?(l=s.WARNING,g.log("** Warning! Some placements don't have placement indicators. Please add 'indicators' key to ALL placements.")):l=s.NO_WARNING}}function t(){if(!c){var e=le.getAllPlacements().length>0&&le.getAllPlacements()[0].hasIndicators();c=e?new r.Page:new r.Server}return c}function n(e,t,n){var i=""+e.getId()+t.getPlacementId(),r=e,o=t,a=n,s=null,l=0,c=null,u=null,d=null,p="";this.getKey=function(){return i},this.getVideoData=function(){return r},this.getPlacement=function(){return o},this.getElementToReplace=function(){return a},this.setWatcher=function(e){s=e},this.removeWatcher=function(){s=null},this.getWatcher=function(){return s},this.setBlockingDistance=function(e){l=e},this.getBlockingDistance=function(){return l},this.setPosition=function(e){c=e},this.getPosition=function(){return c},this.setRect=function(e){u=e},this.getRect=function(){return u},this.setDebug=function(e){d=e},this.getDebug=function(){return d},this.setState=function(e){p=e},this.getState=function(){return p}}function i(){}a.services=a.services||{},a.services.VideoGenerator=a.services.VideoGenerator||{};var r=a.services.VideoGenerator,o=a.utils.DomFinder,s={INIT:[0,"init"],WARNING:[1,"warning"],NO_WARNING:[2,"no warning"]},l=s.INIT,c=null;r.getVideos=function(){return e(),t(),c.getVideos()},r.Base=i,i.prototype.isValidPlacement=function(e,t){return e&&e.hasAPV()&&(g.plugins.isInArticle(t)||e.shouldPlayRegular())?g.plugins.isInArticle(t)&&!e.shouldPlayInArticle()?!1:!0:!1},i.prototype.getElementToReplace=function(e,t){var n;return this.isValidPlacement(e,t)?(n=o.getElementToReplace(e,t),n&&null!==n.offsetParent&&0!==n.offsetHeight&&g.isElementHasSize(n)?n:null):null},i.prototype.getVideos=function(){},i.prototype.sortVideos=function(e,t){var n=e.getVideoData(),i=t.getVideoData();return n.isForcePlacement()===!0&&i.isForcePlacement()===!0?0:n.isForcePlacement()===!0&&i.isForcePlacement()===!1?1:n.isForcePlacement()===!1&&i.isForcePlacement()===!0?-1:n.getRank()>i.getRank()?1:n.getRank()<i.getRank()?-1:0},i.prototype.createData=function(e,t,i){return new n(e,t,i)}}(),function(){function t(){t.__superCtor__.call(this),this._isMinuteUiTestEnabled=e.debugParams[f.MINUTE_UI_TEST]}var n=a.services.VideoGenerator,i=a.utils.DomFinder,r=document.createElement("a");n.Page=t,g["extends"](t,n.Base),t.prototype.getStructured=function(e){r.href=e;for(var t="",n=ne.getUrlStructure(),i=0;i<n.length;i++)n[i]!==h.UrlStructure.Origin&&(t+=r[n[i]]);return""!==t&&"/"!=t.charAt(0)&&(t="/"+t),t},t.prototype.getVideoDataFromLinkSelector=function(e,t){var n=i.getAttrBySelector(e.getSelectorByType(h.Selectors.LINK_SELECTOR)),r=n&&t.getAttribute(n),o=r,a=ne.getPlayerIdPattern();if(r){if(e.getIsAttributeUrl())o=this.getStructured(r);else if(a){var s=new RegExp(a);o=o.replace(s,"$1")}}else;if(this._isMinuteUiTestEnabled){var l=t&&t.getAttribute(h.MinuteUiTests.HtmlAttributes.ACTIVE);if(!l)return null}return re.getVideoDataByKey(o,e)},t.prototype.getVideos=function(){for(var e,t,n,r,o=le.getAllPlacements(),a=[],s=[],l=[],c=0;c<o.length;c++)if(r=o[c],r.hasIndicators()&&document.querySelector(r.getIndicatorPlacement())&&(n=document.querySelectorAll(r.getIndicatorLink()),n&&0!==n.length))for(var u=0;u<n.length;u++){var d=n[u];if(this._isMinuteUiTestEnabled&&d.setAttribute(h.MinuteUiTests.HtmlAttributes.EXISTS,"true"),t=this.getVideoDataFromLinkSelector(r,d),!(s.indexOf(t)>-1)){var p=i.getAttrBySelector(r.getLinkSelector())||"href",f=g.urls.getStructuredByUrl(d.getAttribute(p));-1==l.indexOf(f)&&l.push(f),e=this.getElementToReplace(t,r),e&&(s.push(t),i.getIsElementReplaced(e)||a.push(this.createData(t,r,e)))}}var v=K.getSessionStorageInstance();return v&&v.setItem(h.LocalStorage.POTENTIAL,encodeURIComponent(JSON.stringify(l))),a&&a.length&&a.sort(this.sortVideos).reverse(),a}}(),function(){function e(){e.__superCtor__.call(this)}var t=a.services.VideoGenerator,n=a.utils.DomFinder;t.Server=e,g["extends"](e,t.Base),e.prototype.getVideos=function(){for(var e,t,i,r=le.getAllPlacements(),o=re.getVideoList(),a={},s=[],l=0;l<o.length;l++){i=o[l];for(var c=0;c<r.length&&(e=r[c],a[i.getArticleUrl()]!==!0);c++)t=this.getElementToReplace(i,e),t&&(a[i.getArticleUrl()]=!0,n.getIsElementReplaced(t)||s.push(this.createData(i,e,t)))}return s.length>0&&(s.sort(this.sortVideos),s.reverse()),s}}(),function(){function e(){function e(){for(var e=0;e<2*Math.PI;e+=a)c["cos"+e]=Math.cos(e),c["sin"+e]=Math.sin(e)}function t(e,t){var n=t.getElementToReplace();e===h.APVStates.Blocked||e===h.APVStates.Disabled?(n.style.border="13px solid black",n.style.boxSizing="border-box",n.style.opacity=.2,g.log("BlockingD: "+t.getVideoData().getArticleUrl()+" is BLOCKED")):(n.style.border="0 solid black",n.style.boxSizing="border-box",n.style.opacity=1,g.log("BlockingD: "+t.getVideoData().getArticleUrl()+" is ACTIVE"))}function n(e){var t=2*Math.PI,n=document.createElement("div");n.className="minCircle";for(var r=0;t>r;r+=a){var o=e.getPosition().top+e.getBlockingDistance()*c["cos"+r],l=e.getPosition().left+e.getBlockingDistance()*c["sin"+r];n.appendChild(i(o,l,s,"green"))}return n}function i(e,t,n,i){var r=document.createElement("div");return r.className="minPoint",r.style.position="absolute",r.style.width=n+"px",r.style.height=n+"px",r.style.top=e+"px",r.style.left=t+"px",r.style.zIndex=1e7,r.style.backgroundColor=i,r.style.borderRadius="10px",r}function r(e){var t=e.getDebug()||document.createElement("div"),r=n(e),o=t.getElementsByClassName("minCircle"),a=!o||0===o.length;a||t.removeChild(o[0]),t.appendChild(r),a||t.removeChild(t.getElementsByClassName("minPoint")[0]);var s=e.getVideoData().isForcePlacement()?"gold":"red",l=i(e.getPosition().top,e.getPosition().left,6,s);t.appendChild(l),e.setDebug(t),g.log("Top: "+e.getPosition().top+", Left: "+e.getPosition().left)}function o(e){var n=!e.getDebug();switch(r(e),n&&l.insertBefore(e.getDebug(),l.childNodes[0]),e.getState()){case h.APVStates.Active:t(h.APVStates.Active,e);break;case h.APVStates.Blocked:case h.APVStates.Disabled:case h.APVStates.Disposed:e.getDebug().style.opacity=0,t(h.APVStates.Blocked,e)}}var a=.02,s=3,l=ne.getWindowScrollElement()||document.body,c={};return e(),{updateApvGraphics:o}}a.placements=a.placements||{},a.placements.debug=a.placements.debug||{},a.placements.debug.DocumentRadiusPainter=e}(),function(){function e(e){for(var t={},n=0;n<e.length;n++)t[e[n].getKey()]=e[n];return t}function t(e){var t=!1;for(var n in c)c.hasOwnProperty(n)&&!e[n]&&(c[n].state=h.APVStates.Disposed,t=!0);return t}function n(e){var t=!1;for(var n in e)e.hasOwnProperty(n)&&(c[n]?(c[n].getPosition()!==e[n].getPosition()&&(c[n].setPosition(e[n].getPosition()),t=!0),c[n].getBlockingDistance()!==e[n].getBlockingDistance()&&(c[n].setBlockingDistance(e[n].getBlockingDistance()),t=!0)):(c[n]=e[n],c[n].state=h.APVStates.New,t=!0));return t}function i(e,t){var n=Math.pow(e.top-t.top,2),i=Math.pow(e.left-t.left,2);return Math.sqrt(i+n)}function r(e,t){for(var n,r,o=0;e>o;o++)if(r=l[o],r.getState()!==h.APVStates.Blocked&&r.getState()!==h.APVStates.Disabled&&(n=i(t.getPosition(),r.getPosition()),n<r.getBlockingDistance()))return ne.isPlacementsDebugEnabled()&&g.log("BlockingD: ID: "+r.getVideoData().getId()+" with URL: "+r.getVideoData().getArticleUrl()+" is blocking "+t.getVideoData().getArticleUrl()),t.getState()===h.APVStates.New||t.getState()===h.APVStates.Blocked?h.APVStates.Blocked:h.APVStates.Disabled;return h.APVStates.Active}function o(e){return ne.getBaseHeightPercent()+e.getRect().width/ne.getBaseThumbPx()}function s(e){e.setBlockingDistance(o(e))}a.services=a.services||{},a.services.BlockingDistance={};var l,c={};a.services.BlockingDistance.calculate=function(i){var o,a,u={hasChanged:!1,APVs:{}},d=e(i);if(u.hasChanged=t(d),u.hasChanged=n(d),!u.hasChanged)return u;l=g.createArrayFromDictinary(c);for(var p=0;p<l.length;p++)a=l[p],ne.isBlockingDistanceEnabled()?a.getVideoData().isForcePlacement()?o=h.APVStates.Active:(s(a),o=r(p,a)):o=h.APVStates.Active,a.getState()!==o&&a.setState(o),u.APVs[a.getKey()]=a;return u}}(),function(){function t(){if(!u){if(te.isTestGroup())return void(u=new a.analytics.ViewportAnalyticsService);switch(ne.getDefaultPlayMode()){case h.config.PlayModes.Hover:u=new a.analytics.HoverAnalyticsService;break;case h.config.PlayModes.SemiHover:u=new a.analytics.SemiHoverAnalyticsService;break;default:u=new a.analytics.ViewportAnalyticsService}}}function n(e,t){var n=a.apv.domAdapter;return te.isTestGroup()?new n.TestGroup:e.getMinuteLocation()===h.PlacementKeys.CHILD?new a.apv.domAdapter.AppendToElement:new a.apv.domAdapter.MimicInheritETRClasses}function i(t,n){var i=a.apv.players;return e.debugParams[f.FORCE_SPRITE]&&t.hasSprite()?new i.ApvSpritePlayer:X.isMobile()?ne.isSpriteEnabled()&&n.isSpriteEnabled()&&t.hasSprite()?new i.ApvSpritePlayer:new i.ApvGifPlayer:new i.ApvVideoPlayer}function r(e,t){var n=ne.isMobileEnabled()&&X.isMobile();return te.isTestGroup()?new a.apv.playmodes.TestGroup:n?o(e,t):s(e)}function o(t,n){var i=a.apv.playmodes,r=h.config.PlayModes,o=n.hasSprite()&&(!!e.debugParams[f.FORCE_SPRITE]||ne.isSpriteEnabled()&&t.isSpriteEnabled());if(o)return new i.MobileSprite;switch(t.getPlayMode()){case r.InArticle:return new i.InArticleMobile;case r.BrightcovePlugin:return new i.MobileGif}return new i.MobileGif}function s(e){var t=a.apv.playmodes,n=h.config.PlayModes;switch(e.getPlayMode()){case n.Hover:return new t.Hover;case n.SemiHover:return new t.Semihover}return new t.Viewport}function l(e){var t=a.apv.logos;switch(e.getLogoType()){case"SVG":return new t.LogoElmSVG;case"REG":return new t.LogoElmReg;case"SPAN":return new t.LogoElmSpan;case"SPANSVG":return new t.LogoElmSpanSVG}return new t.LogoElmSVG}function c(e){this.videoData=e.getVideoData(),this.placement=e.getPlacement(),this.id=e.getKey(),this.apvData=e,this.domAdapter=null,this.apvPlayer=null,this.minuteLink=null,this.playmode=null,this._initElements()}var u,d=a.utils.DomFinder;a.apv=a.apv||{},a.apv.APVWrapper=c,c.prototype.getId=function(){return this.id},c.prototype.getDomAdapter=function(){return this.domAdapter},c.prototype._addDomAdapterEvents=function(){t(),B.addLinkSelector(this.videoData,this.placement),u.register(this)},c.prototype.getBoundingClientRect=function(){return this.domAdapter.getBoundingClientRect()},c.prototype._initElements=function(){var e=ne.isMobileEnabled()&&X.isMobile(),t=this.apvData.getElementToReplace();return this.apvPlayer=i(this.videoData,this.placement),this.apvPlayer.init(t,this.videoData,this.placement),this.minuteLink=l(this.placement),this.minuteLink.init(this.placement,e),this.domAdapter=n(this.placement,this.videoData),this.domAdapter?(this._addDomAdapterEvents(),this.domAdapter.init(this.apvData,this.apvPlayer,this.minuteLink),this.playmode=r(this.placement,this.videoData),this.playmode.setDomAdapter(this.domAdapter,this.apvPlayer,this.apvData),void d.setElementAsReplaced(t)):(g.log("No DomAdapter found."),null)},c.prototype.start=function(){this.playmode.start()},c.prototype.setState=function(e){this.domAdapter.setState(e)}}(),function(){function t(e){var t,n=e.getPlacement().getLazyBackgroundSrc();return n?(t=e.getElementToReplace(),"AppendToElement"===e.getPlacement().getDomAdapter()||e.getPlacement().getMinuteLocation()===h.PlacementKeys.CHILD?!g.extractImageUrlFromStyle(t.style.backgroundImage):t.src&&""!==t.src&&t.src.indexOf(n)>-1?!0:t.srcset&&""!==t.srcset&&t.srcset.indexOf(n)>-1?!0:t.src||t.srcset?!1:!0):!1}function n(){this._apvWrapperHash={},this._lazyWatcherHash={},this._numOfFoundApvs=0,this._htmlReport=null,this._windowSize={width:window.innerWidth,height:window.innerHeight};var e=g.isCurrentUrlFilterValid(ne.getFilterBlocking());ne.isBlockingDistanceEnabled()&&(e?g.log("Blocking Distance filter is true"):g.log("BlockingD: page doesnt comply with blocking distance filter"),ne.isPlacementsDebugEnabled()&&(this._debugPainter=a.placements.debug.DocumentRadiusPainter())),this.startEagerInterval(),this.findReplaceableElementsAndPlaceVideos()}a.services=a.services||{},a.services.PlacementServices=n,n.prototype.startEagerInterval=function(){var e=this,t=20;this.eagerInterval=setInterval(function(){(0===t||e._numOfFoundApvs>0)&&(clearInterval(e.eagerInterval),setInterval(e.findReplaceableElementsAndPlaceVideos.bind(e),ne.getPlacementDomRefresh())),t--,e.findReplaceableElementsAndPlaceVideos()},500)},n.prototype.calculateGeometry=function(e){for(var t,n,i,r=0;r<e.length;r++)i=e[r],n=i.getKey(),t=this._apvWrapperHash[n]?this._apvWrapperHash[n].getBoundingClientRect():i.getElementToReplace().getBoundingClientRect(),i.setRect(t),i.setPosition({top:t.top+document.body.scrollTop+parseInt(t.height)/2,left:t.left+document.body.scrollLeft+parseInt(t.width)/2})},n.prototype._setWindowSize=function(){this._windowSize={width:window.innerWidth,height:window.innerHeight}},n.prototype._resizeWindow=function(e){var t,n,i=[];for(t in e.APVs)i.push(e.APVs[t]);this.calculateGeometry(i);for(t in e.APVs)e.APVs.hasOwnProperty(t)&&(n=e.APVs[t],this.updateApvDataDebug(n))},n.prototype.findReplaceableElementsAndPlaceVideos=function(){var e,n,i,r=a.services.VideoGenerator.getVideos();this.calculateGeometry(r);var o=a.services.BlockingDistance.calculate(r);if((this._windowSize.width!=window.innerWidth||this._windowSize.height!=window.innerHeight)&&(this._setWindowSize(),this._resizeWindow(o)),!o.hasChanged)return void this.reportCounters();for(e in o.APVs)o.APVs.hasOwnProperty(e)&&(i=this._apvWrapperHash[e],n=o.APVs[e],i?(i.setState(n.getState()),this.updateApvDataDebug(n)):this._lazyWatcherHash[e]||(this.updateApvDataDebug(n),n.getState()!==h.APVStates.Blocked&&n.getState()!==h.APVStates.Disabled&&(t(n)&&!te.isTestGroup()?this.createLazyWatcher(n):this.createApvWrapper(n))));this.reportCounters()},n.prototype.updateApvDataDebug=function(e){this._debugPainter&&this._debugPainter.updateApvGraphics(e)},n.prototype.createLazyWatcher=function(e){var t=new a.apv.LazyLoadWatcher(e);e.setWatcher(t),t.addListener(this.handleLazyLoadWatcher,this),this._lazyWatcherHash[e.getKey()]=e,g.log("Lazy Load Watcher Created. VideoId: "+e.getVideoData().getId()+', selector: "'+e.getPlacement().getName()+'"')},n.prototype.deleteLazyWatcher=function(e){var t=e.getWatcher();t.dispose(),e.removeWatcher(),this._lazyWatcherHash[e.getKey()]=null,delete this._lazyWatcherHash[e.getKey()]},n.prototype.createApvWrapper=function(e){var t=new a.apv.APVWrapper(e);t.start(),this._apvWrapperHash[e.getKey()]=t,g.log("APV Wrapper Created. VideoId: "+e.getVideoData().getId()+', selector: "'+e.getPlacement().getName()+'"')},n.prototype.handleLazyLoadWatcher=function(e){this.createApvWrapper(e),this.deleteLazyWatcher(e)},n.prototype.reportCounters=function(){var t=e._report||{APVs:-1,Watchers:-1};e._report={APVs:Object.keys(this._apvWrapperHash).length,Watchers:Object.keys(this._lazyWatcherHash).length},(t.Watchers!==e._report.Watchers||t.APVs!==e._report.APVs)&&(this._numOfFoundApvs=e._report.Watchers+e._report.APVs,g.log("Total APVs: "+e._report.APVs+", Total APVs Watchers: "+e._report.Watchers),this._htmlReport||(this._htmlReport=document.createElement("div"),this._htmlReport.setAttribute("id","minReport"),this._htmlReport.style.display="none",document.body.appendChild(this._htmlReport)),this._htmlReport.setAttribute("data-apvs",e._report.APVs),this._htmlReport.setAttribute("data-watchers",e._report.Watchers))}}();var G=function(){function e(){this.active_adapter=null,this.adapters=[],this.usedInPageCallback=[]}return e.prototype.add_adapter=function(e,t){t&&(this.adapters[e]=t)},e.prototype.getAdapter=function(e){return this.adapters[e]},e.prototype.getActiveAdapter=function(){if(null!=this.active_adapter)return this.active_adapter;for(var e=ne.getActivePlayers(),t=!1,n=0;n<e.length;n++)if(-1===h.Scraper.ALL_PLAYERS.indexOf(e[n]))return g.log("Player "+e[n]+" does not exist"),null;for(var i=0;i<e.length;i++){var r=this.getAdapter(e[i]);if(r){if(r.isUsedInPage())return this.active_adapter=r,g.log("Adapters - found active adapter "+r.name),t=!0,this.active_adapter;r.setOnReadyCallback&&(t=!0,r.setOnReadyCallback(this.isUsedInPageCallback.bind(this)))}}return t||g.log("No adapters found."),null},e.prototype.addUsedInPageCallback=function(e){"function"==typeof e&&this.usedInPageCallback.push(e)},e.prototype.resetUsedInPageCallback=function(){this.usedInPageCallback=[],this.active_adapter=null},e.prototype.executeUsedInPageCallback=function(){for(var e=0;e<this.usedInPageCallback.length;e++)this.usedInPageCallback[e](this.active_adapter);this.usedInPageCallback=[]},e.prototype.isUsedInPageCallback=function(e){this.active_adapter||(this.active_adapter=e,this.executeUsedInPageCallback())},new e}();r.prototype.isUsedInPage=function(){},r.prototype.isLoaded=function(e){},r.prototype.getScrapVideoData=function(){},r.prototype.activateDataCollection=function(e){},r.prototype.addPlayEventListener=function(e,t){},G.PlayerAdapter=r,function(){function t(e){}var n="data-video-id";t.prototype.isUsedInPage=function(){return"undefined"!=typeof videojs&&"undefined"!=videojs.getPlayers()&&Object.keys(videojs.getPlayers()).length>0?!0:!1},t.prototype.setOnReadyCallback=function(e){this.adapter_ready_callback=e,this.isUsedIntervalForCallback()},t.prototype.isUsedIntervalForCallback=function(){var e=this;this.iterations=20,this.interval&&clearInterval(this.interval),this.interval=setInterval(function(){e.isUsedInPage()?(clearInterval(e.interval),e.adapter_ready_callback(e)):e.iterations<=0&&clearInterval(e.interval),e.iterations--},500)},t.prototype.isLoaded=function(e){for(var t=this,i=Object.keys(videojs.getPlayers()),r=0;r<i.length;r++){var o=i[r];if(videojs.getPlayers()[o].hasStarted()){t.video_id=videojs.getPlayers()[o].options_[n];break}}return this.video_id?"undefined"!=typeof this.video_id:!1},t.prototype.getScrapVideoData=function(){var t={};return t.version="VJS BC",t.duration=0,t.video_id=this.video_id,t.stream=this.video_id,t.url=window.location.origin+window.location.pathname,t.title=document.title,t.publisher=e._publisher,t.player_id=h.Scraper.PlayerList.BRIGHTCOVE_PLAYER,t},t.prototype.addPlayEventListener=function(e,t){function i(e){var i=o.getAttribute(n);if(i){var a=D.getWindowLocationHref();a=g.urls.getStructuredByUrlWithoutOrigin(a);var s=re.getVideoDataByKey(a,t);return s.getPublisherVideoId()!=i?void g.log("no matching video id with url"):void(o.className.indexOf("vjs-has-started")>-1&&s&&g.adapters.VirtualClickOrganizer.isValid(s)&&(clearInterval(r),e(s)))}}var r=0,o=document.querySelector(t.getIndicatorPlacement());0===r&&(r=setInterval(function(){i(e)},5e3))},t.prototype.activateDataCollection=function(e){g.log("TBD")},t.prototype.checkPlugin=function(){return!1};var i=new t("vjsPlayer");g.plugins.addSpecialCheck(i),G.add_adapter(h.Scraper.PlayerList.VJSBRIGHTCOVE_PLAYER,i)}(),function(){function e(){this.active_adapter=null,Y.addEventListener(h.Events.DomWindow.URL_CHANGE,this.handleUrlChanged,this),this.init()}e.prototype.init=function(){return this.active_adapter=null,X.isMobile()&&ne.isDisableMobileScrap()?(g.log("Mobile Scraper disabled."),!1):(this.active_adapter=G.getActiveAdapter(),this.active_adapter?(g.log("ContentScraper - waiting for video to load."),this.waitForVideoToLoad()):(G.addUsedInPageCallback(this.isUsedInPageCallback.bind(this)),g.log("ContentScraper - waiting for adapter callback.")),!0)},e.prototype.handleUrlChanged=function(){G.resetUsedInPageCallback(),g.isCurrentUrlFilterValid(ne.getFilterScraper())&&this.init()},e.prototype.isUsedInPageCallback=function(e){this.active_adapter=e,g.log("ContentScraper - found adapter "+e.name),
g.log("ContentScraper - waiting for video to load"),this.waitForVideoToLoad()},e.prototype.waitForVideoToLoad=function(){this.interval_id&&clearInterval(this.interval_id),this.interval_id=setInterval(this.checkForLoadedVideoPlayers.bind(this),h.TIMER_ELEMENT_CHECK)},e.prototype.checkForLoadedVideoPlayers=function(){var e=null;this.active_adapter.isLoaded()&&(g.log("ContentScraper - adapter "+this.active_adapter.name+" is loaded"),e=this.active_adapter.getScrapVideoData()),e&&(g.log(e),this.reportVideoPlayerContent(e),clearInterval(this.interval_id))},e.prototype.reportVideoPlayerContent=function(e){ne.isEnableNewScrapper()&&g.scrapperWouldHaveBeenBlocked()?Q.getPlayerContentDelayed().push(h.Emitter.NEW_SCRAPE_EVENT,e):Q.getPlayerContent().push(h.Emitter.NEW_VIDEO_EVENT,e)},a.scrap=a.scrap||{},a.scrap.ContentScraper=e}(),o.prototype.log=function(e){this.queue.push(e),null!==this._myTimeout&&clearTimeout(this._myTimeout);var t=this;this._myTimeout=setTimeout(function(){t.send_interaction()},this.INTERVAL_TIME)},o.prototype.send_interaction=function(){0!==this.queue.length&&(Q.getAnalytics().push(h.Emitter.STATS_EVENT,{session_id:this._sessionId,interaction_id:this._interactionId,apv_id:this._apvId,min_vid_id:this._minVidId,events:this.queue}),g.log(this.queue),this.queue=[],this._interactionId++)},function(){function e(e){this._collector=new o(g.generateUID(),e.getId(),e.getVideoDBId())}e.prototype.init=function(e,t,n,i){var r={};r.clientTimestamp=e,r.initVol=Math.round(t),r.isAutoPlay=+n,r.isMute="undefined"!=typeof i?+i:0,this._collector.log({init:r})},e.prototype.pause=function(e){var t={};t.second=g.timeRounder(e),this._collector.log({pause:t})},e.prototype.pauseDuration=function(e,t){var n={};n.second=g.timeRounder(e),n.duration=g.timeRounder(t),this._collector.log({pauseDuration:n})},e.prototype.play=function(e){var t={};t.second=g.timeRounder(e),this._collector.log({play:t})},e.prototype.seek=function(e,t){var n={};n.from=g.timeRounder(e),n.to=g.timeRounder(t),this._collector.log({seek:n})},e.prototype.fullscreen=function(e,t){var n={};n.second=g.timeRounder(e),n.status=+t,this._collector.log({fullscreen:n})},e.prototype.mute=function(e,t){var n={};n.second=g.timeRounder(e),n.status=+t,this._collector.log({mute:n})},e.prototype.volume=function(e,t,n){var i={};i.second=g.timeRounder(e),i.from=g.timeRounder(t),i.delta=g.timeRounder(n),this._collector.log({vol:i})},e.prototype.watched=function(e,t){var n={};Math.round(t)>0&&(n.second=g.timeRounder(e),n.duration=g.timeRounder(t),this._collector.log({watched:n}))},e.prototype.focus=function(e,t,n){var i={};i.second=g.timeRounder(e),i.status=+t,i.isPlay=+n,this._collector.log({focus:i})},e.prototype.startBuffering=function(e){var t={};t.second=g.timeRounder(e),this._collector.log({buffer:t})},e.prototype.bufferDuration=function(e,t){var n={};n.second=g.timeRounder(e),n.duration=g.timeRounder(t),this._collector.log({bufferDuration:n})},e.prototype.qualityChange=function(e,t){var n={};n.second=g.timeRounder(e),n.quality=t,this._collector.log({qualityChange:n})},e.prototype.replay=function(){var e={};this._collector.log({replay:e})},e.prototype.ended=function(){var e={};this._collector.log({ended:e})},a.DataCollectorService=e}(),function(){function e(){this.activeCollector=null,this.init()}e.prototype.init=function(){for(var e,t,n=g.urls.getStructuredByUrl(g.urls.getCurrentUrl()),i=0;i<re.getVideosCount();i++)if(t=re.getByIndex(i),n.indexOf(t.getArticleUrl())>-1&&oe.sendLogDelayById(t.getId()),e=g.urls.getStructuredByUrl(t.getArticleUrl()),t.getDoesCollect()&&n===e){g.log("CollectorManager - Found video for data collection: "+t.getArticleUrl()),this.waitForVideoToLoad(t.getPublisherVideoId()),this.getActiveAdapter(),ce=new a.DataCollectorService(t);break}},e.prototype.getActiveAdapter=function(){var e=this;e.activeCollector=G.getActiveAdapter(),e.activeCollector||G.addUsedInPageCallback(function(t){e.activeCollector=t})},e.prototype.waitForVideoToLoad=function(e){var t=this;this.interval_id=setInterval(function(){t.checkForLoadedVideoPlayers(e)},h.TIMER_ELEMENT_CHECK)},e.prototype.checkForLoadedVideoPlayers=function(e){g.log("CollectorManager - checkForLoadedVideoPlayers"),e&&g.log("Looking for loaded video: "+e),this.activeCollector&&this.activeCollector.isLoaded(e)&&(g.log("collector "+this.activeCollector.name+" is loaded"),e&&g.log("activating video ID:"+e),this.activeCollector.activateDataCollection(e),clearInterval(this.interval_id))},a.scrap=a.scrap||{},a.scrap.CollectorManager=e}(),function(){function t(){this._activeAdapter=null,this._intervalId=0,this.init()}t.prototype.init=function(){this._activeAdapter=G.getActiveAdapter(),this._activeAdapter?this.waitForVideoToLoad():G.addUsedInPageCallback(this.isUsedInPageCallback.bind(this))},t.prototype.isUsedInPageCallback=function(e){this._activeAdapter=e,this.waitForVideoToLoad()},t.prototype.waitForVideoToLoad=function(){this._intervalId&&clearInterval(this._intervalId),this._intervalId=setInterval(this.checkForLoadedVideoPlayers.bind(this),h.TIMER_ELEMENT_CHECK)},t.prototype.checkForLoadedVideoPlayers=function(){var e=null;this._activeAdapter.isLoaded()&&(e=this._activeAdapter.getScrapVideoData()),e&&(clearInterval(this._intervalId),this._intervalId=0,this.reportVideoPresent(e))},t.prototype.reportVideoPresent=function(t){var n={id:e._publisher,url:t.url,exist:this.isUrlExistInList(t.url)};Q.getUrlReporter().push(h.Emitter.VIDEO_PRESENT,n)},t.prototype.isUrlExistInList=function(e){for(var t,n,i=g.urls.getStructuredByUrlWithoutOrigin(e),r=re.getVideosCount(),o=0;r>o;o++)if(n=re.getByIndex(o),t=g.urls.getStructuredByUrlWithoutOrigin(n.getArticleUrl()),i===t)return n.hasAPV();return!1},a.scrap=a.scrap||{},a.scrap.ScrapSearcher=t}(),function(){function t(t){function n(){switch(g.log("42: Before state change: "+y),y){case E.INITIALIZING:y=E.LISTENING,l();break;case E.LISTENING:y=E.PLAY_STARTED,H.sendVideoView({url:d,vid:u,test_mode:te.getGroupCode(),group:Z.get(h.GROUP_42),comp:X.isBrowserSupported()?1:0,sub_test_group:te.isTestGroup()?!1:te.getSubTestGroup(),source:X.isMobile()?h.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:h.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP,publisher:e._publisher}),g.log("42: --SEND VIDEO VIEW ANALYTICS--"),i(),r(),p.add(g.getTrackerTiming("Sent42:"+u));break;case E.PLAY_STARTED:y=E.PENDING_NEW_VIDEO_LOAD,o(),n();break;case E.PENDING_NEW_VIDEO_LOAD:y=E.LISTENING,l()}g.log("42: after state change: "+y)}function i(){f.off("timeupdate",n)}function r(){v=setInterval(s,500)}function o(){clearInterval(v)}function a(){return f&&f.mediainfo&&f.mediainfo.id?(clearInterval(m),s(),!0):!1}function s(){var e=f.mediainfo.id;u!=e&&(u=e,n())}function l(){f.on("timeupdate",n)}function c(){a()?s():m=setInterval(a,1e3)}var u=null,d=D.getWindowLocationHref(),f=t,v=null,m=null,E={INITIALIZING:0,LISTENING:1,PLAY_STARTED:2,PENDING_NEW_VIDEO_LOAD:3},y=E.INITIALIZING;g.log("42: init"),c()}function n(){this.players={},this.init()}function i(){var e=null;return"undefined"!=typeof videojs&&videojs.getPlayers()&&!g.isObjEmpty(videojs.getPlayers())&&(e=videojs.getPlayers()),e}g["extends"](n,m),a.videoViews=a.videoViews||{},a.videoViews.VideoViewManager=n,n.prototype.addVideos=function(e){var n=this,i=Object.keys(e);i.forEach(function(i){"undefined"==typeof n.players[i]&&(n.players[i]=new t(e[i]),p.add(g.getTrackerTiming("PlayerLoaded")))})},n.prototype.init=function(){var e=this,t=i(),n=Z.get(h.GROUP_42);if(void 0===n&&(n=(Math.random()>=.5?1:0)+3,Z.set(h.GROUP_42,n)),g.isObjEmpty(t))var r=setInterval(function(){t=i(),g.isObjEmpty(t)||(e.addVideos(t),clearInterval(r))},250);else this.addVideos(t)}}();var Y=new m;g.debugParamsOverrides();var j=null,q=new A,K=new P(q),J=new y,X=new w(g,navigator,J),Z=new b(g,K),Q=new t(g,h.Urls),$=new U(g,K,Z),ee=new I(g,window,g.plugins.isPlugin(),g.plugins.getIframeWindows()),te=new N(g,window,Z,ee,Y,e.debugParams[f.FORCE_TEST]),ne=new L(e,g,te),ie=new T(g,ne,X),re=new C(g,ne,X,ie),oe=new n(g,K),ae=new O(g,ne),se=new V(g,K,ee),le=new R(g,ae,X),ce=null;g.checkPotentialScraperUrls(),s.utils=s.utils||{},s.utils.SpritePlayer=a.utils.SpritePlayerFactory(g,a.utils.Signal);var ue=function(){function t(){return g.globalTasks.listenToWindowErrors(),g.log(e.debugParams),j=W.create(g,K,window.location),j.get(j.CONSTS.DISABLE_VERSION)===e.ver?void g.log("disabled by feature flag"):e.debugParams[v.IS_PROCUTION]&&"true"==e.debugParams[f.DISABLE_PROD]?void g.log("Minute Production disabled by debug tool"):(console.log("Welcome to Minute "+e.ver+" "+e.debugParams[v.SCRIPT_HOSTNAME]),g.log("Getting configuration for publisher: "+e._publisher),g.urls.setReferrerUrl(),n(),P=y.bind(this),void window.addEventListener("load",P))}function n(){R+=1;var t="jsonCallback",n=e._publisherDebugUrl||h.Urls.Configuration+"api/v1/web/configuration/"+e._publisher+".json?callback="+t;g.loadJSONP(n,{callbackName:t,timeout:I,onTimeout:i,onSuccess:o})}function i(){m(),window.removeEventListener("load",P),R>b?g.log("Configuration timeout "+R+", NO more tryout."):(g.log("Configuration timeout "+R+", trying again ..."),n())}function r(){p||(p=se.get(ne.getTrackingFunnel()),p.add("Test:"+te.getGroupCode()),p.add("Mobile:"+(X.isMobile()?1:0)),g.plugins.isPlugin()&&p.add("Plugin:1"),g.trackMinuteGenesis(),p.add(g.getTrackerTiming("ConfigLoaded")),p.add("Mobile:"+(X.isMobile()?1:0)))}function o(t){g.log("Configuration loaded"),k=t,X.init(k.config),Z.init(),$.init(),ne.init(k.config,X,l,e.debugParams[f.DISABLE_SCRIPT],e.debugParams[f.ENABLE_BLOCKING_DISTANCE]);var n=J.compareStr(e.ver,ne.getMinimumVer())<0;return n?void g.log("minute blocked by minimum version"):(te.init(ne.getTestGroupSize(),g.plugins.isPlugin()),D.init(),ee.broadcast(te.isTestGroup()),g.plugins.isPlugin()||ee.addParentListener(function(e){r(),e.funnelData&&(g.log("Got tracker data"),p.add(g.getTrackerTiming(e.funnelData)))}),!g.plugins.isPlugin()||te.isReady()&&D.isReady()?(r(),E(),y()):(Y.addEventListener(h.Events.TEST_MODE_READY,s),Y.addEventListener(h.Events.WINDOW_SERVICE_READY,c)),void ee.listen())}function s(){g.log("testGroupService.isTest = "+te.isTestGroup()+" "+window.location.origin),Y.removeEventListener(h.Events.TEST_MODE_READY,s),u()}function c(){g.log("Plugin Top Window URL = "+D.getWindowLocationHref()),Y.removeEventListener(h.Events.WINDOW_SERVICE_READY,c),g.debugParamsOverrides(!0),u()}function u(){te.isReady()&&D.isReady()&&(r(),E(),y())}function d(){m(),N=setTimeout(function(){V=!0,g.log("Minute window load start after timeout."),y()}.bind(this),ne.getWindowLoadTimeout())}function m(){N&&clearTimeout(N),N=0}function E(){if(!U){if(F.sendUrlReport(),a.videoViews&&a.videoViews.VideoViewManager&&(C=new a.videoViews.VideoViewManager),!X.isBrowserSupported())return g.log("Minute is not supported "+e.ver+" "+e.debugParams[v.SCRIPT_HOSTNAME]),p.add("NoBrowser"),g.sendLoggerReport("ver="+e.ver+"&pid="+e._publisher+"&incompatibility=Browser"),void m();if(!K.getLocalStorageInstance())return g.log("Local Storage and Session Storage are not supported. Disable Minute."),p.forceFlush("Storage:No"),K.isLocalStorageEnable||K.isSessionStorageEnable||q.isCookiesEnable||g.sendLoggerReport("ver="+e.ver+"&pid="+e._publisher+"&incompatibility=NoStorage"),void m();K.isLocalStorageEnable?p.add("Storage:Local"):K.isSessionStorageEnable?p.add("Storage:Session"):q.isCookiesEnable&&p.add("Storage:Cookies"),g.log("** PlayMode is set to: "+ne.getDefaultPlayMode()),p.add("Visit"),re.init(k),oe.init(p,Q.getAnalytics()),M.init(),le.init(ne),le.getAllPlacements(),g.validateScraperURL(),U=!0}}function y(){_()&&(p.add("Start"),S(),A())}function _(){return U?ne.isReady()?(re.getVideosCount()||g.log("no videos found in configuration"),"complete"===document.readyState||"true"==e.debugParams[f.BYPASS_WINDOW_LOAD]||V?(m(),ne.isDisableScript()?(g.log("Minute disable by configuration."),!1):(window.removeEventListener("load",P),!0)):(d(),g.log("Minute wait for window load."),!1)):(g.log("Configuration did not load yet."),!1):!1}function S(){g.flags.isNewScraper()?w=new a.scrap.ScraperService:(w=new a.scrap.ContentScraper,L=new a.scrap.CollectorManager,T=new a.scrap.ScrapSearcher)}function A(){g.isPlacementEnabled()?O=new a.services.PlacementServices:g.log("** Placement Disabled by configuration. See filter configuration. **")}var P,b=10,I=X.isMobile()?10:5,w=null,L=null,T=null,C=null,O=null,R=0,V=!1,N=0,k=null,U=!1;t()};new ue;return e}(_min||{});