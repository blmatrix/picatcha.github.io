/* Copyright Panedia Pty Ltd 2016 */
"use strict";function panediaxhrSuccess(){this.callback.apply(this,this.arguments)}function panediaxhrError(){console.error(this.statusText)}function panedialoadFile(e,t){var n=new XMLHttpRequest;n.callback=t,n.arguments=Array.prototype.slice.call(arguments,2),n.onload=panediaxhrSuccess,n.onerror=panediaxhrError,n.open("get",e,!0),n.send(null)}function panediacallBack(e,t,n,a){if("single"==n)var r=JSON.parse(this.responseText),i=r.markers[0].id;else var r=JSON.parse(this.responseText),i=r.groups[0].markers[0].id;var s="https://media.panedia.com/"+i+"/"+i+a;panediapopupSend(e,t,s)}function loadpanedia(e){!function(e,t,n){function a(e,t){return typeof e===t}function r(){var e,t,n,r,i,s,o;for(var l in y)if(y.hasOwnProperty(l)){if(e=[],t=y[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=a(t.fn,"function")?t.fn():t.fn,i=0;i<e.length;i++)s=e[i],o=s.split("."),1===o.length?b[o[0]]=r:(!b[o[0]]||b[o[0]]instanceof Boolean||(b[o[0]]=new Boolean(b[o[0]])),b[o[0]][o[1]]=r),g.push((r?"":"no-")+o.join("-"))}}function i(e){var t=w.className,n=b._config.classPrefix||"";if(C&&(t=t.baseVal),b._config.enableJSClass){var a=RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(a,"$1"+n+"js$2")}b._config.enableClasses&&(t+=" "+n+e.join(" "+n),C?w.className.baseVal=t:w.className=t)}function s(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function o(e,t){return!!~(""+e).indexOf(t)}function l(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):C?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function d(e,t){return function(){return e.apply(t,arguments)}}function p(e,t,n){var r;for(var i in e)if(e[i]in t)return n===!1?e[i]:(r=t[e[i]],a(r,"function")?d(r,n||t):r);return!1}function f(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function u(){var e=t.body;return e||(e=l(C?"svg":"body"),e.fake=!0),e}function c(e,n,a,r){var i,s,o,d,p="modernizr",f=l("div"),c=u();if(parseInt(a,10))for(;a--;)o=l("div"),o.id=r?r[a]:p+(a+1),f.appendChild(o);return i=l("style"),i.type="text/css",i.id="s"+p,(c.fake?c:f).appendChild(i),c.appendChild(f),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),f.id=p,c.fake&&(c.style.background="",c.style.overflow="hidden",d=w.style.overflow,w.style.overflow="hidden",w.appendChild(c)),s=n(f,e),c.fake?(c.parentNode.removeChild(c),w.style.overflow=d,w.offsetHeight):f.parentNode.removeChild(f),!!s}function h(t,a){var r=t.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(f(t[r]),a))return!0;return!1}if("CSSSupportsRule"in e){for(var i=[];r--;)i.push("("+f(t[r])+":"+a+")");return i=i.join(" or "),c("@supports ("+i+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function m(e,t,r,i){function d(){f&&(delete T.style,delete T.modElem)}if(i=a(i,"undefined")?!1:i,!a(r,"undefined")){var p=h(e,r);if(!a(p,"undefined"))return p}for(var f,u,c,m,v,g=["modernizr","tspan","samp"];!T.style&&g.length;)f=!0,T.modElem=l(g.shift()),T.style=T.modElem.style;for(c=e.length,u=0;c>u;u++)if(m=e[u],v=T.style[m],o(m,"-")&&(m=s(m)),T.style[m]!==n){if(i||a(r,"undefined"))return d(),"pfx"==t?m:!0;try{T.style[m]=r}catch(y){}if(T.style[m]!=v)return d(),"pfx"==t?m:!0}return d(),!1}function v(e,t,n,r,i){var s=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+k.join(s+" ")+s).split(" ");return a(t,"string")||a(t,"undefined")?m(o,t,r,i):(o=(e+" "+z.join(s+" ")+s).split(" "),p(o,t,n))}var g=[],y=[],x={_version:"3.3.1",_config:{classPrefix:"panedia_",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){y.push({name:e,fn:t,options:n})},addAsyncTest:function(e){y.push({name:null,fn:e})}},b=function(){};b.prototype=x,b=new b,b.addTest("devicemotion","DeviceMotionEvent"in e),b.addTest("deviceorientation","DeviceOrientationEvent"in e);var w=t.documentElement,C="svg"===w.nodeName.toLowerCase(),S="Moz O ms Webkit",k=x._config.usePrefixes?S.split(" "):[];x._cssomPrefixes=k;var _=function(t){var a,r=prefixes.length,i=e.CSSRule;if(void 0===i)return n;if(!t)return!1;if(t=t.replace(/^@/,""),a=t.replace(/-/g,"_").toUpperCase()+"_RULE",a in i)return"@"+t;for(var s=0;r>s;s++){var o=prefixes[s],l=o.toUpperCase()+"_"+a;if(l in i)return"@-"+o.toLowerCase()+"-"+t}return!1};x.atRule=_;var z=x._config.usePrefixes?S.toLowerCase().split(" "):[];x._domPrefixes=z;var E={elem:l("modernizr")};b._q.push(function(){delete E.elem});var T={style:E.elem.style};b._q.unshift(function(){delete T.style}),x.testAllProps=v;var O=x.prefixed=function(e,t,n){return 0===e.indexOf("@")?_(e):(-1!=e.indexOf("-")&&(e=s(e)),t?v(e,t,n):v(e,"pfx"))};b.addTest("fullscreen",!(!O("exitFullscreen",t,!1)&&!O("cancelFullScreen",t,!1))),r(),i(g),delete x.addTest,delete x.addAsyncTest;for(var j=0;j<b._q.length;j++)b._q[j]();e.Modernizr=b}(e,document);for(var t=document.getElementsByClassName("panedia"),n=function(t,n){n||(n=e.location.href),t=t.replace(/[\[\]]/g,"\\$&");var a=RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),r=a.exec(n);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},a=!1,r=0;r<t.length;++r){a=!1;var i=n("o",t[r].dataset.href);i&&i.indexOf("p")>-1&&(a=!0),Modernizr.fullscreen||(a=!0);var s=/iPhone/.test(navigator.userAgent)&&!e.MSStream;s&&(a=!0);var o="",l="";t[r].dataset.width&&(o='width="'+t[r].dataset.width+'"',l="width:"+t[r].dataset.width+";");var d="",p="";if(t[r].dataset.height&&(d='height="'+t[r].dataset.height+'"',p="height:"+t[r].dataset.height+";"),!a){var f='<iframe src="'+t[r].dataset.href+'" '+o+d+' frameborder="0" allowfullscreen></iframe>';t[r].innerHTML=f}if(a){var u="",c=n("h",t[r].dataset.href);u=c?t[r].dataset.href.replace("h="+c,"h="+c+"s"):t[r].dataset.href+"&h=s",u+="&p";var h="-still2.jpg";if(t[r].dataset.width){var m=t[r].dataset.width.replace(/\D/g,"");601>=m&&t[r].dataset.width.indexOf("px")>-1&&(h="-still1.jpg")}var v="";if(t[r].dataset.href.indexOf("vtlite3")>-1){var g=t[r].dataset.href.split("/").pop();g=""+parseInt(g),g="00000000".substr(0,8-g.length)+g,v="https://media.panedia.com/"+g+"/"+g+h,panediapopupSend(t[r],u,v)}if(t[r].dataset.href.indexOf("vstplayer3")>-1){var y=t[r].dataset.href.split("/").pop(),x="";y.indexOf("multi=")>-1?(y=n("multi",t[r].dataset.href),x="https://embed.panedia.com/vst/vstplayerapptour.php?multi="+y+"&out=json",panedialoadFile(x,panediacallBack,t[r],u,"multi",h)):(y=y.substring(0,8),x="https://embed.panedia.com/vst/vstplayerapptour.php?map="+y+"&out=json",panedialoadFile(x,panediacallBack,t[r],u,"single",h))}}}}var panediapopupSend=function(e,t,n){var a='<a href="'+t+'" target="_blank" class="startscreen" style="background-image: url(&quot;'+n+"&quot;);background-color: #000;background-position: center center;background-repeat: no-repeat;background-clip: border-box;box-sizing: border-box;background-size: cover;overflow: hidden;width:"+e.dataset.width+";height:"+e.dataset.height+';z-index: 1;display:block;position:relative;text-decoration:none;font-family : inherit;"><div onmouseover="this.style.opacity=1" onmouseout ="this.style.opacity=0.9" style="position: absolute;z-index: 104;left: 50%;top: 50%;width:64px !important;height:64px !important;transform: translate(-50%,-50%);-webkit-transform: translate(-50%,-50%);-moz-transform: translate(-50%,-50%);-ms-transform: translate(-50%,-50%);background-size: contain;text-align: center;"><img src="//embed.panedia.com/images/360play-sm.png" style="position: relative;display: block;z-index: 30000;opacity:0.9;"/>';e.innerHTML=a};loadpanedia(window);