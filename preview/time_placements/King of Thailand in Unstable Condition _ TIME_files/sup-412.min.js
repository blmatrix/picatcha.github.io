(function(win,G,h){if(!("pushState"in h))return;var lastTime=0,vendors=["ms","moz","webkit","o"],raf=win.requestAnimationFrame,x=0;for(;x<vendors.length&&!raf;++x){raf=window[vendors[x]+"RequestAnimationFrame"]}if(!raf){raf=function(callback,element){var currTime=(new Date).getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=win.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id}}G.historyAction=G.historyAction||"reload";var alive=true,actions={reload:function(){G.reloadInScreen()},destroy:function(){alive=false;G.Bean.fire(G.container,"destroy")}},getUrl=G.getUrl||function(){return win.location.pathname+win.location.search},path=getUrl(),checkPathChange=function(){return path!==getUrl()&&!!(path=getUrl())},callInScreen=function(){if(alive)raf(callInScreen);if(checkPathChange()){return actions[G.historyAction]&&actions[G.historyAction]()}};callInScreen()})(top,top.GUMGUM,top.history);
