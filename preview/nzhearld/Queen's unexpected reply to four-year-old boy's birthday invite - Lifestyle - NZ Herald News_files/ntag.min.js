/**
 * @file postscribe
 * @description Asynchronously write javascript, even with document.write.
 * @version v2.0.6
 * @see {@link https://krux.github.io/postscribe}
 * @license MIT
 * @author Derek Brans
 * @copyright 2016 Krux Digital, Inc
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.postscribe=e():t.postscribe=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o);t.exports=i["default"]},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(){}function s(){var t=m.shift();if(t){var e=h.last(t);e.afterDequeue(),t.stream=a.apply(void 0,t),e.afterStreamStart()}}function a(t,e,n){function r(t){t=n.beforeWrite(t),g.write(t),n.afterWrite(t)}g=new p["default"](t,n),g.id=y++,g.name=n.name||g.id,u.streams[g.name]=g;var o=t.ownerDocument,a={close:o.close,open:o.open,write:o.write,writeln:o.writeln};c(o,{close:i,open:i,write:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return r(e.join(""))},writeln:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return r(e.join("")+"\n")}});var f=g.win.onerror||i;return g.win.onerror=function(t,e,r){n.error({msg:t+" - "+e+": "+r}),f.apply(g.win,[t,e,r])},g.write(e,function(){c(o,a),g.win.onerror=f,n.done(),g=null,s()}),g}function u(t,e,n){if(h.isFunction(n))n={done:n};else if("clear"===n)return m=[],g=null,void(y=0);n=h.defaults(n,d),t=/^#/.test(t)?window.document.getElementById(t.substr(1)):t.jquery?t[0]:t;var r=[t,e,n];return t.postscribe={cancel:function(){r.stream?r.stream.abort():r[1]=i}},n.beforeEnqueue(r),m.push(r),g||s(),t.postscribe}e.__esModule=!0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e["default"]=u;var f=n(2),p=o(f),l=n(4),h=r(l),d={afterAsync:i,afterDequeue:i,afterStreamStart:i,afterWrite:i,autoFix:!0,beforeEnqueue:i,beforeWriteToken:function(t){return t},beforeWrite:function(t){return t},done:i,error:function(t){console.log(t)},releaseAsync:!1},y=0,m=[],g=null;c(u,{streams:{},queue:m,WriteStream:p["default"]})},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){var n=d+e,r=t.getAttribute(n);return l.existy(r)?String(r):r}function a(t,e){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=d+e;l.existy(n)&&""!==n?t.setAttribute(r,n):t.removeAttribute(r)}e.__esModule=!0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=n(3),f=o(c),p=n(4),l=r(p),h=!1,d="data-ps-",y="ps-style",m="ps-script",g=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,t),this.root=e,this.options=n,this.doc=e.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new f["default"]("",{autoFix:n.autoFix}),this.actuals=[e],this.proxyHistory="",this.proxyRoot=this.doc.createElement(e.nodeName),this.scriptStack=[],this.writeQueue=[],a(this.proxyRoot,"proxyof",0)}return t.prototype.write=function(){var t;for((t=this.writeQueue).push.apply(t,arguments);!this.deferredRemote&&this.writeQueue.length;){var e=this.writeQueue.shift();l.isFunction(e)?this._callFunction(e):this._writeImpl(e)}},t.prototype._callFunction=function(t){var e={type:"function",value:t.name||t.toString()};this._onScriptStart(e),t.call(this.win,this.doc),this._onScriptDone(e)},t.prototype._writeImpl=function(t){this.parser.append(t);for(var e=void 0,n=void 0,r=void 0,o=[];(e=this.parser.readToken())&&!(n=l.isScript(e))&&!(r=l.isStyle(e));)e=this.options.beforeWriteToken(e),e&&o.push(e);o.length>0&&this._writeStaticTokens(o),n&&this._handleScriptToken(e),r&&this._handleStyleToken(e)},t.prototype._writeStaticTokens=function(t){var e=this._buildChunk(t);return e.actual?(e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,h&&(e.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),h&&(e.actualInnerHTML=this.root.innerHTML),e):null},t.prototype._buildChunk=function(t){for(var e=this.actuals.length,n=[],r=[],o=[],i=t.length,s=0;i>s;s++){var a=t[s],u=a.toString();if(n.push(u),a.attrs){if(!/^noscript$/i.test(a.tagName)){var c=e++;r.push(u.replace(/(\/?>)/," "+d+"id="+c+" $1")),a.attrs.id!==m&&a.attrs.id!==y&&o.push("atomicTag"===a.type?"":"<"+a.tagName+" "+d+"proxyof="+c+(a.unary?" />":">"))}}else r.push(u),o.push("endTag"===a.type?u:"")}return{tokens:t,raw:n.join(""),actual:r.join(""),proxy:o.join("")}},t.prototype._walkChunk=function(){for(var t=void 0,e=[this.proxyRoot];l.existy(t=e.shift());){var n=1===t.nodeType,r=n&&s(t,"proxyof");if(!r){n&&(this.actuals[s(t,"id")]=t,a(t,"id"));var o=t.parentNode&&s(t.parentNode,"proxyof");o&&this.actuals[o].appendChild(t)}e.unshift.apply(e,l.toArray(t.childNodes))}},t.prototype._handleScriptToken=function(t){var e=this,n=this.parser.clear();n&&this.writeQueue.unshift(n),t.src=t.attrs.src||t.attrs.SRC,t=this.options.beforeWriteToken(t),t&&(t.src&&this.scriptStack.length?this.deferredRemote=t:this._onScriptStart(t),this._writeScriptToken(t,function(){e._onScriptDone(t)}))},t.prototype._handleStyleToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",t=this.options.beforeWriteToken(t),t&&this._writeStyleToken(t),e&&this.write()},t.prototype._writeStyleToken=function(t){var e=this._buildStyle(t);this._insertCursor(e,y),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))},t.prototype._buildStyle=function(t){var e=this.doc.createElement(t.tagName);return e.setAttribute("type",t.type),l.eachKey(t.attrs,function(t,n){e.setAttribute(t,n)}),e},t.prototype._insertCursor=function(t,e){this._writeImpl('<span id="'+e+'"/>');var n=this.doc.getElementById(e);n&&n.parentNode.replaceChild(t,n)},t.prototype._onScriptStart=function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)},t.prototype._onScriptDone=function(t){return t!==this.scriptStack[0]?void this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,t.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)))},t.prototype._writeScriptToken=function(t,e){var n=this._buildScript(t),r=this._shouldRelease(n),o=this.options.afterAsync;t.src&&(n.src=t.src,this._scriptLoadHandler(n,r?o:function(){e(),o()}));try{this._insertCursor(n,m),n.src&&!r||e()}catch(i){this.options.error(i),e()}},t.prototype._buildScript=function(t){var e=this.doc.createElement(t.tagName);return l.eachKey(t.attrs,function(t,n){e.setAttribute(t,n)}),t.content&&(e.text=t.content),e},t.prototype._scriptLoadHandler=function(t,e){function n(){t=t.onload=t.onreadystatechange=t.onerror=null}function r(){n(),e()}function o(t){n(),i(t),e()}var i=this.options.error;u(t,{onload:function(){return r()},onreadystatechange:function(){/^(loaded|complete)$/.test(t.readyState)&&r()},onerror:function(){return o({message:"remote script failed "+t.src})}})},t.prototype._shouldRelease=function(t){var e=/^script$/i.test(t.nodeName);return!e||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))},t}();e["default"]=g},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o);t.exports=i["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(2),a=o(s),u=n(3),c=o(u),f=n(6),p=r(f),l=n(5),h={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?"":arguments[0],r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,t),this.stream=n;var o=!1,s={};for(var u in a)a.hasOwnProperty(u)&&(r.autoFix&&(s[u+"Fix"]=!0),o=o||s[u+"Fix"]);o?(this._readToken=(0,p["default"])(this,s,function(){return e._readTokenImpl()}),this._peekToken=(0,p["default"])(this,s,function(){return e._peekTokenImpl()})):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return t.prototype.append=function(t){this.stream+=t},t.prototype.prepend=function(t){this.stream=t+this.stream},t.prototype._readTokenImpl=function(){var t=this._peekTokenImpl();return t?(this.stream=this.stream.slice(t.length),t):void 0},t.prototype._peekTokenImpl=function(){for(var t in h)if(h.hasOwnProperty(t)&&h[t].test(this.stream)){var e=c[t](this.stream);if(e)return"startTag"===e.type&&/script|style/i.test(e.tagName)?null:(e.text=this.stream.substr(0,e.length),e)}},t.prototype.peekToken=function(){return this._peekToken()},t.prototype.readToken=function(){return this._readToken()},t.prototype.readTokens=function(t){for(var e=void 0;e=this.readToken();)if(t[e.type]&&t[e.type](e)===!1)return},t.prototype.clear=function(){var t=this.stream;return this.stream="",t},t.prototype.rest=function(){return this.stream},t}();e["default"]=d,d.tokenToString=function(t){return t.toString()},d.escapeAttributes=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=(0,l.escapeQuotes)(t[n],null));return e},d.supports=a;for(var y in a)a.hasOwnProperty(y)&&(d.browserHasFlaw=d.browserHasFlaw||!a[y]&&y)},function(t,e){"use strict";e.__esModule=!0;var n=!1,r=!1,o=window.document.createElement("div");try{var i="<P><I></P></I>";o.innerHTML=i,e.tagSoup=n=o.innerHTML!==i}catch(s){e.tagSoup=n=!1}try{o.innerHTML="<P><i><P></P></i></P>",e.selfClose=r=2===o.childNodes.length}catch(s){e.selfClose=r=!1}o=null,e.tagSoup=n,e.selfClose=r},function(t,e,n){"use strict";function r(t){var e=t.indexOf("-->");return e>=0?new c.CommentToken(t.substr(4,e-1),e+3):void 0}function o(t){var e=t.indexOf("<");return new c.CharsToken(e>=0?e:t.length)}function i(t){var e=t.indexOf(">");if(-1!==e){var n=t.match(f.startTag);if(n){var r=function(){var t={},e={},r=n[2];return n[2].replace(f.attr,function(n,o){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",e[arguments[5]]=!0):t[o]=arguments[2]||arguments[3]||arguments[4]||f.fillAttr.test(o)&&o||"":t[o]="",r=r.replace(n,"")}),{v:new c.StartTagToken(n[1],n[0].length,t,e,!!n[3],r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))}}();if("object"===("undefined"==typeof r?"undefined":u(r)))return r.v}}}function s(t){var e=i(t);if(e){var n=t.slice(e.length);if(n.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var r=n.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(r)return new c.AtomicTagToken(e.tagName,r[0].length+e.length,e.attrs,e.booleanAttrs,r[1])}}}function a(t){var e=t.match(f.endTag);return e?new c.EndTagToken(e[1],e[0].length):void 0}e.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.comment=r,e.chars=o,e.startTag=i,e.atomicTag=s,e.endTag=a;var c=n(4),f={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.EndTagToken=e.AtomicTagToken=e.StartTagToken=e.TagToken=e.CharsToken=e.CommentToken=e.Token=void 0;var o=n(5),i=(e.Token=function s(t,e){r(this,s),this.type=t,this.length=e,this.text=""},e.CommentToken=function(){function t(e,n){r(this,t),this.type="comment",this.length=n||(e?e.length:0),this.text="",this.content=e}return t.prototype.toString=function(){return"<!--"+this.content},t}(),e.CharsToken=function(){function t(e){r(this,t),this.type="chars",this.length=e,this.text=""}return t.prototype.toString=function(){return this.text},t}(),e.TagToken=function(){function t(e,n,o,i,s){r(this,t),this.type=e,this.length=o,this.text="",this.tagName=n,this.attrs=i,this.booleanAttrs=s,this.unary=!1,this.html5Unary=!1}return t.formatTag=function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n="<"+t.tagName;for(var r in t.attrs)if(t.attrs.hasOwnProperty(r)){n+=" "+r;var i=t.attrs[r];"undefined"!=typeof t.booleanAttrs&&"undefined"!=typeof t.booleanAttrs[r]||(n+='="'+(0,o.escapeQuotes)(i)+'"')}return t.rest&&(n+=" "+t.rest),n+=t.unary&&!t.html5Unary?"/>":">",void 0!==e&&null!==e&&(n+=e+"</"+t.tagName+">"),n},t}());e.StartTagToken=function(){function t(e,n,o,i,s,a){r(this,t),this.type="startTag",this.length=n,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=i,this.html5Unary=!1,this.unary=s,this.rest=a}return t.prototype.toString=function(){return i.formatTag(this)},t}(),e.AtomicTagToken=function(){function t(e,n,o,i,s){r(this,t),this.type="atomicTag",this.length=n,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=i,this.unary=!1,this.html5Unary=!1,this.content=s}return t.prototype.toString=function(){return i.formatTag(this,this.content)},t}(),e.EndTagToken=function(){function t(e,n){r(this,t),this.type="endTag",this.length=n,this.text="",this.tagName=e}return t.prototype.toString=function(){return"</"+this.tagName+">"},t}()},function(t,e){"use strict";function n(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return t?t.replace(/([^"]*)"/g,function(t,e){return/\\/.test(e)?e+'"':e+'\\"'}):e}e.__esModule=!0,e.escapeQuotes=n},function(t,e){"use strict";function n(t){return t&&"startTag"===t.type&&(t.unary=a.test(t.tagName)||t.unary,t.html5Unary=!/\/>$/.test(t.text)),t}function r(t,e){var r=t.stream,o=n(e());return t.stream=r,o}function o(t,e){var n=e.pop();t.prepend("</"+n.tagName+">")}function i(){var t=[];return t.last=function(){return this[this.length-1]},t.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},t.containsTagName=function(t){for(var e,n=0;e=this[n];n++)if(e.tagName===t)return!0;return!1},t}function s(t,e,s){function a(){var e=r(t,s);e&&f[e.type]&&f[e.type](e)}var c=i(),f={startTag:function(n){var r=n.tagName;"TR"===r.toUpperCase()&&c.lastTagNameEq("TABLE")?(t.prepend("<TBODY>"),a()):e.selfCloseFix&&u.test(r)&&c.containsTagName(r)?c.lastTagNameEq(r)?o(t,c):(t.prepend("</"+n.tagName+">"),a()):n.unary||c.push(n)},endTag:function(n){var r=c.last();r?e.tagSoupFix&&!c.lastTagNameEq(n.tagName)?o(t,c):c.pop():e.tagSoupFix&&(s(),a())}};return function(){return a(),n(s())}}e.__esModule=!0,e["default"]=s;var a=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,u=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])})},function(t,e){"use strict";function n(t){return void 0!==t&&null!==t}function r(t){return"function"==typeof t}function o(t,e,n){var r=void 0,o=t&&t.length||0;for(r=0;o>r;r++)e.call(n,t[r],r)}function i(t,e,n){for(var r in t)t.hasOwnProperty(r)&&e.call(n,r,t[r])}function s(t,e){return t=t||{},i(e,function(e,r){n(t[e])||(t[e]=r)}),t}function a(t){try{return Array.prototype.slice.call(t)}catch(e){var n=function(){var e=[];return o(t,function(t){e.push(t)}),{v:e}}();if("object"===("undefined"==typeof n?"undefined":l(n)))return n.v}}function u(t){return t[t.length-1]}function c(t,e){return t&&("startTag"===t.type||"atomicTag"===t.type)&&"tagName"in t?!!~t.tagName.toLowerCase().indexOf(e):!1}function f(t){return c(t,"script")}function p(t){return c(t,"style")}e.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.existy=n,e.isFunction=r,e.each=o,e.eachKey=i,e.defaults=s,e.toArray=a,e.last=u,e.isTag=c,e.isScript=f,e.isStyle=p}])});
/* KPEX Smart Tag Utilities for KPEX 
 Copyright 2016 the Rubicon Project, Inc. */
var ktag=function(){var a=this,b=function(a){return a+Math.floor(1e6*Math.random())},c=function(){return window!=top},d=function(){var a=!1;try{window.top.location.href}catch(b){a=!0}return a},e=function(){return window.frameElement?{x:window.top.innerWidth,y:window.top.pageYOffset||window.top.document.body.scrollTop||window.top.document.documentElement.scrollTop,w:window.top.innerWidth||window.top.documentElement.clientWidth||window.top.getElementsByTagName("body")[0].clientWidth,h:window.top.innerHeight||window.top.documentElement.clientHeight||window.top.getElementsByTagName("body")[0].clientHeight}:{x:window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,y:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,w:window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,h:window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight}},f=function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return{x:b,y:c}},g=function(){var a=null;try{if(d());else{var g,h=window,i=e(),j=90;if(c()){for(;window.top!==h.parent;){h=h.parent;try{h.location.href}catch(k){return a}}g=f(h.frameElement),j=h.frameElement.clientHeight/2}else{for(var l=document.documentElement;l.childNodes.length&&1==l.lastChild.nodeType;)l=l.lastChild;var m=document.createElement("div"),n=b("rubicon_chk_position_");m.setAttribute("id",n),m.style.width="0px",m.style.height="0px",l.parentNode.appendChild(m),g=f(m),l.parentNode.removeChild(m),j/=2}a=i.y+i.h<j+g.y||i.y>j+g.y?"btf":"atf"}}catch(o){}return a},h=function(a){var b=this;"function"==typeof a&&(window.func=function(a){b.func(a)})},i=function(a,b,c,d,e,f){if(a){var g=e>d?!0:!1,h=(new Date).getTime(),i=setInterval(function(){var j=Math.min(1,((new Date).getTime()-h)/f);g?(a.style?a[b]=d+j*(e-d):a.setAttribute(b,d+j*(e-d)),a.style[b]&&(a.style[b]=d+j*(e-d)+c)):(a.style?a[s]=d-j*(d-e):a.setAttribute(b,d-j*(d-e)),a.style[b]&&(a.style[b]=d-j*(d-e)+c)),1===j&&clearInterval(i)},25);a.style?a[b]=d:a.setAttribute(b,d),a.style[b]?a.style[b]=d+c:a.style[b]=d+c}};a.resizeAdSlot=function(a,b){var c,d,e,f;d=a.substring(0,a.indexOf("x")),f=a.substring(a.indexOf("x")+1,a.length),c=window.frameElement,e=c.getBoundingClientRect().height?c.getBoundingClientRect().height:c.offsetHeight,c.width?c.width=parseInt(d):c.setAttribute("width",parseInt(d)),c.style.width&&(c.style.width=parseInt(d)+"px"),b===!0?i(c,"height","px",e,f,500):(c.height?c.height=parseInt(f):c.setAttribute("height",parseInt(f)),c.style.height&&(c.style.height=parseInt(f)+"px"))},a.setSite=function(a){var b,c;return("undefined"==typeof a||""===a||a.indexOf("http")<0)&&(a=d()?window.document.referrer:window.top.document.location.href),c=window.document.createElement("a"),c.href=a,b=c.hostname},a.setSection=function(a){var b,c,e="",f="unknown",g=[],h=[];return("undefined"==typeof a||""===a||a.indexOf("http")<0)&&(a=d()?window.document.referrer:window.top.document.location.href),g=["/news/","/breaking-news/","/rural-news/","/national/","world","post","press","times","news","express","standard","mail","herald","/auckland","/science","/environment","/oddstuff","/sport","/entertainment/","/lifestyle/","/life-style/","/life/","/motoring","/technology/","/travel/","/business"],h=["news","news","news","news","news","news","news","news","news","news","news","news","news","news","news","news","news","sport","entertainment","lifestyle","lifestyle","lifestyle","motoring","technology","travel","business"],c=window.document.createElement("a"),c.href=a.toLowerCase(),b=c.hostname,e=c.pathname,e="/"===e.charAt(0)?e:"/"+e,""===e||"/"===e||b.indexOf("four.co.nz")>-1&&"/tv/home.aspx"===e?f="homepage":g.forEach(function(a,b,c){e.indexOf(a)>-1&&(f=h[b])}),(b.indexOf("grabone")>-1||"www.bite.co.nz"===b||"truecommercial.nzherald.co.nz"===b||"www.farmingshow.co.nz"===b&&"news"!==f||"www.viva.co.nz"===b)&&"homepage"!==f&&(f="lifestyle"),"www.driven.co.nz"===b&&(f="motoring"),("www.watchme.co.nz"===b||"www.iheart.com"===b||"www.zmonline.com"===b||"events.stuff.co.nz"===b||"www.tv3.co.nz"===b||"www.four.co.nz"===b||"www.theedge.co.nz"===b||"www.therock.net.nz"===b||"www.georgefm.co.nz"===b||"www.maifm.co.nz"===b||"www.morefm.co.nz"===b||"www.thebreeze.co.nz"===b||"www.thesound.co.nz"===b||"www.magic.co.nz"===b||"www.scout.co.nz"===b||"www.thehits.co.nz"===b&&"news"!==f&&"lifestyle"!==f||"www.hauraki.co.nz"===b&&"news"!==f&&"sport"!==f||"www.flava.co.nz"===b&&"news"!==f||"www.mixonline.co.nz"===b&&"news"!==f||"www.thecoast.net.nz"===b&&"lifestyle"!==f&&"travel"!==f&&"technology"!==f&&"news"!==f&&"sport"!==f||"www.hokonui.co.nz"===b&&"news"!==f||"www.tvnz.co.nz"===b&&"news"!==f||"tvnz.co.nz"===b&&"news"!==f||"www.radiolive.co.nz"===b&&"news"!==f)&&"homepage"!==f&&(f="entertainment"),"www.radiosport.co.nz"!==b&&"dreamteam.nzherald.co.nz"!==b||"homepage"===f||(f="sport"),"www.3news.co.nz"===b&&"sport"!==f&&"business"!==f&&"homepage"!==f&&(f="news"),("sunlive.co.nz"===b||"www.sunlive.co.nz"===b||"m.sunlive.co.nz"===b)&&(f="news"),("stoppress.co.nz"===b||"www.stoppress.co.nz"===b||"m.stoppress.co.nz"===b||"idealog.co.nz"===b||"www.idealog.co.nz"===b||"m.idealog.co.nz"===b||"theregister.co.nz"===b||"www.theregister.co.nz"===b||"m.theregister.co.nz"===b)&&(f="business"),("dish.co.nz"===b||"www.dish.co.nz"===b||"m.dish.co.nz"===b||"good.net.nz"===b||"www.good.net.nz"===b||"m.good.net.nz"===b||"newzealandweddings.co.nz"===b||"www.newzealandweddings.co.nz"===b||"m.newzealandweddings.co.nz"===b||"hgtv.co.nz"===b)&&(f="lifestyle"),("nzfishingworld.co.nz"===b||"www.nzfishingworld.co.nz"===b||"m.nzfishingworld.co.nz"===b)&&(f="sport"),("theweekendsun.co.nz"===b||"baydriver.co.nz"===b||"coastandcountrynews.co.nz"===b||"waterline.co.nz"===b||"odt.co.nz"===b||"odt.co.nz/regions"===b)&&(f="news"),"odt.co.nz/sport"===b&&(f="sport"),("odt.co.nz/opinion"===b||"odt.co.nz/lifestyle"===b||"odt.co.nz/features"===b||"drivesouth.co.nz"===b)&&(f="lifestyle"),"odt.co.nz/business"===b&&(f="business"),"trendsideas.com"===b&&(f="lifestyle"),f},a.setPath=function(a){var b,c,e,f="",g="",h=[],i=[];return("undefined"==typeof a||""===a||a.indexOf("http")<0)&&(a=d()?window.document.referrer:window.top.document.location.href,a.indexOf("http")<0)?"/":(c=window.document.createElement("a"),c.href=a.toLowerCase(),b=c.hostname,f=c.pathname,f="/"===f.charAt(0)?f:"/"+f,e=/[^\/]*$/,g=f.replace(e,""),e=/\/[0-9]+/gi,g=g.replace(e,""),(b.indexOf(".net.nz")>-1||b.indexOf(".co.nz")>-1)&&"/"!==g&&(h=g.split("/"),h.forEach(function(a,b,c){(""===a||void 0===a||a.length-a.replace(/-/g,"").length>3)&&i.push(b)}),i.forEach(function(a,b,c){h.splice(a-b,1)}),g="/",h.length>0&&h[0].length>0&&(g+=h[0]+"/"),h.length>1&&h[1].length>0&&(g+=h[1]+"/")),g)},a.setPath=a.setSection,a.setPosition=function(){return g()},a.runAdSlot=function(a,b,c){var d=b.split("x"),e=a+"-fif",f=document.createElement("iframe");return f.style.cssText="width: "+d[0]+"px; height: "+d[1]+"px; border: 0; margin: 0; padding: 0; overflow: hidden;",f.setAttribute("scrolling","no"),f.src="about:blank",f.id=e,document.getElementById(a).appendChild(f),fifContext=f.contentWindow?f.contentWindow.document:f.contentDocument.document,fifContext.open().write("<html>\n<head>\n<script type='text/javascript'>inDapIF=true;\n</script>\n</head>\n<body style='margin : 0; padding: 0;'>\n<!-- Rubicon Project Smart Tag -->\n<script type='text/javascript'>\nrp_account = '"+c.acct+"';\nrp_site = '"+c.site+"';\nrp_zonesize  = '"+c.zone+"-"+c.size+"';\nrp_adtype = 'jsonp';\nrp_kw = '"+c.kw+"';\nrp_visitor = "+c.visitor+";\nrp_inventory = "+c.inventory+";\nrp_callback = "+c.callback+";\n</script>\n<script type='text/javascript' src=\"http://ads.rubiconproject.com/ad/"+c.acct+'.js"></script>\n</body>\n</html>'),fifContext.close(),e},a.callBack=function(a){if("ok"===a.status)for(var b,c=0;c<a.ads.length;c++)b=a.ads[c],"ok"===b.status?("script"===b.type&&document.write("<script type='text/javascript'>"+b.script+"</script>"),"html"===b.type&&document.write(b.html),window.rpx_params.callback&&RubiconAdServing&&"object"==typeof RubiconAdServing.AdSizes&&h(window.rpx_params.callback(RubiconAdServing.AdSizes[b.size_id].dim))):window.rpx_params.callback&&RubiconAdServing&&"object"==typeof RubiconAdServing.AdSizes&&h(window.rpx_params.callback())},a.getAdDimensions=function(){return c?[window.innerWidth,window.innerHeight].join("x"):[window.top.innerWidth,window.top.innerHeight].join("x")},a.getDeviceType=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?"mobile":"desktop"},a.getSiteUrlSection=function(){return[a.setSite(),a.setSection()].join("/")},a.setAdDimensions=function(){return c?[window.innerWidth,window.innerHeight].join("x"):[window.top.innerWidth,window.top.innerHeight].join("x")},a.setDeviceType=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?"mobile":"desktop"},a.setSiteUrlSection=function(){return[a.setSite(),a.setSection()].join("/")}};ktag=new ktag;
/*
 FastLane SAS 
 Property of: the Rubicon Project, Inc. 
 Generated: 2016-11-03 03:11:12
*/
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=function(){var a,b=this,c=!1,d=14232,e=[];b.receiveMessage=function(a){a.origin||a.originalEvent.origin;if("string"==typeof a.data&&a.data.indexOf("rubicontag")>-1){var b=function(a){var b;try{return b=JSON.parse(a)}catch(c){return a}},c=b(a.data),d=document.getElementById(c.ifm);d.style.cssText="display: none; visibility: hidden;";var e=document.getElementById(c.elemId);window.rubicontag.renderCreative(e,c.elemId,c.sizeId)}},b.setSite=function(a){var b,c;return("undefined"==typeof a||""===a||a.indexOf("http")<0)&&(a=window.document.location.href),c=window.document.createElement("a"),c.href=a,b=c.hostname},b.runAdSlot=function(a,b,c){var d=b.split("x"),e=a+"-sas",f=document.createElement("iframe");return f.style.cssText="width: "+d[0]+"px; height: "+d[1]+"px; border: 0; margin: 0; padding: 0; overflow: hidden;",f.setAttribute("scrolling","no"),f.src=c,f.id=e,document.getElementById(a).appendChild(f),e},b.loadFastLane=function(){var a=document.createElement("script");a.type="text/javascript",a.src=("https:"===document.location.protocol?"https:":"http:")+"//ads.rubiconproject.com/header/"+d+".js";var b=document.getElementsByTagName("script")[0];b.parentNode.appendChild(a)},b.addEventListeners=function(){window.postMessage&&(window.addEventListener?window.addEventListener("message",b.receiveMessage,!1):window.attachEvent&&window.attachEvent("message",b.receiveMessage))},b.loadSlots=function(b){a=b},b.displaySlot=function(d){c=!0;for(var e in a)a[e].divid===d&&b.runSingleSlot(a[e])},b.runSingleSlot=function(a){rubicontag.cmd.push(function(){if(e[0]=rubicontag.defineSlot(a.divid,a.sizes,a.divid).setPosition(a.position||"btf"),a.hasOwnProperty("inventory"))for(var c in a.inventory)e[0].setFPI(c,a.inventory[c]).setFPI("size",a.sizes[0].join("x"));if(a.hasOwnProperty("visitor"))for(var d in a.visitor)e[0].setFPV(d,a.inventory[d]);a.hasOwnProperty("keywords")&&e[0].addKW(a.keywords.join(",")),rubicontag.addKW("fastlane-prototype-test"),rubicontag.setFPI("domain",[b.setSite()]),rubicontag.setIntegration("custom"),rubicontag.run(function(){sasrunslot(a)},{slots:[e[0]]})})},sasrunslot=function(a){var c,e={2:"728x90",9:"160x600",10:"300x600",15:"300x250",57:"970x250"},f=["rpfl_",d].join(""),g=a.divid,h=a.sasurl,k=window.rubicontag.getSlot(a.divid).getAdServerTargetingByKey(f),l=window.rubicontag.getSlot(a.divid).getRawResponses(),m=[],n=a.sizes[0].join("x");for(i=0;i<l.length;i++)m.push(parseFloat(l[i].cpm.toFixed(2)));for(m.sort(function(a,b){return b-a}),i=0;i<l.length;i++)parseFloat(l[i].cpm.toFixed(2))===m[0]&&(l=l[i]);for(j=0;j<k.length;j++)c=k[j].split("_")[0],e[c]===l.dimensions.join("x")&&-1!=k[j].indexOf(c)&&(n=e[c],h+=f+"="+k[j]+"/");h+="rpfl_ifm="+g+"-sas/rpfl_elemid="+g,b.runAdSlot(g,n,h),g=h=k=l=m=c=n=void 0},b.sasrun=function(){if(!c){c=!0;for(var d in a){var e=a[d].divid,f=a[d].sasurl,g=a[d].sizes[0].join("x");b.runAdSlot(e,g,f),e=f=g=void 0}}}};ntag=new d,ntag.addEventListeners()},{}]},{},[1]);