/* VEVO Iframe Player API */
var vevoVideoManager=function(a,b){"use strict";function c(){"function"!=typeof CustomEvent?(w=b.createEvent("Event"),x=b.createEvent("Event"),y=b.createEvent("Event"),z=b.createEvent("Event"),A=b.createEvent("Event"),B=b.createEvent("Event"),w.initEvent("onAdStart",!0,!1),x.initEvent("onAdFinish",!0,!1),y.initEvent("onVideoStart",!0,!1),z.initEvent("onTimeChange",!0,!1),A.initEvent("onDurationChange",!0,!1),B.initEvent("onStateChange",!0,!1)):(w=new CustomEvent("onAdStart"),x=new CustomEvent("onAdFinish"),y=new CustomEvent("onVideoStart"),z=new CustomEvent("onTimeChange"),A=new CustomEvent("onDurationChange"),B=new CustomEvent("onStateChange"))}function d(){a.addEventListener("message",function(a){if(a.origin===r){var b=a.data.split(","),c=b[0],d=b[1],e=b[2]?b[2]:null,f=b[3]?b[3]:null;switch(d){case"error":p(c,e,f);break;case"playerIsReady":o(c);break;case"playerStateChange":B.videoId=c.toString(),B.stateName=e.toString(),D[c].playerState=e.toString(),D[c].videoElement.dispatchEvent(B);break;case"onAdStart":w.videoId=c.toString(),D[c].playerState="playing",D[c].videoElement.dispatchEvent(w);break;case"onAdFinish":x.videoId=c.toString(),D[c].playerState="paused",D[c].videoElement.dispatchEvent(x);break;case"onVideoStart":y.videoId=c.toString(),D[c].videoElement.dispatchEvent(y);break;case"latestVideoTime":z.videoId=c.toString(),D[c].playback.currentVideoTime=Number(e),D[c].videoElement.dispatchEvent(z);break;case"latestVideoDuration":A.videoId=c.toString(),D[c].playback.currentVideoLength=Number(e),D[c].videoElement.dispatchEvent(A)}}},!1)}function e(a,b){a&&(t=a),b&&(u=b)}function f(){"local"===h("environment")&&"http:"===a.location.protocol?(C.type="local",C.secure=!1):"local"===h("environment")&&"https:"===a.location.protocol?(C.type="local",C.secure=!0):"staging"===h("environment")&&"http:"===a.location.protocol?(C.type="staging",C.secure=!1):"staging"===h("environment")&&"https:"===a.location.protocol?(C.type="staging",C.secure=!0):"http:"===a.location.protocol?(C.type="production",C.secure=!1):"https:"===a.location.protocol&&(C.type="production",C.secure=!0)}function g(){"local"===C.type&&C.secure===!1?(r="localhost"===a.location.hostname?"http://localhost:3000":"http://"+a.location.hostname+":3000",s=r+"/embed/index.html"):"local"===C.type&&C.secure===!0?(r="https://localhost:5000",s=r+"/embed/index.html"):"staging"===C.type&&C.secure===!1?(r="http://stg-cache.vevo.com",s="http://stg-cache.vevo.com/assets/html/embed.html"):"staging"===C.type&&C.secure===!0?(r="https://stg-scache.vevo.com",s="https://stg-scache.vevo.com/assets/html/embed.html"):"production"===C.type&&C.secure===!1?(r="http://cache.vevo.com",s="http://cache.vevo.com/assets/html/embed.html"):"production"===C.type&&C.secure===!0&&(r="https://scache.vevo.com",s="https://scache.vevo.com/assets/html/embed.html")}function h(b){var c=new RegExp("[?&]"+b+"=([^&]*)"),d=c.exec(a.location.search);return d&&decodeURIComponent(d[1].replace(/\+/g," "))}function i(a,b,c,d,e){return this.id=a,this.selector=b,this.videoElement=c,this.videoWindow=d,this.playerState="unstarted",this.playback={},this.playback.currentVideoLength=null,this.playback.currentVideoTime=null,this.playback.isPlaying=null,this.callbacksQueue=e,this}function j(a,b,c){if("[object Array]"!==Object.prototype.toString.call(a))throw new Error("Expecting an array of video objects");Array.prototype.forEach.call(a,function(a){k(a,b,c)})}function k(c,d,e){if(D[c.id])throw new Error("video with that 'id' already exists");if(!c.id)throw new Error("video object doesn't contain an 'id' property");if(!c.selector)throw new Error("video object doesn't contain a 'selector' property");if(!c.isrc)throw new Error("video object doesn't contain an 'isrc' property");var f=b.querySelectorAll(c.selector)[0];if(!f)throw new ReferenceError("No element that matches the following selector was found: "+c.selector);var g=b.createElement("iframe");g.setAttribute("id",G+c.id);var h=function(){var d="?video="+c.isrc;return d+="&iframe_api=1",c.options&&c.options.desktopControls===!1&&(d+="&desktop_controls=0"),c.options&&c.options.mobileControls===!1&&(d+="&mobile_controls=0"),c.options&&c.options.autoplay===!0&&(d+="&autoplay=1"),c.options&&"object"==typeof c.options.logoPosition&&(d+="&logo_position="+encodeURI(JSON.stringify(c.options.logoPosition))),t&&(d+="&partnerId="+t),u&&(d+="&siteSection="+u),a.location.href&&(d+="&current_url="+encodeURIComponent(a.location.href)),b.referrer&&(d+="&referring_url="+encodeURIComponent(b.referrer)),"local"===C.type?d+="&environment=local":"staging"===C.type&&(d+="&environment=staging"),d+="&iframe_api_video_id="+c.id}();g.setAttribute("src",s+h),g.setAttribute("height",E),g.setAttribute("width",F),g.setAttribute("frameborder","0"),g.setAttribute("allowfullscreen",""),g.setAttribute("frameborder","0"),g.style.overflow="hidden",f.appendChild(g);var j=g.contentWindow,k=[];"function"==typeof d&&(d[c.id]=c,d.callback_type="success",k.push(d)),"function"==typeof e&&(e[c.id]=c,e.callback_type="failure",k.push(e)),D[c.id]=new i(c.id,c.selector,f,j,k)}function l(a){if(!D[a])throw new Error("A video with an id of '"+a+"' doesn't exist");return D[a]}function m(a){try{var c=b.getElementById(G+a);return c.parentNode.removeChild(c),delete D[a],!0}catch(a){return!1}}function n(){if(Object.keys)return Object.keys(D);var a=[];for(var b in D)a.push(b);return a}function o(a){Array.prototype.forEach.call(D[a].callbacksQueue,function(b){"function"==typeof b&&"success"===b.callback_type&&(b[a]?b(b[a].id,b[a].selector,b[a].isrc):b())})}function p(a,b,c){Array.prototype.forEach.call(D[a].callbacksQueue,function(d){"function"==typeof d&&"failure"===d.callback_type&&(d[a]?d(b,c,d[a].id,d[a].selector,d[a].isrc):d())})}function q(a){a=parseInt(a,10);var b=Math.floor(a/60),c=a-60*b;return b<10&&(b="0"+b),c<10&&(c="0"+c),b+":"+c}var r,s,t,u,v,w,x,y,z,A,B,C={},D={},E="100%",F="100%",G="vevo-iframe-";return function(){f(),g(),c(),d()}(),i.prototype.play=function(){return this.videoWindow.postMessage("play",r),this.playback.isPlaying=!0,this},i.prototype.pause=function(){return this.videoWindow.postMessage("pause",r),this.playback.isPlaying=!1,this},i.prototype.setVolume=function(a){return this.videoWindow.postMessage("volume,"+a,r),a},i.prototype.seekTo=function(a){return this.videoWindow.postMessage("seek,"+a,r),a},i.prototype.getCurrentTime=function(){return this.playback.currentVideoTime},i.prototype.getDuration=function(){return this.playback.currentVideoLength},i.prototype.isPlaying=function(){return this.playback.isPlaying},i.prototype.getPlayerState=function(){return this.playerState},v||(v={initialize:e,loadVideo:k,loadVideos:j,getVideoById:l,removeVideoById:m,getAllVideoNames:n,formatTime:q}),v}(window,document);