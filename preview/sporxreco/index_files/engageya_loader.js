var _ENGAGEYA_WIDGETS=_ENGAGEYA_WIDGETS||[],_ENG_is_google_tag_ran=_ENG_is_google_tag_ran||!1,googletag=googletag||{};googletag.cmd=googletag.cmd||[];var ENGAGEYA=function(a){this.widget_wrapper_elm_id=a.wwei,this.pid=a.pid?a.pid:"",this.subid=a.subid?a.subid:"",this.publisher_id=a.pubid?a.pubid:"",this.website_id=a.webid?a.webid:"",this.widget_id=a.wid?a.wid:"",this.width=a.width||"",this.height=a.height||"",this.plr_elm_id=a.plreid,this.plr_type=a.plrtid||-1,this.show_on_pause=a.issop?a.issop:0,this.show_on_complete=a.issoc?a.issoc:0,this.show_on_idle=a.issoi?a.issoi:0,this.is_index_page=a.isidx?a.isidx:1,this.is_widget_autorun=a.isar?a.isar:0,this.is_video_widget=a.isvw?a.isvw:0,this.plr_wmode=a.pwmd?a.pwmd:"opaque",this.plr_func_name=a.pfn,this.input_url=a.iurl||null,this.feed_url="ext1-api.engageya.com/gas-api/feed.json",this.recs_url="recs.engageya.com/rec-api/getrecs.json",this.recs_url_premium="premium.engageya.com/rec-api/getrecs.json",this.event_url="recs.engageya.com/rec-api/event.json",this.default_imgs_url="widget.engageya.com/img/",this.aws_images_url="//engageya-eu-images9.s3-website-eu-west-1.amazonaws.com",this.cdn_images_url="//images9.engageya.com",this.google_tag_script_url="https://www.googletagservices.com/tag/js/gpt.js",this.default_video_post_btn="widget.engageya.com/img/vplay.png",this.doc_ready_called=!1,this.random_id=Math.ceil(1e17*Math.random()),this.cb="engageya_cb_"+this.random_id,this.num_of_slides=a.tnos||15,this.min_slides=2,this.jq=null,this.num_of_jq_attempts=20,this.find_wrapper_elm_retries=10,this.widget_idx=0,this.isNoConflictJquery=a.ncjqry||!1,this.scripts_elms=[],this.get_recs_states=[[],["BUFFERING","PLAYING"],[0,2,3],[1]],this.rec_types=["all","eng_inner","eng_ads","eng_outer"],this.widget_wrapper_elm=null,this.widget_add_data=null,this.is_widget_wrapper_dom_ready=!1,this.is_user_initiated_event=!1,this.data_json=null,this.is_real_imps_called=!1,this.visible_posts_and_types=[],this.load_time_start=(new Date).getTime(),this.widget_direction="left",this.widget_op_direction="right",this.click_pixels=a.cpxls?a.cpxls:"",this.premium_pub_ids=[158041],this.max_num_of_image_load_retries=6,this.image_load_retries_arr={},this.widget_ready_cb=a.wrcb||null,this.log_types={ALL:"ALL",WARNING:"WARNING",INFO:"INFO",ERROR:"ERROR"},this.log_printout=null,this.pp_recs_website_ids=[],this.total_slides=null,this.get_post_cb="_eng_gpcb_"+this.random_id},ENGAGEYA_VIDEO=function(a){ENGAGEYA.call(this,a),this.video_types_const={VAST:"VAST",DIRECT:"DIRECT"},this.video_types=["",this.video_types_const.VAST,this.video_types_const.DIRECT],this.video_event_types={AD_START:"AS",AD_FIRST_QUARTILE:"FQ",AD_MID_POINT:"MP",AD_THIRD_QUARTILE:"TQ",AD_COMPLETE:"CO",AD_CLICK:"CLK",ALL_ADS_COMPLETED:"ALADCM",AD_TIMEOUT:"TOUT",ADS_READY:"ADRDY",AD_ERROR:"ADER"},this.auto_play="autoplay",this.is_muted=!0,this.load_on_view_percents=0,this.play_video_on_view_percents={top:20,bottom:0},this.pause_video_on_not_view_percents={top:1,bottom:1},this.is_video_was_on_view=!1,this.videojs_path="//widget.engageya.com/videojs/",this.videojs_js_files=["video.js","//imasdk.googleapis.com/js/sdkloader/ima3.js","videojs.as.js","videojs.ima.js"],this.videojs_css_files=["video-js.css","videojs.as.css","videojs.ima.css"],this.is_load_videojs_called=!1,this.is_video_js_fully_loaded=!1,this.is_video_should_be_paused=!1,this.is_display_controls=!0,this.is_video_tag_populated=!1,this.video_sources=[{src:"//widget.engageya.com/videojs/dummy_video.mp4",type:"video/mp4"}],this.is_close_player_when_ads_completed=!0,this.video_view_ratio=null,this.is_add_href=!1,this.skip_offest=-1,this.fire_click_events=[],this.is_unmute_on_mouse_over=!0,this.is_close_video_on_ad_timeout=!1,this.is_close_video_on_ad_error=!0,this.log_printout="ALL",this.video_volume=1,this.video_load_ad_timeout=5e3,this.is_window_active=!0,this.is_run_only_on_window_active=!0,this.place_holders={WIDTH:"[WIDTH]",HEIGHT:"[HEIGHT]",PAGE_URL:"[PAGE_URL]",DNT:"[DO_NOT_TRACK]",CACHE_BUSTER:"[CACHE_BUSTER]",PAGE_TITLE:"[PAGE_TITLE]"},this.preload="auto",this.ads_manager=null,this.ads_ready=!1,this.is_play_command_sent=!1};ENGAGEYA_VIDEO.prototype=new ENGAGEYA({}),ENGAGEYA.prototype.run=function(){1==this.is_video_widget?this.attach_player_events():this.start_run()},ENGAGEYA.prototype.attach_player_events=function(){1==this.plr_type?this.attach_jwplayer_events():2==this.plr_type?this.attach_flowplayer_events():this.attach_generic_player_events(),1==this.is_widget_autorun&&this.start_run()},ENGAGEYA.prototype.attach_jwplayer_events=function(){var a=this;jwplayer(this.plr_elm_id).onPlay(function(){a.on_play_action()}),jwplayer(this.plr_elm_id).onBuffer(function(){a.on_play_action()}),jwplayer(this.plr_elm_id).onPause(function(){a.on_pause_action()}),jwplayer(this.plr_elm_id).onIdle(function(){a.on_idle_action()}),jwplayer(this.plr_elm_id).onComplete(function(){a.on_complete_action()}),this.plr_get_state_fnc=jwplayer(this.plr_elm_id).getState,this.state_events()},ENGAGEYA.prototype.attach_flowplayer_events=function(){var a=this,b=null;b=flowplayer(this.plr_elm_id)?flowplayer(this.plr_elm_id):flowplayer();try{b.onStart(function(){a.on_play_action()}),b.onLoad(function(){a.on_play_action()}),b.getClip().onResume(function(){a.on_play_action()}),b.getClip().onPause(function(){a.on_pause_action()}),b.getClip().onStop(function(){a.on_pause_action()}),b.getClip().onFinish(function(){a.on_complete_action()}),this.plr_get_state_fnc=b.getState}catch(c){b.bind("load",function(b,c){a.on_play_action()}),b.bind("click",function(b,c){a.is_user_initiated_event=!0}),b.bind("resume",function(b,c){a.on_play_action()}),b.bind("pause",function(b,c){a.is_user_initiated_event&&(a.on_pause_action(),a.is_user_initiated_event=!1)}),b.bind("stop",function(b,c){a.on_pause_action()}),b.bind("finish",function(b,c){a.on_complete_action()}),this.plr_get_state_fnc=function(){return 1}}this.state_events()},ENGAGEYA.prototype.attach_generic_player_events=function(){var a=this;try{var b=window[this.plr_func_name](this.plr_elm_id)}catch(a){}b=b?b:window[this.plr_func_name],b=b?b:document.getElementById(this.plr_elm_id);try{b.onStart(function(){a.on_play_action()})}catch(a){}try{b.onLoad(function(){a.on_play_action()})}catch(a){}try{b.onPlaying(function(){a.on_play_action()})}catch(a){}try{b.onplay=function(){a.on_play_action()}}catch(a){}try{b.onPlay(function(){a.on_play_action()})}catch(a){}try{b.onBuffer(function(){a.on_play_action()})}catch(a){}try{b.onResume(function(){a.on_play_action()})}catch(a){}try{b.onPause(function(){a.on_pause_action()})}catch(a){}try{b.onpause=function(){a.on_pause_action()}}catch(a){}try{b.onStop(function(){a.on_pause_action()})}catch(a){}try{b.onFinish(function(){a.on_complete_action()})}catch(a){}try{b.onended=function(){a.on_complete_action()}}catch(a){}try{b.onComplete(function(){a.on_complete_action()})}catch(a){}try{this.plr_get_state_fnc=b.getState||function(){return 1}}catch(a){}this.state_events()},ENGAGEYA.prototype.on_play_action=function(){this.hide_widget(this),this.start_run()},ENGAGEYA.prototype.on_pause_action=function(){1==this.show_on_pause&&this.is_widget_wrapper_dom_ready&&this.show_widget()},ENGAGEYA.prototype.on_idle_action=function(){1==this.show_on_idle?this.show_widget():""},ENGAGEYA.prototype.on_complete_action=function(){1==this.show_on_complete?this.show_widget():""},ENGAGEYA.prototype.state_events=function(){this.is_load_recs_state()&&this.start_run()},ENGAGEYA.prototype.is_load_recs_state=function(){var a=this.plr_get_state_fnc(),b=this.in_array(a,this.get_recs_states[this.plr_type]);return b},ENGAGEYA.prototype.show_widget=function(){this.jq("#eng_recs_holder_"+this.random_id).fadeIn("slow"),this.align_widget_elements()},ENGAGEYA.prototype.hide_widget=function(a){try{this.jq("#eng_recs_holder_"+a.random_id).hide()}catch(a){}},ENGAGEYA.prototype.attach_widget_events=function(){try{var a=this;this.load_real_imps_events(),this.widget_imgs_events(),this.widget_clicks_events(),this.jq("#eng_ww_close_"+this.random_id).click(function(){a.hide_widget(a)})}catch(a){console.log("ERROR - events:"),console.log(a)}},ENGAGEYA.prototype.widget_clicks_events=function(){this.attach_on_click_pixel_event()},ENGAGEYA.prototype.attach_on_click_pixel_event=function(){var a=this;if(a.click_pixels)try{for(var b=0;b<a.click_pixels.length;b++){for(var c=a.click_pixels[b],d=c.urls.split(";"),e="",f=0;f<d.length;f++)c.etype&&0!=c.etype?1==c.etype&&(e=d):e+='<img src="'+d[f]+'" style="display:none;" width="1px" height="1px" />';var g=".eng_widget_href,.eng_m_widget_href";if(0!=c.type){var h=a.rec_types[c.type];g=".eng_widget_href."+h+",.eng_m_widget_href."+h}c.etype&&0!=c.etype?1==c.etype&&a.get_recs_holder_elm().find(g).mousedown({pxls:e},function(a){try{for(var b=a.data.pxls,c=0;c<b.length;c++){var d=b[c],e=d.match("engcval_(.*?)['|\"],");if(e&&e.length>1){var f="engcval_"+e[1],g=e[1],h=".*?href=.*?"+g+"=(.*?)&",i=this.outerHTML.match(h);if(i&&i[1]){var j=decodeURIComponent(i[1]);d=d.replace(f,j)}}ga("send",d)}}catch(a){console.log("ERROR - ga click event"),console.log(a)}}):a.get_recs_holder_elm().find(g).mousedown({pxls:e},function(b){a.jq(this).append(b.data.pxls)})}}catch(a){console.log("ERROR - click pixel"),console.log(a)}},ENGAGEYA.prototype.widget_imgs_events=function(){this.attach_on_img_error_event(),this.attach_on_hover_brand_img_event()},ENGAGEYA.prototype.attach_on_hover_brand_img_event=function(){var a=this,b=this.get_add_data("brnd");b&&b.imghvr&&a.get_recs_holder_elm().hover(function(){a.jq(this).find("#eng_brnd_img_"+a.widget_id).attr("src",b.imghvr)},function(){a.jq(this).find("#eng_brnd_img_"+a.widget_id).attr("src",b.img.src)}),b&&b.img2hvr&&a.get_recs_holder_elm().hover(function(){a.jq(this).find("#eng_brnd_img2_"+a.widget_id).attr("src",b.img2hvr)},function(){a.jq(this).find("#eng_brnd_img2_"+a.widget_id).attr("src",b.img2.src)})},ENGAGEYA.prototype.attach_on_img_error_event=function(){var a=this;a.get_recs_holder_elm().find(".eng_widget_img,.eng_m_widget_img").error(function(){try{var b=1*this.outerHTML.match(".*?_img_(.*?)_.*")[1],c=a.image_load_retries_arr[b];if("undefined"==typeof c&&(c=a.max_num_of_image_load_retries,a.image_load_retries_arr[b]=c),c<1)a.set_default_image(a,this);else{a.image_load_retries_arr[b]--;var d=this.src.match(".*?//.*?(/.*)")[1],e="";e=a.image_load_retries_arr[b]%2==0?a.aws_images_url+d:a.cdn_images_url+d;var f=this;window.setTimeout(function(){f.src=e+"?"+ +new Date},300)}}catch(b){console.log("ERROR:"),console.log(b),a.set_default_image(a,this)}}),a.get_recs_holder_elm().find(".eng_widget_img,.eng_m_widget_img").load(function(){var b=this.outerHTML.match(".*?_img_(.*?)_.*");if(b){1*b[1];a.jq(this).unbind("error")}})},ENGAGEYA.prototype.set_default_image=function(a,b){var c=Math.floor(3*Math.random()+1),d=a.custom_default_image||"//"+a.default_imgs_url+"def/def_"+c+".jpg";a.jq(b).unbind("error").attr("src",d)},ENGAGEYA.prototype.start_run=function(){"complete"==document.readyState||"loaded"==document.readyState||"interactive"==document.readyState?this.doc_ready(this):this.inj_init_binding(this)},ENGAGEYA.prototype.generate_random_number=function(){return Math.ceil(1e7*Math.random())},ENGAGEYA.prototype.doc_ready=function(a){a.doc_ready_called||(a.doc_ready_called=!0,a.load_jQuery(),a.validate_jquery_loaded(this))},ENGAGEYA.prototype.validate_jquery_loaded=function(a){if(a.jq)a.inner_run();else if(window.jQuery)a.jq=window.jQuery,a.isNoConflictJquery&&jQuery.noConflict(),a.inner_run();else if(a.num_of_jq_attempts--,a.num_of_jq_attempts>0)return void window.setTimeout(function(){a.validate_jquery_loaded(a)},100)},ENGAGEYA.prototype.load_jQuery=function(){window.jQuery?this.jq=window.jQuery:this.append_script_to_head("//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js","")},ENGAGEYA.prototype.inner_run=function(a){var b=a||this;if(window[b.cb]=function(a){if(a&&a.recs.length>0){for(var b=null,c=!1,d=0;d<_ENGAGEYA_WIDGETS.length;d++)if("undefined"!=typeof a.rndid&&_ENGAGEYA_WIDGETS[d].random_id==a.rndid){b=_ENGAGEYA_WIDGETS[d],a.widget.id=_ENGAGEYA_WIDGETS[d].widget_id,c=!0;break}if(!c)for(var d=0;d<_ENGAGEYA_WIDGETS.length;d++)if(_ENGAGEYA_WIDGETS[d].widget_id==a.widget.id){b=_ENGAGEYA_WIDGETS[d],c=!0;break}if(b){b.data_json=a,b.widget_id=a.widget.id;var e={widget:a.widget.additionalData||"{}",network:a.widget.anad||"{}"};b.populate_add_data(e),b.populate_widget_data(a),b.reposition_widget(),b.build_layout(),b.add_player_wmode(),b.attach_widget_events(),b.run_criteo(),b.run_google_tags(),b.run_posts_preview(),b.widget_ready()}}},b.widget_wrapper_elm=document.getElementById(b.widget_wrapper_elm_id),!b.widget_wrapper_elm)return b.find_wrapper_elm_retries>0?(b.find_wrapper_elm_retries--,void window.setTimeout(function(){b.inner_run(b)},50)):void console.log("INFO: Couldn't find element "+b.widget_wrapper_elm_id);b.create_placement(),b.is_widget_wrapper_dom_ready=!0;var c=b.get_page_url(),d=b.get_lang(),e=b.get_page_ttl(),f=b.get_meta_content("keywords","content"),g=document.characterSet?document.characterSet:document.charset,h="";b.set_urls_for_pp(),1==b.is_index_page?(b.is_premium()&&(b.recs_url=b.recs_url_premium),h="//"+b.recs_url+"?cb="+b.cb+"&pubid="+b.publisher_id+"&webid="+b.website_id+"&wid="+b.widget_id+"&recsnum="+b.num_of_slides+"&url="+c+"&cs="+g+"&subid="+b.subid+"&title="+e+"&kwrds="+f+"&rndid="+b.random_id):h="//"+b.feed_url+"?cb="+b.cb+"&format=json&action=paid&url="+c+"&count="+b.num_of_slides+"&min_count="+b.min_slides+"&is_xpath=0&lang="+d+"&cs="+g+"&pid="+b.pid+"&subid="+b.subid+"&title="+e+"&kwrds="+f,b.append_script_to_head(h,b.random_id),_ENGAGEYA_WIDGETS.push(b)},ENGAGEYA.prototype.set_urls_for_pp=function(){this.in_array(this.website_id,this.pp_recs_website_ids)&&(this.recs_url=this.recs_url.replace("recs","recs2"),this.event_url=this.event_url.replace("recs","recs2"))},ENGAGEYA.prototype.load_real_imps_events=function(){function b(a){return function(){var b=a.is_elm_visible(a.widget_wrapper_elm);if(b&&!a.is_real_imps_called){a.is_real_imps_called=!0;var c=a.data_json,d=a.visible_posts_and_types;if(d.length>0){for(var e="",f=0;f<d.length;f++)e+=d[f].pi+":"+d[f].pt,f!=d.length-1&&(e+=",");var g=new Date,h=g.getTime()-a.load_time_start,i=document.createElement("img");i.src="//"+a.event_url+"?irid="+c.requestId+"&webid="+c.srcWebsiteId+"&wid="+c.srcWidgetId+"&spid="+c.srcPostId+"&tpids="+e+"&tti="+h+"&ucc="+c.requestGeoCountry;try{document.getElementsByTagName("head")[0].appendChild(i)}catch(a){console.log("ERROR - real imps:"),console.log(a)}}}return b}}var a=this.data_json.widget;if(a&&a.isRealImpressions){var c=b(this);window.addEventListener?(addEventListener("DOMContentLoaded",c,!1),addEventListener("load",c,!1),addEventListener("scroll",c,!1),addEventListener("resize",c,!1)):window.attachEvent&&(attachEvent("onDOMContentLoaded",c),attachEvent("onload",c),attachEvent("onscroll",c),attachEvent("onresize",c))}},ENGAGEYA.prototype.run_criteo=function(){if(this.get_add_data("criteo")){var a=document.createElement("script");a.type="text/javascript",a.src="//widget.engageya.com/eng_crt_loader2.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}},ENGAGEYA.prototype.run_google_tags=function(){if(this.google_tags&&!_ENG_is_google_tag_ran){_ENG_is_google_tag_ran=!0,this.append_script_to_head(this.google_tag_script_url,"");for(var a=0;a<this.google_tags.length;a++){var b=this.google_tags[a].gtn,c=this.google_tags[a].sys,d=this.google_tags[a].id,e=this.google_tags[a].idx,f=this.get_slide_elm_by_idx(e);f&&(f.id=d,f.innerHTML="",function(a,b,c){googletag.cmd.push(function(){googletag.defineSlot(a,[b],c).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.enableServices()})}(b,c,d),function(a){googletag.cmd.push(function(){googletag.display(a)})}(d))}}},ENGAGEYA.prototype.run_posts_preview=function(){try{var a=document.referrer,b=[];if(__eng__ppids_brnd="",a&&a.indexOf("_eng_ppids")!=-1){var c=this.getQS(a);c&&c._eng_ppids&&(b=c._eng_ppids.split(","),__eng__ppids_brnd=c._eng_dname)}if(!b||0==b.length){var d=this.get_cookie("_eng_ppids");d&&(b=d.split(","));var e=this.get_cookie("_eng_dname");e&&(__eng__ppids_brnd=e)}b&&b.length>0&&this.get_posts_for_preview(b)}catch(a){}},ENGAGEYA.prototype.get_posts_for_preview=function(a){var c=this.shuffle_array(a);if(this.total_slides){window[this.get_post_cb]=function(a){var b=_ENGAGEYA_WIDGETS[0],c=b.jq(".eng_widget_href:not(.eng_test_ppid),.eng_m_widget_href:not(.eng_test_ppid)");if(c&&c.length>0){var d=b.jq(c[0]),e=d.find(".eng_widget_img, eng_m_widget_img"),f=d.find(".eng_widget_in,.eng_m_widget_in"),g=d.find(".eng_m_widget_in"),h=d.find(".eng_widget_is,.eng_m_widget_is"),i=d.find(".eng_widget_dn,.eng_m_widget_dn"),j=e.attr("src"),k=j.match(".*_([0-9]*)..*");if(k&&k[1]){var l=k[1];d.attr("href",a.url),d.attr("onmousedown",""),h.text(a.title);var m=a.thumbnailPath.replace(/(.*_)([0-9]*)(\..*)/,"$1"+l+"$3");e.attr("src",m),d.addClass("eng_test_ppid");var n=decodeURIComponent(__eng__ppids_brnd);if(i&&i.length>0)i.text(n);else{var o=g&&g.length>0?"eng_m_widget_dn":"eng_widget_dn";f.append('<span class="'+o+'">'+n+"</span>")}}}console.log(a)};for(var d=Math.min(c.length,this.total_slides),e=0;e<d;e++){var f=c[e];this.append_script_to_head("http://recs.engageya.com/rec-api/getPost.json?cb="+this.get_post_cb+"&PostId="+f,"")}}},ENGAGEYA.prototype.shuffle_array=function(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a},ENGAGEYA.prototype.get_cookie=function(a){function b(a){return a.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")}var c=document.cookie.match(RegExp("(?:^|;\\s*)"+b(a)+"=([^;]*)"));return c?c[1]:null},ENGAGEYA.prototype.get_slide_elm_by_idx=function(a){var b=document.getElementById("eng_sw_"+a+"_"+this.widget_id)||document.getElementById("eng_m_sw_"+a+"_"+this.widget_id);return b},ENGAGEYA.prototype.widget_ready=function(){this.widget_ready_cb&&this.widget_ready_cb()},ENGAGEYA.prototype.isShouldBeRTL=function(a){try{var b=/[\u0590-\u083F]|[\u08A0-\u08FF]|[\uFB1D-\uFDFF]|[\uFE70-\uFEFF]/gm,c=a.match(b);if(!c)return!1}catch(b){console.log("ERROR: text direction - "+a)}return!0},ENGAGEYA.prototype.is_elm_visible=function(a){var b=a.getBoundingClientRect(),c=100;try{return b.bottom>c&&b.right>0&&b.left<(window.innerWidth||document.documentElement.clientWidth)&&b.top<(window.innerHeight||document.documentElement.clientHeight)-c}catch(a){return!1}},ENGAGEYA.prototype.is_premium=function(){try{var a=this.publisher_id,b=this.premium_pub_ids;return!(!a||!this.in_array(a,b))}catch(a){return!1}},ENGAGEYA.prototype.populate_widget_data=function(a){try{var b=a.widget,c=b.layoutTypeId;this.widget_img_size=26==c?4:2,this.vertical_widget_img_size=null;var d=this.get_add_data("jsvls");d&&d.vcis&&this.is_mobile_conditions_satisfied()&&(this.vertical_widget_img_size=d.vcis),this.is_order_by_post_id&&this.sort_results_by_post_id()}catch(a){console.log("ERROR - widget data:"),console.log(a)}},ENGAGEYA.prototype.sort_results_by_post_id=function(){var a=this.data_json.srcWebsiteId,b=this.jq.extend({},this.data_json.recs),c=[];for(var d in b)b[d].partner_id==a&&c.push(b[d]);c.sort(function(a,b){return b.postId-a.postId});for(var e=0;e<this.data_json.recs.length;e++){var f=this.data_json.recs[e].partner_id;f==a&&c[e]&&(this.data_json.recs[e]=c[e])}},ENGAGEYA.prototype.reposition_widget=function(){if(this.widget_wrapper_positioning_obj){var a=this.widget_wrapper_positioning_obj.elm,b=this.widget_wrapper_positioning_obj.type;if(this.jq(a).length>0){var c=this.jq(this.widget_wrapper_elm).detach();switch(b){case 0:c.appendTo(a);break;case 1:c.prependTo(a);break;case 2:c.insertAfter(a);break;case 3:c.insertBefore(a);break;default:c.appendTo(a)}this.width=null,this.calculate_widget_wrapper_dims()}}},ENGAGEYA.prototype.populate_add_data=function(a){try{var b=JSON.parse(a.widget.replace(/\[rid\]/g,this.random_id)),c=JSON.parse(a.network.replace(/\[rid\]/g,this.random_id));!b.brnd&&c&&c.brnd&&(b.brnd=c.brnd),this.widget_add_data=b;var d=this.widget_add_data.jcss||{},e=this.widget_add_data.jsvls||{},f=this.widget_add_data.gtags;this.slide_height=d.sh||(this.is_video_widget?150:115),this.slide_width=d.sw||(this.is_video_widget?200:140),this.slide_horz_margin=d.shm||10,this.widget_lpadding=d.wlp||(this.is_video_widget?15:0),this.widget_rpadding=d.wrp||(this.is_video_widget?15:0),this.widget_rmargin=d.wrm||(this.is_video_widget?2:0),this.widget_lmargin=d.wlm||(this.is_video_widget?2:0),this.slides_wrapper_lpadding=d.swlp||0,this.slides_wrapper_rpadding=d.swrp||0,this.slides_wrapper_lmargin=d.swlm||0,this.slides_wrapper_rmargin=d.swrm||0,this.slide_bpadding=d.sbp||(this.is_video_widget?15:5),this.slide_tpadding=d.stp||(this.is_video_widget?15:5),this.widget_txt_direction=d.wtdir||null,this.widget_img_size=e.cis||2,this.num_of_slides_a_row=e.spr||(this.is_video_widget?3:null),this.num_of_mobile_slides_a_row=e.mspr||(this.is_video_widget?3:null),this.is_cancel_click_bubble=e.iccb||!1,this.max_width_for_mobile=e.mwfm||420,this.is_vertical_mobile_widget="undefined"==typeof e.ivmw||0!=e.ivmw,this.is_force_vertical_layout=e.ifvl||!1,this.num_of_mobile_slides=e.noms||6,this.is_default_brand=!this.website_id||this.website_id<127432?e.isdb:"undefined"==typeof e.isdb||0!=e.isdb,this.title_elm_type=e.ttlelm?e.ttlelm:"div",this.width=e.rplcwidth&&e.rplcwidthval&&e.rplcwidth==Math.floor(this.width)?e.rplcwidthval:this.width,this.widget_wrapper_positioning_obj=e.wwpo?e.wwpo:null,this.max_width_for_tablet_cls=e.mwftc||null,this.image_size_for_rec_num=e.cisfrm||null,this.is_order_by_post_id=e.iobpi||null,this.custom_default_image=e.cdi||null,this.is_description_span=e.idesc||null,this.is_links_open_new_window=e.inw||null,this.max_description_chars=e.mdc||1e3,this.max_mobile_description_chars=e.mmdc||1e3,this.max_title_chars=e.mtc||100,this.max_mobile_title_chars=e.mmtc||150,this.postfix_for_cutted_description=null!=e.pfcd?e.pfcd:"...",this.postfix_for_cutted_title=null!=e.pfct?e.pfct:"...",this.is_meta_tags_span=e.imtag||null,this.is_default_images=!e.idi,this.google_tags=f}catch(a){console.log("ERROR - additional data:"),console.log(a)}},ENGAGEYA.prototype.get_add_data=function(a){return this.widget_add_data&&this.widget_add_data[a]?this.widget_add_data[a]:null},ENGAGEYA.prototype.set_add_data=function(a,b){this.widget_add_data[a]=b},ENGAGEYA.prototype.add_player_wmode=function(){},ENGAGEYA.prototype.get_page_url=function(){if(this.input_url)return this.input_url;var a=document.location.href;return this.is_in_iframe()&&(a=document.referrer?document.referrer:a),a=encodeURIComponent(a)},ENGAGEYA.prototype.get_total_slides=function(a,b){for(var c=this.num_of_slides_a_row*a,d=c;d>b&&a>1;)a--,d=this.num_of_slides_a_row*a;return this.is_mobile_conditions_satisfied()&&(d=this.num_of_mobile_slides?this.num_of_mobile_slides:d),d=d>b?b:d},ENGAGEYA.prototype.get_script=function(a,b){this.jq.ajax({type:"GET",url:a,success:b,dataType:"script",cache:!0})},ENGAGEYA.prototype.logger=function(a,b){this.log_printout&&(this.log_printout==this.log_types.ALL||this.in_array(a,this.log_printout))&&console.log(a+": "+b)},ENGAGEYA.prototype.generate_img_pixel=function(a){var b=document.createElement("img");b.width=1,b.height=1,b.src=a,this.widget_wrapper_elm.appendChild(b)},ENGAGEYA.prototype.is_mobile_conditions_satisfied=function(){return!!(!this.is_video_widget&&this.is_mobile()&&this.width<this.max_width_for_mobile)},ENGAGEYA.prototype.build_layout=function(){1==this.is_vertical_mobile_widget&&this.is_mobile_conditions_satisfied()||this.is_force_vertical_layout?this.build_vertical_layout():this.build_horizontal_layout()},ENGAGEYA.prototype.build_vertical_layout=function(){var a=this.data_json,b=Math.min(this.num_of_mobile_slides,a.recs.length);this.total_slides=b;var c=this.get_recs_holder_elm(),d="eng_m_top_ww_widget_"+this.random_id,e=this.get_tablet_cls(),f=this.get_mobile_device_OS(),g=f?"_"+f:"",h='<div class="eng_m_top_ww_widget'+g+e+'" id="'+d+'"><div class="eng_m_ww_widget" id="eng_m_ww_widget_'+this.widget_id+'">';this.populate_widget_directions();var i=this.get_default_css("MOBILE_VERTICAL",d),j="<"+this.title_elm_type+' class="eng_m_ww_title" id="eng_m_ww_title_'+this.random_id+'"><span class="eng_m_ww_ttl_span1">'+a.widget.headerText+'</span><span class="eng_m_ww_ttl_span2"></span></'+this.title_elm_type+">",k='<div class="eng_m_asw" id="eng_m_asw_'+this.random_id+'">';h+=j+k;for(var l=a.recs,m="",n=0;n<b;n++){var o=l[n].postId,p=l[n].recTypeDB,q=this.get_display_name(l[n]);this.visible_posts_and_types.push({pi:o,pt:p});var r=this.is_video_post(l[n])?" eng_m_widget_vsw":"",s='<div id="eng_m_sw_'+n+"_"+this.widget_id+'" class="eng_m_widget_sw'+r+'">',t=this.get_rec_type(l[n]),u=this.get_thumb(a,l[n].thumbnail_path,l[n].category_id,n+1),v=u?"":" eng_m_no_img",w="";(u||this.is_default_images)&&(w='<div id="eng_m_img_w_'+n+"_"+this.widget_id+'" class="eng_m_widget_img_w"><img id="eng_m_img_'+n+"_"+this.widget_id+'" class="eng_m_widget_img" src="'+u+'" data-pin-no-hover="true" /></div>');var x='<a id="eng_m_href_'+n+"_"+this.widget_id+'" class="eng_m_widget_href '+t+v+'" ',y=this.is_video_widget?this.shorten(l[n].title,50):this.get_title(l[n]),z=this.get_description(l[n]),A=this.get_meta_tag_obj(l[n]),B="";"rtl"!=this.widget_txt_direction||this.isShouldBeRTL(y)||(B='style="direction:ltr;text-align:left;"');var C='<div id="eng_m_in_'+n+"_"+this.widget_id+'" class="eng_m_widget_in" '+B+">",D='<span id="eng_m_is_'+n+"_"+this.widget_id+'" class="eng_m_widget_is">',E=this.is_description_span?'<span id="eng_m_isd_'+n+"_"+this.widget_id+'" class="eng_m_widget_isd">'+z+"</span>":"",F=this.is_meta_tags_span&&A.label?'<span id="eng_m_mtg_'+n+"_"+this.widget_id+'" class="eng_m_widget_mtg mtg_m_'+A.id+'">'+A.label+"</span>":"",G=q?'<span id="eng_m_dn_'+n+"_"+this.widget_id+'" class="eng_m_widget_dn">':"";x+=this.get_click_defs(l[n],a.srcWebsiteId),D+=y+"</span>",G+=q?q+"</span>":"",s+=x+w+C+D+F+E+G,s+="</div></a></div>",h+=s,h+=this.add_row_if_required(n+1,this.num_of_slides_a_row,b),m+=this.get_impression_pixel_imgs(a.recs[n].impressionUrls)}var H=this.get_widget_branding();h+='</div><div id="eng_m_brnd_'+this.widget_id+'" class="eng_m_branding">'+H+"</div></div>",h+=m+"</div>";var I=this.get_add_data("css")||"";widgetCss="<style>"+i+I+"</style>",c.html(widgetCss+h)},ENGAGEYA.prototype.build_horizontal_layout=function(){var a=this.data_json;this.calc_slides_dims();var b=a.widget.displayRows,c=this.get_total_slides(b,a.recs.length);this.total_slides=c;var d=this.get_recs_holder_elm(),e=this.is_mobile_conditions_satisfied()?"m_":"",f="eng_"+e+"top_ww_widget_"+this.random_id,g=this.get_tablet_cls(),h='<div class="eng_top_ww_widget'+g+'" id="'+f+'"><div class="eng_ww_widget" id="eng_ww_widget_'+this.widget_id+'">';this.populate_widget_directions();var i=this.get_default_css("DESKTOP_VIDEO",f),j=this.get_default_css("DESKTOP_NON_VIDEO",f),k=this.get_default_css("DESKTOP",f);k+=this.is_video_widget?i:j;var l="<"+this.title_elm_type+' class="eng_ww_title" id="eng_ww_title_'+this.random_id+'"><span class="eng_ww_ttl_span1">'+a.widget.headerText+'</span><span class="eng_ww_ttl_span2"></span></'+this.title_elm_type+">",m=this.is_video_widget?'<div class="eng_ww_close" id="eng_ww_close_'+this.random_id+'"><span>&times</span></div>':"",n='<div class="eng_asw" id="eng_asw_'+this.random_id+'">';h+=l+m+n;for(var o=a.recs,p="",q=0;q<c;q++){var r=o[q].postId,s=o[q].recTypeDB;this.visible_posts_and_types.push({pi:r,pt:s}),this.is_start_of_row(q,this.num_of_slides_a_row)&&(k+="#eng_sw_"+q+"_"+this.widget_id+"{margin-"+this.widget_direction+":0px !important;}");var t=this.is_video_post(o[q])?" eng_widget_vsw":"",u='<div id="eng_sw_'+q+"_"+this.widget_id+'" class="eng_widget_sw'+t+'">',v=this.get_rec_type(o[q]),w=this.get_thumb(a,o[q].thumbnail_path,o[q].category_id,q+1),x=w?"":" eng_no_img",y="";(w||this.is_default_images)&&(y='<div id="eng_img_w_'+q+"_"+this.widget_id+'" class="eng_widget_img_w"><img id="eng_img_'+q+"_"+this.widget_id+'" class="eng_widget_img" src="'+w+'" data-pin-no-hover="true" /></div>');var z='<a id="eng_href_'+q+"_"+this.widget_id+'" class="eng_widget_href '+v+x+'" ',A=this.get_title(o[q]),B=this.get_description(o[q]),C=this.get_meta_tag_obj(o[q]),D="";"rtl"!=this.widget_txt_direction||this.isShouldBeRTL(A)||(D='style="direction:ltr;text-align:left;"');var E='<div id="eng_in_'+q+"_"+this.widget_id+'" class="eng_widget_in" '+D+">",F='<span id="eng_is_'+q+"_"+this.widget_id+'" class="eng_widget_is">',G=this.is_description_span?'<span id="eng_isd_'+q+"_"+this.widget_id+'" class="eng_widget_isd">'+B+"</span>":"",H=this.is_meta_tags_span&&C.label?'<span id="eng_mtg_'+q+"_"+this.widget_id+'" class="eng_widget_mtg mtg_'+C.id+'">'+C.label+"</span>":"",I=this.get_display_name(o[q]),J=I?'<span id="eng_dn_'+q+"_"+this.widget_id+'" class="eng_widget_dn">':"";z+=this.get_click_defs(o[q],a.srcWebsiteId),F+=A+"</span>",J+=I?I+"</span>":"",u+=z+y+E+F+H+G+J,u+="</div></a></div>",h+=u,h+=this.add_row_if_required(q+1,this.num_of_slides_a_row,c),p+=this.get_impression_pixel_imgs(a.recs[q].impressionUrls)}var K=this.get_widget_branding();h+='</div><div id="eng_brnd_'+this.widget_id+'" class="eng_branding">'+K+"</div></div>",h+=p+"</div>";var L=this.get_add_data("css")||"";widgetCss="<style>"+k+L+"</style>",d.html(widgetCss+h)},ENGAGEYA.prototype.get_default_css=function(a,b){var c="",d=this.get_add_data("vpost"),e=d&&d.pimg?d.pimg:"//"+this.default_video_post_btn;switch(a){case"DESKTOP":c="#"+b+" .eng_top_ww_widget{}#"+b+" .eng_ww_widget{display:inline-block;direction:"+this.widget_txt_direction+";position:relative;margin-bottom:2px;margin-left:"+this.widget_lmargin+"px;margin-right:"+this.widget_rmargin+"px;text-align:center;padding-left:"+this.widget_lpadding+"px;padding-right:"+this.widget_rpadding+"px;padding-top:"+this.slide_tpadding+"px;padding-bottom:"+this.slide_bpadding+"px;}#"+b+" .eng_ww_title{text-align:"+this.widget_direction+";}#"+b+" .eng_ww_close{position:absolute;top:8px;"+this.widget_op_direction+":8px;cursor:pointer;font-size:22px;}#"+b+" .eng_asw{display:block;margin-left:"+this.slides_wrapper_lmargin+"px;margin-right:"+this.slides_wrapper_rmargin+"px;padding-left:"+this.slides_wrapper_lpadding+"px;padding-right:"+this.slides_wrapper_rpadding+"px;}#"+b+" .eng_widget_sw{width:"+this.slide_width+"px;text-align:"+this.widget_direction+";position:relative;display:inline-block;margin-"+this.widget_direction+":"+this.slide_horz_margin+"px;}#"+b+" .eng_widget_in{width:100%;}#"+b+" .eng_widget_is{}#"+b+" .eng_widget_dn{font-size:10px;text-decoration:none !important;display:inline-block;width:100%;}#"+b+" .eng_widget_img{width:100%;height:auto;border-radius:inherit;margin-bottom:5px;}#"+b+" .eng_widget_href{border-radius:inherit;}#"+b+" .eng_rows_seperator{height:10px;}#"+b+" .eng_branding{text-align:"+this.widget_op_direction+";margin:8px 0px 0px 0px;}#"+b+" .eng_branding a{color:#BBB;font-size:12px;font-family:arial;}";break;case"DESKTOP_NON_VIDEO":c="#"+b+" .eng_ww_widget{color:#000;}#"+b+" .eng_widget_sw{vertical-align:top;margin-bottom:10px}#"+b+" .eng_widget_vsw .eng_widget_img_w::after{content:'';background-image: url("+e+");position:absolute;left:40%;top:42%;width:35px;height:26px;z-index:2;}#"+b+" .eng_widget_href{position:relative;display:block !important;visibility:visible !important;}#"+b+" .eng_widget_in{width:100%;line-height:1.4;}#"+b+" .eng_widget_dn{color:#CDCDCD;}#"+b+" .eng_ww_title{padding:0px;margin:0px 0px 5px 0px;}#"+b+" .eng_ww_ttl_span1{display:block;padding:5px 0px;float:none !important;}#"+b+" .eng_widget_img_w{position:relative;}#"+b+" .eng_widget_img{margin-bottom:5px;display:block;}";break;case"DESKTOP_VIDEO":c="#"+b+" .eng_ww_widget{background-color:rgba(1, 1, 1, 0.9);color:#FFF;}#"+b+" .eng_widget_in{position:absolute;background-color:rgba(36,36,36,0.8);color:#FFF;font-size:12px;line-height:normal !important;bottom:0px;}#"+b+" .eng_widget_sw{height:"+this.slide_height+"px;}#"+b+" .eng_widget_dn{}#"+b+" .eng_widget_is{display:block;padding: 2px 5px 2px 5px;}#"+b+" .eng_ww_title{padding:0px 0px 5px 0px;font-size:15px;}";
break;case"MOBILE_VERTICAL":c="#"+b+" .eng_m_top_ww_widget{}#"+b+" .eng_m_ww_widget{display:inline-block;direction:"+this.widget_txt_direction+";position:relative;margin-bottom:2px;margin-left:"+this.widget_lmargin+"px;margin-right:"+this.widget_rmargin+"px;text-align:center;padding-left:"+this.widget_lpadding+"px;padding-right:"+this.widget_rpadding+"px;padding-top:"+this.slide_tpadding+"px;padding-bottom:"+this.slide_bpadding+"px;}#"+b+" .eng_m_ww_title{padding:0px 0px 5px 0px;text-align:"+this.widget_direction+";}#"+b+" .eng_m_asw{display:block;margin-left:"+this.slides_wrapper_lmargin+"px;margin-right:"+this.slides_wrapper_rmargin+"px;padding-left:"+this.slides_wrapper_lpadding+"px;padding-right:"+this.slides_wrapper_rpadding+"px;}#"+b+" .eng_m_widget_sw{width:100%;padding-bottom:8px;}#"+b+" .eng_m_widget_vsw .eng_m_widget_img_w::after{content:'';background-image: url("+e+");position:absolute;"+this.widget_direction+":37%;top:42%;width:35px;height:26px;z-index:2;}#"+b+" .eng_m_widget_in{width:57%;display:inline-block;vertical-align:top;text-align:"+this.widget_direction+";}#"+b+" .eng_m_widget_is{line-height:1.4;}#"+b+" .eng_m_widget_dn{font-size:10px;padding:5px 5px 3px 0px;color:#999999;display:block;}#"+b+" .eng_m_widget_img_w{width:40%;margin-"+this.widget_op_direction+":3%;display:inline-block;position:relative;}#"+b+" .eng_m_widget_img{width:100%;}#"+b+" .eng_m_ww_ttl_span1{display:block;padding:5px 0px;float:none !important;}#"+b+" .eng_m_widget_href{border-radius:inherit;display:block !important;visibility:visible !important;}#"+b+" .eng_m_rows_seperator{height:8px;}#"+b+" .eng_m_branding{text-align:"+this.widget_op_direction+";margin:8px 0px 0px 0px;}#"+b+" .eng_m_branding a{color:#BBB;font-size:12px;font-family:arial;}";break;case"VIDEO_ONLY":c="#"+this.widget_wrapper_elm_id+"{visibility:hidden;}#"+b+" .eng_ww_widget{margin:0;padding:0;}#"+b+" .eng_widget_sw{margin:0px;}#"+b+" .eng_widget_in{display:none;}#"+b+" .eng_ww_close{padding:0px 7px;z-index:11111;background:#000;"+this.widget_op_direction+":0px;top:initial;color:#FFF;}#"+b+" .eng_ww_title{display:none;}"}return c},ENGAGEYA.prototype.get_description=function(a){if(a){var b=a.description;try{var c;c=this.is_mobile_conditions_satisfied()?this.max_mobile_description_chars:this.max_description_chars,b&&b.length>c&&(b=b.replace("...",""),b=this.shorten_string(b,c),b+=this.postfix_for_cutted_description)}catch(a){console.log("ERROR"),console.log(a)}return b}},ENGAGEYA.prototype.get_title=function(a){if(a){var b=a.title;try{var c;c=this.is_mobile_conditions_satisfied()?this.max_mobile_title_chars:this.max_title_chars,b&&b.length>c&&(b=this.shorten_string(b,c),b+=this.postfix_for_cutted_title)}catch(a){console.log("ERROR"),console.log(a)}return b}},ENGAGEYA.prototype.shorten_string=function(a,b){a=a.substring(0,b),a=a.trim();var c=a.lastIndexOf(" ");a=a.substring(0,c);var d=a.charAt(a.length-1);return","!=d&&"."!=d&&"-"!=d&&"|"!=d||(a=a.substring(0,a.length-1).trim()),a},ENGAGEYA.prototype.get_meta_tag_obj=function(a){if(a){var b={label:"",id:""};try{a.metatagLabels&&a.metatags&&(b.label=a.metatagLabels[0]||"",b.id=a.metatags.split(",")[0]||"",b.label=b.label.replace(/\^/g," "))}catch(a){console.log("ERROR"),console.log(a)}return b}},ENGAGEYA.prototype.get_click_defs=function(a,b){var c=this.get_href_target(a.partner_id,b),d=this.get_cancle_click_bubble(),e='onclick="'+d+'"',f=!!a.ajx,g="",h=a.clickUrl,i=this.get_rec_type(a)==this.rec_types[1]?"":'rel="nofollow" ';if(f)window.ajx_sprk_click=function(a){},g+=c+" "+i+'href="'+a.url+'" '+e+' title="'+a.title+'" onmousedown="_eng_do_async_click(\''+h+"');"+d+'return true;">';else{if(this.is_in_iframe()){var j=this.get_page_url();j&&(j=encodeURIComponent(decodeURIComponent(j)),h=h+"&cr="+j)}g+=c+" "+i+'href="'+a.url+'" '+e+' title="'+a.title+'" onmousedown="this.href=\''+h+"';"+d+'return true;">'}return g},ENGAGEYA.prototype.get_rec_type=function(a){var b=a.recType.split("_"),c="eng_"+b[1].toLowerCase();return c},ENGAGEYA.prototype.is_video_post=function(a){var b=!1,c=this.get_add_data("vpost");return c&&c.drgx&&(b=null!=a.url.match(c.drgx)),b},ENGAGEYA.prototype.get_impression_pixel_imgs=function(a){var b="";if(a&&null!=a&&a.length>0)for(var c=0;c<a.length;c++)b+='<img src="'+a[c]+'" style="display:none;" width="1px" height="1px" />';return b},ENGAGEYA.prototype.get_display_name=function(a){var b="",c=[2,3,4,8,18,19,20,21,30,31,32],d=1*a.recTypeDB;return this.in_array(d,c)&&(b=this.shorten(a.displayName,20)),b},ENGAGEYA.prototype.populate_widget_directions=function(){this.widget_txt_direction=this.widget_txt_direction||this.get_recs_holder_elm().css("direction");var a="rtl"==this.widget_txt_direction;this.widget_direction=a?"right":"left",this.widget_op_direction=a?"left":"right"},ENGAGEYA.prototype.get_cancle_click_bubble=function(){return this.is_cancel_click_bubble?"event&&event.cancelBubble&&(event.cancelBubble=true);event&&event.stopPropagation&&(event.stopPropagation());":""},ENGAGEYA.prototype.get_recs_holder_elm=function(){return this.jq("#eng_recs_holder_"+this.random_id)},ENGAGEYA.prototype.align_widget_elements=function(){this.align_widget_title()},ENGAGEYA.prototype.get_widget_branding=function(){var a="",b=null,c={img:"",img2:""};this.get_add_data("jsvls");if(this.is_default_brand){var e="//"+this.default_imgs_url;b=this.get_add_data("brnd")||{href:"//www.engageya.com",name:"",ttl:"Engageya",img:{src:e+"eng_logo.png",width:41,height:12},imghvr:e+"eng_logo_c.png",href2:"",name2:"",ttl2:"",img2:"",img2hvr:""},this.set_add_data("brnd",b)}else b=this.get_add_data("brnd")||{href:"",name:"",ttl:"",img:"",imghvr:"",adds:"",href2:"",name2:"",ttl2:"",img2:"",adds2:"",img2hvr:""};if(b.adds||(b.adds=""),b.img){var f=b.img;c.img='<img id="eng_brnd_img_'+this.widget_id+'" class="eng_brnd_img" src="'+f.src+'" width="'+f.width+'px" height="'+f.height+'px"/>'}if(b.img2){var f=b.img2;c.img2='<img id="eng_brnd_img2_'+this.widget_id+'" class="eng_brnd_img2" src="'+f.src+'" width="'+f.width+'px" height="'+f.height+'px"/>'}return(b.name||b.img)&&(a='<a href="'+b.href+'" '+b.adds+' target="_blank" title="'+b.ttl+'">'+b.name+c.img+"</a>"),(b.name2||b.img2)&&(b.href2=b.href2||"",b.ttl2=b.ttl2||"",b.name2=b.name2||"",a+='<a href="'+b.href2+'" '+b.adds2+' target="_blank" title="'+b.ttl2+'">'+b.name2+c.img2+"</a>"),a},ENGAGEYA.prototype.is_mobile=function(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}},ENGAGEYA.prototype.get_tablet_cls=function(){var a="";return this.is_tablet_conditions_satisfied()&&(a=" eng_tablet"),a},ENGAGEYA.prototype.is_tablet_conditions_satisfied=function(){return!!(this.is_mobile()&&!this.is_mobile_conditions_satisfied()&&this.max_width_for_tablet_cls&&this.max_width_for_tablet_cls>=this.width)},ENGAGEYA.prototype.get_mobile_device_OS=function(){var a="";if(this.is_mobile())return a=navigator.userAgent.match(/Android/i)?"android":navigator.userAgent.match(/iPhone|iPad|iPod/i)?"ios":"other"},ENGAGEYA.prototype.align_widget_title=function(){},ENGAGEYA.prototype.get_thumb=function(a,b,c,d){var e,f=this.widget_img_size,g=4,h=3;if(this.vertical_widget_img_size&&(f=this.vertical_widget_img_size,g=17),this.image_size_for_rec_num)if(g=17,this.image_size_for_rec_num.phone&&this.is_mobile_conditions_satisfied())for(var i=0;i<this.image_size_for_rec_num.phone.length;i++)this.image_size_for_rec_num.phone[i][0]==d&&(f=this.image_size_for_rec_num.phone[i][1]);else if(this.image_size_for_rec_num.tablet&&this.is_tablet_conditions_satisfied())for(var i=0;i<this.image_size_for_rec_num.tablet.length;i++)this.image_size_for_rec_num.tablet[i][0]==d&&(f=this.image_size_for_rec_num.tablet[i][1]);else if(this.image_size_for_rec_num.desktop)for(var i=0;i<this.image_size_for_rec_num.desktop.length;i++)this.image_size_for_rec_num.desktop[i][0]==d&&(f=this.image_size_for_rec_num.desktop[i][1]);if(b)for(var i=1;i<=g;i++)if(i!=f&&(e=b.lastIndexOf("_"+i+"."),e!=-1)){i>=10&&(h=4),b=b.substr(0,e)+"_"+f+"."+b.substr(e+h);break}return b},ENGAGEYA.prototype.shorten=function(a,b){if(!a)return"";var c=a.length,d=a.indexOf(" ",b);return d==-1?c<=b?a:a.substring(0,b)+"...":(sS=a.substring(0,d),sS.length<c&&(sS+="..."),sS)},ENGAGEYA.prototype.click=function(a,b,c){return a.href=b,!0},ENGAGEYA.prototype.get_href_target=function(a,b){var c="";return a!=b||this.is_links_open_new_window?c='target="_blank"':this.is_in_iframe()&&(c='target="_parent"'),c},ENGAGEYA.prototype.is_in_iframe=function(){var a=window.self!==window.top;return a},ENGAGEYA.prototype.is_start_of_row=function(a,b){return a%b==0},ENGAGEYA.prototype.add_row_if_required=function(a,b,c){return a%b==0&&a!=c?'<div style="clear: both" class="eng_rows_seperator"></div>':""},ENGAGEYA.prototype.floor_figure=function(a,b){b||(b=2);var c=Math.pow(10,b);return(parseInt(a*c)/c).toFixed(b)},ENGAGEYA.prototype.calc_slides_dims=function(){try{var a=this.width-this.widget_lpadding-this.widget_rpadding-this.widget_rmargin-this.widget_lmargin-this.slides_wrapper_lpadding-this.slides_wrapper_rpadding-this.slides_wrapper_lmargin-this.slides_wrapper_rmargin,b=Math.floor(a/this.slide_width),c=Math.floor((a-(b-1)*this.slide_horz_margin)/this.slide_width);this.get_add_data("jsvls");this.is_mobile_conditions_satisfied()?this.num_of_slides_a_row=this.num_of_mobile_slides_a_row?this.num_of_mobile_slides_a_row:c:this.num_of_slides_a_row=this.num_of_slides_a_row?this.num_of_slides_a_row:c;var e=this.get_add_data("jcss");if(0==this.num_of_slides_a_row&&a>99&&(this.slide_width=a,this.num_of_slides_a_row=1),!this.is_video_widget&&this.num_of_slides_a_row>1&&(!e||!e.sw)){var f=a-this.num_of_slides_a_row*this.slide_width-this.slide_horz_margin*(this.num_of_slides_a_row-1),g=f/this.num_of_slides_a_row+this.slide_width;this.slide_width=this.floor_figure(g,2)}}catch(a){this.num_of_slides_a_row=1,console.log("ERROR"),console.log(a)}},ENGAGEYA.prototype.populate_required_fields=function(){this.calculate_widget_wrapper_dims()},ENGAGEYA.prototype.calculate_widget_wrapper_dims=function(){var a=1==this.is_video_widget?document.getElementById(this.plr_elm_id):this.widget_wrapper_elm;a=a?a:this.widget_wrapper_elm;var b=a;this.width=this.width?this.width:this.jq(a).width();var c=this.get_exact_width(a);c&&(this.width=c),this.height=this.height?this.height:this.jq(a).height();try{for(;a&&(0===this.height||this.height<100)&&this.jq(a).parent();)a&&(a=this.jq(a).parent().get(0),this.height=this.jq(a).height());for(a=b;a&&(0===this.width||this.width<100)&&this.jq(a).parent();)a=this.jq(a).parent().get(0),a&&(this.width=this.jq(a).width(),c=this.get_exact_width(a),this.width=c?c:this.width)}catch(a){console.log("ERROR"),console.log(a)}},ENGAGEYA.prototype.get_exact_width=function(a){var b=this.jq(a)[0].getBoundingClientRect().width;return b&&Math.abs(b-this.width)>0&&Math.abs(b-this.width)<1?b:null},ENGAGEYA.prototype.create_placement=function(){this.populate_required_fields();var a=document.createElement("div");a.id="eng_recs_holder_"+this.random_id,a.className="eng_recs_holder",this.widget_wrapper_elm.appendChild(a);var b=document.createElement("style");b.type="text/css";var c=this.is_video_widget?"none":"block",d="#eng_recs_holder_"+this.random_id+" .eng_widget_sw:hover{zoom:1;filter:alpha(opacity=100);opacity:1;-webkit-filter: brightness(120%);filter: brightness(1.2);}#eng_recs_holder_"+this.random_id+" .eng_widget_sw{filter:alpha(opacity=90);opacity:0.9;}#eng_recs_holder_"+this.random_id+"{height:"+(this.height-40)+"px;-webkit-transform-style: preserve-3d;-moz-transform-style: preserve-3d;transform-style: preserve-3d;}#eng_top_ww_widget_"+this.random_id+"{position: relative;top: 50%;transform: translateY(-50%);width: 100%;}",e="";this.is_video_widget&&(this.jq(this.widget_wrapper_elm).parent().css("position","relative"),e+=d,e+=".eng_recs_holder{width: 100%;top:0px;position: absolute;text-align:center;z-index:999999;background-color: rgba(1, 1, 1, 0.6);}#eng_recs_holder_"+this.random_id+"{display:"+c+";}.eng_recs_holder a{text-decoration:none;}"),b.styleSheet?b.styleSheet.cssText=e:b.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(b)},ENGAGEYA.prototype.get_page_ttl=function(){var a="",b=document.getElementsByTagName("title");if(b&&b.length>0)try{a=b[0].innerText||b[0].textContent,a=a.substring(0,100).substring(0,a.lastIndexOf(" ")),a=encodeURIComponent(a)}catch(a){}return a},ENGAGEYA.prototype.get_meta_content=function(a,b){for(var c=document.getElementsByTagName("meta"),d="",e=0;e<c.length;e++)if(c[e].getAttribute("property")==a||c[e].getAttribute("name")==a){try{d=c[e].getAttribute(b),d=d.substring(0,200).substring(0,d.lastIndexOf(" ")),d=encodeURIComponent(d)}catch(a){}break}return d},ENGAGEYA.prototype.get_lang=function(){var a=window.navigator.userLanguage||window.navigator.language;return a},ENGAGEYA.prototype.append_script_to_head=function(a,b){var c=document.createElement("script");c.type="text/javascript",c.id=b,c.src=a,c.charset="UTF-8",c.async=!0;var d=document.getElementsByTagName("head")[0];d.parentNode.insertBefore(c,d)},ENGAGEYA.prototype.append_link_to_head=function(a,b,c,d,e){var f=document.createElement("link");f.type=c,f.id=b,f.href=a,f.rel=d,f.async=e;var g=document.getElementsByTagName("head")[0];g.parentNode.insertBefore(f,g)},ENGAGEYA.prototype.getQS=function(a){var b=a.replace(/^[^\?]+\??/,""),c=new Object;if(!b)return c;for(var d=b.split(/[;&]/),e=0;e<d.length;e++){for(var f=d[e].replace(/(pid=.*)=.*/,"$1"),g=d[e].length-f.length,h=0;h<g;h++)f+="%3D";var i=f.split(/=(.*)/);if(i&&!(i.length<2)){var j=unescape(i[0]),k=i[1];k=k.replace(/\+/g," "),c[j]=k}}return c},ENGAGEYA.prototype.inj_init_binding=function(a){function c(){if(!called)try{document.documentElement.doScroll("left"),a.doc_ready(a)}catch(a){setTimeout(c,10)}}if(document.addEventListener)document.addEventListener("DOMContentLoaded",a.doc_ready(a),!1);else if(document.attachEvent){try{var b=null!=window.frameElement}catch(a){}document.documentElement.doScroll&&!b&&c(),document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&a.doc_ready(a)})}},ENGAGEYA.prototype.in_array=function(a,b){for(var c in b)if(b[c]==a)return!0;return!1};var _eng_do_async_click=function(a){var b=document.createElement("script");b.type="text/javascript",b.src=a,document.getElementsByTagName("head")[0].appendChild(b)};ENGAGEYA_VIDEO.prototype.attach_widget_events=function(){try{var a=this;this.load_real_imps_events(),this.load_video_view_events(),this.widget_imgs_events(),this.widget_clicks_events(),this.jq("#eng_ww_close_"+this.random_id).click(function(){a.get_videojs_obj().dispose(),a.close_video()})}catch(a){console.log("ERROR - events:"),console.log(a)}},ENGAGEYA_VIDEO.prototype.visibility_load_video_js_event=function(a){var b=0==this.load_on_view_percents||this.is_elm_visible_conditions(a,this.load_on_view_percents,"above");b&&this.load_videojs()},ENGAGEYA_VIDEO.prototype.visibility_play_video_event=function(a){var b=0==this.play_video_on_view_percents.top||this.is_elm_visible_conditions(a,this.play_video_on_view_percents.top,"above"),c=0==this.play_video_on_view_percents.bottom||this.is_elm_visible_conditions(a,this.play_video_on_view_percents.bottom,"below");if(b&&c&&!this.is_video_should_be_paused){if(this.handle_video_widget_visibility(),this.is_play_command_sent)return;this.is_play_command_sent=!0;var d=this;window.setTimeout(function(){d.play_video(d)},150)}},ENGAGEYA_VIDEO.prototype.handle_video_widget_visibility=function(){this.is_video_was_on_view||(this.is_video_was_on_view=!0,this.show_video_widget())},ENGAGEYA_VIDEO.prototype.show_video_widget=function(){this.jq(this.widget_wrapper_elm).css({visibility:"visible",opacity:0}).animate({opacity:1},500)},ENGAGEYA_VIDEO.prototype.visibility_pause_video_event=function(a){var b=0!=this.pause_video_on_not_view_percents.top&&!this.is_elm_visible_conditions(a,this.pause_video_on_not_view_percents.top,"above"),c=0!=this.pause_video_on_not_view_percents.bottom&&!this.is_elm_visible_conditions(a,this.pause_video_on_not_view_percents.bottom,"below");!b&&!c&&this.is_window_active||this.is_play_command_sent?this.is_video_should_be_paused=!1:(this.is_video_should_be_paused=!0,this.pause_video())},ENGAGEYA_VIDEO.prototype.play_video=function(a){this.logger(this.log_types.INFO,"PLAYING VIDEO");try{this.ads_manager.resume()}catch(b){a.is_play_command_sent=!1}a.is_play_command_sent=!1},ENGAGEYA_VIDEO.prototype.pause_video=function(){this.logger(this.log_types.INFO,"PAUSING VIDEO");try{this.ads_manager.pause()}catch(a){}},ENGAGEYA_VIDEO.prototype.on_visibility_change=function(a){return function(){var b=a.widget_wrapper_elm;a.visibility_load_video_js_event(b),a.is_load_videojs_called&&a.populate_video_tag(),a.is_video_tag_populated&&a.ads_ready&&(a.visibility_pause_video_event(b),a.visibility_play_video_event(b))}},ENGAGEYA_VIDEO.prototype.set_window_active=function(a){return function(){a.is_run_only_on_window_active&&(a.is_window_active=!0),a.logger(a.log_types.INFO,"WINDOW ACTIVE")}},ENGAGEYA_VIDEO.prototype.set_window_blur=function(a){return function(){a.is_run_only_on_window_active&&(a.is_window_active=!1),a.logger(a.log_types.INFO,"WINDOW NON ACTIVE")}},ENGAGEYA_VIDEO.prototype.load_video_view_events=function(){var a=this.on_visibility_change(this),b=this.set_window_blur(this),c=this.set_window_active(this);window.addEventListener?(addEventListener("DOMContentLoaded",a,!1),addEventListener("load",a,!1),addEventListener("scroll",a,!1),addEventListener("resize",a,!1),addEventListener("focus",function(){c(),a()},!1),addEventListener("blur",function(){b(),a()},!1),addEventListener("touchstart",function(){a()},!1),addEventListener("click",function(){a()},!1)):window.attachEvent&&(attachEvent("onDOMContentLoaded",a),attachEvent("onload",a),attachEvent("onscroll",a),attachEvent("onresize",a),attachEvent("onfocus",function(){c(),a()}),attachEvent("onblur",function(){b(),a()})),a()},ENGAGEYA_VIDEO.prototype.get_video_js_scripts=function(a){var b=this;if(this.videojs_js_files[a]){console.log("LOADING JS FILE: "+this.videojs_js_files[a]);var c=this.videojs_js_files[a].indexOf("//")==-1?this.videojs_path+this.videojs_js_files[a]:this.videojs_js_files[a];this.get_script(c,function(c,d,e){a++,b.get_video_js_scripts(a)})}else this.is_video_js_fully_loaded=!0},ENGAGEYA_VIDEO.prototype.load_videojs=function(){if(!this.is_load_videojs_called){for(var b=0;b<this.videojs_css_files.length;b++)this.append_link_to_head(this.videojs_path+this.videojs_css_files[b],"","text/css","stylesheet",!0);this.get_video_js_scripts(0),this.is_load_videojs_called=!0,console.log("VIDEO JS STARTED LOADING")}},ENGAGEYA_VIDEO.prototype.is_elm_visible_conditions=function(a,b,c){b=b||0,c=c||"visible";var d=a.getBoundingClientRect(),e=Math.ceil(d.height),f=e*b/100,g=window.innerHeight||document.documentElement.clientHeight,h=d.top<g-f&&d.top+d.height>=f,i=d.bottom>f;return"above"===c?h:"below"===c?i:!h&&!i},ENGAGEYA_VIDEO.prototype.get_total_slides=function(){return 1},ENGAGEYA_VIDEO.prototype.get_video_additional_data=function(a){var b={};if(!a.vMAD)return b;try{b=JSON.parse(a.vMAD.replace(/\[rid\]/g,this.random_id))}catch(a){console.log("ERROR:"),console.log(a)}return b},ENGAGEYA_VIDEO.prototype.build_layout=function(){this.build_video_layout()},ENGAGEYA_VIDEO.prototype.build_video_layout=function(){var a=this.data_json;this.calc_slides_dims();var b=a.widget.displayRows,c=this.get_total_slides(b,a.recs.length),d=this.get_recs_holder_elm(),e=this.is_mobile_conditions_satisfied()?"m_":"",f="eng_"+e+"top_ww_widget_"+this.random_id,g=this.get_tablet_cls(),h='<div class="eng_top_ww_widget'+g+'" id="'+f+'"><div class="eng_ww_widget" id="eng_ww_widget_'+this.widget_id+'">';this.populate_widget_directions();var j=(this.get_default_css("DESKTOP_VIDEO",f),this.get_default_css("DESKTOP_NON_VIDEO",f)),k=this.get_default_css("VIDEO_ONLY",f),l=this.get_default_css("DESKTOP",f);l+=j+k;var m="<"+this.title_elm_type+' class="eng_ww_title" id="eng_ww_title_'+this.random_id+'"><span class="eng_ww_ttl_span1">'+a.widget.headerText+'</span><span class="eng_ww_ttl_span2"></span></'+this.title_elm_type+">",n='<div class="eng_ww_close" id="eng_ww_close_'+this.random_id+'"><span>&times</span></div>',o='<div class="eng_asw" id="eng_asw_'+this.random_id+'">';h+=m+n+o;for(var p=a.recs,q="",r=0;r<c;r++)if(p[r].vMUrl){this.populate_video_additional_data(p[r]);var s=p[r].postId,t=p[r].recTypeDB;this.visible_posts_and_types.push({pi:s,pt:t}),this.is_start_of_row(r,this.num_of_slides_a_row)&&(l+="#eng_sw_"+r+"_"+this.widget_id+"{margin-"+this.widget_direction+":0px !important;}");var u=this.is_video_post(p[r])?" eng_widget_vsw":"",v='<div id="eng_sw_'+r+"_"+this.widget_id+'" class="eng_widget_sw'+u+'">',w=this.get_rec_type(p[r]),x=this.get_thumb(a,p[r].thumbnail_path,p[r].category_id,r+1),y=x?"":" eng_no_img",z='<div id="eng_video_w_'+this.random_id+'" class="eng_widget_video_w"></div>',A='<a id="eng_href_'+r+"_"+this.widget_id+'" class="eng_widget_href '+w+y+'" ',B=this.get_title(p[r]),C=this.get_description(p[r]),D=this.get_meta_tag_obj(p[r]),E="";"rtl"!=this.widget_txt_direction||this.isShouldBeRTL(B)||(E='style="direction:ltr;text-align:left;"');var F='<div id="eng_in_'+r+"_"+this.widget_id+'" class="eng_widget_in" '+E+">",G='<span id="eng_is_'+r+"_"+this.widget_id+'" class="eng_widget_is">',H=this.is_description_span?'<span id="eng_isd_'+r+"_"+this.widget_id+'" class="eng_widget_isd">'+C+"</span>":"",I=this.is_meta_tags_span&&D.label?'<span id="eng_mtg_'+r+"_"+this.widget_id+'" class="eng_widget_mtg mtg_'+D.id+'">'+D.label+"</span>":"",J=this.get_display_name(p[r]),K=J?'<span id="eng_dn_'+r+"_"+this.widget_id+'" class="eng_widget_dn">':"";A+=this.get_click_defs(p[r],a.srcWebsiteId),this.is_add_href||(A=""),G+=B+"</span>",K+=J?J+"</span>":"",v+=A+z+F+G+I+H+K,v+="</div></a></div>",h+=v,h+=this.add_row_if_required(r+1,this.num_of_slides_a_row,c),q+=this.get_impression_pixel_imgs(a.recs[r].impressionUrls)}var L=this.get_widget_branding();h+='</div><div id="eng_brnd_'+this.widget_id+'" class="eng_branding">'+L+"</div></div>",h+=q+"</div>";var M=this.get_add_data("css")||"";widgetCss="<style>"+l+M+"</style>",d.html(widgetCss+h)},ENGAGEYA_VIDEO.prototype.populate_video_additional_data=function(a){var b=this.get_video_additional_data(a);this.auto_play=0==b.autoply?"":this.auto_play,this.is_muted="undefined"==typeof b.ismute&&this.is_muted,this.load_on_view_percents=b.lovp||this.load_on_view_percents,this.play_video_on_view_percents=b.plyvovp||this.play_video_on_view_percents,this.pause_video_on_not_view_percents=b.psvonvp||this.pause_video_on_not_view_percents,this.is_display_controls=b.idc||this.is_display_controls,this.video_sources=b.vsrcs||this.video_sources,this.is_close_player_when_ads_completed=b.iscpwac||this.is_close_player_when_ads_completed,this.video_width=b.vw?b.vw:Math.floor(this.width),this.video_view_ratio=b.vvr?b.vvr:this.video_view_ratio,this.video_height=this.video_view_ratio?Math.floor(this.width/this.video_view_ratio):null,this.skip_offest=b.skpofst?b.skpofst:this.skip_offest,this.fire_click_events=b.fclkevts?b.fclkevts:this.fire_click_events,this.is_close_video_on_ad_timeout=b.icvoatout||this.is_close_video_on_ad_timeout,this.video_volume=b.vidvol||this.video_volume,this.video_load_ad_timeout=b.vladtout||this.video_load_ad_timeout,this.is_run_only_on_window_active=b.isroowa||this.is_run_only_on_window_active,this.preload=b.preld||this.preload,this.is_unmute_on_mouse_over=b.iuomo||this.is_unmute_on_mouse_over},ENGAGEYA_VIDEO.prototype.get_videojs_obj=function(){return videojs("#eng_video_"+this.random_id)},ENGAGEYA_VIDEO.prototype.get_videojs_wrapper_obj=function(){return this.jq("#eng_video_w_"+this.random_id)},ENGAGEYA_VIDEO.prototype.populate_video_tag=function(){try{if(!this.is_video_js_fully_loaded||1==this.is_video_tag_populated)return;var a=this.get_video_rec(),b="",c=this.get_videojs_wrapper_obj();if(!c[0])return;b='<video id="eng_video_'+this.random_id+'" playsinline class="eng_video_'+this.widget_id+' video-js vjs-default-skin vjs-big-play-centered"></video>',c.html(b);var d=this.get_videojs_obj();d.autoplay(this.auto_play),d.preload(this.preload),d.width(this.video_width),this.video_view_ratio&&this.video_height?d.height(this.video_height):this.video_height=d.height(),d.src(this.video_sources),d.controls(this.is_display_controls),d.muted(this.is_muted),d.volume(this.video_volume),this.video_types[a.vMType]==this.video_types_const.VAST?(d.ima({id:"eng_video_"+this.random_id,adTagUrl:this.populate_place_holders(a.vMUrl)}),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE),d.ima.initializeAdDisplayContainer(),d.ima.adsRenderingSettings.loadVideoTimeout=this.video_load_ad_timeout,d.ima.requestAds(),this.attach_ad_error_event(),this.attach_ads_ready_event(),this.attach_mouse_move_events()):"DIRECT"==this.video_types[a.vMType],this.is_video_tag_populated=!0}catch(a){this.logger(this.log_types.ERROR,a)}},ENGAGEYA_VIDEO.prototype.populate_place_holders=function(a){return a.indexOf(this.place_holders.WIDTH)!=-1&&(a=a.replace(this.place_holders.WIDTH,Math.floor(this.video_width))),a.indexOf(this.place_holders.HEIGHT)!=-1&&(a=a.replace(this.place_holders.HEIGHT,Math.floor(this.video_height))),a.indexOf(this.place_holders.PAGE_URL)!=-1&&(a=a.replace(this.place_holders.PAGE_URL,this.get_page_url())),a.indexOf(this.place_holders.DNT)!=-1&&(a=a.replace(this.place_holders.DNT,document.location.hostname)),a.indexOf(this.place_holders.CACHE_BUSTER)!=-1&&(a=a.replace(this.place_holders.CACHE_BUSTER,this.generate_random_number())),a.indexOf(this.place_holders.PAGE_TITLE)!=-1&&(a=a.replace(this.place_holders.PAGE_TITLE,this.get_page_ttl())),a},ENGAGEYA_VIDEO.prototype.get_video_rec=function(){return this.data_json.recs[0]},ENGAGEYA_VIDEO.prototype.attach_mouse_move_events=function(){this.attach_mouse_over_event(),this.attach_mouse_out_event()},ENGAGEYA_VIDEO.prototype.attach_mouse_over_event=function(){var a=this;this.jq(this.widget_wrapper_elm).mouseover(function(){a.is_unmute_on_mouse_over&&a.is_muted&&(a.get_videojs_obj().muted(!1),a.logger(a.log_types.INFO,"VIDEO UNMUTED"))})},ENGAGEYA_VIDEO.prototype.attach_mouse_out_event=function(){var a=this;this.jq(this.widget_wrapper_elm).mouseout(function(){a.is_muted&&a.is_unmute_on_mouse_over&&(a.get_videojs_obj().muted(!0),a.logger(a.log_types.INFO,"VIDEO MUTED"))})},ENGAGEYA_VIDEO.prototype.attach_ads_events=function(){this.attach_ad_timeout_event(),this.attach_ad_clicked_event(),this.attach_ad_ended_event(),this.attach_ad_started_event()},ENGAGEYA_VIDEO.prototype.attach_after_ad_started_events=function(){this.attach_ad_firstQuartile_event(),this.attach_ad_midpoint_event(),this.attach_ad_thirdQuartile_event(),this.attach_ad_complete_event()},ENGAGEYA_VIDEO.prototype.attach_ad_complete_event=function(){var a=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(){a.fire_all_relevant_pixels(a.video_event_types.AD_COMPLETE),a.logger(a.log_types.INFO,"AD COMPLETED")})},ENGAGEYA_VIDEO.prototype.attach_ad_thirdQuartile_event=function(){var a=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,function(){a.fire_all_relevant_pixels(a.video_event_types.AD_THIRD_QUARTILE),a.logger(a.log_types.INFO,"AD THIRD QUARTILE")})},ENGAGEYA_VIDEO.prototype.attach_ad_midpoint_event=function(){var a=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.MIDPOINT,function(){a.fire_all_relevant_pixels(a.video_event_types.AD_MID_POINT),a.logger(a.log_types.INFO,"AD MID POINT")})},ENGAGEYA_VIDEO.prototype.attach_ad_firstQuartile_event=function(){var a=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,function(){a.fire_all_relevant_pixels(a.video_event_types.AD_FIRST_QUARTILE),a.logger(a.log_types.INFO,"AD FIRST QUARTILE")})},ENGAGEYA_VIDEO.prototype.attach_ad_ended_event=function(){var a=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){a.fire_all_relevant_pixels(a.video_event_types.ALL_ADS_COMPLETED),a.is_close_player_when_ads_completed&&a.close_video(),a.logger(a.log_types.INFO,"ALL ADS COMPLETED")})},ENGAGEYA_VIDEO.prototype.attach_ad_clicked_event=function(){var a=this;this.get_videojs_obj().on("click",function(){a.fire_all_relevant_pixels(a.video_event_types.AD_CLICK),a.logger(a.log_types.INFO,"AD CLICKED")})},ENGAGEYA_VIDEO.prototype.attach_ad_started_event=function(){var a=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.STARTED,function(){a.fire_all_relevant_pixels(a.video_event_types.AD_START),a.logger(a.log_types.INFO,"AD STARTED"),a.attach_after_ad_started_events()})},ENGAGEYA_VIDEO.prototype.attach_ads_ready_event=function(){var a=this;this.get_videojs_obj().on("adsready",function(){a.ads_manager=this.ima.adsManager,a.ads_ready=!0,a.fire_all_relevant_pixels(a.video_event_types.ADS_READY),a.logger(a.log_types.INFO,"ADS READY"),a.attach_ads_events()})},ENGAGEYA_VIDEO.prototype.attach_ad_timeout_event=function(){var a=this;this.get_videojs_obj().on("adtimeout",function(){a.fire_all_relevant_pixels(a.video_event_types.AD_TIMEOUT),a.is_close_video_on_ad_timeout&&a.close_video(),a.logger(a.log_types.INFO,"AD TIMEOUT")})},ENGAGEYA_VIDEO.prototype.attach_ad_error_event=function(){var a=this;this.get_videojs_obj().on("adserror",function(){a.ads_manager.destroy(),a.fire_all_relevant_pixels(a.video_event_types.AD_ERROR),a.is_close_video_on_ad_error&&a.close_video(),a.logger(a.log_types.INFO,"AD ERROR")})},ENGAGEYA_VIDEO.prototype.close_video=function(){this.jq(this.widget_wrapper_elm).hide("slow")},ENGAGEYA_VIDEO.prototype.get_video_sources_elemets=function(){var a="";if(this.video_sources)for(var b=0;b<this.video_sources.length;b++)a+='<source src="'+this.video_sources[b]+'" type="video/mp4">';return a},ENGAGEYA_VIDEO.prototype.fire_all_relevant_pixels=function(a){this.fire_clicks(a),this.fire_click_pixels(a)},ENGAGEYA_VIDEO.prototype.fire_clicks=function(a){var b=this.get_video_rec();if(b)for(var c=0;c<this.fire_click_events.length;c++)this.fire_click_events[c]==a&&(this.generate_img_pixel(b.clickUrl),this.logger(this.log_types.INFO,"FIRING PIXEL: "+b.clickUrl))},ENGAGEYA_VIDEO.prototype.fire_click_pixels=function(a){},ENGAGEYA_VIDEO.prototype.get_click_defs=function(a,b){var c=this.get_href_target(a.partner_id,b),d=this.get_cancle_click_bubble(),e='onclick="'+d+'"',g=(!!a.ajx,""),h="";h=h.replace("ecs1.engageya.com/gas-api","ecs3.engageya.com/rec-api");var i=this.get_video_additional_data(a);window.ajx_sprk_click=function(a){},i.clkurl="//engageya.com";var j=i&&i.clkurl?i.clkurl:"javascript:void(0)";return g+=c+' href="'+j+'" '+e+" onmousedown=\"_eng_do_async_click('"+h+"');"+d+'return true;">'},ENGAGEYA_VIDEO.prototype.run_posts_preview=function(){},ENGAGEYA_VIDEO.prototype.calc_slides_dims=function(){var a=this.width-this.widget_lpadding-this.widget_rpadding-this.widget_rmargin-this.widget_lmargin-this.slides_wrapper_lpadding-this.slides_wrapper_rpadding-this.slides_wrapper_lmargin-this.slides_wrapper_rmargin;this.slide_width=a,this.num_of_slides_a_row=1},function(){var a=function(a,b){switch(a){case"createWidget":var c=new ENGAGEYA(b);c.run();break;case"createVideoWidget":var c=new ENGAGEYA_VIDEO(b);c.run()}},b=window.EngageyaObject;window[b].l;for(var d in window[b].q){var e=window[b].q[d],f=e[0],g=e[1];a(f,g)}window[b]=a}();