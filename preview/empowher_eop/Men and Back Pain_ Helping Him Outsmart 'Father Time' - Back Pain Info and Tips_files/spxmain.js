!function(){var requirejs,require,define;!function(Z){function H(a){return"[object Function]"===L.call(a)}function I(a){return"[object Array]"===L.call(a)}function y(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function M(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function t(a,b){return ga.call(a,b)}function l(a,b){return t(a,b)&&a[b]}function F(a,b){for(var c in a)if(t(a,c)&&b(a[c],c))break}function Q(a,b,c,d){return b&&F(b,function(b,e){(c||!t(a,e))&&(d&&"string"!=typeof b?(a[e]||(a[e]={}),Q(a[e],b,c,d)):a[e]=b)}),a}function u(a,b){return function(){return b.apply(a,arguments)}}function aa(a){throw a}function ba(a){if(!a)return a;var b=Z;return y(a.split("."),function(a){b=b[a]}),b}function A(a,b,c,d){return b=Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a),b.requireType=a,b.requireModules=d,c&&(b.originalError=c),b}function ha(a){function b(a,b,c){var d,e,f,g,h,i,j,k=b&&b.split("/");d=k;var m=C.map,n=m&&m["*"];if(a&&"."===a.charAt(0))if(b){for(d=l(C.pkgs,b)?k=[b]:k.slice(0,k.length-1),b=a=d.concat(a.split("/")),d=0;b[d];d+=1)if(e=b[d],"."===e)b.splice(d,1),d-=1;else if(".."===e){if(1===d&&(".."===b[2]||".."===b[0]))break;d>0&&(b.splice(d-1,2),d-=2)}d=l(C.pkgs,b=a[0]),a=a.join("/"),d&&a===b+"/"+d.main&&(a=b)}else 0===a.indexOf("./")&&(a=a.substring(2));if(c&&m&&(k||n)){for(b=a.split("/"),d=b.length;d>0;d-=1){if(f=b.slice(0,d).join("/"),k)for(e=k.length;e>0;e-=1)if((c=l(m,k.slice(0,e).join("/")))&&(c=l(c,f))){g=c,h=d;break}if(g)break;!i&&n&&l(n,f)&&(i=l(n,f),j=d)}!g&&i&&(g=i,h=j),g&&(b.splice(0,h,g),a=b.join("/"))}return a}function c(a){z&&y(document.getElementsByTagName("script"),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===w.contextName?(b.parentNode.removeChild(b),!0):void 0})}function d(a){var b=l(C.paths,a);return b&&I(b)&&1<b.length?(b.shift(),w.require.undef(a),w.require([a]),!0):void 0}function e(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function f(a,c,d,f){var g,h,i=null,j=c?c.name:null,k=a,m=!0,n="";return a||(m=!1,a="_@r"+(M+=1)),a=e(a),i=a[0],a=a[1],i&&(i=b(i,j,f),h=l(K,i)),a&&(i?n=h&&h.normalize?h.normalize(a,function(a){return b(a,j,f)}):b(a,j,f):(n=b(a,j,f),a=e(n),i=a[0],n=a[1],d=!0,g=w.nameToUrl(n))),d=!i||h||d?"":"_unnormalized"+(N+=1),{prefix:i,name:n,parentMap:c,unnormalized:!!d,url:g,originalName:k,isDefine:m,id:(i?i+"!"+n:n)+d}}function g(a){var b=a.id,c=l(D,b);return c||(c=D[b]=new w.Module(a)),c}function h(a,b,c){var d=a.id,e=l(D,d);!t(K,d)||e&&!e.defineEmitComplete?(e=g(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(K[d])}function i(a,b){var c=a.requireModules,d=!1;b?b(a):(y(c,function(b){(b=l(D,b))&&(b.error=a,b.events.error&&(d=!0,b.emit("error",a)))}),d||j.onError(a))}function k(){R.length&&(ia.apply(J,[J.length-1,0].concat(R)),R=[])}function m(a){delete D[a],delete E[a]}function n(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,y(a.depMaps,function(d,e){var f=d.id,g=l(D,f);g&&!a.depMatched[e]&&!c[f]&&(l(b,f)?(a.defineDep(e,K[f]),a.check()):n(g,b,c))}),c[d]=!0)}function o(){var a,b,e,f,g=(e=1e3*C.waitSeconds)&&w.startTime+e<(new Date).getTime(),h=[],j=[],k=!1,l=!0;if(!s){if(s=!0,F(E,function(e){if(a=e.map,b=a.id,e.enabled&&(a.isDefine||j.push(e),!e.error))if(!e.inited&&g)d(b)?k=f=!0:(h.push(b),c(b));else if(!e.inited&&e.fetched&&a.isDefine&&(k=!0,!a.prefix))return l=!1}),g&&h.length)return e=A("timeout","Load timeout for modules: "+h,null,h),e.contextName=w.contextName,i(e);l&&y(j,function(a){n(a,{},{})}),g&&!f||!k||!z&&!da||B||(B=setTimeout(function(){B=0,o()},50)),s=!1}}function p(a){t(K,a[0])||g(f(a[0],null,!0)).init(a[1],a[2])}function q(a){var a=a.currentTarget||a.srcElement,b=w.onScriptLoad;return a.detachEvent&&!W?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1),b=w.onScriptError,(!a.detachEvent||W)&&a.removeEventListener("error",b,!1),{node:a,id:a&&a.getAttribute("data-requiremodule")}}function r(){var a;for(k();J.length;){if(a=J.shift(),null===a[0])return i(A("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));p(a)}}var s,v,w,x,B,C={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},D={},E={},G={},J=[],K={},L={},M=1,N=1;return x={require:function(a){return a.require?a.require:a.require=w.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?a.exports:a.exports=K[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b=l(C.pkgs,a.map.id);return(b?l(C.config,a.map.id+"/"+b.main):l(C.config,a.map.id))||{}},exports:K[a.map.id]}}},v=function(a){this.events=l(G,a.id)||{},this.map=a,this.shim=l(C.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},v.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=u(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var a=this.map;if(!this.shim)return a.prefix?this.callPlugin():this.load();w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}))}},load:function(){var a=this.map.url;L[a]||(L[a]=!0,w.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var d=this.exports,e=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(H(e)){if(this.events.error&&this.map.isDefine||j.onError!==aa)try{d=w.execCb(c,e,b,d)}catch(b){a=b}else d=w.execCb(c,e,b,d);if(this.map.isDefine&&((b=this.module)&&void 0!==b.exports&&b.exports!==this.exports?d=b.exports:void 0===d&&this.usingExports&&(d=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",i(this.error=a)}else d=e;this.exports=d,this.map.isDefine&&!this.ignore&&(K[c]=d,j.onResourceLoad)&&j.onResourceLoad(w,this.map,this.depMaps),m(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,c=a.id,d=f(a.prefix);this.depMaps.push(d),h(d,"defined",u(this,function(d){var e,k;k=this.map.name;var n=this.map.parentMap?this.map.parentMap.name:null,o=w.makeRequire(a.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(d.normalize&&(k=d.normalize(k,function(a){return b(a,n,!0)})||""),d=f(a.prefix+"!"+k,this.map.parentMap),h(d,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),(k=l(D,d.id))&&(this.depMaps.push(d),this.events.error&&k.on("error",u(this,function(a){this.emit("error",a)})),k.enable())):(e=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=u(this,function(a){this.inited=!0,this.error=a,a.requireModules=[c],F(D,function(a){0===a.map.id.indexOf(c+"_unnormalized")&&m(a.map.id)}),i(a)}),e.fromText=u(this,function(b,d){var h=a.name,k=f(h),l=O;d&&(b=d),l&&(O=!1),g(k),t(C.config,c)&&(C.config[h]=C.config[c]);try{j.exec(b)}catch(a){return i(A("fromtexteval","fromText eval for "+c+" failed: "+a,a,[c]))}l&&(O=!0),this.depMaps.push(k),w.completeLoad(h),o([h],e)}),d.load(a.name,o,e,C))})),w.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){E[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,u(this,function(a,b){var c,d;if("string"==typeof a){if(a=f(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,c=l(x,a.id))return void(this.depExports[b]=c(this));this.depCount+=1,h(a,"defined",u(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&h(a,"error",u(this,this.errback))}c=a.id,d=D[c],!t(x,c)&&d&&!d.enabled&&w.enable(a,this)})),F(this.pluginMaps,u(this,function(a){var b=l(D,a.id);b&&!b.enabled&&w.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){y(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},w={config:C,contextName:a,registry:D,defined:K,urlFetched:L,defQueue:J,Module:v,makeModuleMap:f,nextTick:j.nextTick,onError:i,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=C.pkgs,c=C.shim,d={paths:!0,config:!0,map:!0};F(a,function(a,b){d[b]?"map"===b?(C.map||(C.map={}),Q(C[b],a,!0,!0)):Q(C[b],a,!0):C[b]=a}),a.shim&&(F(a.shim,function(a,b){I(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=w.makeShimExports(a)),c[b]=a}),C.shim=c),a.packages&&(y(a.packages,function(a){a="string"==typeof a?{name:a}:a,b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(ja,"").replace(ea,"")}}),C.pkgs=b),F(D,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=f(b))}),(a.deps||a.callback)&&w.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;return a.init&&(b=a.init.apply(Z,arguments)),b||a.exports&&ba(a.exports)}},makeRequire:function(d,e){function h(b,c,k){var l,m;return e.enableBuildCallback&&c&&H(c)&&(c.__requireJsBuild=!0),"string"==typeof b?H(c)?i(A("requireargs","Invalid require call"),k):d&&t(x,b)?x[b](D[d.id]):j.get?j.get(w,b,d,h):(l=f(b,d,!1,!0),l=l.id,t(K,l)?K[l]:i(A("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+a+(d?"":". Use require([])")))):(r(),w.nextTick(function(){r(),m=g(f(null,d)),m.skipMap=e.skipMap,m.init(b,c,k,{enabled:!0}),o()}),h)}return e=e||{},Q(h,{isBrowser:z,toUrl:function(a){var c,e=a.lastIndexOf("."),f=a.split("/")[0];return-1!==e&&("."!==f&&".."!==f||e>1)&&(c=a.substring(e,a.length),a=a.substring(0,e)),w.nameToUrl(b(a,d&&d.id,!0),c,!0)},defined:function(a){return t(K,f(a,d,!1,!0).id)},specified:function(a){return a=f(a,d,!1,!0).id,t(K,a)||t(D,a)}}),d||(h.undef=function(a){k();var b=f(a,d,!0),e=l(D,a);c(a),delete K[a],delete L[b.url],delete G[a],e&&(e.events.defined&&(G[a]=e.events),m(a))}),h},enable:function(a){l(D,a.id)&&g(a).enable()},completeLoad:function(a){var b,c,e=l(C.shim,a)||{},f=e.exports;for(k();J.length;){if(c=J.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);p(c)}if(c=l(D,a),!b&&!t(K,a)&&c&&!c.inited){if(C.enforceDefine&&(!f||!ba(f)))return d(a)?void 0:i(A("nodefine","No define call for "+a,null,[a]));p([a,e.deps||[],e.exportsFn])}o()},nameToUrl:function(a,b,c){var d,e,f,g,h,i;if(j.jsExtRegExp.test(a))g=a+(b||"");else{for(d=C.paths,e=C.pkgs,g=a.split("/"),h=g.length;h>0;h-=1){if(i=g.slice(0,h).join("/"),f=l(e,i),i=l(d,i)){I(i)&&(i=i[0]),g.splice(0,h,i);break}if(f){a=a===f.name?f.location+"/"+f.main:f.location,g.splice(0,h,a);break}}g=g.join("/"),g+=b||(/^data\:|\?/.test(g)||c?"":".js"),g=("/"===g.charAt(0)||g.match(/^[\w\+\.\-]+:/)?"":C.baseUrl)+g}return C.urlArgs?g+((-1===g.indexOf("?")?"?":"&")+C.urlArgs):g},load:function(a,b){j.load(w,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){("load"===a.type||ka.test((a.currentTarget||a.srcElement).readyState))&&(P=null,a=q(a),w.completeLoad(a.id))},onScriptError:function(a){var b=q(a);return d(b.id)?void 0:i(A("scripterror","Script error for: "+b.id,a,[b.id]))}},w.require=w.makeRequire(),w}var j,w,x,C,J,D,P,K,q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),da=!z&&"undefined"!=typeof importScripts,ka=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,W="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),E={},s={},R=[],O=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(H(requirejs))return;s=requirejs,requirejs=void 0}"undefined"!=typeof require&&!H(require)&&(s=require,require=void 0),j=requirejs=function(a,b,c,d){var e,f="_";return!I(a)&&"string"!=typeof a&&(e=a,I(b)?(a=b,b=c,c=d):a=[]),e&&e.context&&(f=e.context),(d=l(E,f))||(d=E[f]=j.s.newContext(f)),e&&d.configure(e),d.require(a,b,c)},j.config=function(a){return j(a)},j.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=j),j.version="2.1.9",j.jsExtRegExp=/^\/|:|\?|\.js$/,j.isBrowser=z,w=j.s={contexts:E,newContext:ha},j({}),y(["toUrl","undef","defined","specified"],function(a){j[a]=function(){var b=E._;return b.require[a].apply(b,arguments)}}),z&&(x=w.head=document.getElementsByTagName("head")[0],C=document.getElementsByTagName("base")[0])&&(x=w.head=C.parentNode),j.onError=aa,j.createNode=function(a){var b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return b.type=a.scriptType||"text/javascript",b.charset="utf-8",b.async=!0,b},j.load=function(a,b,c){var d=a&&a.config||{};if(z)return d=j.createNode(d,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&0>d.attachEvent.toString().indexOf("[native code")||W?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(O=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,K=d,C?x.insertBefore(d,C):x.appendChild(d),K=null,d;if(da)try{importScripts(c),a.completeLoad(b)}catch(d){a.onError(A("importscripts","importScripts failed for "+b+" at "+c,d,[b]))}},z&&!s.skipDataMain&&M(document.getElementsByTagName("script"),function(a){return x||(x=a.parentNode),(J=a.getAttribute("data-main"))?(q=J,s.baseUrl||(D=q.split("/"),q=D.pop(),fa=D.length?D.join("/")+"/":"./",s.baseUrl=fa),q=q.replace(ea,""),j.jsExtRegExp.test(q)&&(q=J),s.deps=s.deps?s.deps.concat(q):[q],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),I(b)||(c=b,b=null),!b&&H(c)&&(b=[],c.length&&(c.toString().replace(la,"").replace(ma,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),O&&((d=K)||(P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(a){return"interactive"===a.readyState?P=a:void 0}),d=P),d&&(a||(a=d.getAttribute("data-requiremodule")),e=E[d.getAttribute("data-requirecontext")])),(e?e.defQueue:R).push([a,b,c])},define.amd={jQuery:!0},j.exec=function(b){return eval(b)},j(s)}}(this),define("requireLib",function(){}),define("utils/globalObject",[],function(){"use strict";return window.top}),function(){function a(a,b){if(a!==b){var c=null===a,d=a===ec,e=a===a,f=null===b,g=b===ec,h=b===b;if(a>b&&!f||!e||c&&!g&&h||d&&h)return 1;if(b>a&&!c||!h||f&&!d&&e||g&&e)return-1}return 0}function b(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}function c(a,b,c){if(b!==b)return h(a,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function d(a){return null==a?"":a+""}function e(b,c){return a(b.criteria,c.criteria)||b.index-c.index}function f(a){return kd[a]}function g(a){return"\\"+md[a]}function h(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function i(a){return!!a&&"object"==typeof a}function j(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=tc,f[++e]=c);return f}function k(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function l(){}function m(){}function n(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Rd,this.__views__=[]}function o(a){var b=a?a.length:0;for(this.data={hash:Hd(null),set:new Cd};b--;)this.push(a[b])}function p(a,b){var c=a.data,d="string"==typeof b||Eb(b)?c.set.has(b):c.hash[b];return d?0:-1}function q(a){var b=this.data;"string"==typeof a||Eb(a)?b.set.add(a):b.hash[a]=!0}function r(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function s(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function t(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function u(a,b,c,d){for(var e=-1,f=a.length,g=d,h=g;++e<f;){var i=a[e],j=+b(i);c(j,g)&&(g=j,h=i)}return h}function v(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function w(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function x(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function y(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function z(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function A(a,b){return a===ec?b:a}function B(a,b,c,d){return a!==ec&&wd.call(d,c)?a:b}function C(a,b,c){for(var d=-1,e=re(b),f=e.length;++d<f;){var g=e[d],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&(h!==ec||g in a)||(a[g]=i)}return a}function D(a,b){return null==b?a:E(b,re(b),a)}function E(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function F(a,b,c){var d=typeof a;return"function"==d?b===ec?a:ja(a,b,c):null==a?_b:"object"==d?V(a):b===ec?cc(a):W(a,b)}function G(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),h!==ec)return h;if(!Eb(a))return a;var i=le(a);if(i){if(h=Na(a),!b)return r(a,h)}else{var j=yd.call(a),k=j==zc;if(j!=Cc&&j!=uc&&(!k||e))return jd[j]?Pa(a,j,b):e?a:{};if(h=Oa(k?{}:a),!b)return D(h,a)}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?s:O)(a,function(d,e){h[e]=G(d,b,c,e,a,f,g)}),h}function H(a,b){var d=a?a.length:0,e=[];if(!d)return e;var f=-1,g=Ka(),h=g===c,i=h&&b.length>=rc?sa(b):null,j=b.length;i&&(g=p,h=!1,b=i);a:for(;++f<d;){var k=a[f];if(h&&k===k){for(var l=j;l--;)if(b[l]===k)continue a;e.push(k)}else g(b,k,0)<0&&e.push(k)}return e}function I(a,b){var c=!0;return Zd(a,function(a,d,e){return c=!!b(a,d,e)}),c}function J(a,b,c,d){var e=d,f=e;return Zd(a,function(a,g,h){var i=+b(a,g,h);(c(i,e)||i===d&&i===f)&&(e=i,f=a)}),f}function K(a,b){var c=[];return Zd(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function L(a,b,c,d){var e;return c(a,function(a,c,f){return b(a,c,f)?(e=d?c:a,!1):void 0}),e}function M(a,b,c,d){d||(d=[]);for(var e=-1,f=a.length;++e<f;){var g=a[e];i(g)&&Qa(g)&&(c||le(g)||zb(g))?b?M(g,b,c,d):x(d,g):c||(d[d.length]=g)}return d}function N(a,b){return $d(a,b,Qb)}function O(a,b){return $d(a,b,re)}function P(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];Db(a[g])&&(f[++e]=g)}return f}function Q(a,b,c){if(null!=a){c!==ec&&c in cb(a)&&(b=[c]);for(var d=0,e=b.length;null!=a&&e>d;)a=a[b[d++]];return d&&d==e?a:ec}}function R(a,b,c,d,e,f){return a===b?!0:null==a||null==b||!Eb(a)&&!i(b)?a!==a&&b!==b:S(a,b,R,c,d,e,f)}function S(a,b,c,d,e,f,g){var h=le(a),i=le(b),j=vc,k=vc;h||(j=yd.call(a),j==uc?j=Cc:j!=Cc&&(h=Kb(a))),i||(k=yd.call(b),k==uc?k=Cc:k!=Cc&&(i=Kb(b)));var l=j==Cc,m=k==Cc,n=j==k;if(n&&!h&&!l)return Ga(a,b,j);if(!e){var o=l&&wd.call(a,"__wrapped__"),p=m&&wd.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g)}if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?Fa:Ha)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function T(a,b,c){var d=b.length,e=d,f=!c;if(null==a)return!e;for(a=cb(a);d--;){var g=b[d];if(f&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++d<e;){g=b[d];var h=g[0],i=a[h],j=g[1];if(f&&g[2]){if(i===ec&&!(h in a))return!1}else{var k=c?c(i,j,h):ec;if(!(k===ec?R(j,i,c,!0):k))return!1}}return!0}function U(a,b){var c=-1,d=Qa(a)?Array(a.length):[];return Zd(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function V(a){var b=La(a);if(1==b.length&&b[0][2]){var c=b[0][0],d=b[0][1];return function(a){return null==a?!1:a[c]===d&&(d!==ec||c in cb(a))}}return function(a){return T(a,b)}}function W(a,b){var c=le(a),d=Ta(a)&&Wa(b),e=a+"";return a=db(a),function(f){if(null==f)return!1;var g=e;if(f=cb(f),(c||!d)&&!(g in f)){if(f=1==a.length?f:Q(f,ca(a,0,-1)),null==f)return!1;g=ib(a),f=cb(f)}return f[g]===b?b!==ec||g in f:R(b,f[g],ec,!0)}}function X(a,b,c,d,e){if(!Eb(a))return a;var f=Qa(b)&&(le(b)||Kb(b)),g=f?ec:re(b);return s(g||b,function(h,j){if(g&&(j=h,h=b[j]),i(h))d||(d=[]),e||(e=[]),Y(a,b,j,X,c,d,e);else{var k=a[j],l=c?c(k,h,j,a,b):ec,m=l===ec;m&&(l=h),l===ec&&(!f||j in a)||!m&&(l===l?l===k:k!==k)||(a[j]=l)}}),a}function Y(a,b,c,d,e,f,g){for(var h=f.length,i=b[c];h--;)if(f[h]==i)return void(a[c]=g[h]);var j=a[c],k=e?e(j,i,c,a,b):ec,l=k===ec;l&&(k=i,Qa(i)&&(le(i)||Kb(i))?k=le(j)?j:Qa(j)?r(j):[]:Ib(i)||zb(i)?k=zb(j)?Mb(j):Ib(j)?j:{}:l=!1),f.push(i),g.push(k),l?a[c]=d(k,i,e,f,g):(k===k?k!==j:j===j)&&(a[c]=k)}function Z(a){return function(b){return null==b?ec:b[a]}}function $(a){var b=a+"";return a=db(a),function(c){return Q(c,a,b)}}function _(a,b){for(var c=a?b.length:0;c--;){var d=b[c];if(d!=e&&Ra(d)){var e=d;Dd.call(a,d,1)}}return a}function aa(a,b){return a+Id(Pd()*(b-a+1))}function ba(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function ca(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c=c===ec||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}function da(a,b){var c;return Zd(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function ea(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function fa(a,b){var d=-1,e=Ka(),f=a.length,g=e===c,h=g&&f>=rc,i=h?sa():null,j=[];i?(e=p,g=!1):(h=!1,i=b?[]:j);a:for(;++d<f;){var k=a[d],l=b?b(k,d,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;b&&i.push(l),j.push(k)}else e(i,l,0)<0&&((b||h)&&i.push(l),j.push(k))}return j}function ga(a,b){for(var c=-1,d=b.length,e=Array(d);++c<d;)e[c]=a[b[c]];return e}function ha(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&Ud>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)&&null!==g?d=f+1:e=f}return e}return ia(a,b,_b,c)}function ia(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=null===b,i=b===ec;f>e;){var j=Id((e+f)/2),k=c(a[j]),l=k!==ec,m=k===k;if(g)var n=m||d;else n=h?m&&l&&(d||null!=k):i?m&&(d||l):null==k?!1:d?b>=k:b>k;n?e=j+1:f=j}return Nd(f,Td)}function ja(a,b,c){if("function"!=typeof a)return _b;if(b===ec)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function ka(a){var b=new Ad(a.byteLength),c=new Ed(b);return c.set(new Ed(a)),b}function la(a,b,c){for(var d=c.length,e=-1,f=Md(a.length-d,0),g=-1,h=b.length,i=Array(h+f);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function ma(a,b,c){for(var d=-1,e=c.length,f=-1,g=Md(a.length-e,0),h=-1,i=b.length,j=Array(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function na(a,b){return function(c,d,e){var f=b?b():{};if(d=Ia(d,e,3),le(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else Zd(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function oa(a){return ub(function(b,c){var d=-1,e=null==b?0:c.length,f=e>2?c[e-2]:ec,g=e>2?c[2]:ec,h=e>1?c[e-1]:ec;for("function"==typeof f?(f=ja(f,h,5),e-=2):(f="function"==typeof h?h:ec,e-=f?1:0),g&&Sa(c[0],c[1],g)&&(f=3>e?ec:f,e=1);++d<e;){var i=c[d];i&&a(b,i,f)}return b})}function pa(a,b){return function(c,d){var e=c?be(c):0;if(!Va(e))return a(c,d);for(var f=b?e:-1,g=cb(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function qa(a){return function(b,c,d){for(var e=cb(b),f=d(b),g=f.length,h=a?g:-1;a?h--:++h<g;){var i=f[h];if(c(e[i],i,e)===!1)break}return b}}function ra(a,b){function c(){var e=this&&this!==sd&&this instanceof c?d:a;return e.apply(b,arguments)}var d=ta(a);return c}function sa(a){return Hd&&Cd?new o(a):null}function ta(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=Yd(a.prototype),d=a.apply(c,b);return Eb(d)?d:c}}function ua(a,b){return ub(function(c){var d=c[0];return null==d?d:(c.push(b),a.apply(ec,c))})}function va(a,b){return function(c,d,e){if(e&&Sa(c,d,e)&&(d=ec),d=Ia(d,e,3),1==d.length){c=le(c)?c:bb(c);var f=u(c,d,a,b);if(!c.length||f!==b)return f}return J(c,d,a,b)}}function wa(a,c){return function(d,e,f){if(e=Ia(e,f,3),le(d)){var g=b(d,e,c);return g>-1?d[g]:ec}return L(d,e,a)}}function xa(a,b){return function(c,d,e){return"function"==typeof d&&e===ec&&le(c)?a(c,d):b(c,ja(d,e,3))}}function ya(a){return function(b,c,d){return("function"!=typeof c||d!==ec)&&(c=ja(c,d,3)),a(b,c)}}function za(a){return function(b,c,e){return b=d(b),(a?b:"")+Ca(b,c,e)+(a?"":b)}}function Aa(a,b){return function(c,d,e,f){var g=arguments.length<3;return"function"==typeof d&&f===ec&&le(c)?a(c,d,e,g):ba(c,Ia(d,f,4),e,g,b)}}function Ba(a,b,c,d,e,f,g,h,i,k){function l(){for(var u=arguments.length,v=u,w=Array(u);v--;)w[v]=arguments[v];if(d&&(w=la(w,d,e)),f&&(w=ma(w,f,g)),p||s){var x=l.placeholder,y=j(w,x);if(u-=y.length,k>u){var z=h?r(h):ec,A=Md(k-u,0),B=p?y:ec,C=p?ec:y,D=p?w:ec,E=p?ec:w;b|=p?lc:mc,b&=~(p?mc:lc),q||(b&=~(gc|hc));var F=[a,b,c,D,B,E,C,z,i,A],G=Ba.apply(ec,F);return Ua(a)&&ce(G,F),G.placeholder=x,G}}var H=n?c:this,I=o?H[a]:a;return h&&(w=_a(w,h)),m&&i<w.length&&(w.length=i),this&&this!==sd&&this instanceof l&&(I=t||ta(a)),I.apply(H,w)}var m=b&nc,n=b&gc,o=b&hc,p=b&jc,q=b&ic,s=b&kc,t=o?ec:ta(a);return l}function Ca(a,b,c){var d=a.length;if(b=+b,d>=b||!Kd(b))return"";var e=b-d;return c=null==c?" ":c+"",Xb(c,Gd(e/c.length)).slice(0,e)}function Da(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Array(j+h);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];var l=this&&this!==sd&&this instanceof e?g:a;return l.apply(f?c:this,k)}var f=b&gc,g=ta(a);return e}function Ea(a,b,c,d,e,f,g,h){var i=b&hc;if(!i&&"function"!=typeof a)throw new TypeError(sc);var j=d?d.length:0;if(j||(b&=~(lc|mc),d=e=ec),j-=e?e.length:0,b&mc){var k=d,l=e;d=e=ec}var m=i?ec:ae(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&(Xa(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:Md(h-j,0)||0,b==gc)var o=ra(n[0],n[2]);else o=b!=lc&&b!=(gc|lc)||n[4].length?Ba.apply(ec,n):Da.apply(ec,n);var p=m?_d:ce;return p(o,n)}function Fa(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length;if(i!=j&&!(e&&j>i))return!1;for(;++h<i;){var k=a[h],l=b[h],m=d?d(e?l:k,e?k:l,h):ec;if(m!==ec){if(m)continue;return!1}if(e){if(!z(b,function(a){return k===a||c(k,a,d,e,f,g)}))return!1}else if(k!==l&&!c(k,l,d,e,f,g))return!1}return!0}function Ga(a,b,c){switch(c){case wc:case xc:return+a==+b;case yc:return a.name==b.name&&a.message==b.message;case Bc:return a!=+a?b!=+b:a==+b;case Dc:case Fc:return a==b+""}return!1}function Ha(a,b,c,d,e,f,g){var h=re(a),i=h.length,j=re(b),k=j.length;if(i!=k&&!e)return!1;for(var l=i;l--;){var m=h[l];if(!(e?m in b:wd.call(b,m)))return!1}for(var n=e;++l<i;){m=h[l];var o=a[m],p=b[m],q=d?d(e?p:o,e?o:p,m):ec;if(!(q===ec?c(o,p,d,e,f,g):q))return!1;n||(n="constructor"==m)}if(!n){var r=a.constructor,s=b.constructor;if(r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s))return!1}return!0}function Ia(a,b,c){var d=l.callback||$b;return d=d===$b?F:d,c?d(a,b,c):d}function Ja(a){for(var b=a.name+"",c=Xd[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function Ka(a,b,d){var e=l.indexOf||hb;return e=e===hb?c:e,a?e(a,b,d):e}function La(a){for(var b=Rb(a),c=b.length;c--;)b[c][2]=Wa(b[c][1]);return b}function Ma(a,b){var c=null==a?ec:a[b];return Gb(c)?c:ec}function Na(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&wd.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Oa(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Object),new b}function Pa(a,b,c){var d=a.constructor;switch(b){case Hc:return ka(a);case wc:case xc:return new d(+a);case Ic:case Jc:case Kc:case Lc:case Mc:case Nc:case Oc:case Pc:case Qc:var e=a.buffer;return new d(c?ka(e):e,a.byteOffset,a.length);case Bc:case Fc:return new d(a);case Dc:var f=new d(a.source,cd.exec(a));f.lastIndex=a.lastIndex}return f}function Qa(a){return null!=a&&Va(be(a))}function Ra(a,b){return a="number"==typeof a||ed.test(a)?+a:-1,b=null==b?Vd:b,a>-1&&a%1==0&&b>a}function Sa(a,b,c){if(!Eb(c))return!1;var d=typeof b;if("number"==d?Qa(c)&&Ra(b,c.length):"string"==d&&b in c){var e=c[b];return a===a?a===e:e!==e}return!1}function Ta(a,b){var c=typeof a;if("string"==c&&$c.test(a)||"number"==c)return!0;if(le(a))return!1;var d=!Zc.test(a);return d||null!=b&&a in cb(b)}function Ua(a){var b=Ja(a),c=l[b];if("function"!=typeof c||!(b in n.prototype))return!1;if(a===c)return!0;var d=ae(c);return!!d&&a===d[0]}function Va(a){return"number"==typeof a&&a>-1&&a%1==0&&Vd>=a}function Wa(a){return a===a&&!Eb(a)}function Xa(a,b){var c=a[1],d=b[1],e=c|d,f=nc>e,g=d==nc&&c==jc||d==nc&&c==oc&&a[7].length<=b[8]||d==(nc|oc)&&c==jc;if(!f&&!g)return a;d&gc&&(a[2]=b[2],e|=c&gc?0:ic);var h=b[3];if(h){var i=a[3];a[3]=i?la(i,h,b[4]):r(h),a[4]=i?j(a[3],tc):r(b[4])}return h=b[5],h&&(i=a[5],a[5]=i?ma(i,h,b[6]):r(h),a[6]=i?j(a[5],tc):r(b[6])),h=b[7],h&&(a[7]=r(h)),d&nc&&(a[8]=null==a[8]?b[8]:Nd(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function Ya(a,b){return a===ec?b:me(a,b,Ya)}function Za(a,b){a=cb(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function $a(a,b){var c={};return N(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function _a(a,b){for(var c=a.length,d=Nd(b.length,c),e=r(a);d--;){var f=b[d];a[d]=Ra(f,c)?e[f]:ec}return a}function ab(a){for(var b=Qb(a),c=b.length,d=c&&a.length,e=!!d&&Va(d)&&(le(a)||zb(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&Ra(h,d)||wd.call(a,h))&&g.push(h)}return g}function bb(a){return null==a?[]:Qa(a)?Eb(a)?a:Object(a):Tb(a)}function cb(a){return Eb(a)?a:Object(a)}function db(a){if(le(a))return a;var b=[];return d(a).replace(_c,function(a,c,d,e){b.push(d?e.replace(ad,"$1"):c||a)}),b}function eb(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}function fb(a,b,c){var d=a?a.length:0;return c&&Sa(a,b,c)&&(b=!1),d?M(a,b):[]}function gb(a){var b=a?a.length:0;return b?M(a,!0):[]}function hb(a,b,d){var e=a?a.length:0;if(!e)return-1;if("number"==typeof d)d=0>d?Md(e+d,0):d;else if(d){var f=ha(a,b);return e>f&&(b===b?b===a[f]:a[f]!==a[f])?f:-1}return c(a,b,d||0)}function ib(a){var b=a?a.length:0;return b?a[b-1]:ec}function jb(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],g=a.length;for(b=Ia(b,c,3);++e<g;){var h=a[e];b(h,e,a)&&(d.push(h),f.push(e))}return _(a,f),d}function kb(a,b,d,e){var f=a?a.length:0;if(!f)return[];null!=b&&"boolean"!=typeof b&&(e=d,d=Sa(a,b,e)?ec:b,b=!1);var g=Ia();return(null!=d||g!==F)&&(d=g(d,e,3)),b&&Ka()===c?k(a,d):fa(a,d)}function lb(a,b,c){var d=le(a)?t:I;return c&&Sa(a,b,c)&&(b=ec),("function"!=typeof b||c!==ec)&&(b=Ia(b,c,3)),d(a,b)}function mb(a,b,c){var d=le(a)?v:K;return b=Ia(b,c,3),d(a,b)}function nb(a,b,c,d){var e=a?be(a):0;return Va(e)||(a=Tb(a),e=a.length),c="number"!=typeof c||d&&Sa(b,c,d)?0:0>c?Md(e+c,0):c||0,"string"==typeof a||!le(a)&&Jb(a)?e>=c&&a.indexOf(b,c)>-1:!!e&&Ka(a,b,c)>-1}function ob(a,b,c){var d=le(a)?w:U;return b=Ia(b,c,3),d(a,b)}function pb(a,b){return ob(a,cc(b))}function qb(a){var b=a?be(a):0;return Va(b)?b:re(a).length}function rb(a,b,c){var d=le(a)?z:da;return c&&Sa(a,b,c)&&(b=ec),("function"!=typeof b||c!==ec)&&(b=Ia(b,c,3)),
d(a,b)}function sb(a,b,c){if(null==a)return[];c&&Sa(a,b,c)&&(b=ec);var d=-1;b=Ia(b,c,3);var f=U(a,function(a,c,e){return{criteria:b(a,c,e),index:++d,value:a}});return ea(f,e)}function tb(a,b,c){function d(){n&&clearTimeout(n),j&&clearTimeout(j),p=0,j=n=o=ec}function e(b,c){c&&clearTimeout(c),j=n=o=ec,b&&(p=ie(),k=a.apply(m,i),n||j||(i=m=ec))}function f(){var a=b-(ie()-l);0>=a||a>b?e(o,j):n=setTimeout(f,a)}function g(){e(r,n)}function h(){if(i=arguments,l=ie(),m=this,o=r&&(n||!s),q===!1)var c=s&&!n;else{j||s||(p=l);var d=q-(l-p),e=0>=d||d>q;e?(j&&(j=clearTimeout(j)),p=l,k=a.apply(m,i)):j||(j=setTimeout(g,d))}return e&&n?n=clearTimeout(n):n||b===q||(n=setTimeout(f,b)),c&&(e=!0,k=a.apply(m,i)),!e||n||j||(i=m=ec),k}var i,j,k,l,m,n,o,p=0,q=!1,r=!0;if("function"!=typeof a)throw new TypeError(sc);if(b=0>b?0:+b||0,c===!0){var s=!0;r=!1}else Eb(c)&&(s=!!c.leading,q="maxWait"in c&&Md(+c.maxWait||0,b),r="trailing"in c?!!c.trailing:r);return h.cancel=d,h}function ub(a,b){if("function"!=typeof a)throw new TypeError(sc);return b=Md(b===ec?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=Md(c.length-b,0),f=Array(e);++d<e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}var g=Array(b+1);for(d=-1;++d<b;)g[d]=c[d];return g[b]=f,a.apply(this,g)}}function vb(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new TypeError(sc);return c===!1?d=!1:Eb(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),tb(a,b,{leading:d,maxWait:+b,trailing:e})}function wb(a,b,c,d){return b&&"boolean"!=typeof b&&Sa(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1),"function"==typeof c?G(a,b,ja(c,d,3)):G(a,b)}function xb(a,b,c){return"function"==typeof b?G(a,!0,ja(b,c,3)):G(a,!0)}function yb(a,b){return a>b}function zb(a){return i(a)&&Qa(a)&&wd.call(a,"callee")&&!Bd.call(a,"callee")}function Ab(a){return a===!0||a===!1||i(a)&&yd.call(a)==wc}function Bb(a){return null==a?!0:Qa(a)&&(le(a)||Jb(a)||zb(a)||i(a)&&Db(a.splice))?!a.length:!re(a).length}function Cb(a){return i(a)&&"string"==typeof a.message&&yd.call(a)==yc}function Db(a){return Eb(a)&&yd.call(a)==zc}function Eb(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function Fb(a){return Hb(a)&&a!=+a}function Gb(a){return null==a?!1:Db(a)?zd.test(vd.call(a)):i(a)&&dd.test(a)}function Hb(a){return"number"==typeof a||i(a)&&yd.call(a)==Bc}function Ib(a){var b;if(!i(a)||yd.call(a)!=Cc||zb(a)||!wd.call(a,"constructor")&&(b=a.constructor,"function"==typeof b&&!(b instanceof b)))return!1;var c;return N(a,function(a,b){c=b}),c===ec||wd.call(a,c)}function Jb(a){return"string"==typeof a||i(a)&&yd.call(a)==Fc}function Kb(a){return i(a)&&Va(a.length)&&!!id[yd.call(a)]}function Lb(a){return a===ec}function Mb(a){return E(a,Qb(a))}function Nb(a,b,c){var d=Yd(a);return c&&Sa(a,b,c)&&(b=ec),b?D(d,b):d}function Ob(a){return P(a,Qb(a))}function Pb(a,b,c){var d=null==a?ec:Q(a,db(b),b+"");return d===ec?c:d}function Qb(a){if(null==a)return[];Eb(a)||(a=Object(a));var b=a.length;b=b&&Va(b)&&(le(a)||zb(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype===a,f=Array(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&Ra(h,b)||"constructor"==h&&(e||!wd.call(a,h))||f.push(h);return f}function Rb(a){a=cb(a);for(var b=-1,c=re(a),d=c.length,e=Array(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Sb(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||Ta(b,a)?[d]:db(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=b[e];Eb(h)&&(e==g?h[i]=c:null==h[i]&&(h[i]=Ra(b[e+1])?[]:{})),h=h[i]}return a}function Tb(a){return ga(a,re(a))}function Ub(a,b,c){c&&Sa(a,b,c)&&(b=c=ec);var d=null==a,e=null==b;if(null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Pd();return Nd(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return aa(a,b)}function Vb(a,b,c){a=d(a),b+="";var e=a.length;return c=c===ec?e:Nd(0>c?0:+c||0,e),c-=b.length,c>=0&&a.indexOf(b,c)==c}function Wb(a){return a=d(a),a&&Vc.test(a)?a.replace(Uc,f):a}function Xb(a,b){var c="";if(a=d(a),b=+b,1>b||!a||!Kd(b))return c;do b%2&&(c+=a),b=Id(b/2),a+=a;while(b);return c}function Yb(a,b,c){return a=d(a),c=null==c?0:Nd(0>c?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function Zb(a,b,c){var e=l.templateSettings;c&&Sa(a,b,c)&&(b=c=ec),a=d(a),b=C(D({},c||b),e,B);var f,h,i=C(D({},b.imports),e.imports,B),j=re(i),k=ga(i,j),m=0,n=b.interpolate||fd,o="__p += '",p=RegExp((b.escape||fd).source+"|"+n.source+"|"+(n===Yc?bd:fd).source+"|"+(b.evaluate||fd).source+"|$","g"),q="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++hd+"]")+"\n";a.replace(p,function(b,c,d,e,i,j){return d||(d=e),o+=a.slice(m,j).replace(gd,g),c&&(f=!0,o+="' +\n__e("+c+") +\n'"),i&&(h=!0,o+="';\n"+i+";\n__p += '"),d&&(o+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),m=j+b.length,b}),o+="';\n";var r=b.variable;r||(o="with (obj) {\n"+o+"\n}\n"),o=(h?o.replace(Rc,""):o).replace(Sc,"$1").replace(Tc,"$1;"),o="function("+(r||"obj")+") {\n"+(r?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(h?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+o+"return __p\n}";var s=ve(function(){return Function(j,q+"return "+o).apply(ec,k)});if(s.source=o,Cb(s))throw s;return s}function $b(a,b,c){return c&&Sa(a,b,c)&&(b=ec),i(a)?ac(a):F(a,b)}function _b(a){return a}function ac(a){return V(G(a,!0))}function bc(){}function cc(a){return Ta(a)?Z(a):$(a)}function dc(a){var b=++xd;return d(a)+b}var ec,fc="3.10.1",gc=1,hc=2,ic=4,jc=8,kc=16,lc=32,mc=64,nc=128,oc=256,pc=150,qc=16,rc=200,sc="Expected a function",tc="__lodash_placeholder__",uc="[object Arguments]",vc="[object Array]",wc="[object Boolean]",xc="[object Date]",yc="[object Error]",zc="[object Function]",Ac="[object Map]",Bc="[object Number]",Cc="[object Object]",Dc="[object RegExp]",Ec="[object Set]",Fc="[object String]",Gc="[object WeakMap]",Hc="[object ArrayBuffer]",Ic="[object Float32Array]",Jc="[object Float64Array]",Kc="[object Int8Array]",Lc="[object Int16Array]",Mc="[object Int32Array]",Nc="[object Uint8Array]",Oc="[object Uint8ClampedArray]",Pc="[object Uint16Array]",Qc="[object Uint32Array]",Rc=/\b__p \+= '';/g,Sc=/\b(__p \+=) '' \+/g,Tc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Uc=/[&<>"'`]/g,Vc=RegExp(Uc.source),Wc=/<%-([\s\S]+?)%>/g,Xc=/<%([\s\S]+?)%>/g,Yc=/<%=([\s\S]+?)%>/g,Zc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,$c=/^\w*$/,_c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ad=/\\(\\)?/g,bd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,cd=/\w*$/,dd=/^\[object .+?Constructor\]$/,ed=/^\d+$/,fd=/($^)/,gd=/['\n\r\u2028\u2029\\]/g,hd=-1,id={};id[Ic]=id[Jc]=id[Kc]=id[Lc]=id[Mc]=id[Nc]=id[Oc]=id[Pc]=id[Qc]=!0,id[uc]=id[vc]=id[Hc]=id[wc]=id[xc]=id[yc]=id[zc]=id[Ac]=id[Bc]=id[Cc]=id[Dc]=id[Ec]=id[Fc]=id[Gc]=!1;var jd={};jd[uc]=jd[vc]=jd[Hc]=jd[wc]=jd[xc]=jd[Ic]=jd[Jc]=jd[Kc]=jd[Lc]=jd[Mc]=jd[Bc]=jd[Cc]=jd[Dc]=jd[Fc]=jd[Nc]=jd[Oc]=jd[Pc]=jd[Qc]=!0,jd[yc]=jd[zc]=jd[Ac]=jd[Ec]=jd[Gc]=!1;var kd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},ld={function:!0,object:!0},md={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nd=ld[typeof exports]&&exports&&!exports.nodeType&&exports,od=ld[typeof module]&&module&&!module.nodeType&&module,pd=nd&&od&&"object"==typeof global&&global&&global.Object&&global,qd=ld[typeof self]&&self&&self.Object&&self,rd=ld[typeof window]&&window&&window.Object&&window,sd=pd||rd!==(this&&this.window)&&rd||qd||this,td=Array.prototype,ud=Object.prototype,vd=Function.prototype.toString,wd=ud.hasOwnProperty,xd=0,yd=ud.toString,zd=RegExp("^"+vd.call(wd).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ad=sd.ArrayBuffer,Bd=ud.propertyIsEnumerable,Cd=Ma(sd,"Set"),Dd=td.splice,Ed=sd.Uint8Array,Fd=Ma(sd,"WeakMap"),Gd=Math.ceil,Hd=Ma(Object,"create"),Id=Math.floor,Jd=Ma(Array,"isArray"),Kd=sd.isFinite,Ld=Ma(Object,"keys"),Md=Math.max,Nd=Math.min,Od=Ma(Date,"now"),Pd=Math.random,Qd=Number.NEGATIVE_INFINITY,Rd=Number.POSITIVE_INFINITY,Sd=4294967295,Td=Sd-1,Ud=Sd>>>1,Vd=9007199254740991,Wd=Fd&&new Fd,Xd={};l.templateSettings={escape:Wc,evaluate:Xc,interpolate:Yc,variable:"",imports:{_:l}};var Yd=function(){function a(){}return function(b){if(Eb(b)){a.prototype=b;var c=new a;a.prototype=ec}return c||{}}}(),Zd=pa(O),$d=qa(),_d=Wd?function(a,b){return Wd.set(a,b),a}:_b,ae=Wd?function(a){return Wd.get(a)}:bc,be=Z("length"),ce=function(){var a=0,b=0;return function(c,d){var e=ie(),f=qc-(e-b);if(b=e,f>0){if(++a>=pc)return c}else a=0;return _d(c,d)}}(),de=ub(function(a){return fa(M(a,!1,!0))}),ee=na(function(a,b,c){wd.call(a,c)?++a[c]:a[c]=1}),fe=wa(Zd),ge=xa(s,Zd),he=Aa(y,Zd),ie=Od||function(){return(new Date).getTime()},je=ub(function(a,b,c){var d=gc;if(c.length){var e=j(c,je.placeholder);d|=lc}return Ea(a,d,b,c,e)}),ke=ub(function(a,b){b=b.length?M(b):Ob(a);for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=Ea(a[e],gc,a)}return a}),le=Jd||function(a){return i(a)&&Va(a.length)&&yd.call(a)==vc},me=oa(X),ne=oa(function(a,b,c){return c?C(a,b,c):D(a,b)}),oe=ua(ne,A),pe=ua(me,Ya),qe=ya(O),re=Ld?function(a){var b=null==a?ec:a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&Qa(a)?ab(a):Eb(a)?Ld(a):[]}:ab,se=ub(function(a,b){if(null==a)return{};if("function"!=typeof b[0]){var b=w(M(b),String);return Za(a,H(Qb(a),b))}var c=ja(b[0],b[1],3);return $a(a,function(a,b,d){return!c(a,b,d)})}),te=ub(function(a,b){return null==a?{}:"function"==typeof b[0]?$a(a,ja(b[0],b[1],3)):Za(a,M(b))}),ue=za(),ve=ub(function(a,b){try{return a.apply(ec,b)}catch(a){return Cb(a)?a:new Error(a)}}),we=va(yb,Qd);n.prototype=Yd(m.prototype),n.prototype.constructor=n,o.prototype.push=q,l.assign=ne,l.bind=je,l.bindAll=ke,l.callback=$b,l.compact=eb,l.countBy=ee,l.create=Nb,l.debounce=tb,l.defaults=oe,l.defaultsDeep=pe,l.filter=mb,l.flatten=fb,l.flattenDeep=gb,l.forEach=ge,l.forOwn=qe,l.functions=Ob,l.keys=re,l.keysIn=Qb,l.map=ob,l.matches=ac,l.merge=me,l.omit=se,l.pairs=Rb,l.pick=te,l.pluck=pb,l.property=cc,l.remove=jb,l.restParam=ub,l.set=Sb,l.sortBy=sb,l.throttle=vb,l.toPlainObject=Mb,l.union=de,l.uniq=kb,l.values=Tb,l.collect=ob,l.each=ge,l.extend=ne,l.iteratee=$b,l.methods=Ob,l.select=mb,l.unique=kb,l.attempt=ve,l.clone=wb,l.cloneDeep=xb,l.endsWith=Vb,l.escape=Wb,l.every=lb,l.find=fe,l.get=Pb,l.gt=yb,l.identity=_b,l.includes=nb,l.indexOf=hb,l.isArguments=zb,l.isArray=le,l.isBoolean=Ab,l.isEmpty=Bb,l.isError=Cb,l.isFunction=Db,l.isNaN=Fb,l.isNative=Gb,l.isNumber=Hb,l.isObject=Eb,l.isPlainObject=Ib,l.isString=Jb,l.isTypedArray=Kb,l.isUndefined=Lb,l.last=ib,l.max=we,l.noop=bc,l.now=ie,l.padLeft=ue,l.random=Ub,l.reduce=he,l.repeat=Xb,l.size=qb,l.some=rb,l.startsWith=Yb,l.template=Zb,l.uniqueId=dc,l.all=lb,l.any=rb,l.contains=nb,l.detect=fe,l.foldl=he,l.include=nb,l.inject=he,l.VERSION=fc,je.placeholder=l,"function"==typeof define&&"object"==typeof define.amd&&define.amd&&define("lodash",[],function(){return l})}.call(this),define("utils/jqueryUtils",[],function(){"use strict";return{bindPseudo:function(a,b,c){return a.expr[":"][b]=a.expr.createPseudo(function(a){var b=JSON.parse("["+(a||"").replace(/'/g,'"')+"]");return function(a){return c(a,b)}}),this}}}),define("modules/placements/sizzlePseudos",["require","utils/jqueryUtils"],function(a){"use strict";var b,c=a("utils/jqueryUtils"),d=a,e=function(){void 0===b&&(b=d("core/Reporter"))},f=function(a,c){return e(),b.log(["jQueryPseudos"],"dump:",a,c),!0},g={top:1/0,left:1/0},h="OFFSET_PARENT",i=function(a,b){var c=b.offset(),d=a.offset();return d?{top:c.top-d.top,left:c.left-d.left}:g},j=function(a,b){if(void 0===b)return i(a.parent(),a);if(b===h)return a.position();var c=a[0].ownerDocument,d=document===c?$(b):$(c).find(b);return d.length>1&&(d=d.eq(0)),d.length?i(d,a):g},k=function(a,b,c,d){c=c||0,d=d||1/0;var e=$(a),f=j(e,b),g=f.top;return g>=c&&g+e.height()<=d},l=function(a,b){return k(a,b[0],b[1],b[2])},m=function(a,b){return k(a,void 0,b[0],b[1])},n=function(a,b){var c=b[0]||0,d=$(a),e=b[1]?d.parents(b[1]):d.parent(),f=d.offset().top+d.outerHeight(!0),g=e.offset().top+e.height();return g>=f+c},o=function(a,b){return k(a,h,b[0],b[1])};return{bind:function(a){return c.bindPseudo(a,"dump",f).bindPseudo(a,"voffset",l).bindPseudo(a,"voffsetParent",m).bindPseudo(a,"voffsetParentBottom",n).bindPseudo(a,"voffsetPositionedParent",o)}}}),function(){"use strict";function a(a){return"function"==typeof a||"object"==typeof a&&null!==a}function b(a){return"function"==typeof a}function c(a){return"object"==typeof a&&null!==a}function d(){}function e(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function f(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b}function g(a,b){return"onerror"===a?void va.on("error",b):2!==arguments.length?va[a]:void(va[a]=b)}function h(){setTimeout(function(){for(var a,b=0;b<wa.length;b++){a=wa[b];var c=a.payload;c.guid=c.key+c.id,c.childGuid=c.key+c.childId,c.error&&(c.stack=c.error.stack),va.trigger(a.name,a.payload)}wa.length=0},50)}function i(a,b,c){1===wa.push({name:a,payload:{key:b._guidKey,id:b._id,eventName:a,detail:b._result,childId:c&&c._id,label:b._label,timeStamp:sa(),error:va["instrument-with-stack"]?new Error(b._label):null}})&&h()}function j(){return new TypeError("A promises callback cannot return that same promise.")}function k(){}function l(a){try{return a.then}catch(a){return Ba.error=a,Ba}}function m(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function n(a,b,c){va.async(function(a){var d=!1,e=m(c,b,function(c){d||(d=!0,b!==c?q(a,c):s(a,c))},function(b){d||(d=!0,t(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,t(a,e))},a)}function o(a,b){b._state===za?s(a,b._result):b._state===Aa?(b._onError=null,t(a,b._result)):u(b,void 0,function(c){b!==c?q(a,c):s(a,c)},function(b){t(a,b)})}function p(a,c){if(c.constructor===a.constructor)o(a,c);else{var d=l(c);d===Ba?t(a,Ba.error):void 0===d?s(a,c):b(d)?n(a,c,d):s(a,c)}}function q(b,c){b===c?s(b,c):a(c)?p(b,c):s(b,c)}function r(a){a._onError&&a._onError(a._result),v(a)}function s(a,b){a._state===ya&&(a._result=b,a._state=za,0===a._subscribers.length?va.instrument&&xa("fulfilled",a):va.async(v,a))}function t(a,b){a._state===ya&&(a._state=Aa,a._result=b,va.async(r,a))}function u(a,b,c,d){var e=a._subscribers,f=e.length;a._onError=null,e[f]=b,e[f+za]=c,e[f+Aa]=d,0===f&&a._state&&va.async(v,a)}function v(a){var b=a._subscribers,c=a._state;if(va.instrument&&xa(c===za?"fulfilled":"rejected",a),0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?y(c,d,e,f):e(f);a._subscribers.length=0}}function w(){this.error=null}function x(a,b){try{return a(b)}catch(a){return Ca.error=a,Ca}}function y(a,c,d,e){var f,g,h,i,k=b(d);if(k){if(f=x(d,e),f===Ca?(i=!0,g=f.error,f=null):h=!0,c===f)return void t(c,j())}else f=e,h=!0;c._state!==ya||(k&&h?q(c,f):i?t(c,g):a===za?s(c,f):a===Aa&&t(c,f))}function z(a,b){var c=!1;try{b(function(b){c||(c=!0,q(a,b))},function(b){c||(c=!0,t(a,b))})}catch(b){t(a,b)}}function A(a,b,c){return a===za?{state:"fulfilled",value:c}:{state:"rejected",reason:c}}function B(a,b,c,d){var e=this;e._instanceConstructor=a,e.promise=new a(k,d),e._abortOnReject=c,e._validateInput(b)?(e._input=b,e.length=b.length,e._remaining=b.length,e._init(),0===e.length?s(e.promise,e._result):(e.length=e.length||0,e._enumerate(),0===e._remaining&&s(e.promise,e._result))):t(e.promise,e._validationError())}function C(a,b){return new Da(this,a,!0,b).promise}function D(a,b){function c(a){q(f,a)}function d(a){t(f,a)}var e=this,f=new e(k,b);if(!ra(a))return t(f,new TypeError("You must pass an array to race.")),f;for(var g=a.length,h=0;f._state===ya&&g>h;h++)u(e.resolve(a[h]),void 0,c,d);return f}function E(a,b){var c=this;if(a&&"object"==typeof a&&a.constructor===c)return a;var d=new c(k,b);return q(d,a),d}function F(a,b){var c=this,d=new c(k,b);return t(d,a),d}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function I(a,c){var d=this;d._id=Ja++,d._label=c,d._state=void 0,d._result=void 0,d._subscribers=[],va.instrument&&xa("created",d),k!==a&&(b(a)||G(),d instanceof I||H(),z(d,a))}function J(a,b,c){this._superConstructor(a,b,!1,c)}function K(a,b){return new J(Ka,a,b).promise}function L(a,b){return Ka.all(a,b)}function M(a,b){Wa[Pa]=a,Wa[Pa+1]=b,Pa+=2,2===Pa&&Ma()}function N(){var a=process.nextTick,b=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate),function(){a(S)}}function O(){return function(){La(S)}}function P(){var a=0,b=new Ta(S),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function Q(){var a=new MessageChannel;return a.port1.onmessage=S,function(){a.port2.postMessage(0)}}function R(){return function(){setTimeout(S,1)}}function S(){for(var a=0;Pa>a;a+=2){var b=Wa[a],c=Wa[a+1];b(c),Wa[a]=void 0,Wa[a+1]=void 0}Pa=0}function T(){try{var a=require,b=a("vertx");return La=b.runOnLoop||b.runOnContext,O()}catch(a){return R()}}function U(a){var b={};return b.promise=new Ka(function(a,c){b.resolve=a,b.reject=c},a),b}function V(a,c,d){return Ka.all(a,d).then(function(a){if(!b(c))throw new TypeError("You must pass a function as filter's second argument.");for(var e=a.length,f=new Array(e),g=0;e>g;g++)f[g]=c(a[g]);return Ka.all(f,d).then(function(b){for(var c=new Array(e),d=0,f=0;e>f;f++)b[f]&&(c[d]=a[f],d++);return c.length=d,c})})}function W(a,b,c){this._superConstructor(a,b,!0,c)}function X(a,b,c){this._superConstructor(a,b,!1,c)}function Y(a,b){return new X(Ka,a,b).promise}function Z(a,b){return new Za(Ka,a,b).promise}function $(a,c,d){return Ka.all(a,d).then(function(a){if(!b(c))throw new TypeError("You must pass a function as map's second argument.");for(var e=a.length,f=new Array(e),g=0;e>g;g++)f[g]=c(a[g]);return Ka.all(f,d)})}function _(){this.value=void 0}function aa(a){try{return a.then}catch(a){return cb.value=a,cb}}function ba(a,b,c){try{a.apply(b,c)}catch(a){return cb.value=a,cb}}function ca(a,b){for(var c,d,e={},f=a.length,g=new Array(f),h=0;f>h;h++)g[h]=a[h];for(d=0;d<b.length;d++)c=b[d],e[c]=g[d+1];return e}function da(a){for(var b=a.length,c=new Array(b-1),d=1;b>d;d++)c[d-1]=a[d];return c}function ea(a,b){return{then:function(c,d){return a.call(b,c,d)}}}function fa(a,b){var c=function(){for(var c,d=this,e=arguments.length,f=new Array(e+1),g=!1,h=0;e>h;++h){if(c=arguments[h],!g){if(g=ia(c),g===db){var i=new Ka(k);return t(i,db.value),i}g&&g!==!0&&(c=ea(g,c))}f[h]=c}var j=new Ka(k);return f[e]=function(a,c){a?t(j,a):void 0===b?q(j,c):b===!0?q(j,da(arguments)):ra(b)?q(j,ca(arguments,b)):q(j,c)},g?ha(j,f,a,d):ga(j,f,a,d)};return c.__proto__=a,c}function ga(a,b,c,d){var e=ba(c,d,b);return e===cb&&t(a,e.value),a}function ha(a,b,c,d){return Ka.all(b).then(function(b){var e=ba(c,d,b);return e===cb&&t(a,e.value),a})}function ia(a){return a&&"object"==typeof a?a.constructor===Ka?!0:aa(a):!1}function ja(a,b){return Ka.race(a,b)}function ka(a,b){return Ka.reject(a,b)}function la(a,b){return Ka.resolve(a,b)}function ma(a){throw setTimeout(function(){throw a}),a}function na(a,b){va.async(a,b)}function oa(){va.on.apply(va,arguments)}function pa(){va.off.apply(va,arguments)}var qa;qa=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var ra=qa,sa=Date.now||function(){return(new Date).getTime()},ta=Object.create||function(a){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof a)throw new TypeError("Argument must be an object");return d.prototype=a,new d},ua={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a._promiseCallbacks=void 0,a},on:function(a,b){var c,d=f(this);c=d[a],c||(c=d[a]=[]),e(c,b)===-1&&c.push(b)},off:function(a,b){var c,d,g=f(this);return b?(c=g[a],d=e(c,b),void(d!==-1&&c.splice(d,1))):void(g[a]=[])},trigger:function(a,b){var c,d,e=f(this);if(c=e[a])for(var g=0;g<c.length;g++)(d=c[g])(b)}},va={instrument:!1};ua.mixin(va);var wa=[],xa=i,ya=void 0,za=1,Aa=2,Ba=new w,Ca=new w,Da=B;B.prototype._validateInput=function(a){return ra(a)},B.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},B.prototype._init=function(){this._result=new Array(this.length)},B.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===ya&&b>e;e++)a._eachEntry(d[e],e)},B.prototype._eachEntry=function(a,b){var d=this,e=d._instanceConstructor;c(a)?a.constructor===e&&a._state!==ya?(a._onError=null,d._settledAt(a._state,b,a._result)):d._willSettleAt(e.resolve(a),b):(d._remaining--,d._result[b]=d._makeResult(za,b,a))},B.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===ya&&(d._remaining--,d._abortOnReject&&a===Aa?t(e,c):d._result[b]=d._makeResult(a,b,c)),0===d._remaining&&s(e,d._result)},B.prototype._makeResult=function(a,b,c){return c},B.prototype._willSettleAt=function(a,b){var c=this;u(a,void 0,function(a){c._settledAt(za,b,a)},function(a){c._settledAt(Aa,b,a)})};var Ea=C,Fa=D,Ga=E,Ha=F,Ia="rsvp_"+sa()+"-",Ja=0,Ka=I;I.cast=Ga,I.all=Ea,I.race=Fa,I.resolve=Ga,I.reject=Ha,I.prototype={constructor:I,_guidKey:Ia,_onError:function(a){va.async(function(b){setTimeout(function(){b._onError&&va.trigger("error",a)},0)},this)},then:function(a,b,c){var d=this,e=d._state;if(e===za&&!a||e===Aa&&!b)return va.instrument&&xa("chained",d,d),d;d._onError=null;var f=new d.constructor(k,c),g=d._result;if(va.instrument&&xa("chained",d,f),e){var h=arguments[e-1];va.async(function(){y(e,f,h,g)})}else u(d,f,a,b);return f},catch:function(a,b){return this.then(void 0,a,b)},finally:function(a,b){var c=this,d=c.constructor;return c.then(function(b){return d.resolve(a()).then(function(){return b})},function(b){return d.resolve(a()).then(function(){throw b})},b)}},J.prototype=ta(Da.prototype),J.prototype._superConstructor=Da,J.prototype._makeResult=A,J.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var La,Ma,Na=K,Oa=L,Pa=0,Qa=({}.toString,M),Ra="undefined"!=typeof window?window:void 0,Sa=Ra||{},Ta=Sa.MutationObserver||Sa.WebKitMutationObserver,Ua="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Va="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Wa=new Array(1e3);Ma=Ua?N():Ta?P():Va?Q():void 0===Ra&&"function"==typeof require?T():R();var Xa=U,Ya=V,Za=W;W.prototype=ta(Da.prototype),W.prototype._superConstructor=Da,W.prototype._init=function(){this._result={}},W.prototype._validateInput=function(a){return a&&"object"==typeof a},W.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},W.prototype._enumerate=function(){var a=this,b=a.promise,c=a._input,d=[];for(var e in c)b._state===ya&&Object.prototype.hasOwnProperty.call(c,e)&&d.push({position:e,entry:c[e]});var f=d.length;a._remaining=f;for(var g,h=0;b._state===ya&&f>h;h++)g=d[h],a._eachEntry(g.entry,g.position)},X.prototype=ta(Za.prototype),X.prototype._superConstructor=Da,X.prototype._makeResult=A,X.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var $a,_a=Y,ab=Z,bb=$,cb=new _,db=new _,eb=fa;if("object"==typeof self)$a=self;else{if("object"!=typeof global)throw new Error("no global: `self` or `global` found");$a=global}var fb=$a,gb=ja,hb=ka,ib=la,jb=ma;va.async=Qa;if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var kb=window.__PROMISE_INSTRUMENTATION__;g("instrument",!0);for(var lb in kb)kb.hasOwnProperty(lb)&&oa(lb,kb[lb])}var mb={race:gb,Promise:Ka,allSettled:Na,hash:ab,hashSettled:_a,denodeify:eb,on:oa,off:pa,map:bb,filter:Ya,resolve:ib,reject:hb,all:Oa,rethrow:jb,defer:Xa,EventTarget:ua,configure:g,async:na};"function"==typeof define&&define.amd?define("rsvp",[],function(){return mb}):"undefined"!=typeof module&&module.exports?module.exports=mb:"undefined"!=typeof fb&&(fb.RSVP=mb)}.call(this),define("jquery",["require","utils/globalObject","_jquery","modules/placements/sizzlePseudos","rsvp"],function(a){"use strict";var b=a("utils/globalObject"),c=a("_jquery"),d=a("modules/placements/sizzlePseudos"),e=a("rsvp"),f=b.top,g=f,h=c(g.document),i=c(g),j=1e4;return c.extend({allDOMReady:function(){var a=new e.Promise(function(a,b){$.spxUIDOMReady(function(){a("SPX UI DOM ready.")}),setTimeout(function(){b("Timed out waiting for publisher DOM ready")},j)}),b=new e.Promise(function(a,b){$(function(){a("jQuery ready.")}),setTimeout(function(){b("Timed out waiting for spx iframe DOM ready")},j)});return e.all([a,b])},spxUIDOMReady:function(a){c(g.document).ready(a)},spxUIDOM:function(a,b){return c(a,b||h)},spxUIWindow:function(){return i},spxUpdateUIWindow:function(a){g=a,h=c(g.document),i=c(g)},spxRestoreUIWindow:function(){this.spxUpdateUIWindow(f)}}),d.bind(c),c}),define("spxw/settings",[],function(){"use strict";return{mobileDevice:{width:1080},domClassNames:{created:"spx_created",wrapper:"swoop-container",slot:"spx_slot",global:"spx_global",inspected:"spx_inspected",found:"spx_found",localMarkupIframeParent:"spx_content",noswoop:"spx_noswoop",component:"spx_component",landing_page:"spx_landing_page",mobile_lp:"spx_mobile_lp",touchable:"spx_touchable",emailInclude:"spx_email_include",emailExclude:"spx_email_exclude",responsiveBottom:"spx_responsive_bottom",responsiveTop:"spx_responsive_top",responsiveLeft:"spx_responsive_left",responsiveRight:"spx_responsive_right",responsiveLanding:"spx_responsive_landing",thirdPartyIgnoreClasses:["nolinks"]},jquery:{version:"2.1.1",isCompatible:!1,url:"//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"},ga:{},globalEvents:{viewportChange:"viewportChange"},debug:{mobile:null},disableSelector:".swoop_ignore_page",slotDefaults:{filters:{slot:{defaultSlotElements:/^(ul|ol|p|br)$/i,emphasisElements:/^(b|big|strong)$/i,inlineElements:/^(strong|a|b|i|small|abbr|span|code|em|br|sub|img)$/i,neighborElements:/^(h1|h2|h3|h4|h5|h6)$/i}},placement:{offsets:{minimumToFirst:150,minimumToPrev:450}}},content:{NonContent:{idAndClassFilter:{_module:"utils/StringListFilter",include:{},exclude:{swoop_ignore:!0,"swoop-container":!0,signin:!0,login:!0,header:!0,footer:!0,sidebar:!0,"[-_]nav\\b":!0,"(?:\\b(?:left|right)?[-_]?rail\\b)":!0,copyright:!0,comment:!0,rating:!0,reviews:!0,"review[^\\s]*form":!0,community:!0,communities:!0,disqus:!0,"echo[-_]stream":!0,"idc[-_]container":!0,"intense[-_]?debate":!0,fyre:!0,juvia:!0,viafoura:!0,adchoice:!0,nrelate:!0,omniture:!0,outbrain:!0,ob_holder:!0,ob_container:!0,ob_strip_container:!0,taboola:!0,"ad\\d+x\\d+":!0,adcol:!0,addTo:!0,photo:!0,toolbar:!0,gigya:!0,share:!0,"chzn-container":!0,"chosen-container":!0,"zlrecipe-print-container":!0,"h[-_]?review":!0,vxp_hostShell:!0,downlevelchart:!0,moreList:!0},unknown:!0},tagNameFilter:{_module:"utils/StringListFilter",include:{},exclude:{ASIDE:!0,AUDIO:!0,BDI:!0,BDO:!0,BR:!0,BUTTON:!0,CANVAS:!0,CITE:!0,CODE:!0,DATA:!0,DATALIST:!0,DEL:!0,DETAILS:!0,EMBED:!0,"FB:[A-Z]+":!0,FIELDSET:!0,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,HEAD:!0,HEADER:!0,HR:!0,IMG:!0,INPUT:!0,INS:!0,IFRAME:!0,KBD:!0,KEYGEN:!0,LABEL:!0,LEGEND:!0,MAP:!0,MATH:!0,MENU:!0,MENUITEM:!0,METER:!0,NAV:!0,NOSCRIPT:!0,OBJECT:!0,OPTGROUP:!0,OPTION:!0,OUTPUT:!0,PROGRESS:!0,RP:!0,RT:!0,RUBY:!0,S:!0,SAMP:!0,SELECT:!0,SMALL:!0,SCRIPT:!0,SUMMARY:!0,SVG:!0,TEXTAREA:!0,TIME:!0,VAR:!0,VIDEO:!0,WBR:!0},unknown:!0,mode:"i",prefix:"^",postfix:"$"},microdataFilter:{_module:"utils/StringListFilter",include:{},exclude:{Code:!0,Comment:!0,Nutrition:!0,Rating:!0,SiteNavigationElement:!0,User:!0,WPAdBlock:!0,WPFooter:!0,WPHeader:!0,WPSidebar:!0},unknown:!0},textFilter:{_module:"utils/StringListFilter",include:{},exclude:{"This\\s+ad\\s+has\\s+been\\s+matched\\s+to\\s+your\\s+interests\\.":!0,"(Copyright|)[\\s\\S]+\\d+[\\s\\S]+All\\s+Rights\\s+Reserved\\.":!0},unknown:!0}},ContentRegionMeta:{topLevelElementFilter:{_module:"utils/StringListFilter",include:{article:!0,body:!0,col:!0,colgroup:!0,div:!0,form:!0,main:!0,section:!0,table:!0,tbody:!0,td:!0,tr:!0},exclude:{},unknown:!1,mode:"i",prefix:"^",postfix:"$"}},TextLengthCalculator:{leafElementFilter:{_module:"utils/StringListFilter",include:{a:!0,abbr:!0,b:!0,blockquote:!0,dd:!0,dfn:!0,dt:!0,em:!0,"h[1-6]":!0,i:!0,li:!0,mark:!0,p:!0,pre:!0,q:!0,span:!0,strong:!0,sub:!0,sup:!0,u:!0},exclude:{},unknown:!1,mode:"i",prefix:"^",postfix:"$"}},ContentRegionLocator:{strategy:"modules/extractors/MainContent",startSelectors:["body"],logLevel:100,excludeLength:2,includeLength:4,leaderLengthMultiple:4,levelLengthMultiple:2}},extractor:{version:18,discovery:{mainContentGuesses:[[".hRecipe,.hrecipe","recipe"],[".easyrecipe","recipe"],["[itemtype$='Recipe']","recipe"],[".recipe","recipe"],["[itemprop=articleBody]","article"],["[itemtype$='Article']:not(:has([itemtype$='Article']))","article"],["[itemtype='http://schema.org/BlogPosting']","article"],[".post","article"],[".singlepost","article"],[".entry","article"],[".post-entry","article"],["article:not(:has(article))","article"],["#content-area","article"],["#content","article"],["#posts","forum"],["#postlist","forum"],[".content","article"],[".main","article"],["#container","article"],["main","article"],[".KonaBody","article"],["#page","article"],[".page","article"]],defaultSlotConfigs:{article:{_selector:"*:slot",multi:!0},forum:{_selector:"[id*=post_message]",multi:!0}}},globalIgnore:["ASIDE,AUDIO,BDI,BDO,BUTTON,CANVAS,CITE,CODE,DATA,DATALIST,DEL,DETAILS,EMBED,FIELDSET,FIGCAPTION,FIGURE,FOOTER,HEAD,HR,IMG,INPUT,INS,IFRAME,KBD,KEYGEN,LABEL,LEGEND,MAP,MATH,MENU,MENUITEM,METER,NAV,NOSCRIPT,OBJECT,OPTGROUP,OPTION,OUTPUT,PROGRESS,RP,RT,RUBY,S,SAMP,SELECT,SCRIPT,SUMMARY,SVG,TEXTAREA,TIME,VAR,VIDEO,WBR",".adchoice","#gigya_ruler","#gigyaMenuWidget",".nrelate","#omniture",".outbrain",".OUTBRAIN",".ob_holder",".ob_container",".ob_strip_container",".share-bar",".share",".swoop_ignore",".chzn-container",".chosen-container","#zlrecipe-print-container","#footer",".footer",".ad1x1","#ad1x1",".ad142x70","#ad142x70",".ad300x50","#ad300x50","#textad",".signin","#signin",".login","#login",".toolbar",".copyright",".authorname","#adcol",".vxp_hostShell",".vxpMultiLiteTitle",".vxp_playlist_playing_text",".vxp_playlist_next_text",".downlevelchart","#scplatformComments",".stbp-wrap",".morelinkstitle",".moreList"]},hintComponents:{clickThrottleRate:5e3},char_translation_table:{"":" ","":"(C)","":"(a)","":"<<","":"-","":"(R)","":">>","":" 1/4","":" 1/2","":" 3/4","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"*","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"/","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"C","":"c","":"C","":"c","":"D","":"d","":"D","":"d","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"G","":"g","":"G","":"g","":"H","":"h","":"h","":"h","":"I","":"i","":"I","":"i","":"I","":"i","":"I","":"i","":"I","":"i","":"IJ","":"ij","":"J","":"j","":"K","":"k","":"q","":"L","":"l","":"L","":"l","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"'n","":"N","":"n","":"O","":"o","":"O","":"o","":"O","":"o",
"":"OE","":"oe","":"R","":"r","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"T","":"t","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"s","":"b","":"B","":"B","":"b","":"O","":"C","":"c","":"D","":"D","":"D","":"d","":"E","":"E","":"F","":"f","":"G","":"hv","":"I","":"I","":"K","":"k","":"l","":"M","":"N","":"n","":"O","":"O","":"o","":"OI","":"oi","":"P","":"p","":"t","":"T","":"t","":"T","":"U","":"u","":"V","":"Y","":"y","":"Z","":"z","":"DZ","":"Dz","":"dz","":"LJ","":"Lj","":"lj","":"NJ","":"Nj","":"nj","":"A","":"a","":"I","":"i","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"e","":"A","":"a","":"A","":"a","":"AE","":"ae","":"G","":"g","":"G","":"g","":"K","":"k","":"O","":"o","":"O","":"o","":"j","":"DZ","":"Dz","":"dz","":"G","":"g","":"N","":"n","":"A","":"a","":"AE","":"ae","":"O","":"o","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"R","":"r","":"R","":"r","":"U","":"u","":"U","":"u","":"S","":"s","":"T","":"t","":"H","":"h","":"N","":"d","":"OU","":"ou","":"Z","":"z","":"A","":"a","":"E","":"e","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"Y","":"y","":"l","":"n","":"t","":"j","":"db","":"qp","":"A","":"C","":"c","":"L","":"T","":"s","":"z","":"B","":"U","":"V","":"E","":"e","":"J","":"j","":"Q","":"q","":"R","":"r","":"Y","":"y","":"a","":"b","":"o","":"c","":"d","":"d","":"e","":"j","":"g","":"g","":"G","":"h","":"h","":"h","":"i","":"I","":"l","":"l","":"l","":"m","":"m","":"n","":"n","":"N","":"o","":"OE","":"r","":"r","":"r","":"R","":"s","":"t","":"u","":"v","":"v","":"Y","":"z","":"z","":"B","":"G","":"H","":"j","":"L","":"q","":"dz","":"dz","":"ts","":"ls","":"lz","":"A","":"AE","":"B","":"C","":"D","":"D","":"E","":"J","":"K","":"L","":"M","":"O","":"P","":"T","":"U","":"V","":"W","":"Z","":"ue","":"b","":"d","":"f","":"m","":"n","":"p","":"r","":"r","":"s","":"t","":"z","":"g","":"th","":"I","":"p","":"U","":"b","":"d","":"f","":"g","":"k","":"l","":"m","":"n","":"p","":"r","":"s","":"v","":"x","":"z","":"a","":"d","":"e","":"e","":"i","":"u","":"A","":"a","":"B","":"b","":"B","":"b","":"B","":"b","":"C","":"c","":"D","":"d","":"D","":"d","":"D","":"d","":"D","":"d","":"D","":"d","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"F","":"f","":"G","":"g","":"H","":"h","":"H","":"h","":"H","":"h","":"H","":"h","":"H","":"h","":"I","":"i","":"I","":"i","":"K","":"k","":"K","":"k","":"K","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"L","":"l","":"M","":"m","":"M","":"m","":"M","":"m","":"N","":"n","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"P","":"p","":"P","":"p","":"R","":"r","":"R","":"r","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"T","":"t","":"T","":"t","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"V","":"v","":"V","":"v","":"W","":"w","":"W","":"w","":"W","":"w","":"W","":"w","":"W","":"w","":"X","":"x","":"X","":"x","":"Y","":"y","":"Z","":"Z","":"Z","":"h","":"t","":"w","":"y","":"a","":"s","":"s","":"s","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"LL","":"ll","":"V","":"v","":"Y","":"y","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":"-","":"-","":"-","":"-","":"-","":"-","":"||","":"'","":"'","":",","":"'","":'"',"":'"',"":",,","":'"',"":".","":"..","":"...","":"'","":'"',"":"<","":">","":"!!","":"/","":"[","":"]","":"??","":"?!","":"!?","":"*","":" ","":"CE","":"Cr","":"Fr.","":"L.","":"Pts","":"Rs","":"TL","":"a/c","":"a/s","":"C","":"c/o","":"c/u","":"g","":"H","":"x","":"H","":"h","":"I","":"I","":"L","":"l","":"N","":"No","":"P","":"Q","":"R","":"R","":"R","":"Rx","":"TEL","":"TM","":"Z","":"Z","":"B","":"C","":"e","":"E","":"F","":"M","":"o","":"i","":"FAX","":"D","":"d","":"e","":"i","":"j","":" 1/3","":" 2/3","":" 1/5","":" 2/5","":" 3/5","":" 4/5","":" 1/6","":" 5/6","":" 1/8","":" 3/8","":" 5/8","":" 7/8","":" 1/","":"I","":"II","":"III","":"IV","":"V","":"VI","":"VII","":"VIII","":"IX","":"X","":"XI","":"XII","":"L","":"C","":"D","":"M","":"i","":"ii","":"iii","":"iv","":"v","":"vi","":"vii","":"viii","":"ix","":"x","":"xi","":"xii","":"l","":"c","":"d","":"m","":"c","":"-","":"/","":"\\","":"|","":"||","":"<<","":">>","":"(1)","":"(2)","":"(3)","":"(4)","":"(5)","":"(6)","":"(7)","":"(8)","":"(9)","":"(10)","":"(11)","":"(12)","":"(13)","":"(14)","":"(15)","":"(16)","":"(17)","":"(18)","":"(19)","":"(20)","":"1.","":"2.","":"3.","":"4.","":"5.","":"6.","":"7.","":"8.","":"9.","":"10.","":"11.","":"12.","":"13.","":"14.","":"15.","":"16.","":"17.","":"18.","":"19.","":"20.","":"(a)","":"(b)","":"(c)","":"(d)","":"(e)","":"(f)","":"(g)","":"(h)","":"(i)","":"(j)","":"(k)","":"(l)","":"(m)","":"(n)","":"(o)","":"(p)","":"(q)","":"(r)","":"(s)","":"(t)","":"(u)","":"(v)","":"(w)","":"(x)","":"(y)","":"(z)","":"A","":"B","":"C","":"D","":"E","":"F","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"Q","":"R","":"S","":"T","":"U","":"V","":"W","":"X","":"Y","":"Z","":"a","":"b","":"c","":"d","":"e","":"f","":"g","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"q","":"r","":"s","":"t","":"u","":"v","":"w","":"x","":"y","":"((","":"))","":"::=","":"==","":"===","":"L","":"l","":"L","":"P","":"R","":"a","":"t","":"H","":"h","":"K","":"k","":"Z","":"M","":"A","":"W","":"w","":"H","":"h","":"S","":"Z","":" ","":",","":".","":"0","":"<","":">","":"<<","":">>","":"[","":"]","":"[","":"]","":"[","":"]","":'"',"":'"',"":"hPa","":"da","":"AU","":"bar","":"oV","":"pc","":"dm","":"IU","":"pA","":"nA","":"mA","":"kA","":"KB","":"MB","":"GB","":"cal","":"kcal","":"pF","":"nF","":"mg","":"kg","":"Hz","":"kHz","":"MHz","":"GHz","":"THz","":"fm","":"nm","":"mm","":"cm","":"km","":"m/s","":"Pa","":"kPa","":"MPa","":"GPa","":"rad","":"rad/s","":"ps","":"ns","":"ms","":"pV","":"nV","":"mV","":"kV","":"MV","":"pW","":"nW","":"mW","":"kW","":"MW","":"a.m.","":"Bq","":"cc","":"cd","":"C/kg","":"Co.","":"dB","":"Gy","":"ha","":"HP","":"in","":"KK","":"KM","":"kt","":"lm","":"ln","":"log","":"lx","":"mb","":"mil","":"mol","":"pH","":"p.m.","":"PPM","":"PR","":"sr","":"Sv","":"Wb","":"V/m","":"A/m","":"TZ","":"tz","":"AA","":"aa","":"AO","":"ao","":"AU","":"au","":"AV","":"av","":"AV","":"av","":"AY","":"ay","":"C","":"c","":"K","":"k","":"K","":"k","":"K","":"k","":"L","":"l","":"L","":"l","":"O","":"o","":"O","":"o","":"OO","":"oo","":"P","":"p","":"P","":"p","":"P","":"p","":"Q","":"q","":"Q","":"q","":"R","":"r","":"V","":"v","":"VY","":"vy","":"Z","":"D","":"d","":"F","":"f","":"G","":"G","":"g","":"L","":"l","":"R","":"r","":"S","":"s","":"T","":"t","":"H","":"N","":"n","":"G","":"g","":"K","":"k","":"N","":"n","":"R","":"r","":"S","":"s","":"ff","":"fi","":"fl","":"ffi","":"ffl","":"st","":"st","":",","":",","":".","":":","":";","":"!","":"?","":"...","":"..","":"-","":"-","":"(","":")","":"{","":"}","":"[","":"]","":"<<","":">>","":"<","":">","":"[","":"]","":",","":",","":".","":";","":":","":"?","":"!","":"-","":"(","":")","":"{","":"}","":"[","":"]","":"#","":"&","":"*","":"+","":"-","":"<","":">","":"=","":"\\","":"$","":"%","":"@","":"!","":'"',"":"#","":"$","":"%","":"&","":"'","":"(","":")","":"*","":"+","":",","":"-","":".","":"/","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":":","":";","":"<","":"=","":">","":"?","":"@","":"A","":"B","":"C","":"D","":"E","":"F","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"Q","":"R","":"S","":"T","":"U","":"V","":"W","":"X","":"Y","":"Z","":"[","":"\\","":"]","":"^","":"_","":"`","":"a","":"b","":"c","":"d","":"e","":"f","":"g","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"q","":"r","":"s","":"t","":"u","":"v","":"w","":"x","":"y","":"z","":"{","":"|","":"}","":"~","":"((","":"))","":".","":",","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},unicodeRegex:/[\u00a0\u00a9\u00aa\u00ab\u00ad\u00ae\u00bb\u00bc\u00bd\u00be\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d7\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u00df\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f7\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe\u00ff\u0100\u0101\u0102\u0103\u0104\u0105\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u010e\u010f\u0110\u0111\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u011c\u011d\u011e\u011f\u0120\u0121\u0122\u0123\u0124\u0125\u0126\u0127\u0128\u0129\u012a\u012b\u012c\u012d\u012e\u012f\u0130\u0131\u0132\u0133\u0134\u0135\u0136\u0137\u0138\u0139\u013a\u013b\u013c\u013d\u013e\u013f\u0140\u0141\u0142\u0143\u0144\u0145\u0146\u0147\u0148\u0149\u014a\u014b\u014c\u014d\u014e\u014f\u0150\u0151\u0152\u0153\u0154\u0155\u0156\u0157\u0158\u0159\u015a\u015b\u015c\u015d\u015e\u015f\u0160\u0161\u0162\u0163\u0164\u0165\u0166\u0167\u0168\u0169\u016a\u016b\u016c\u016d\u016e\u016f\u0170\u0171\u0172\u0173\u0174\u0175\u0176\u0177\u0178\u0179\u017b\u017d\u017f\u0180\u0181\u0182\u0183\u0186\u0187\u0188\u0189\u018a\u018b\u018c\u018e\u0190\u0191\u0192\u0193\u0195\u0196\u0197\u0198\u0199\u019a\u019c\u019d\u019e\u019f\u01a0\u01a1\u01a2\u01a3\u01a4\u01a5\u01ab\u01ac\u01ad\u01ae\u01af\u01b0\u01b2\u01b3\u01b4\u01b5\u01b6\u01c4\u01c5\u01c6\u01c7\u01c8\u01c9\u01ca\u01cb\u01cc\u01cd\u01ce\u01cf\u01d0\u01d1\u01d2\u01d3\u01d4\u01d5\u01d6\u01d7\u01d8\u01d9\u01da\u01db\u01dc\u01dd\u01de\u01df\u01e0\u01e1\u01e2\u01e3\u01e4\u01e5\u01e6\u01e7\u01e8\u01e9\u01ea\u01eb\u01ec\u01ed\u01f0\u01f1\u01f2\u01f3\u01f4\u01f5\u01f8\u01f9\u01fa\u01fb\u01fc\u01fd\u01fe\u01ff\u0200\u0201\u0202\u0203\u0204\u0205\u0206\u0207\u0208\u0209\u020a\u020b\u020c\u020d\u020e\u020f\u0210\u0211\u0212\u0213\u0214\u0215\u0216\u0217\u0218\u0219\u021a\u021b\u021e\u021f\u0220\u0221\u0222\u0223\u0224\u0225\u0226\u0227\u0228\u0229\u022a\u022b\u022c\u022d\u022e\u022f\u0230\u0231\u0232\u0233\u0234\u0235\u0236\u0237\u0238\u0239\u023a\u023b\u023c\u023d\u023e\u023f\u0240\u0243\u0244\u0245\u0246\u0247\u0248\u0249\u024a\u024b\u024c\u024d\u024e\u024f\u0250\u0253\u0254\u0255\u0256\u0257\u025b\u025f\u0260\u0261\u0262\u0265\u0266\u0267\u0268\u026a\u026b\u026c\u026d\u026f\u0271\u0272\u0273\u0274\u0275\u0276\u027c\u027d\u027e\u0280\u0282\u0288\u0289\u028b\u028c\u028f\u0290\u0291\u0299\u029b\u029c\u029d\u029f\u02a0\u02a3\u02a5\u02a6\u02aa\u02ab\u1d00\u1d01\u1d03\u1d04\u1d05\u1d06\u1d07\u1d0a\u1d0b\u1d0c\u1d0d\u1d0f\u1d18\u1d1b\u1d1c\u1d20\u1d21\u1d22\u1d6b\u1d6c\u1d6d\u1d6e\u1d6f\u1d70\u1d71\u1d72\u1d73\u1d74\u1d75\u1d76\u1d79\u1d7a\u1d7b\u1d7d\u1d7e\u1d80\u1d81\u1d82\u1d83\u1d84\u1d85\u1d86\u1d87\u1d88\u1d89\u1d8a\u1d8c\u1d8d\u1d8e\u1d8f\u1d91\u1d92\u1d93\u1d96\u1d99\u1e00\u1e01\u1e02\u1e03\u1e04\u1e05\u1e06\u1e07\u1e08\u1e09\u1e0a\u1e0b\u1e0c\u1e0d\u1e0e\u1e0f\u1e10\u1e11\u1e12\u1e13\u1e14\u1e15\u1e16\u1e17\u1e18\u1e19\u1e1a\u1e1b\u1e1c\u1e1d\u1e1e\u1e1f\u1e20\u1e21\u1e22\u1e23\u1e24\u1e25\u1e26\u1e27\u1e28\u1e29\u1e2a\u1e2b\u1e2c\u1e2d\u1e2e\u1e2f\u1e30\u1e31\u1e32\u1e33\u1e34\u1e35\u1e36\u1e37\u1e38\u1e39\u1e3a\u1e3b\u1e3c\u1e3d\u1e3e\u1e3f\u1e40\u1e41\u1e42\u1e43\u1e44\u1e45\u1e46\u1e47\u1e48\u1e49\u1e4a\u1e4b\u1e4c\u1e4d\u1e4e\u1e4f\u1e50\u1e51\u1e52\u1e53\u1e54\u1e55\u1e56\u1e57\u1e58\u1e59\u1e5a\u1e5b\u1e5c\u1e5d\u1e5e\u1e5f\u1e60\u1e61\u1e62\u1e63\u1e64\u1e65\u1e66\u1e67\u1e68\u1e69\u1e6a\u1e6b\u1e6c\u1e6d\u1e6e\u1e6f\u1e70\u1e71\u1e72\u1e73\u1e74\u1e75\u1e76\u1e77\u1e78\u1e79\u1e7a\u1e7b\u1e7c\u1e7d\u1e7e\u1e7f\u1e80\u1e81\u1e82\u1e83\u1e84\u1e85\u1e86\u1e87\u1e88\u1e89\u1e8a\u1e8b\u1e8c\u1e8d\u1e8e\u1e8f\u1e90\u1e92\u1e94\u1e96\u1e97\u1e98\u1e99\u1e9a\u1e9b\u1e9c\u1e9d\u1e9e\u1ea0\u1ea1\u1ea2\u1ea3\u1ea4\u1ea5\u1ea6\u1ea7\u1ea8\u1ea9\u1eaa\u1eab\u1eac\u1ead\u1eae\u1eaf\u1eb0\u1eb1\u1eb2\u1eb3\u1eb4\u1eb5\u1eb6\u1eb7\u1eb8\u1eb9\u1eba\u1ebb\u1ebc\u1ebd\u1ebe\u1ebf\u1ec0\u1ec1\u1ec2\u1ec3\u1ec4\u1ec5\u1ec6\u1ec7\u1ec8\u1ec9\u1eca\u1ecb\u1ecc\u1ecd\u1ece\u1ecf\u1ed0\u1ed1\u1ed2\u1ed3\u1ed4\u1ed5\u1ed6\u1ed7\u1ed8\u1ed9\u1eda\u1edb\u1edc\u1edd\u1ede\u1edf\u1ee0\u1ee1\u1ee2\u1ee3\u1ee4\u1ee5\u1ee6\u1ee7\u1ee8\u1ee9\u1eea\u1eeb\u1eec\u1eed\u1eee\u1eef\u1ef0\u1ef1\u1ef2\u1ef3\u1ef4\u1ef5\u1ef6\u1ef7\u1ef8\u1ef9\u1efa\u1efb\u1efc\u1efd\u1efe\u1eff\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2010\u2011\u2012\u2013\u2014\u2015\u2016\u2018\u2019\u201a\u201b\u201c\u201d\u201e\u201f\u2024\u2025\u2026\u2032\u2033\u2039\u203a\u203c\u2044\u2045\u2046\u2047\u2048\u2049\u204e\u205f\u20a0\u20a2\u20a3\u20a4\u20a7\u20b9\u20ba\u2100\u2101\u2102\u2105\u2106\u210a\u210b\u210c\u210d\u210e\u2110\u2111\u2112\u2113\u2115\u2116\u2119\u211a\u211b\u211c\u211d\u211e\u2121\u2122\u2124\u2128\u212c\u212d\u212f\u2130\u2131\u2133\u2134\u2139\u213b\u2145\u2146\u2147\u2148\u2149\u2153\u2154\u2155\u2156\u2157\u2158\u2159\u215a\u215b\u215c\u215d\u215e\u215f\u2160\u2161\u2162\u2163\u2164\u2165\u2166\u2167\u2168\u2169\u216a\u216b\u216c\u216d\u216e\u216f\u2170\u2171\u2172\u2173\u2174\u2175\u2176\u2177\u2178\u2179\u217a\u217b\u217c\u217d\u217e\u217f\u2184\u2212\u2215\u2216\u2223\u2225\u226a\u226b\u2474\u2475\u2476\u2477\u2478\u2479\u247a\u247b\u247c\u247d\u247e\u247f\u2480\u2481\u2482\u2483\u2484\u2485\u2486\u2487\u2488\u2489\u248a\u248b\u248c\u248d\u248e\u248f\u2490\u2491\u2492\u2493\u2494\u2495\u2496\u2497\u2498\u2499\u249a\u249b\u249c\u249d\u249e\u249f\u24a0\u24a1\u24a2\u24a3\u24a4\u24a5\u24a6\u24a7\u24a8\u24a9\u24aa\u24ab\u24ac\u24ad\u24ae\u24af\u24b0\u24b1\u24b2\u24b3\u24b4\u24b5\u24b6\u24b7\u24b8\u24b9\u24ba\u24bb\u24bc\u24bd\u24be\u24bf\u24c0\u24c1\u24c2\u24c3\u24c4\u24c5\u24c6\u24c7\u24c8\u24c9\u24ca\u24cb\u24cc\u24cd\u24ce\u24cf\u24d0\u24d1\u24d2\u24d3\u24d4\u24d5\u24d6\u24d7\u24d8\u24d9\u24da\u24db\u24dc\u24dd\u24de\u24df\u24e0\u24e1\u24e2\u24e3\u24e4\u24e5\u24e6\u24e7\u24e8\u2985\u2986\u2a74\u2a75\u2a76\u2c60\u2c61\u2c62\u2c63\u2c64\u2c65\u2c66\u2c67\u2c68\u2c69\u2c6a\u2c6b\u2c6e\u2c6f\u2c72\u2c73\u2c75\u2c76\u2c7e\u2c7f\u3000\u3001\u3002\u3007\u3008\u3009\u300a\u300b\u3014\u3015\u3018\u3019\u301a\u301b\u301d\u301e\u3371\u3372\u3373\u3374\u3375\u3376\u3377\u337a\u3380\u3381\u3383\u3384\u3385\u3386\u3387\u3388\u3389\u338a\u338b\u338e\u338f\u3390\u3391\u3392\u3393\u3394\u3399\u339a\u339c\u339d\u339e\u33a7\u33a9\u33aa\u33ab\u33ac\u33ad\u33ae\u33b0\u33b1\u33b3\u33b4\u33b5\u33b7\u33b8\u33b9\u33ba\u33bb\u33bd\u33be\u33bf\u33c2\u33c3\u33c4\u33c5\u33c6\u33c7\u33c8\u33c9\u33ca\u33cb\u33cc\u33cd\u33ce\u33cf\u33d0\u33d1\u33d2\u33d3\u33d4\u33d5\u33d6\u33d7\u33d8\u33d9\u33da\u33db\u33dc\u33dd\u33de\u33df\ua728\ua729\ua732\ua733\ua734\ua735\ua736\ua737\ua738\ua739\ua73a\ua73b\ua73c\ua73d\ua73e\ua73f\ua740\ua741\ua742\ua743\ua744\ua745\ua746\ua747\ua748\ua749\ua74a\ua74b\ua74c\ua74d\ua74e\ua74f\ua750\ua751\ua752\ua753\ua754\ua755\ua756\ua757\ua758\ua759\ua75a\ua75b\ua75e\ua75f\ua760\ua761\ua762\ua779\ua77a\ua77b\ua77c\ua77d\ua77e\ua77f\ua780\ua781\ua782\ua783\ua784\ua785\ua786\ua787\ua78d\ua790\ua791\ua7a0\ua7a1\ua7a2\ua7a3\ua7a4\ua7a5\ua7a6\ua7a7\ua7a8\ua7a9\ufb00\ufb01\ufb02\ufb03\ufb04\ufb05\ufb06\ufe10\ufe11\ufe12\ufe13\ufe14\ufe15\ufe16\ufe19\ufe30\ufe31\ufe32\ufe35\ufe36\ufe37\ufe38\ufe39\ufe3a\ufe3d\ufe3e\ufe3f\ufe40\ufe47\ufe48\ufe50\ufe51\ufe52\ufe54\ufe55\ufe56\ufe57\ufe58\ufe59\ufe5a\ufe5b\ufe5c\ufe5d\ufe5e\ufe5f\ufe60\ufe61\ufe62\ufe63\ufe64\ufe65\ufe66\ufe68\ufe69\ufe6a\ufe6b\uff01\uff02\uff03\uff04\uff05\uff06\uff07\uff08\uff09\uff0a\uff0b\uff0c\uff0d\uff0e\uff0f\uff10\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19\uff1a\uff1b\uff1c\uff1d\uff1e\uff1f\uff20\uff21\uff22\uff23\uff24\uff25\uff26\uff27\uff28\uff29\uff2a\uff2b\uff2c\uff2d\uff2e\uff2f\uff30\uff31\uff32\uff33\uff34\uff35\uff36\uff37\uff38\uff39\uff3a\uff3b\uff3c\uff3d\uff3e\uff3f\uff40\uff41\uff42\uff43\uff44\uff45\uff46\uff47\uff48\uff49\uff4a\uff4b\uff4c\uff4d\uff4e\uff4f\uff50\uff51\uff52\uff53\uff54\uff55\uff56\uff57\uff58\uff59\uff5a\uff5b\uff5c\uff5d\uff5e\uff5f\uff60\uff61\uff64\x80\x82\x83\x84\x85\x86\x87\x88\x89\x8A\x8B\x8C\x8E\x90\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9A\x9B\x9C\x9E\x9F\xA1\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xAA\xAB\xAC\xAE\xAF\xB0\xB1\xB2\xB3\xB4\xB5\xB6\xB7\xB8\xB9\xBA\xBB\xBC\xBD\xBE\xBF\xC0\xC1\xC2\xC3\xC4\xC5\xC6\xC7\xC8\xC9\xCB\xCC\xCD\xCE\xCF\xD0\xD1\xD2\xD3\xD4\xD5\xD6\xD7\xD8\xD9\xDA\xDB\xDC\xDD\xDE\xDF\xE0\xE1\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xEA\xEB\xEC\xED\xEE\xEF\xF0\xF1\xF2\xF3\xF4\xF5\xF6\xF7\xF8\xF9\xFA\xFB\xFC\xFD\xFE\xFF]/g}}),define("utils/utils",["require","./globalObject","lodash","jquery","spxw/settings"],function(a){"use strict";function b(a){return a.indexOf("?")<0?"?":"&"}function c(){var a=(new Error).stack;return a=a.replace(/^[\s\S]+callStack[^\n]+/m,"Call stack:")}function d(a,b){var c=b(a);switch(c){case m:if(1==a.nodeType)for(var e=a.firstChild;e;e=e.nextSibling)if(d(e,b)==n)return n;case o:return m;case n:return n;default:throw"Invalid traverse control flag "+c}}var e=a("./globalObject"),f=a("lodash"),g=a("jquery"),h=a("spxw/settings"),i=h.debug.mobile,j=/\s+/g,k=/^(\{?([0-9a-f]){8}-([0-9a-f]){4}-([0-9a-f]){4}-([0-9a-f]){4}-([0-9a-f]){12}\}?)$/i,l=new RegExp("(^\\$)|\\.|:","g"),m=0,n=1,o=2,p={callStack:c,isBlank:function(a){return!a||f.isString(a)&&""===a||0===f.size(a)},isNotBlank:function(a){return!p.isBlank(a)},isPresent:function(a){return!(null==a)},rejectWithException:function(a,b){a.reject(b.message,b)},failedPromiseForException:function(a,b){return b=b||g.Deferred(),this.rejectWithException(b,a),b.promise()},failDeferredOnException:function(a,b){b=b||null;try{return a.call(b)}catch(a){return p.failedPromiseForException(a)}},isPromise:function(a){return f.isObject(a)&&f.isFunction(a.done)&&f.isFunction(a.fail)},RETRY_NO_ATTEMPTS_LEFT:"No attempts left",retry:function(a,b,c,d){c=c||100,d=d||function(){return!0};var e=g.Deferred();return function f(){function g(){if(b>0)e.notify(b),setTimeout(f,c);else{var a;if(arguments.length>0)a=Array.prototype.slice.call(arguments,0);else{var d=new Error(p.RETRY_NO_ATTEMPTS_LEFT);a=[d.message,d]}e.reject.apply(e,a)}}function h(a){try{a()}catch(a){g(a.message,a)}}function i(a){h(function(){d(a)?e.resolve(a):g()})}b--,h(function(){var b=a();p.isPromise(b)?b.done(i).fail(g):i(b)})}(),e.promise()},zeroPad:function(a,b){return f.padLeft(String(a),b,"0")},simpleMixin:function(a,b){var c=f.functions(b),d=f.isFunction(a);return c.forEach(function(c){var e=b[c];d?a.prototype[c]=e:a[c]=function(){return e.apply(a,arguments)}}),a},delegate:function(a,b,c){b=b||{};var d,e=b.to;if(f.isFunction(e))d=e;else if(f.isString(e))f.endsWith(e,"()")?(e=e.slice(0,-2),d=function(){return this[e]()}):d=function(){return this[e]};else{if(!f.isObject(e))throw new Error("delegatee must be an object, function or string: "+e);d=function(){return e}}if(!f.isArray(b.methods))throw new Error("methods must be an array: "+b.methods);f.each(b.methods,function(b){if(!f.isString(b))throw new Error("delegation methods must be strings: "+b);if(a[b]&&!c)throw new Error(b+" already exists; you must override");a[b]=function(){var a=d.apply(this),c=a[b];return c.apply(a,arguments)}})},concatInPlace:function(a,b){if(!f.isArray(a))throw"concatInPlace: invalid array a";if(!f.isArray(b))throw"concatInPlace: invalid array b";return f.each(b,function(b){a.push(b)}),a},concatMap:function(a,b){if(!f.isArray(a))throw"concatMap: invalid array a";var c=[];return f.each(a,function(a){var d=b(a);if(!f.isArray(d))throw"concatMap: invalid array from function result";p.concatInPlace(c,d)}),c},transliterateToASCII7:function(a,b){return b=b||" ",a.replace(h.unicodeRegex,function(a){return h.char_translation_table[a]||b})},referrer:function(){var a=e.document.referrer;return f.isEmpty(a)?a:null},isSimpleType:function(a){return null==a?!0:f.isBoolean(a)||f.isNumber(a)||f.isString(a)},mongoFieldName:function(a){return a.replace(l,"/")},isGUID:function(a){return f.isString(a)&&k.test(a)},hashCode:function(a){var b=0,c=null,d=null;if(f.isString(a))for(c=0;c<a.length;c++)d=a.charCodeAt(c),d=d>126?33:d,b=(b<<5)-b+d,b&=b;return Math.abs(b).toString(16)},noop:function(){},navigateDirectly:function(a,b,c){b=b||0,c=c||e,setTimeout(function(){c.location.assign(a)},b)},getOffsiteHandler:function(a,b,c){var d=50,e=this,f=function(c,f){b.windowOpenBlockedError(f,c),e.navigateDirectly(c,d,a)};return function(d,e){var h=e&&e.ctx?e.ctx:{},i=a.open(d);i?g(i).ready(function(){setTimeout(function(){i&&!i.closed&&i.screen&&i.screen.height||f(d,h)},0)}):f(d,h),h.tid&&h.r?b.stageConversion(h.tid,h.r):c.error("Missing required context to stage conversion",{tid:h.tid,r:h.r})}},spxTemplate:function(a,b,c){function d(a){return p.resolveUrl(h,a)}function e(a){return p.resolveUrl(g,a)}var g=null,h=null;null!=b?(g=b.get(["serverBase"]),h=b.get(["assetBase"])):null!=c&&(g=c.serverBase,h=c.assetBase),g=g||"",h=h||"";var i=f.template(a,{imports:{assetUrl:d,serverBaseUrl:e,_:f}});return c?i(c):i},walkObject:function(a,b,c){function d(a,e){var g=null,h=null;for(g in e)if(e.hasOwnProperty(g)&&(h=e[g],b(a,g,h,e),null!==h&&(f.isArray(h)||f.isObject(h)))){if(c&&h instanceof c)continue;d(""===a?g:a+"."+g,h)}}var e="";!f.isEmpty(a)&&f.isFunction(b)&&d(e,a)},objToUrlParams:function(a){var b=[];return f.each(a,function(a,c){null!==a&&void 0!==a&&"object"!=typeof a?b.push(e.encodeURIComponent(c)+"="+e.encodeURIComponent(a)):f.isArray(a)&&f.each(a,function(a){a&&b.push(e.encodeURIComponent(c)+"="+e.encodeURIComponent(a))})}),b.join("&")},cleanWhiteSpace:function(a){return null==a?"":a.replace(j," ").trim()},sanitizeString:function(a){return p.cleanWhiteSpace(p.transliterateToASCII7(a))},getWeightedRandom:function(a){for(var b=0,c=a.length,d=null,e=0,f=0;c--;)b+=a[c].weight;for(d=Math.random()*b;d>f;)f+=a[e].weight,d>f&&e++;return a[e]},urlToObject:function(a){var b,c,d={};return a.indexOf("?")!==-1?(c=a.split("?"),2===c.length&&(b=c[1].split("&"))):b=a.split("&"),f.each(b,function(a){var b,c,g=a.split("=");2===g.length&&(b=e.unescape(g[0]),c=e.unescape(g[1]),""!==b&&""!==c&&(f.isArray(d[b])?d[b].push(c):null!=d[b]?d[b]=[d[b],c]:d[b]=c))}),d},getGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},resolveUrl:function(a,b){return"/"!==a.charAt(a.length-1)&&(a+="/"),b?b.match(/^(?:(?:http|https):)?\/\//)?b:("/"===b.charAt(0)&&(b=b.substr(1)),a+b):a},isMobile:function(a,b){return null==i&&(a=a||g.spxUIWindow(),i=p.isTouchable(a,b)&&p.getViewPortInfo(a.get("head"))&&p.getViewportSize(a).width<=h.mobileDevice.width),i},clearMobile:function(){i=h.debug.mobile},isTouchable:function(a,b){var c=null;if(a&&a.jquery&&(a=a[0]),a=a||g.spxUIWindow()[0],c="ontouchstart"in a&&"ontouchend"in a.document,c&&!b)try{a.document.createEvent("TouchEvent")}catch(a){c=!1}return c},parseMetaContent:function(a){var b={};return a=a.split(/,|;|\s/),a.length&&f.each(a,function(a){var c=a.split("=");2===c.length&&(b[c[0]]=c[1])}),b},getViewPortInfo:function(a){var b={},c=null,d=null,e=null;return a=a||g.spxUIWindow().get("head"),a&&(c=a.find("meta[name=viewport]:eq(0)"),d=c.attr("name"),e=c.attr("content"),"viewport"===d&&null!=e&&(b=p.parseMetaContent(e))),b},getViewportSize:function(a){var b=a||g.spxUIWindow();try{var c=b.width(),d=b.height(),e=b.scrollTop(),f=d+e;return{top:e,bottom:f,width:c,height:d}}catch(a){return{top:0,bottom:0,width:0,height:0}}},getIEVersion:function(a){var b=-1,c=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})","i");return c.exec(a)&&(b=e.parseFloat(RegExp.$1)),b},slug:function(a,b){if(b=f.merge({trim:!0,clean:!0,beg:25,end:25,empty:"",continuation:"..."},b),b.clean&&(a=a.replace(/\s\s+/g," ")),b.trim&&(a=a.trim()),0===a.length)return b.empty;var c=b.beg+b.end;if(a.length>c){var d=a.slice(0,b.beg)+b.continuation;return b.end>0&&(d+=a.slice(-b.end)),d}return a},summarize:function(a,b){function c(a,b){return void 0===b&&(b=a),": "+p.slug(e.text(),{beg:a,end:b,empty:'""'})}function d(){var a=e.prop("tagName"),d=a,f=e.attr("id"),g=e.attr("class"),h=e.attr("itemtype"),i=[];return f&&i.push("I:"+f),g&&i.push("C:"+g),h&&i.push("T:"+h),i.length>0&&(d+="("+i.join(", ")+")"),0===b||/html|head|br|hr|script/i.test(a)||(d+=c(b||0===b?b:30,b||0)),d}var e=a instanceof g?a:g(a);if(a=e[0],!a)return"undefined";switch(a.nodeType){case 1:return d();case 3:return"TEXT"+c(b||35);case 7:return"processing instruction node";case 8:return"comment node";case 9:return"document node";case 10:return"document type node";case 11:return"document fragment node";default:return"deprecated nodeType "+a.nodeType}},decorators:{pubsub:function(a){var b={callbacks:[],subTopics:{}},c=function(a){var b=a.callbacks||[];return f.each(a.subTopics,function(a){b=b.concat(c(a))}),b},d=function(a){var c;if(a){var d=a.split(".").join(".subTopics.").split(".");d.splice(0,0,"subTopics"),c=f.get(b,d),c||(c={},f.set(b,d,c))}else c=b;return c};a.publish=function(b,e){var g;g=c(d(b)),f.each(g,function(c){c.call(a,b,e)})},a.subscribe=function(a,b){var c;return"function"==typeof a&&(b=a,a=void 0),c=d(a),c.callbacks||(c.callbacks=[]),c.callbacks.push(b),[a,b]},a.unsubscribe=function(a,b){var c;"function"==typeof a&&(b=a,a=void 0),c=d(a),c.callbacks&&f.each(c.callbacks,function(a,d){a===b&&c.callbacks.splice(d,1)})}}},createSameDomainIframe:function(a,b,c){var d='javascript:var d=document.open();d.domain="'+a.domain+'";void(0);',e=a.createElement("iframe");b.appendChild(e);try{e.contentWindow.document.open()}catch(a){e.src=d}return e.contentWindow.document.write(c),e.contentWindow.document.close(),e},dom:{traverse:{CONTINUE:m,STOP:n,SKIP_CHILDREN:o,inOrder:d,inOrderElements:function(a,b){return d(a,function(a){return 1===a.nodeType?b(a):o})}},nodeType:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},getText:function(a){var b="";if(3===a.nodeType)b=a.nodeValue;else if(8!==a.nodeType)for(var c=0,d=a.childNodes.length;d>c;++c)b+=p.dom.getText(a.childNodes[c]);return b},getVisibleText:function(a){var b,c=0,d="",e=a.nodeType;if(e){if(1===e||9===e||11===e)for(a=a.firstChild;a;a=a.nextSibling)d+=g.expr.filters.hidden(a)?"":p.dom.getVisibleText(a);else if(3===e||4===e)return a.nodeValue}else for(;b=a[c];c++)d+=p.dom.getVisibleText(b);return d}},appendQueryParams:function(a,c){return f.isEmpty(c)?a:a+b(a)+p.objToUrlParams(c)},appendHashParams:function(a,b){return f.isEmpty(b)?a:(f.contains(a,"#")?f.endsWith(a,"&")||(a+="&"):a+="#",a+p.objToUrlParams(b))},appendResParams:function(a,b){return p.appendQueryParams(a,b.get(["resParams"]))},loading:{loadDynamicScript:function(a,c,d,f){"function"==typeof e.SPXTESTMOCK?e.SPXTESTMOCK(p,a,c,d):p.loading.loadScript(a+b(a)+"callback=SPX.handle").done(d).fail(f)},loadScript:function(a,b){b=b||5e3;var c=document.createElement("script"),d=document.getElementsByTagName("script")[0],e=g.Deferred();return c.type="text/javascript",c.charset="UTF-8",c.async=!0,c.addEventListener("load",e.resolve,!0),c.src=a,d.parentNode.insertBefore(c,d),setTimeout(e.reject,b),e.promise()},loadCss:function(a,b,c){var d=g('<style type="text/css">'+a+"</style>");return d.attr(c||{}),b=b||g.spxUIDOM("head"),b.append(d),d}},hasHighValueEvent:function(a){if(a){var b=f.find(f.flattenDeep([a]),function(a){if(!f.isObject(a))return!1;var b=a.t||a.type;return b&&f.isString(b)?"u/a"===b||/\/click\//.test(b)||/u\/(lp|av)\//.test(b)||/s\/c\//.test(b):void 0});return void 0!==b}return!1},extendJQuery:function(a){return a.expr[":"].regex=function(a,b,c){var d=c[3].split(","),e=/^(data|css):/,f={method:d[0].match(e)?d[0].split(":")[0]:"attr",property:d.shift().replace(e,"")},g="ig",h=new RegExp(d.join("").replace(/^\s+|\s+$/g,""),g);return h.test(jQuery(a)[f.method](f.property))},a},poll:function(a,b){b=b||5;var c=g.Deferred(),d=function(){a()?c.resolve():setTimeout(d,b)};return d(),c.promise()},styleElement:function(a,b){a.each(function(){var a=this;f.forOwn(b,function(b,c){var d=f.isNumber(b)?b+"px":b;a.style.setProperty(c,d,"important")})})}};return p}),define("spxw/SPX",["require","utils/utils","utils/globalObject","lodash"],function(a){"use strict";var b=a("utils/utils"),c=a("utils/globalObject"),d=a("lodash"),e={},f=c.SPX||{};return b.decorators.pubsub(f),f.whenReady=function(a){f.isReady?a():f.subscribe("SPX.ready",a)},f.makeReady=function(){f.isReady||(f.isReady=!0,f.publish("SPX.ready",{}))},f.handle=function(a){function b(){var b=d.flattenDeep([a]);for(var c in b)f.publish("SPX.handle.message",b[c])}f.whenReady(b)},f.elapsedTime=function(){return(new Date).getTime()-f.epoch},f.removeSwoop=function(){function a(a,b){var d,e,f=c.document.getElementsByTagName(a);for(d=f.length;--d>=0;)if(e=b(f[d]))return e}function b(a){var b=a.getAttribute("data-rocketsrc")||a.src;return a.hasAttribute("data-domain")&&/spxw\.js/.exec(b)}function d(){return a("script",function(a){return b(a)?a:void 0})}var f=d(),g=f.parentNode,h=c.document.createElement("script");h.src=f.src+"?unique="+Date.now(),h.setAttribute("data-domain",f.getAttribute("data-domain"));var i=f.getAttribute("data-override-serverBase");i&&h.setAttribute("data-override-serverBase",i),e.spxwClone=h,e.spxwParent=g,f.remove(),c.document.querySelector('[id^="SPX_IFRAME"]').remove(),delete c.SPX},f.contentUpdated=function(){f.removeSwoop(),e.spxwParent.appendChild(e.spxwClone)},f.cleanPage=function(){var a=/\[class\^\="spx\-"\]/,b=d.map(c.document.getElementsByClassName("swoop-container"),function(a){return a});d.forEach(b,function(a){$(a).remove()}),d.forEach(c.document.querySelectorAll("[data-spx-slot]"),function(a){$(a).removeAttr("data-spx-slot");
}),d.forEach(c.document.getElementsByTagName("style"),function(b){var c=$(b);a.test(c.text())&&c.remove()}),f.removeSwoop()},f}),define("core/Reporter",["require","spxw/SPX"],function(a){"use strict";function b(){this.isDevMode=!1,this._lastClass=null}var c=a("spxw/SPX"),d=window.top,e="------- Begin SPX Message -------",f="-------- End SPX Message --------",g="color:black;background-color:silver; padding:0px 13px;margin-bottom:5px;";return b.prototype.scheduleGroupEnd=function(){clearTimeout(this.groupEndHandler);var a=this;this.groupEndHandler=setTimeout(function(){a._lastClass=null,a.console.groupEnd.call(d.console),a.logFooter()},50)},b.prototype._logHeaderMessage=function(a){this.console.log.call(d.console,"%c"+a,g)},b.prototype.noop=function(){},b.prototype.console={log:d.console&&d.console.log||b.prototype.noop,error:d.console&&d.console.error||b.prototype.noop,trace:d.console&&d.console.trace||b.prototype.noop,group:d.console&&d.console.group||b.prototype.noop,groupEnd:d.console&&d.console.groupEnd||b.prototype.noop},b.prototype.logHeader=function(){this._inLogBlock||(this._inLogBlock=!0,this._logHeaderMessage(e)),this.scheduleGroupEnd()},b.prototype.logFooter=function(){this._inLogBlock=!1,this._logHeaderMessage(f)},b.prototype.updateGroup=function(a){var b=a.join(", ");null==this._lastClass?(this._lastClass=b,this.logHeader(),this.console.group.call(d.console,this._lastClass)):this._lastClass!==b&&(this.console.groupEnd.call(d.console),this._lastClass=b,this.console.group.call(d.console,this._lastClass))},b.prototype.log=function(a){this.isDevMode&&Array.isArray(a)&&(this.updateGroup(a),this.console.log.apply(d.console,Array.prototype.slice.call(arguments,1)))},b.prototype.error=function(){var a=Array.prototype.slice.call(arguments,0),b=[];this.console.error.call(d.console,"------- Begin SPX Error -------"),this.console.error.apply(d.console,a),this.console.trace.call(d.console),this.console.error.call(d.console,"-------  End SPX Error  -------\n");for(var e=0,f=arguments.length;f>e;e++){var g=arguments[e];g&&(b.push(g),g.message&&b.push(g.message))}if(c.Analytics){var h={type:"error",details:{errorArgs:b}};c.Analytics.publish(null,h)}},b.prototype.for=function(){var a=Array.prototype.slice.call(arguments),b=this;return{log:function(){var c=Array.prototype.slice.call(arguments);c.unshift(a),b.log.apply(b,c)},error:function(){b.error.apply(b,arguments)},trace:function(){b.console.trace.apply(b,arguments)}}},new b}),function(a,b,c,d,e,f){function g(a,b){var c=typeof a[b];return"function"==c||!("object"!=c||!a[b])||"unknown"==c}function h(a,b){return!("object"!=typeof a[b]||!a[b])}function i(a){return"[object Array]"===Object.prototype.toString.call(a)}function j(){var a="Shockwave Flash",b="application/x-shockwave-flash";if(!t(navigator.plugins)&&"object"==typeof navigator.plugins[a]){var c=navigator.plugins[a].description;c&&!t(navigator.mimeTypes)&&navigator.mimeTypes[b]&&navigator.mimeTypes[b].enabledPlugin&&(C=c.match(/\d+/g))}if(!C){var d;try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),C=Array.prototype.slice.call(d.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),d=null}catch(a){}}if(!C)return!1;var e=parseInt(C[0],10),f=parseInt(C[1],10);return D=e>9&&f>0,!0}function k(){if(!S){S=!0;for(var a=0;a<T.length;a++)T[a]();T.length=0}}function l(a,b){return S?void a.call(b):void T.push(function(){a.call(b)})}function m(){var a=parent;if(""!==M)for(var b=0,c=M.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function n(b){return a.easyXDM=O,M=b,M&&(P="easyXDM_"+M.replace(".","_")+"_"),N}function o(a){return a.match(J)[3]}function p(a){return a.match(J)[4]||""}function q(a){var b=a.toLowerCase().match(J),c=b[2],d=b[3],e=b[4]||"";return("http:"==c&&":80"==e||"https:"==c&&":443"==e)&&(e=""),c+"//"+d+e}function r(a){if(a=a.replace(L,"$1/"),!a.match(/^(http||https):\/\//)){var b="/"===a.substring(0,1)?"":c.pathname;"/"!==b.substring(b.length-1)&&(b=b.substring(0,b.lastIndexOf("/")+1)),a=c.protocol+"//"+c.host+b+a}for(;K.test(a);)a=a.replace(K,"");return a}function s(a,b){var c="",d=a.indexOf("#");d!==-1&&(c=a.substring(d),a=a.substring(0,d));var e=[];for(var g in b)b.hasOwnProperty(g)&&e.push(g+"="+f(b[g]));return a+(Q?"#":a.indexOf("?")==-1?"?":"&")+e.join("&")+c}function t(a){return"undefined"==typeof a}function u(a,b,c){var d;for(var e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],"object"==typeof d?u(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function v(){var a=b.body.appendChild(b.createElement("form")),c=a.appendChild(b.createElement("input"));c.name=P+"TEST"+H,B=c!==a.elements[c.name],b.body.removeChild(a)}function w(a){t(B)&&v();var c;B?c=b.createElement('<iframe name="'+a.props.name+'"/>'):(c=b.createElement("IFRAME"),c.name=a.props.name),c.id=c.name=a.props.name,delete a.props.name,"string"==typeof a.container&&(a.container=b.getElementById(a.container)),a.container||(u(c.style,{position:"absolute",top:"-2000px",left:"0px"}),a.container=b.body);var d=a.props.src;if(a.props.src="javascript:false",u(c,a.props),c.border=c.frameBorder=0,c.allowTransparency=!0,a.container.appendChild(c),a.onLoad&&E(c,"load",a.onLoad),a.usePost){var e,f=a.container.appendChild(b.createElement("form"));if(f.target=c.name,f.action=d,f.method="POST","object"==typeof a.usePost)for(var g in a.usePost)a.usePost.hasOwnProperty(g)&&(B?e=b.createElement('<input name="'+g+'"/>'):(e=b.createElement("INPUT"),e.name=g),e.value=a.usePost[g],f.appendChild(e));f.submit(),f.parentNode.removeChild(f)}else c.src=d;return a.props.src=d,c}function x(a,b){"string"==typeof a&&(a=[a]);for(var c,d=a.length;d--;)if(c=a[d],c=new RegExp("^"==c.substr(0,1)?c:"^"+c.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),c.test(b))return!0;return!1}function y(d){var e,f=d.protocol;if(d.isHost=d.isHost||t(V.xdm_p),Q=d.hash||!1,d.props||(d.props={}),d.isHost)d.remote=r(d.remote),d.channel=d.channel||"default"+H++,d.secret=Math.random().toString(16).substring(2),t(f)&&(f=q(c.href)==q(d.remote)?"4":g(a,"postMessage")||g(b,"postMessage")?"1":d.swf&&g(a,"ActiveXObject")&&j()?"6":"Gecko"===navigator.product&&"frameElement"in a&&navigator.userAgent.indexOf("WebKit")==-1?"5":d.remoteHelper?"2":"0");else if(d.channel=V.xdm_c.replace(/["'<>\\]/g,""),d.secret=V.xdm_s,d.remote=V.xdm_e.replace(/["'<>\\]/g,""),f=V.xdm_p,d.acl&&!x(d.acl,d.remote))throw new Error("Access denied for "+d.remote);switch(d.protocol=f,f){case"0":if(u(d,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),d.isHost){if(!d.local){for(var h,i=c.protocol+"//"+c.host,k=b.body.getElementsByTagName("img"),l=k.length;l--;)if(h=k[l],h.src.substring(0,i.length)===i){d.local=h.src;break}d.local||(d.local=a)}var m={xdm_c:d.channel,xdm_p:0};d.local===a?(d.usePolling=!0,d.useParent=!0,d.local=c.protocol+"//"+c.host+c.pathname+c.search,m.xdm_e=d.local,m.xdm_pa=1):m.xdm_e=r(d.local),d.container&&(d.useResize=!1,m.xdm_po=1),d.remote=s(d.remote,m)}else u(d,{channel:V.xdm_c,remote:V.xdm_e,useParent:!t(V.xdm_pa),usePolling:!t(V.xdm_po),useResize:d.useParent?!1:d.useResize});e=[new N.stack.HashTransport(d),new N.stack.ReliableBehavior({}),new N.stack.QueueBehavior({encode:!0,maxLength:4e3-d.remote.length}),new N.stack.VerifyBehavior({initiate:d.isHost})];break;case"1":e=[new N.stack.PostMessageTransport(d)];break;case"2":d.isHost&&(d.remoteHelper=r(d.remoteHelper)),e=[new N.stack.NameTransport(d),new N.stack.QueueBehavior,new N.stack.VerifyBehavior({initiate:d.isHost})];break;case"3":e=[new N.stack.NixTransport(d)];break;case"4":e=[new N.stack.SameOriginTransport(d)];break;case"5":e=[new N.stack.FrameElementTransport(d)];break;case"6":C||j(),e=[new N.stack.FlashTransport(d)]}return e.push(new N.stack.QueueBehavior({lazy:d.lazy,remove:!0})),e}function z(a){for(var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},d=0,e=a.length;e>d;d++)b=a[d],u(b,c,!0),0!==d&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function A(a){a.up.down=a.down,a.down.up=a.up,a.up=a.down=null}var B,C,D,E,F,G=this,H=Math.floor(1e4*Math.random()),I=Function.prototype,J=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,K=/[\-\w]+\/\.\.\//,L=/([^:])\/\//g,M="",N={},O=a.easyXDM,P="easyXDM_",Q=!1;if(g(a,"addEventListener"))E=function(a,b,c){a.addEventListener(b,c,!1)},F=function(a,b,c){a.removeEventListener(b,c,!1)};else{if(!g(a,"attachEvent"))throw new Error("Browser not supported");E=function(a,b,c){a.attachEvent("on"+b,c)},F=function(a,b,c){a.detachEvent("on"+b,c)}}var R,S=!1,T=[];if("readyState"in b?(R=b.readyState,S="complete"==R||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==R||"interactive"==R)):S=!!b.body,!S){if(g(a,"addEventListener"))E(b,"DOMContentLoaded",k);else if(E(b,"readystatechange",function(){"complete"==b.readyState&&k()}),b.documentElement.doScroll&&a===top){var U=function(){if(!S){try{b.documentElement.doScroll("left")}catch(a){return void d(U,1)}k()}};U()}E(a,"load",k)}var V=function(a){a=a.substring(1).split("&");for(var b,c={},d=a.length;d--;)b=a[d].split("="),c[b[0]]=e(b[1]);return c}(/xdm_e=/.test(c.search)?c.search:c.hash),W=function(){var a={},b={a:[1,2,3]},c='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(b).replace(/\s/g,"")===c?JSON:(Object.toJSON&&Object.toJSON(b).replace(/\s/g,"")===c&&(a.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(b=c.evalJSON(),b.a&&3===b.a.length&&3===b.a[2]&&(a.parse=function(a){return a.evalJSON()})),a.stringify&&a.parse?(W=function(){return a},a):null)};u(N,{version:"2.4.19.3",query:V,stack:{},apply:u,getJSONObject:W,whenReady:l,noConflict:n}),N.DomHelper={on:E,un:F,requiresJSON:function(c){h(a,"JSON")||b.write("<"+'script type="text/javascript" src="'+c+'"><'+"/script>")}},function(){var a={};N.Fn={set:function(b,c){a[b]=c},get:function(b,c){if(a.hasOwnProperty(b)){var d=a[b];return c&&delete a[b],d}}}}(),N.Socket=function(a){var b=z(y(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){a.onReady&&a.onReady(b)}}])),c=q(a.remote);this.origin=q(a.remote),this.destroy=function(){b.destroy()},this.postMessage=function(a){b.outgoing(a,c)},b.init()},N.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];"function"==typeof d&&(b.local[c]={method:d})}var e=z(y(a).concat([new N.stack.RpcBehavior(this,b),{callback:function(b){a.onReady&&a.onReady(b)}}]));this.origin=q(a.remote),this.destroy=function(){e.destroy()},e.init()},N.stack.SameOriginTransport=function(a){var b,e,f,g;return b={outgoing:function(a,b,c){f(a),c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){g=q(a.remote),a.isHost?(u(a.props,{src:s(a.remote,{xdm_e:c.protocol+"//"+c.host+c.pathname,xdm_c:a.channel,xdm_p:4}),name:P+a.channel+"_provider"}),e=w(a),N.Fn.set(a.channel,function(a){return f=a,d(function(){b.up.callback(!0)},0),function(a){b.up.incoming(a,g)}})):(f=m().Fn.get(a.channel,!0)(function(a){b.up.incoming(a,g)}),d(function(){b.up.callback(!0)},0))},init:function(){l(b.onDOMReady,b)}}},N.stack.FlashTransport=function(a){function e(a,b){d(function(){h.up.incoming(a,j)},0)}function g(c){var d=a.swf+"?host="+a.isHost,e="easyXDM_swf_"+Math.floor(1e4*Math.random());N.Fn.set("flash_loaded"+c.replace(/[\-.]/g,"_"),function(){N.stack.FlashTransport[c].swf=k=m.firstChild;for(var a=N.stack.FlashTransport[c].queue,b=0;b<a.length;b++)a[b]();a.length=0}),a.swfContainer?m="string"==typeof a.swfContainer?b.getElementById(a.swfContainer):a.swfContainer:(m=b.createElement("div"),u(m.style,D&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),b.body.appendChild(m));var g="callback=flash_loaded"+f(c.replace(/[\-.]/g,"_"))+"&proto="+G.location.protocol+"&domain="+f(o(G.location.href))+"&port="+f(p(G.location.href))+"&ns="+f(M);m.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+e+"' data='"+d+"'>"+"<param name='allowScriptAccess' value='always'></param>"+"<param name='wmode' value='transparent'>"+"<param name='movie' value='"+d+"'></param>"+"<param name='flashvars' value='"+g+"'></param>"+"<embed type='application/x-shockwave-flash' FlashVars='"+g+"' allowScriptAccess='always' wmode='transparent' src='"+d+"' height='1' width='1'></embed>"+"</object>"}var h,i,j,k,m;return h={outgoing:function(b,c,d){k.postMessage(a.channel,b.toString()),d&&d()},destroy:function(){try{k.destroyChannel(a.channel)}catch(a){}k=null,i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){j=a.remote,N.Fn.set("flash_"+a.channel+"_init",function(){d(function(){h.up.callback(!0)})}),N.Fn.set("flash_"+a.channel+"_onMessage",e),a.swf=r(a.swf);var b=o(a.swf),f=function(){N.stack.FlashTransport[b].init=!0,k=N.stack.FlashTransport[b].swf,k.createChannel(a.channel,a.secret,q(a.remote),a.isHost),a.isHost&&(D&&a.swfNoThrottle&&u(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),u(a.props,{src:s(a.remote,{xdm_e:q(c.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:P+a.channel+"_provider"}),i=w(a))};N.stack.FlashTransport[b]&&N.stack.FlashTransport[b].init?f():N.stack.FlashTransport[b]?N.stack.FlashTransport[b].queue.push(f):(N.stack.FlashTransport[b]={queue:[f]},g(b))},init:function(){l(h.onDOMReady,h)}}},N.stack.PostMessageTransport=function(b){function e(a){if(a.origin)return q(a.origin);if(a.uri)return q(a.uri);if(a.domain)return c.protocol+"//"+a.domain;throw"Unable to retrieve the origin of the event"}function f(a){var c=e(a);c==j&&a.data.substring(0,b.channel.length+1)==b.channel+" "&&g.up.incoming(a.data.substring(b.channel.length+1),c)}var g,h,i,j;return g={outgoing:function(a,c,d){i.postMessage(b.channel+" "+a,c||j),d&&d()},destroy:function(){F(a,"message",f),h&&(i=null,h.parentNode.removeChild(h),h=null)},onDOMReady:function(){if(j=q(b.remote),b.isHost){var e=function(c){c.data==b.channel+"-ready"&&(i="postMessage"in h.contentWindow?h.contentWindow:h.contentWindow.document,F(a,"message",e),E(a,"message",f),d(function(){g.up.callback(!0)},0))};E(a,"message",e),u(b.props,{src:s(b.remote,{xdm_e:q(c.href),xdm_c:b.channel,xdm_p:1}),name:P+b.channel+"_provider"}),h=w(b)}else E(a,"message",f),i="postMessage"in a.parent?a.parent:a.parent.document,i.postMessage(b.channel+"-ready",j),d(function(){g.up.callback(!0)},0)},init:function(){l(g.onDOMReady,g)}}},N.stack.FrameElementTransport=function(e){var f,g,h,i;return f={outgoing:function(a,b,c){h.call(this,a),c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){i=q(e.remote),e.isHost?(u(e.props,{src:s(e.remote,{xdm_e:q(c.href),xdm_c:e.channel,xdm_p:5}),name:P+e.channel+"_provider"}),g=w(e),g.fn=function(a){return delete g.fn,h=a,d(function(){f.up.callback(!0)},0),function(a){f.up.incoming(a,i)}}):(b.referrer&&q(b.referrer)!=V.xdm_e&&(a.top.location=V.xdm_e),h=a.frameElement.fn(function(a){f.up.incoming(a,i)}),f.up.callback(!0))},init:function(){l(f.onDOMReady,f)}}},N.stack.NameTransport=function(a){function b(b){var c=a.remoteHelper+(h?"#_3":"#_2")+a.channel;i.contentWindow.sendMessage(b,c)}function c(){h?2!==++k&&h||g.up.callback(!0):(b("ready"),g.up.callback(!0))}function e(a){g.up.incoming(a,n)}function f(){m&&d(function(){m(!0)},0)}var g,h,i,j,k,m,n,o;return g={outgoing:function(a,c,d){m=d,b(a)},destroy:function(){i.parentNode.removeChild(i),i=null,h&&(j.parentNode.removeChild(j),j=null)},onDOMReady:function(){h=a.isHost,k=0,n=q(a.remote),a.local=r(a.local),h?(N.Fn.set(a.channel,function(b){h&&"ready"===b&&(N.Fn.set(a.channel,e),c())}),o=s(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),u(a.props,{src:o+"#"+a.channel,name:P+a.channel+"_provider"}),j=w(a)):(a.remoteHelper=a.remote,N.Fn.set(a.channel,e));var b=function(){var e=i||this;F(e,"load",b),N.Fn.set(a.channel+"_load",f),function a(){"function"==typeof e.contentWindow.sendMessage?c():d(a,50)}()};i=w({props:{src:a.local+"#_4"+a.channel},onLoad:b})},init:function(){l(g.onDOMReady,g)}}},N.stack.HashTransport=function(b){function c(a){if(p){var c=b.remote+"#"+n++ +"_"+a;(i||!r?p.contentWindow:p).location=c}}function e(a){m=a,h.up.incoming(m.substring(m.indexOf("_")+1),s)}function f(){if(o){var a=o.location.href,b="",c=a.indexOf("#");c!=-1&&(b=a.substring(c)),b&&b!=m&&e(b)}}function g(){j=setInterval(f,k)}var h,i,j,k,m,n,o,p,r,s;return h={outgoing:function(a,b){c(a)},destroy:function(){a.clearInterval(j),(i||!r)&&p.parentNode.removeChild(p),p=null},onDOMReady:function(){if(i=b.isHost,k=b.interval,m="#"+b.channel,n=0,r=b.useParent,s=q(b.remote),i){if(u(b.props,{src:b.remote,name:P+b.channel+"_provider"}),r)b.onLoad=function(){o=a,g(),h.up.callback(!0)};else{var c=0,e=b.delay/50;!function a(){if(++c>e)throw new Error("Unable to reference listenerwindow");try{o=p.contentWindow.frames[P+b.channel+"_consumer"]}catch(a){}o?(g(),h.up.callback(!0)):d(a,50)}()}p=w(b)}else o=a,g(),r?(p=parent,h.up.callback(!0)):(u(b,{props:{src:b.remote+"#"+b.channel+new Date,name:P+b.channel+"_consumer"},onLoad:function(){h.up.callback(!0)}}),p=w(b))},init:function(){l(h.onDOMReady,h)}}},N.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var h=a.indexOf("_"),i=a.substring(0,h).split(",");a=a.substring(h+1),i[0]==d&&(f="",c&&c(!0)),a.length>0&&(b.down.outgoing(i[1]+","+d+"_"+f,g),e!=i[1]&&(e=i[1],b.up.incoming(a,g)))},outgoing:function(a,g,h){f=a,c=h,b.down.outgoing(e+","+ ++d+"_"+a,g)}}},N.stack.QueueBehavior=function(a){function b(){if(a.remove&&0===h.length)return void A(c);if(!i&&0!==h.length&&!g){i=!0;var e=h.shift();c.down.outgoing(e.data,e.origin,function(a){i=!1,e.callback&&d(function(){e.callback(a)},0),b()})}}var c,g,h=[],i=!0,j="",k=0,l=!1,m=!1;return c={init:function(){t(a)&&(a={}),a.maxLength&&(k=a.maxLength,m=!0),a.lazy?l=!0:c.down.init()},callback:function(a){i=!1;var d=c.up;b(),d.callback(a)},incoming:function(b,d){if(m){var f=b.indexOf("_"),g=parseInt(b.substring(0,f),10);j+=b.substring(f+1),0===g&&(a.encode&&(j=e(j)),c.up.incoming(j,d),j="")}else c.up.incoming(b,d)},outgoing:function(d,e,g){a.encode&&(d=f(d));var i,j=[];if(m){for(;0!==d.length;)i=d.substring(0,k),d=d.substring(i.length),j.push(i);for(;i=j.shift();)h.push({data:j.length+"_"+i,origin:e,callback:0===j.length?g:null})}else h.push({data:d,origin:e,callback:g});l?c.down.init():b()},destroy:function(){g=!0,c.down.destroy()}}},N.stack.VerifyBehavior=function(a){function b(){d=Math.random().toString(16).substring(2),c.down.outgoing(d)}var c,d,e;return c={incoming:function(f,g){var h=f.indexOf("_");h===-1?f===d?c.up.callback(!0):e||(e=f,a.initiate||b(),c.down.outgoing(f)):f.substring(0,h)===e&&c.up.incoming(f.substring(h+1),g)},outgoing:function(a,b,e){c.down.outgoing(d+"_"+a,b,e)},callback:function(c){a.initiate&&b()}}},N.stack.RpcBehavior=function(a,b){function c(a){a.jsonrpc="2.0",f.down.outgoing(g.stringify(a))}function d(a,b){var d=Array.prototype.slice;return function(){var e,f=arguments.length,g={method:b};f>0&&"function"==typeof arguments[f-1]?(f>1&&"function"==typeof arguments[f-2]?(e={success:arguments[f-2],error:arguments[f-1]},g.params=d.call(arguments,0,f-2)):(e={success:arguments[f-1]},g.params=d.call(arguments,0,f-1)),j[""+ ++h]=e,g.id=h):g.params=d.call(arguments,0),a.namedParams&&1===g.params.length&&(g.params=g.params[0]),c(g)}}function e(a,b,d,e){if(!d)return void(b&&c({id:b,error:{code:-32601,message:"Procedure not found."}}));var f,g;b?(f=function(a){f=I,c({id:b,result:a})},g=function(a,d){g=I;var e={id:b,error:{code:-32099,message:a}};d&&(e.error.data=d),c(e)}):f=g=I,i(e)||(e=[e]);try{var h=d.method.apply(d.scope,e.concat([f,g]));t(h)||f(h)}catch(a){g(a.message)}}var f,g=b.serializer||W(),h=0,j={};return f={incoming:function(a,d){var f=g.parse(a);if(f.method)b.handle?b.handle(f,c):e(f.method,f.id,b.local[f.method],f.params);else{var h=j[f.id];f.error?h.error&&h.error(f.error):h.success&&h.success(f.result),delete j[f.id]}},init:function(){if(b.remote)for(var c in b.remote)b.remote.hasOwnProperty(c)&&(a[c]=d(b.remote[c],c));f.down.init()},destroy:function(){for(var c in b.remote)b.remote.hasOwnProperty(c)&&a.hasOwnProperty(c)&&delete a[c];f.down.destroy()}}},G.easyXDM=N}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),define("easyXDM",function(a){return function(){var b;return b||a.easyXDM}}(this)),define("core/storage/PersistentStore",["require","core/Reporter","module","easyXDM","rsvp"],function(a){"use strict";function b(){this.initialized=!1}var c=a("core/Reporter").for(a("module").id),d=a("easyXDM"),e=a("rsvp"),f="https://ardrone.swoop.com/web-sdk/provider/1.2/provider.html";return b.prototype.init=function(a){a=a||f;var b=this;return new e.Promise(function(e){b.initialized&&e(),c.log("Initializing..."),b.rpc=new d.Rpc({remote:a,hash:!0,onReady:function(){b.initialized=!0,c.log("Initialization Complete"),e()}},{local:{},remote:{get:{},set:{},remove:{},merge:{},reverseMerge:{},clear:{},setCookie:{}}})})},b.prototype.get=function(a){var b=this;return new e.Promise(function(c,d){b.rpc.get(a,c,d)})},b.prototype.set=function(a,b,c){var d=this;return new e.Promise(function(e,f){d.rpc.set(a,b,c,e,f)})},b.prototype.remove=function(a){var b=this;return new e.Promise(function(c,d){b.rpc.remove(a,c,d)})},b.prototype.merge=function(a){var b=this;return new e.Promise(function(c,d){b.rpc.merge(a,c,d)})},b.prototype.reverseMerge=function(a){var b=this;return new e.Promise(function(c,d){b.rpc.reverseMerge(a,c,d)})},b.prototype.clear=function(){var a=this;return new e.Promise(function(b,c){a.rpc.clear(b,c)})},b.prototype.setCookie=function(a,b,c){var d=this;return new e.Promise(function(e,f){d.rpc.setCookie(a,b,c,e,f)})},b.prototype.destroy=function(){this.rpc&&this.rpc.destroy()},new b}),define("modules/analytics/Conversion",["require","core/Reporter","core/storage/PersistentStore","jquery","rsvp"],function(a){"use strict";function b(){}var c=a("core/Reporter").for("Analytics/Conversion"),d=a("core/storage/PersistentStore"),e=a("jquery"),f=a("rsvp");return b.TTL=90*24*60*60*1e3,b.PREFIX="conv_",b.prototype.stage=function(a,b){var c=e.Deferred();return f.allSettled([this._saveCookie(a,b),this._savePersistentStore(a,b)]).then(c.resolve,c.reject),c.promise()},b.prototype._saveCookie=function(a,e){return d.setCookie(b.PREFIX+a,e,b.TTL).then(function(){c.log("Successfully stored conversion cookie")}).catch(function(a){c.error("Failed to store conversion cookie",a)})},b.prototype._savePersistentStore=function(a,e){return d.set(b.PREFIX+a,e,b.TTL).then(function(){c.log("Successfully stored conversion in persistent store")}).catch(function(a){c.error("Failed to store conversion in persistent store",a)})},b}),define("spxw/User",["require","lodash","spxw/settings","core/storage/PersistentStore","rsvp"],function(a){"use strict";function b(a){a=a||{},this.overrideUser=a.overrideUser,this.user=e.user,this.swoopUser=a.swoopUser,this.debugSettings=a.debugSettings||{},this.sid=a.sid}var c,d=a("lodash"),e=a("spxw/settings"),f=a("core/storage/PersistentStore"),g=a("rsvp"),h={dev:!0,ui:!0,test:!0,bing:!0};return b.prototype={save:function(){return f.set("userdata",this.toJSON())},getId:function(){return this.sid},updateId:function(a){return this.sid=a,this.save()},getUserName:function(){return this.user||this.overrideUser||this.swoopUser},getDebugSettings:function(){var a={};return this.getUserName()in h&&(a=this.debugSettings),a},updateDebugSettings:function(a){return d.each(a,function(a,b){this.debugSettings[b]=a,"bookmarklet"===b&&(this.overrideUser=a?"test":null,this.swoopUser="demo")},this),this.save()},toJSON:function(){return $.extend(!0,{},this)}},{getCurrentUser:function(){return c?new g.Promise(function(a){a(c)}):f.get("userdata").then(function(a){return c=new b(a)})},clearCurrentUser:function(){c=null}}}),define("modules/components/DOMAnalytics",["require","lodash"],function(a){"use strict";function b(a){this.attributes=a}var c=a("lodash");return b.prototype.ctxFields=function(){if(this._ctxFields)return this._ctxFields;var a=this.attributes;return this._ctxFields=c.omit({ct:a["data-choice-type"],ch:a["data-choice"]},c.isUndefined),this._ctxFields},b.prototype.detailFields=function(){if(this._detailsFields)return this._detailsFields;var a=this.attributes;return this._detailsFields=c.omit({cta:a["data-cta"]||a.alt||"",tgt:a["data-target"]||a["data-tgt"]||a.href,pu:a["data-purpose"],cmp:a["data-campaign"]},c.isUndefined),this._detailsFields},b._harvestFromTree=function(a,b){function d(a){return c.reduce(a.attributes,function(a,b){return a[b.name]=b.value,a},{})}if(!a.contains(b))throw"Base node is not an ancestor of target node";for(var e={},f=b;!0&&(c.defaultsDeep(e,d(f)),f=f.parentElement,a.contains(f)););return e},b.fromElements=function(a,c){return new b(b._harvestFromTree(a,c))},b}),define("utils/AnalyticsUtils",["require","spxw/SPX","core/Reporter","utils/utils","lodash","utils/globalObject","jquery","core/storage/PersistentStore","modules/components/DOMAnalytics"],function(a){"use strict";var b=a("spxw/SPX"),c=a("core/Reporter"),d=a("utils/utils"),e=a("lodash"),f=a("utils/globalObject"),g=a("jquery"),h=a("core/storage/PersistentStore"),i=a("modules/components/DOMAnalytics"),j=1e3*60*30,k={VERSION:14,touchSession:function(a){return a.time<(new Date).getTime()-j?a=k.newSession():a.time=(new Date).getTime(),h.set("analyticsSessionId",a)},newSession:function(){return{id:d.getGUID(),time:(new Date).getTime()}},loadSession:function(){var a=g.Deferred();return h.get("analyticsSessionId").then(function(a){return a=a||k.newSession(),k.touchSession(a)}).then(function(b){a.resolve(b)}).catch(function(b){a.reject(b)}),a.promise()},mergeAnalyticsContext:function(a,b,c){return g.extend(!0,a,c,b)},publishAnalyticsEvent:function(a,b,d,e){c.log(["Analytics"],"About to publish event "+a,{type:a,details:d,ctx:b}),e.publish(null,{type:a,ctx:b,details:d})},getAnalyticsEventFactory:function(a,c,h,i,j,l){return function(m){var n,o,p,q={},r=c.getUserName(),s=a.get(["resParams"]);o=s.h,o&&o!=i&&(p=o),n=g.extend(!0,{},a.get(["analyticsCTX"])||{}),n.tsspx=b.elapsedTime();var t=f.performance&&f.performance.timing;t&&t.domComplete&&t.domLoading&&(n.tsdl=t.domComplete-t.domLoading);var u=d.referrer();u&&(n.ref=u),n.t=d.isMobile()?2:1,q.endpoint=m.endpoint,q.t=m.type;var v=new Date;return q.ts=v.getTime(),q.tso=-(v.getTimezoneOffset()||0),q.v=k.VERSION,q.ctx=k.mergeAnalyticsContext(n,m.ctx,{ip:s.ip,uid:n.uid||c.getId(),sid:h.id,url:i,curl:p,did:j,z:n.z||a.get(["resParams"]).z}),q.d=m.details,"default"!==l&&(q.ctx.iid=l),r&&(q.ctx.ut=r),d.walkObject(q,function(a,b,c,f){e.isString(c)&&"curl"!==b&&(f[b]=d.sanitizeString(c))},g),q}},_v14simpleHintFactory:function(a){var b=0,c=0;return function(d,f){var g=!1,h=!1;return{placementReady:function(c,d){g||(g=!0,d=d||{},d.po=b++,e.merge(f,c),k.publishAnalyticsEvent("s/pr",f,d,a))},visible:function(b,d){h||(h=!0,d=d||{},d.do=c++,e.merge(f,b,{data:d}),k.publishAnalyticsEvent("s/v",f,d,a))},configError:function(b,c){k.publishAnalyticsEvent("error/dsl/config",f,{config:c,err:b},a)},serviceError:function(b,c){k.publishAnalyticsEvent("error/dsl/service",f,{config:c,err:b},a)},strategyError:function(b,c){var d={action:(b||"").toString(),i:c};k.publishAnalyticsEvent("e/strategy/unknown",f,d,a)},placementError:function(b,c){var d=e.isObject(b)?b:{r:(b||"").toString()};"uiTooLarge"===d.r&&(d.r="uiFit"),d.i=c,k.publishAnalyticsEvent("e/p",f,d,a)},click:function(b,c){return e.merge(f,b),k.publishAnalyticsEvent("u/click/"+d,f,c,a),{ctx:f,details:c}},clickIgnored:function(b,c){e.merge(f,b),k.publishAnalyticsEvent("u/click/ignored",f,c,a)},remnantInventory:function(b,c){k.publishAnalyticsEvent(b,f,c,a)}}}},summaryCollector:function(a,b,c,f){function g(){j=setTimeout(h,a.wait)}function h(){i||(i=!0,clearTimeout(j),a.onBeforeSend(),k.publishAnalyticsEvent(a.type,b,c,f))}var i=!1,j=null;return a=e.extend({type:"s/auto",wait:1e3,onBeforeSend:d.noop,autoStart:!1},a),b=b||{},c=c||{},a.autoStart&&g(),{start:g,send:h,get:function(a){return c[a]||0},increment:function(a,b){b=null==b?1:b,c[a]=this.get(a)+b}}},startEndFactory:function(a,b,c,d){var e=null,f=b||{},h=c||{};return{start:function(b,c){f=g.extend(!0,b,f),h=g.extend(!0,h,c),e=new Date,k.publishAnalyticsEvent(a+"/b",f,h,d)},end:function(b,c){f=g.extend(!0,b,f),h=g.extend(!0,h,c,{time:new Date-e}),k.publishAnalyticsEvent(a+"/e",f,g.extend(!0,{},h),d),delete h.time,e=null}}},getDOMDetails:function(a,b,c){var d=i.fromElements((b||a)[0],a[0]).detailFields();return g.extend(!0,d,c)},DOMClickFactory:function(a,b,c,d,e,f){function h(b){var d,h=g(b.target),l=g(b.currentTarget),m=h.data("analytics"),n=null,o=b.pageX,p=b.pageY,q=null,r=null;m&&(d=h.parents().find("#"+m),d.length&&(h=l=d)),n=i.fromElements(l[0],h[0]).detailFields(),r=h.attr("id"),r&&null==n.src&&(n.src=r),o&&p&&(n.x=o,n.y=p),q="u/click/"+a,"function"==typeof f&&f(q,c,n),j(c,n),k.publishAnalyticsEvent(q,c,n,e)}var j=function(){};return b.bind("click",h),{onClick:function(a){j=a},destroy:function(){b.unbind("click",h)}}},locationIdError:function(a,b,c){if(!/^root/.test(b)){var d="e/locationId",e={locationId:b};k.publishAnalyticsEvent(d,a,e,c)}},placementError:function(a,b,c,d){var f="e/placement/"+a.type;c=c||{msg:a.message,data:e.isObject(a.data)?a.data:{info:a.data}},b=b||{},k.publishAnalyticsEvent(f,b,c,d)},componentError:function(a,b,c,d){var f="e/comp";c=c||{},b=b||{},a instanceof Error?e.extend(c,{name:a.name,msg:a.message,stack:a.stack}):e.extend(c,{msg:a.message,data:e.isObject(a.data)?a.data:{info:a.data},stack:(new Error).stack}),k.publishAnalyticsEvent(f,b,c,d)},windowOpenBlockedError:function(a,b,c){var d={destinationUrl:b};k.publishAnalyticsEvent("e/click/wb",a,d,c)}};return k}),define("modules/GoogleAnalytics",["spxw/SPX","utils/globalObject","core/Reporter"],function(a,b,c){"use strict";function d(){!function(a,c){if(!c){var d,e=a.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"===b.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",d=a.getElementsByTagName("script")[0],d.parentNode.insertBefore(e,d)}}(b.document,b._gaq)}function e(a,c,e){this.gaId=c,this._gaq=b._gaq,this._gat=b._gat,this.id=a,this._loadGaFN=e||d}var f=function(){};return e.prototype={loadGoogleAnalytics:function(a){function d(){b._gaq?(f._gaq=b._gaq,f._gat=b._gat,f._gaq.push(function(){f._gat._createTracker(f.gaId,f.id),a()})):e.total>=e.maximum?(c.error("Analytics failed to load in SPX after "+e.total+"ms. Analytics will not be recorded."),a("ga did not init")):(b.setTimeout(d,e.retryInterval),e.total+=e.retryInterval)}var e={retryInterval:300,maximum:3e3,total:0},f=this;null==b._gaq?(this._loadGaFN(),d()):this._gaq=b.gaq},init:function(a){var b=this;a=a||f,null==this._gaq?(c.log(["analytics"],"Initializing Google Analytics "+this.id+" "+this.gaId),this.loadGoogleAnalytics(a)):(this._gaq.push(function(){b._gat._createTracker(b.gaId,b.id)}),a())},trackPageView:function(){this._gaq.push([this.id+"._trackPageview",b.location.hostname])},trackTiming:function(a,b,c,d){this._gaq.push(["_trackTiming",a,b,c,d])},trackEvent:function(a,b,c){this._gaq.push([this.id+"._trackEvent",a,b,c])}},e}),define("modules/analytics.spx",["require","spxw/SPX","modules/analytics/Conversion","utils/utils","spxw/User","utils/AnalyticsUtils","core/Reporter","modules/GoogleAnalytics","lodash"],function(a){"use strict";function b(a){if(!g)throw new Error("No logUrl");if(!a)throw new Error("Empty event");var b=a.endpoint||g;delete a.endpoint,$.ajax({url:b,type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8",data:JSON.stringify([a])}).done(function(){m.log(["analytics.spx"],"Sent event ",a)})}function c(a){var b=a.ctx||{},c=a.t,d="system",e=null,g=a.d?a.d.tgt:void 0;p&&!a.u&&(c&&0===c.indexOf("u")&&(d="user"),b.tsspx&&f.trackTiming(d,c,b.tsspx),b.tid&&(e=b.tid),e?f.trackEvent(e,c,g):f.trackEvent(d,c))}function d(a,d){var e=h.Analytics.getAnalyticsEvent(d);
b(e),c(e)}function e(a){var b=a.mode||"dev",c=a.resParams.h;a.ga&&a.ga[b]&&(m.log(["analytics"],"initializing Google analytics",b,a.ga[b]),f=new n("SPX"+b,a.ga[b]),f.init(function(){p=!0,f.trackPageView(),m.log(["analytics"],"Google analytics ready")})),h.DataStore.extend({analyticsCTX:a.analyticsCTX||{}});var e=a.resParams||{};h.DataStore.extend({analyticsCTX:{pg:e.pg,b:e.b,bv:e.bv,o:e.o,bp:e.bp,cc:e.cc,fs:o.get(e,"fs",null),u:a.user}}),k.getCurrentUser(h.DataStore).then(function(a){l.loadSession(h.DataStore).then(function(b){var e=h.DataStore.get(["domain"]);h.Analytics.getAnalyticsEvent=l.getAnalyticsEventFactory(h.DataStore,a,b,c,e,void 0);var f=h.DataStore.get(["logBase"])||h.DataStore.get(["serverBase"]);g=j.resolveUrl(f,"s/log"),h.Analytics.subscribe(d),h.publish("SPX.Analytics.initialized",{})})})}var f,g,h=a("spxw/SPX"),i=a("modules/analytics/Conversion"),j=a("utils/utils"),k=a("spxw/User"),l=a("utils/AnalyticsUtils"),m=a("core/Reporter"),n=a("modules/GoogleAnalytics"),o=a("lodash"),p=!1;return{initAnalytics:function(a){h.Analytics.sendEvent=function(a,b,c){l.publishAnalyticsEvent(a,b||{},c||{},h.Analytics)},h.Analytics.v14HintFactory=function(){return l._v14simpleHintFactory(h.Analytics)},h.Analytics.summaryCollector=function(a,b,c){return l.summaryCollector(a,b,c,h.Analytics)},h.Analytics.startEndFactory=function(a,b,c){return l.startEndFactory(a,b,c,h.Analytics)},h.Analytics.getDOMDetails=function(a,b,c){return l.getDOMDetails(a,b,c)},h.Analytics.domClickFactory=function(a,b,c,d,e){return l.DOMClickFactory(a,b,c,d,h.Analytics,e)},h.Analytics.placementError=function(a,b,c){l.placementError(a,b,c,h.Analytics)},h.Analytics.locationIdError=function(a,b){l.locationIdError(a,b,h.Analytics)},h.Analytics.windowOpenBlockedError=function(a,b){l.windowOpenBlockedError(a,b,h.Analytics)},h.Analytics.componentError=function(a,b,c){l.componentError(a,b,c,h.Analytics)},h.Analytics.stageConversion=function(a,b){return(new i).stage(a,b)},e(a)}}}),define("modules/spxcontroller/SlinkAnchorService",["require","utils/utils","lodash"],function(a){"use strict";function b(a){this.location=a.location,this.unescape=a.unescape,this.escape=a.escape}var c=a("utils/utils"),d=a("lodash"),e="swoop:/",f=/^(https|http)/i;return b.prototype={parseUrl:function(a,b){var d=this.parseSlink(a);return null==d&&f.test(a)&&(d={args:c.urlToObject(a),isExternal:!0,url:a,uri:a}),null!=d&&(d.context=b||{}),d},parseSlink:function(a){var b,d,f=null;return a=a&&a.path?a.path:a,b=a.indexOf(e),b!==-1&&(f={},d=a.substr(a.indexOf(e)+e.length-1,a.length),f.args=c.urlToObject(a),f.uri=d,f.url=a,f.isExternal=!1),f},get:function(){var a=null;return null!=this.location.hash&&(a=this.unescape(this.location.hash)),a},getSlink:function(){var a=this.get(),b=null;return a&&(b={path:a}),b},createSlink:function(a,b){var f=c.resolveUrl(e,a);return d.isEmpty(b)||(f+="?"+c.objToUrlParams(b)),this.escape(f)}},b}),define("slink",["require","spxw/SPX","modules/spxcontroller/SlinkAnchorService","utils/utils","utils/globalObject"],function(a){"use strict";var b=a("spxw/SPX"),c=a("modules/spxcontroller/SlinkAnchorService"),d=a("utils/utils"),e=a("utils/globalObject"),f=new c(e),g="noext";return{load:function(a,c,e,h){var i=f.parseSlink(a),j=b.DataStore.get(["serverBase"]),k="s/p"+d.appendResParams(i.uri,b.DataStore),l=d.resolveUrl(j,k);l+="&callback=SPX.define",c([l],function(a){var c;if(a.moduleUrl)c=a.moduleUrl;else{var f=b.DataStore.get(["assetBase"]);c=d.resolveUrl(f,a.modulePath)}var h={};c+=c.indexOf("?")<0?"?":"&",c=c+g+"=1",h[a.moduleId]=c,requirejs.config({paths:h}),e(a)})}}}),define("utils/BaseObject",["require","lodash"],function(a){"use strict";function b(){return this.constructor.__super__}function c(a,c,d){var f,g=function(){};return f=c&&c.hasOwnProperty("constructor")?c.constructor:function(){a.apply(this,arguments)},e.extend(f,a),g.prototype=a.prototype,f.prototype=new g,f.prototype._super=b,c&&e.extend(f.prototype,c),d&&e.extend(f,d),f.prototype.constructor=f,f.__super__=a.prototype,f}function d(){}var e=a("lodash");return d.extend=function(a,b){var d=c(this,a,b);return d.extend=this.extend,d},d}),define("modules/Bookmarklet",["require","jquery","utils/globalObject","utils/BaseObject","spxw/User","core/storage/PersistentStore"],function(a){"use strict";function b(a,b,c,e){b.find("#SPXClear").on("click",function(){b.text(c),g.init().then(function(){f.getCurrentUser(a).then(function(a){a.updateDebugSettings({bookmarklet:e}).then(function(){d.setTimeout(function(){d.parent.location.reload(!0)},1500)}).catch(function(){d.alert("Cannot update bookmarklet value in user store to "+e)})}).catch(function(){d.alert("Cannot retrieve user data to update bookmarklet value")})})})}var c=a("jquery"),d=a("utils/globalObject"),e=a("utils/BaseObject"),f=a("spxw/User"),g=a("core/storage/PersistentStore"),h="SPXBookmarklet";return e.extend({constructor:function(a){this.$ele=a||c.spxUIDOM("."+h)},onClickOn:function(a,c){return b(a,this.$ele,c,!0),this},onClickOff:function(a,c){return b(a,this.$ele,c,!1),this},show:function(){return null==this.added&&(this.added=!0,c.spxUIDOM("body").append(this.$ele)),this.$ele.show(),this},hide:function(){return this.$ele.hide(),this}},{create:function(a,b,d){var e=c("<div>");return e.html(a),e.addClass(h),e.css({position:"fixed","z-index":"2147483647",top:0,left:0,"background-color":b||"#BD362F",padding:"5px",color:d||"white","text-align":"center",width:"100%","box-shadow":" 0px 2px 2px 2px rgba(80, 80, 80, .33)"}),new this(e)}})}),define("spxw/loader/userLoader",["require","spxw/User","spxw/SPX","modules/Bookmarklet"],function(a){"use strict";var b=a("spxw/User"),c=a("spxw/SPX"),d=a("modules/Bookmarklet"),e=["<strong>Click your bookmarklet now!</strong>",'<small id="SPXClear" style="cursor:pointer;text-decoration:underline;float:right;display:inline-block;margin-right:30px;">clear</small>'].join("\n");return function(a,f,g,h){b.getCurrentUser(a).then(function(b){h.user=b;var f=b.getUserName(),i=b.getDebugSettings();c.reporter.isDevMode=c.reporter.isDevMode||null!=f||"isBookmarklet"in c,i.bookmarklet&&!c.isBookmarklet?(d.create(e,"limegreen","black").onClickOff(a,"Clearing Override, page will refresh when complete...").show(),c.isBookmarklet=!1,c.reporter.log(["userLoader"],"Stopping SPX setup, bookmarklet override detected"),g.reject()):g.resolve()}).catch(function(a){c.reporter.error(["userLoader"],"getCurrentUser() failed: "+a)})}}),define("spxw/loader/analyticsSessionLoader",["require","utils/AnalyticsUtils"],function(a){"use strict";var b=a("utils/AnalyticsUtils");return function(a,c,d,e){b.loadSession(a).done(function(a){e.session=a,d.resolve()})}}),define("spxw/loader/resParamsLoader",["require","core/Reporter","spxw/settings","utils/utils","utils/globalObject","core/storage/PersistentStore"],function(a){"use strict";var b=a("core/Reporter"),c=a("spxw/settings"),d=a("utils/utils"),e=a("utils/globalObject"),f=a("core/storage/PersistentStore");return function(a,g,h,i){f.get("selectedZipCode").then(function(g){f.get("selectedCountryCode").then(function(f){var j=a.get(["resParams"])||{};j.ref=d.referrer(),j.sid=i.session.id,j.uid=j.uid||i.user&&i.user.getId(),j.xcv=c.extractor.version,j.xsv=j.xcv,j.z=g||j.z,j.cc=f||j.cc;var k=d.urlToObject(e.location.search).swtags;k&&(j.swtags=k),a.extend({resParams:j}),b.log(["SPX"],"Processing on "+j.d+" with "+j.pg,j),h.resolve()})})}}),define("spxw/loader/stopSpxLoader",["require","jquery","core/Reporter","spxw/settings"],function(a){"use strict";var b=a("jquery"),c=a("core/Reporter"),d=a("spxw/settings");return function(a,e,f,g){b.spxUIDOM(d.disableSelector).length?(a.extend({message:"found disable selector "+d.disableSelector}),c.log(["SPX"],"found page disable marker in DOM",d.disableSelector),f.reject("disabled")):f.resolve()}}),define("spxw/loader/initLoader",["require","core/Reporter","utils/globalObject","utils/utils"],function(a){"use strict";function b(a){var b=a.get(["serverBase"]),c=f.resolveUrl(b,"s/init");return c=f.appendResParams(c,a)}function c(a,b){return h+b[g]+".js"}var d=a("core/Reporter"),e=a("utils/globalObject"),f=a("utils/utils"),g="spx-init",h="https://s3.amazonaws.com/spx-static/init-response/";return function(a,h,i,j){var k=f.urlToObject(e.location.search),l=k[g]?c:b,m=l(a,k);d.log(["initLoader"],"Requesting: "+m),f.loading.loadDynamicScript(m,d,function(){var b=a.get(["resParams"]).uid;b&&j.user.getId()!==b&&j.user.updateId(b),i.resolve()})}}),function(){var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],b=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,e=d&&location.protocol&&location.protocol.replace(/\:/,""),f=d&&location.hostname,g=d&&(location.port||void 0),h=[];define("text",[],function(){var i,j;return i={version:"1.0.8",strip:function(a){if(a){a=a.replace(b,"");var d=a.match(c);d&&(a=d[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var b,c,d;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(c=0;3>c;c++){d=a[c];try{b=new ActiveXObject(d)}catch(a){}if(b){a=[d];break}}return b},parseName:function(a){var b=!1,c=a.indexOf("."),d=a.substring(0,c),e=a.substring(c+1,a.length);return c=e.indexOf("!"),c!==-1&&(b=e.substring(c+1,e.length),b="strip"===b,e=e.substring(0,c)),{moduleName:d,ext:e,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e,f,g,h=i.xdRegExp.exec(a);return h?(e=h[2],f=h[3],f=f.split(":"),g=f[1],f=f[0],!(e&&e!==b||f&&f!==c||(g||f)&&g!==d)):!0},finishLoad:function(a,b,c,d,e){c=b?i.strip(c):c,e.isBuild&&(h[a]=c),d(c)},load:function(a,b,c,h){if(h.isBuild&&!h.inlineText)return void c();var j=i.parseName(a),k=j.moduleName+"."+j.ext,l=b.toUrl(k),m=h&&h.text&&h.text.useXhr||i.useXhr;!d||m(l,e,f,g)?i.get(l,function(b){i.finishLoad(a,j.strip,b,c,h)}):b([k],function(a){i.finishLoad(j.moduleName+"."+j.ext,j.strip,a,c,h)})},write:function(a,b,c,d){if(h.hasOwnProperty(b)){var e=i.jsEscape(h[b]);c.asModule(a+"!"+b,"define(function () { return '"+e+"';});\n")}},writeFile:function(a,b,c,d,e){var f=i.parseName(b),g=f.moduleName+"."+f.ext,h=c.toUrl(f.moduleName+"."+f.ext)+".js";i.load(g,c,function(b){var c=function(a){return d(h,a)};c.asModule=function(a,b){return d.asModule(a,h,b)},i.write(a,g,c,e)},e)}},i.createXhr()?i.get=function(a,b){var c=i.createXhr();c.open("GET",a,!0),c.onreadystatechange=function(a){4===c.readyState&&b(c.responseText)},c.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node?(j=require.nodeRequire("fs"),i.get=function(a,b){var c=j.readFileSync(a,"utf8");0===c.indexOf("\ufeff")&&(c=c.substring(1)),b(c)}):"undefined"!=typeof Packages&&(i.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}),i})}(),define("text!css/spxw.css",[],function(){return'.swoop-container,[class^="spx-"]{-moz-box-sizing:content-box!important;-webkit-box-sizing:content-box!important;box-sizing:content-box!important;background:transparent!important;border:0!important;color:#000!important;cursor:pointer!important;font-size:100%!important;font-weight:normal!important;line-height:normal!important;margin:0!important;padding:0!important;text-decoration:none!important;text-indent:0!important;vertical-align:baseline!important;white-space:normal!important}.swoop-container div{display:block!important}.swoop-container span{display:inline!important}.spx-img{background:transparent none!important;display:inline!important;height:auto!important;width:auto!important}.spx-block{display:block!important}.spx-inline{display:inline!important}.spx-underline{text-decoration:underline!important}.spx-linked-text{color:#256bb8!important;padding-bottom:1px!important;text-decoration:underline!important}.spx-linked-text:hover{color:#2c89e9!important}.spx-gray-text{color:#808080!important}.spx-bold{font-weight:bold!important}.spx-clear-fix:before,.spx-clear-fix:after{content:""!important;display:table!important}.spx-clear-fix:after{clear:both!important}.swoop-container .spx-button-base{display:inline-block!important;font-family:"Trebuchet MS",Helvetica,sans-serif!important}.swoop-container .spx-button-base .spx-button-default{-moz-border-radius:6px!important;-webkit-border-radius:6px!important;border-radius:6px!important;font-size:14px!important;text-shadow:2px 2px 0 rgba(0,0,0,0.2)!important;display:table!important;border-collapse:collapse!important;position:relative!important}.swoop-container .spx-button-base .spx-button-default:hover *{background-color:rgba(0,0,0,0.3)!important;color:#fff!important}.swoop-container .spx-button-base .spx-button-default.spx-button-shine-on{background-image:url(\'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC4xNiIvPjxzdG9wIG9mZnNldD0iNTElIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAuMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==\')!important;background-size:100%!important;background-image:-webkit-gradient(linear,50% 0,50% 100%,color-stop(50%,rgba(255,255,255,0.16)),color-stop(51%,rgba(0,0,0,0)))!important;background-image:-moz-linear-gradient(top,rgba(255,255,255,0.16) 50%,rgba(0,0,0,0) 51%)!important;background-image:-webkit-linear-gradient(top,rgba(255,255,255,0.16) 50%,rgba(0,0,0,0) 51%)!important;background-image:linear-gradient(to bottom,rgba(255,255,255,0.16) 50%,rgba(0,0,0,0) 51%)!important}.swoop-container .spx-button-base .spx-button-default .spx-button-logo{-moz-border-radius:6px 0 0 6px!important;-webkit-border-radius:6px!important;border-radius:6px 0 0 6px!important;background:rgba(0,0,0,0.2) url(\'<%= assetUrl("images/white-swoop-icon.png")%>\') center no-repeat!important;bottom:0!important;left:0!important;position:absolute!important;top:0!important;width:33px!important}.swoop-container .spx-button-base .spx-button-default .spx-button-cta{-moz-border-radius:0 6px 6px 0!important;-webkit-border-radius:0!important;border-radius:0 6px 6px 0!important;color:#ecf0f1!important;font-weight:bold!important;line-height:17px!important;padding:6px 10px 6px 46px!important;vertical-align:middle!important}.swoop-container .spx-button-base .spx-button-classic{background-color:transparent!important;font-size:13px!important}.swoop-container .spx-button-base .spx-button-classic .spx-button-logo{-moz-border-radius:5px 0 0 5px!important;-webkit-border-radius:5px!important;border-radius:5px 0 0 5px!important;background-color:#f60!important;background-position:2px center!important;background-size:16px!important;bottom:auto!important;height:12px!important;margin-top:-8px!important;padding:0!important;top:50%!important;width:16px!important}.swoop-container .spx-button-base .spx-button-classic .spx-button-cta{-moz-border-radius:5px!important;-webkit-border-radius:5px!important;border-radius:5px!important;-moz-box-shadow:inset 0 2px 0 0 rgba(255,255,255,0.2),inset 0 -3px 2px 0 rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.2)!important;-webkit-box-shadow:inset 0 2px 0 0 rgba(255,255,255,0.2),inset 0 -3px 2px 0 rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.2)!important;box-shadow:inset 0 2px 0 0 rgba(255,255,255,0.2),inset 0 -3px 2px 0 rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.2)!important;background-color:#d80c2d!important;font-weight:100!important;line-height:20px!important;margin-bottom:3px!important;margin-left:16px!important;padding-left:10px!important;text-shadow:none!important}.swoop-container .spx-button-base .spx-button-classic .spx-button-cta:hover{background-color:#e63d3d!important}.swoop-container .spx-button-base .spx-button-white,.swoop-container .spx-button-base .spx-button-white-border{background-color:transparent!important;height:34px!important}.swoop-container .spx-button-base .spx-button-white:hover *,.swoop-container .spx-button-base .spx-button-white-border:hover *{background-color:transparent!important}.swoop-container .spx-button-base .spx-button-white .spx-button-logo,.swoop-container .spx-button-base .spx-button-white-border .spx-button-logo{-moz-border-radius:20px!important;-webkit-border-radius:20px!important;border-radius:20px!important;-moz-transition:all .2s ease-in-out!important;-o-transition:all .2s ease-in-out!important;-webkit-transition:all .2s ease-in-out!important;transition:all .2s ease-in-out!important;background-color:#e74c3c!important;bottom:auto!important;margin-top:-16px!important;height:33px!important;top:50%!important;width:33px!important}.swoop-container .spx-button-base .spx-button-white .spx-button-logo:hover,.swoop-container .spx-button-base .spx-button-white-border .spx-button-logo:hover{background-color:#c0392b!important}.swoop-container .spx-button-base .spx-button-white .spx-button-cta,.swoop-container .spx-button-base .spx-button-white-border .spx-button-cta{-moz-transition:all .2s ease-in-out!important;-o-transition:all .2s ease-in-out!important;-webkit-transition:all .2s ease-in-out!important;transition:all .2s ease-in-out!important;color:#2980b9!important;font-size:13px!important;font-weight:bold!important;padding:8px 0 8px 40px!important;text-shadow:0 0 0 #fff!important;text-decoration:underline!important}.swoop-container .spx-button-base .spx-button-white .spx-button-cta:hover,.swoop-container .spx-button-base .spx-button-white-border .spx-button-cta:hover{background-color:transparent!important;color:#2980b9!important;text-shadow:0 0 0 #fff!important;text-decoration:none!important}.swoop-container .spx-button-base .spx-button-white .spx-button-ad-on,.swoop-container .spx-button-base .spx-button-white-border .spx-button-ad-on{background:url(\'<%= assetUrl("images/ad_icon.png")%>\') right no-repeat!important;padding-right:31px!important}.swoop-container .spx-button-base .spx-button-white-border{background-color:transparent!important}.swoop-container .spx-button-base .spx-button-white-border .spx-button-cta{-moz-border-radius:10px!important;-webkit-border-radius:10px!important;border-radius:10px!important;background-color:#fff!important;border:1px solid #f3e0de!important;line-height:20px!important;padding:6px 10px 6px 22px!important;margin-left:16px!important}.swoop-container .spx-button-base .spx-button-white-border .spx-button-ad-on{padding-right:31px!important}.swoop-container .spx-button-seagreen{background-color:#16a085!important}.swoop-container .spx-button-midnight{background-color:#2c3e50!important}.swoop-container .spx-button-brightred{background-color:#e74c3c!important}.swoop-container .spx-button-orange{background-color:#d35400!important}.swoop-container .spx-button-green{background-color:#2ecc71!important}.swoop-container .spx-button-blue{background-color:#2980b9!important}.swoop-container .spx-button-purple{background-color:#8e44ad!important}.swoop-container .spx-ft-base{display:table!important;font-family:"Trebuchet MS",Helvetica,sans-serif!important;padding:10px 0!important}.swoop-container .spx-ft-base .spx-ft-text{display:table-cell!important;max-width:360px!important;vertical-align:middle!important}.swoop-container .spx-ft-base .spx-ft-text .spx-ft-headline{line-height:28px!important;font-size:16px!important;font-weight:bold!important}.swoop-container .spx-ft-base .spx-ft-text .spx-ft-headline:hover{text-decoration:underline!important}.swoop-container .spx-ft-base .spx-ft-text .spx-ft-description{font-size:13px!important;line-height:18px!important;font-weight:normal!important}.swoop-container .spx-ft-base .spx-ft-text .spx-ft-isi{font-family:\'Arial\',\'sans-serif\'!important;font-size:13px!important;line-height:18px!important;color:#808080!important}.swoop-container .spx-ft-base .spx-ft-cta{display:table-cell!important;padding-left:10px!important;vertical-align:middle!important}.swoop-container .spx-ft-base .spx-ft-cta .spx-ft-button{background-color:#ff2e2e!important;background-repeat:no-repeat!important}.swoop-container .spx-ft-base .spx-ft-cta .spx-ft-button:hover{background-color:#ff245e!important}.swoop-container .spx-ft-base .spx-ft-cta .spx-ft-button:active{background-color:#ff2e2e!important}body div.spx_mobile_lp{background:rgba(0,0,0,0.8)!important;position:fixed!important;height:100%!important;left:0!important;right:0!important;bottom:0!important;top:0!important;width:100%!important;z-index:2147483647!important}body div.spx_mobile_lp iframe{position:fixed!important;top:0!important;left:0!important;bottom:0!important;right:0!important;background:transparent!important;height:100%!important;width:100%!important}body div.spx_landing_page{background:url("<%= assetUrl(\'images/background.png\')%>") repeat!important;height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:2147483647!important}body div.spx_landing_page>div{-webkit-border-radius:6px!important;-moz-border-radius:6px!important;-border-radius:6px!important;border:none!important;margin:0 auto!important;width:94%!important;height:100%!important;max-width:920px!important;min-width:920px!important;padding:0!important}body div.spx_landing_page iframe{height:100%!important;width:100%!important;min-height:500px!important;-webkit-border-radius:6px!important;-moz-border-radius:6px!important;-border-radius:6px!important}body div.spx_landing_page div.spx_close{cursor:pointer!important;background:url("<%= assetUrl(\'images/close_icon_sb.png\')%>") no-repeat!important;display:block!important;height:30px!important;float:right!important;position:relative!important;width:30px!important;top:68px!important;right:-30px!important}body div.spx_landing_page div.spx_loading{background-color:transparent!important;left:50%!important;padding:20px!important;text-align:center!important;top:30px!important;width:100%!important}body div.spx_landing_page div.spx_status{background:#fff url("<%= assetUrl(\'images/loading_logo.gif\')%>") center no-repeat!important;height:167px!important;margin:7px auto!important;width:960px!important}.swoop-container{filter:alpha(opacity=0)!important;opacity:0!important;-moz-transition:opacity,cubic-bezier(0.02,0.01,0.47,1) 200ms!important;-o-transition:opacity,cubic-bezier(0.02,0.01,0.47,1) 200ms!important;-webkit-transition:opacity,cubic-bezier(0.02,0.01,0.47,1) 200ms!important;transition:opacity,cubic-bezier(0.02,0.01,0.47,1) 200ms!important}.spx-iab-headline,.spx-mc-headline{color:#6d7173!important;font-size:13px!important;line-height:1em!important;margin:0 8px 16px 8px!important}.spx-edh-container{box-sizing:border-box!important;overflow:hidden!important}.spx-edh-headline{color:#787878!important;font-size:11px!important;line-height:1em!important;margin:4px 0 0 0!important;overflow:hidden!important;text-transform:uppercase!important;width:300px!important}.spx-swrap{margin-bottom:2px!important;overflow:hidden!important}.spx-swrap .swoop-container .spx-adwords-iab.spx-ai-content{background:#fff url(\'<%= assetUrl("images/swoop-circle-logo-34.png")%>\') no-repeat 10px 50%!important;background-position:10px 50%!important;display:block!important;padding:15px 20px 15px 64px!important}.spx-swrap .swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-headline{font-size:24px!important;line-height:26px!important}.spx-swrap .swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc div{font-size:18px!important;line-height:24px!important}.spx-swrap .swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc .spx-ai-b,.spx-swrap .swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc .spx-ai-w{display:inline-block!important;position:relative!important}.spx-swrap .swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc .spx-ai-arrow{background:url(\'<%= assetUrl("images/arrows-34w.png")%>\') no-repeat!important;height:30px!important;position:absolute!important;right:-46px!important;top:-4px!important;width:36px!important}.spx-swrap .swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-isi{font-size:14px!important;line-height:20px!important}.spx-swrap .swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-url{font-size:16px!important;line-height:24px!important;padding:2px 0 2px 0!important}.modelListingPageContainer aside .spx-cad-wrapper{max-width:300px!important}@media print{.swoop-container *{display:none!important;visibility:hidden!important}}'}),define("spxw/loader/uiLoader",["require","text!css/spxw.css","utils/utils"],function(a){"use strict";var b=a("text!css/spxw.css"),c=a("utils/utils");return function(a,d,e){var f=c.spxTemplate(b,a,{});c.loading.loadCss(f),e.resolve()}}),define("spxw/loader/globalEventsLoader",["require","jquery","spxw/settings","utils/utils","lodash"],function(a){"use strict";var b=a("jquery"),c=a("spxw/settings"),d=a("utils/utils"),e=a("lodash");return function(a,f,g){function h(){f.publish(c.globalEvents.viewportChange,d.getViewportSize())}var i=b.spxUIWindow();i.scroll(e.throttle(h,100,{leading:!1})),i.resize(e.throttle(h,100,{leading:!1})),g.resolve()}}),define("utils/DynamicInvoker",["require","utils/BaseObject","lodash"],function(a){"use strict";var b=a("utils/BaseObject"),c=a("lodash"),d=[];return b.extend({constructor:function(a){this.methodChain=a||[]},invoke:function(a){return c.reduce(this.methodChain,function(a,b){var c=a[b[0]];return c.apply(a,b[1]||d)},a)}})}),define("modules/extractors/utils",["require","jquery","lodash","spxw/settings","utils/utils","utils/DynamicInvoker"],function(a){"use strict";function b(a){if(a.is(":hidden")){var b=a.get(0).getBoundingClientRect();return 0===b.width&&0===b.height}return!1}function c(a){return a.is(":empty")}function d(a){return a.hasClass(u.domClassNames.wrapper)}function e(a,b){return t.any(b,function(b){return a.is(b)})}function f(a,f){var g=a[0];return g.tagName.match(K)?!1:g.tagName.match(J)?!0:!(d(a)||e(a,f)||b(a)||c(a))}function g(a,b){if(0===a.length)return!1;if(a.length>1)throw"NODELEN "+a.length+": "+a.html();switch(a[0].nodeType){case 1:var c=a.data(P);return void 0===c&&(c=f(a,b),a.data(P,c)),c;case 3:case 9:return!0;case 11:throw"FRAGMENT: CSS behavior is unpredictable";default:return!1}}function h(a,b){return a.contents().filter(function(){return g(s(this),b)}).text()}function i(a,b){return s.contains(a,b.getElement())}function j(a,b,c,d){function e(){return b.length>d}c=c||[];var f=c.length;if(0===f||b.length===f)return a;if(f>1){var g=c[f-1].$ele;if(g&&g.length){var h=g.get(0);if(1===h.nodeType&&!h.tagName.match(/^br$/i))for(var j=c[f-1].$ele.get(0);j;j=j.parentElement)if(i(j,c[f-2])){if(e(j))break;return s(j)}}}return c[f-1].$ele}function k(a){function b(b){for(var c=a.children.length;--c>=0&&"ingredient"!==a.children[c].urn;)if(i(b,a.children[c]))return!0;return!1}var c=a.findChildren("ingredient"),d=c.length;if(!c[d-1].$ele.get(0).tagName.match(/^br$/i)&&d>1)for(var e=c[d-1].$ele.get(0);e;e=e.parentElement)if(i(e,c[d-2])){if(b(e))break;return s(e)}return c[d-1].$ele}function l(a){var b=null,c=null,d=a.getElement();return d&&1===d.nodeType&&(c=d.tagName,t.isString(c)&&(b=O[c.toLowerCase()])),b||N}function m(a){return a&&a.header?a.header.getWeight():N}function n(a,b){function c(a){var b=j[a]||0;return b++,j[a]=b,a+"-"+b}function d(a){return"recipe"===a?"food.recipe":"ingredient"===a?"food.ingredient":a}function e(a){var b;return null!=a&&a.length&&(b=a[0].tagName,t.isString(b)&&(b=b.toLowerCase())),b}function f(a){var b={};return a.ensureComplete(),b.type=M[a.urn]||M[a.type],a.header?(b.header=f(a.header),a.children||(b.sections=[])):b.text=a.getCleanText(),""===b.text&&delete b.text,null==b.type&&delete b.type,b.id=a.getHash(),"0"!==b.id&&(b.id=c(b.id),i[b.id]={$node:a.$ele,text:b.text,config:a.config}),a.microformat&&(b.urn=d(a.microformat.urn),b.microformat=a.microformat.schema),b.style={tagName:e(a.$ele)},b}function g(a,b,c){for(var d=0,e=null,h=null,j=null,k=null,l=[];d<a.length;d++)e=a[d],h=f(e),null==b.sections&&(b.sections=[]),b.sections.push(h),e.children&&g(e.children,h);for(d=0,k=b.sections||[];d<k.length;d++)j=k[d],"0"!==j.id||c||(l.push(d),delete i[j.id]);do d=l.pop(),null!=d&&k.splice(d,1);while(l.length);b.sections&&0===b.sections.length&&delete b.sections}function h(a){var b=f(a);return a.children&&g(a.children,b,"microformat_page"===a.urn),b}var i={},j={},k=h(a);k.microformat?b.sections=[k]:b.sections=k.sections;var l="";return t.each(b.sections,function(a){l+=a.id}),{extraction:b,lookup:i,fingerprint:v.hashCode(l)}}function o(a,b){b&&0!==b.length||(b=s.spxUIDOM("html"));var c;if(t.isArray(a))for(var d in a){var e=a[d];if(t.isString(e))c=b.find(e);else{var f=new w(e);c=f.invoke(b)}if(c.length>0)break}else{if(!t.isString(a))throw"Invalid selector: "+a;c=b.find(a)}return c?c:s()}function p(a){return t.reduce(a,function(a,b){var c=o(b);return a.add(c)},s())}function q(a){for(var b=[],c=a[0];c;)b.push(v.summarize(c,0)),c=c.parentElement;return{path:b.reverse()}}function r(a){return a&&(t.isString(a)?a=v.sanitizeString(a):t.forOwn(a,function(b,c){a[c]=r(b)})),a}var s=a("jquery"),t=a("lodash"),u=a("spxw/settings"),v=a("utils/utils"),w=a("utils/DynamicInvoker"),x="text_snip",y="text_snip_bold",z="text_block",A="text_break",B="generic_list",C="detail_list",D="food.ingredient_list",E=/^(?:a|abbr|acronym|b|bdo|big|cite|code|dfn|em|i|u|pre|q|small|span|strong|strike|sub|sup|tt|font)$/i,F=/^(?:b|big|strong)$/i,G=/^(?:article|blockquote|body|center|header|main|section|div|li|p|(?:h[1-9])|ul|ol|dl|dt|dd)$/i,H=/^h[1-6]$/i,I=/^br$/i,J=/^(?:BODY|BR|HTML)$/i,K=/^(?:ADDRESS|AFTER|ASIDE|AUDIO|BDI|BDO|BUTTON|CANVAS|CITE|CODE|DATA|DATALIST|DEL|DETAILS|EMBED|FB:[A-Z]+|FIELDSET|FIGCAPTION|FIGURE|FOOTER|FORM|HEAD|HR|INPUT|INS|IFRAME|KBD|KEYGEN|LABEL|LEGEND|MAP|MATH|METER|NAV|NOSCRIPT|OBJECT|OPTGROUP|OPTION|OUTPUT|PROGRESS|RP|RT|RUBY|S|SAMP|SELECT|SCRIPT|SUMMARY|SVG|TEXTAREA|TIME|VAR|VIDEO|WB)$/i,L=/^(?:CAPTION|TABLE|TABLEDATA|TBODY|TD|TH|TR)$/i,M={text_block:void 0,generic_list:"list",detail_list:"detail_list","food.ingredient_list":"list"},N=50,O={h1:500,h2:450,h3:400,h4:350,h5:300,h6:250,b:200,strong:200,big:200},P="scr";return{TEXT_SNIP:x,TEXT_SNIP_BOLD:y,TEXT_BLOCK:z,TEXT_BREAK:A,GENERIC_LIST:B,DETAIL_LIST:C,INGREDIENT_LIST:D,INLINE_ELE:E,BOLD_INLINE_ELE:F,BLOCK_ELE:G,BOLD_BLOCK_ELE:H,BREAK_ELE:I,IGNORED_ELE:L,URN_LOOKUP:M,findAfterIngredientsElement:k,findAfterListElement:j,getText:h,scrapableNode:g,getTextWeight:l,getHeaderWeight:m,convertToContentTree:n,isIgnored:e,isHiddenSubtree:b,resolveSelector:o,combineSelectors:p,summarizeElementLocation:q,sanitizeValue:r}}),define("modules/pageConfig/ConfigBase",["require","modules/extractors/utils"],function(a){"use strict";var b=a("modules/extractors/utils"),c={resolveSelector:function(a){var c=this._selectors||this._selector;return c?b.resolveSelector(c,a):a}},d={mixin:c};return d}),define("modules/Slot",["require","utils/BaseObject","core/Reporter"],function(a){"use strict";function b(a){var b="1"===a.attr(f);return b||a.attr(f,"1"),!b}function c(a){a.attr(f,"0")}var d=a("utils/BaseObject"),e=a("core/Reporter"),f="data-spx-slot",g={NEW:10,INACTIVE:20,ACTIVE:30};return d.extend({constructor:function(a,b,c){this.name=a,this.$node=b,this.config=c,this.history=[],this._transitionTo(g.NEW,"created")},deactivate:function(a){return this.state===g.ACTIVE&&c(this.$node),this._transitionTo(g.INACTIVE,a?"deactivated: "+a:"deactivated"),!0},activate:function(){return this.state!==g.NEW&&this._invalidTransition(g.ACTIVE),
b(this.$node)?(this._transitionTo(g.ACTIVE,"activated"),!0):(this.deactivate("priority"),!1)},_transitionTo:function(a,b){b=b||"transition",b+=" ("+this.state+" => "+a+")",this._recordHistory(b),this.state=a},_recordHistory:function(a){this.history.push({ts:new Date,state:this.state,msg:a})},_invalidTransition:function(a){this._error("invalid transition from "+this.state+" to "+a)},_error:function(a){throw a="Slot "+this.name+" error: "+a,this._recordHistory("Error: "+a),e.log(["Slot"],a),new Error(a)}},g)}),define("modules/placements/slotElementValidator",["require","utils/BaseObject","utils/utils","lodash","spxw/settings"],function(a){"use strict";function b(a){var b=a[0].tagName;return m.defaultSlotElements.test(b)}function c(a){var b=a.contents(),c=b[0];return 1!==b.length||c.nodeType===n.TEXT_NODE||!m.emphasisElements.test(c.tagName)}function d(a){var b=a[0].textContent.trim(),c=a.children().get();return""!==b||0===c.length||!k.all(c,function(a){return"BR"===a.tagName})}function e(a){var b=a[0],c=b.textContent.trim();return"BR"===b.tagName?!0:j.isNotBlank(c)}function f(a){var b=a[0];if("BR"!==b.tagName)return!0;for(var c=b.previousSibling;c&&c.nodeType!==n.ELEMENT_NODE&&c.nodeType>n.ENTITY_NODE&&c.textContent&&""===c.textContent.trim();)c=c.previousSibling;return c&&"BR"===c.tagName}function g(a){function c(a){return a.textNodeCount>0||!a.node}function d(a){return 0===a.inlineElementCount&&b($(a.node))}function e(a,b){return 0===a.inlineElementCount&&a.node?b.test(a.node.tagName):!1}var f=a[0],g=h(f,"next"),i=h(f,"previous"),j=c(g)||d(g)||e(g,m.neighborElements),k=c(i)||d(i);return k&&j}function h(a,b){for(var c=b+"Sibling",d=a[c],e=0,f=0;d;){if(d.nodeType===n.TEXT_NODE)e++;else{if(!d.tagName||!m.inlineElements.test(d.tagName))break;f++}d=d[c]}return{textNodeCount:e,inlineElementCount:f,node:d}}var i=a("utils/BaseObject"),j=a("utils/utils"),k=a("lodash"),l=a("spxw/settings"),m=l.slotDefaults.filters.slot,n=j.dom.nodeType;return i.extend({_unitTestAccess:{elementAllowed:b,doubleBreak:f,notHeading:c,notBreaking:d,neighborsAllowed:g},validators:[b,f,c,d,e,g]})}),define("modules/placements/slotOffsetValidator",["require","utils/BaseObject","lodash","spxw/settings"],function(a){"use strict";function b(a){if("BR"!==a.prop("tagName"))return a.offset();var b=$("<div></div>");b.insertBefore(a);var c=b.offset();return b.remove(),c}function c(a){return e.find(a.siblings().get().reverse(),function(a){return $.spxMeta(a).isSlotCandidate()})}var d=a("utils/BaseObject"),e=a("lodash"),f=a("spxw/settings"),g=f.slotDefaults.placement.offsets;return d.extend({constructor:function(a){0===a.length?(this.minimumOffsetToFirst=g.minimumToFirst,this.minimumOffset=g.minimumToPrev):1===a.length?(this.minimumOffsetToFirst=a[0],this.minimumOffset=g.minimumToPrev):(this.minimumOffsetToFirst=a[0],this.minimumOffset=a[1])},spacingAllowed:function(a){var d,e,f=c(a);if(f){var g=$(f);d=b(g).top+g.height(),e=this.minimumOffset}else d=b(a.parent()).top,e=this.minimumOffsetToFirst;return b(a).top-d>=e}})}),define("modules/placements/slotCandidateValidator",["require","utils/BaseObject","lodash","modules/placements/slotElementValidator","modules/placements/slotOffsetValidator"],function(a){"use strict";function b(a){var b=a[2];return function(a){return a.is(b)}}var c=a("utils/BaseObject"),d=a("lodash"),e=a("modules/placements/slotElementValidator"),f=a("modules/placements/slotOffsetValidator");return c.extend({constructor:function(a){var c=new e(a),g=new f(a),h=d.bind(g.spacingAllowed,g),i=d.isString(a[2])?!1:!0;this.validators=i?c.validators.concat([h]):[b(a)].concat([h])},validate:function(a){function b(a){return a.map(function(a){return a.bind(c)})}var c=this;return d.all(b(this.validators),function(b){return b(a)})}})}),define("modules/placements/sizzleSlot",["require","utils/jqueryUtils","modules/placements/slotCandidateValidator"],function(a,b,c){"use strict";var d=function(a,b){var c=$(a),d=c.parent();return d.spx().areChildrenProcessedForSlots()||(e(d,b),d.spx().setChildrenProcessedForSlots(!0)),c.spx().isSlotCandidate()},e=function(a,b){var d=new c(b);a.children().each(function(a,b){var c=$(b);d.validate(c)&&c.spx().setSlotCandidate(!0)})};return{bind:function(a){return b.bindPseudo(a,"slot",d)}}}),define("modules/pageConfig/SlotConfig",["require","jquery","lodash","utils/utils","modules/Slot","modules/pageConfig/ConfigBase","modules/placements/sizzleSlot"],function(a){"use strict";var b=a("jquery"),c=a("lodash"),d=a("utils/utils"),e=a("modules/Slot"),f=a("modules/pageConfig/ConfigBase");a("modules/placements/sizzleSlot").bind(b);var g=["_selector","_selectors","optional","multi","name"],h="SlotConfig",i=b.extend({},f.mixin,{addSlots:function(a){this.slots||(this.slots=[]);var b=this.resolveSelector(a);if(b)for(var c=0;c<b.length;++c){var f=this.name+"."+d.zeroPad(this.slots.length+1,3),g=new e(f,b.eq(c),this);this.slots.push(g)}return this},isValid:function(){var a=this.slots;return 0===a.length?this.optional||this._validationError("optional: true"):a.length>1&&!this.multi&&this._validationError("multi: true"),!this.validationError},newlyActivatedSlots:function(){return c.filter(this.slots,function(a){return a.state===e.NEW&&a.activate()})},summarize:function(){return c.pick(this,g)},_validationError:function(a){var b=this.name+" matches "+this.slots.length+" nodes without "+a;this.validationError=b,c.each(this.slots,function(a){a.deactivate(b)})}}),j={TYPE:h,createFromDomainConfig:function(a,b){return d.simpleMixin(b,i),b._type=h,b.name=a,b}};return j}),define("modules/pageConfig/ContentConfig",["require","jquery","lodash","utils/utils","modules/pageConfig/ConfigBase","modules/pageConfig/SlotConfig"],function(a){"use strict";var b=a("jquery"),c=a("lodash"),d=a("utils/utils"),e=a("modules/pageConfig/ConfigBase"),f=a("modules/pageConfig/SlotConfig"),g="ContentConfig",h=b.extend({},e.mixin,{children:function(){return this._childSections||(this._childSections=c.filter(this,function(a,b){var d=("_"!==b[0]||"_element"===b)&&!c.isFunction(a)&&c.isObject(a);return d&&(a._name=b),d})),this._childSections}}),i={TYPE:g,createFromDomainConfig:function(a){function b(a){d.simpleMixin(a,h),a._type=g;var c=a._slots;if(c)for(var e in c)f.createFromDomainConfig(e,c[e]);for(var i=a.children(),j=0;j<i.length;++j){var k=i[j];b(k)}}return a.children||b(a),a}};return i}),define("spxw/DomainConfig",["require","utils/BaseObject","lodash","spxw/settings","modules/pageConfig/ContentConfig"],function(a){"use strict";var b=a("utils/BaseObject"),c=a("lodash"),d=a("spxw/settings"),e=a("modules/pageConfig/ContentConfig"),f=6,g=10;return b.extend({constructor:function(a){if(this.config=a,this.config.content||(this.config.content={}),this.config._placementConstraints||(this.config._placementConstraints={}),this.config._placementConstraints.slotLimit||(this.config._placementConstraints.slotLimit={medium:f,icon:g}),this.useSwoopLite()){if(!this.mainContentSelector())throw new Error("Using Swoop Lite requires defining main content.")}else if(this.useFreeFormExtractor())throw new Error("Using the free-form extractor in domain config extractions requires Swoop Lite placement.");if(this.useFreeFormExtractor()){var b=d.extractor.discovery.defaultSlotConfigs.article;this.setAutoConfig(b)}},setAutoConfig:function(a){this.config.content._slots||this.noAutomaticSlots()||(this.config.content._slots={after_slot:a})},extractors:function(){var a,b=this.config._extract;if(b){if(!c.isString(b))throw new Error("_extract must be a string.");if(a=b.replace(/\s+/g,"").split(",").filter(Boolean),0===a.length)throw new Error("Extractors defined but empty.")}return a},setContent:function(a){var b=a.selector.replace(/^body\s+/i,"");this.config.content._selector=b},mainContentSelector:function(){function a(a){return a&&(a._selector||a._selectors)}var b=this.config.content;return this.config.mainContent||a(b)||a(b.recipe)||a(b.article)},hasSlotConfig:function(){function a(b){return c.isObject(b)&&(b._slots||c.some(b,a))}return a(this.config.content)},addContentTag:function(a){this.hasContentTag(a)||(this.contentTags.push(a),this.config.content._tags=this.contentTags.join(","))},hasContentTag:function(a){if(!this.contentTags){var b=(this.config.content._tags||"").toString();this.contentTags=b.replace(/\s+/,"").split(",").filter(Boolean)}return!!c.find(this.contentTags,function(b){return b===a})},ignoresPlacementLocations:function(){return this.useSwoopLite()},noAutomaticSlots:function(){return this.hasContentTag("no_auto_slots")},useFreeFormExtractor:function(){return this.hasContentTag("use_free_form")},useSwoopLite:function(){return this.hasContentTag("swl")},useOriginalFreeFormExtractor:function(){return this.hasContentTag("ff1")},useUrnIds:function(){return this.hasContentTag("use_urn_ids")},placementConstraints:function(){return this.config._placementConstraints},rootContentConfig:function(){return this._rootContentConfig||(this._rootContentConfig=e.createFromDomainConfig(this.config.content))}})}),define("spxw/ExtractionContext",["require","jquery","utils/globalObject","spxw/DomainConfig","lodash"],function(a){"use strict";function b(a){c.extend(this,a)}var c=a("jquery"),d=a("utils/globalObject"),e=a("spxw/DomainConfig"),f=a("lodash");return b.fromDataStore=function(a){return new b({version:a.get(["v"])||"2.0",parameters:a.get(["resParams"])||{},config:a.get(["domainconfig"])||{},placements:a.get(["placements"])||[],options:a.get(["extractor","options"])||{},mainContent:a.get(["mainContent"])||{},pageIntake:a.get(["pageIntake"]),slots:a.get(["slots"])||[]})},b.prototype={pageId:function(){return null!=this._pageId?this._pageId:this.parameters.h},domainConfig:function(){return this._domainConfig||(this._domainConfig=new e(this.config)),this._domainConfig},shouldExtract:function(){return null!=d.SPX_INTAKE&&d.SPX_INTAKE!==-1||this.pageIntake!==-1||!this.domainConfig().ignoresPlacementLocations()||this.hasIconPlacement()},hasIconPlacement:function(){return!!f.find(this.placements,{strategy:{action:"iconRight"}})}},b}),define("utils/elementTagger",["require","jquery"],function(a){function b(a){return d+a}var c=a("jquery"),d="spxt_",e={tagElement:function(a,c){a.addClass(b(c))},untagElement:function(a,c){a.removeClass(b(c))},hasTag:function(a,c){return a.hasClass(b(c))},closestAncestorOrSelf:function(a,d,e){for(var f=b(d),g=a;g.length;){if(g.hasClass(f))return g;if(e&&g.is(e))break;g=g.parent()}return c()},elementsTagged:function(a,d,e){d=d||c.spxUIRoot(),null==e&&(e=!0);var f=b(a),g="."+f,h=d.find(g);return e&&(1===d.length?d.hasClass(f)&&(h=h.add(d)):d.each(function(){c(this).hasClass(f)&&(h=h.add(this))})),h},concatMapTaggedElements:function(a,b,c){var d=e.elementsTagged(a,c);return d.concatMap(b)}};return e}),define("utils/objectFromConfig",["require","lodash"],function(a){"use strict";var b=a("lodash");return{isRecognized:function(a){return b.isObject(a)&&b.isString(a._module)},create:function(c){var d=a(c._module),e=b.omit(c,"_module"),f=new d(e);return f}}}),define("utils/configFactory",["require","lodash","utils/objectFromConfig"],function(a){"use strict";var b=a("lodash"),c=a("utils/objectFromConfig");return{instantiate:function(a){var d={};return b.forOwn(a,function(a,b){c.isRecognized(a)&&(a=c.create(a)),d[b]=a}),d}}}),define("modules/extractors/ingredients",[],function(){"use strict";function a(){for(var a="",b=0;b<arguments.length;++b)a&&(a+="|"),a+="(?:"+arguments[b]+")";return a}function b(a){return new RegExp(a,"im")}var c=60,d=.91,e=1.5,f=1.075,g=1.05,h=1.0625,i=.0075,j="(?:^\\s*)",k="(?:\\s*$)",l="(?!"+k+")",m="(?:\\d+(?:\\s+|\\s*&\\s*))?\\d+(?:[./]\\d+)?",n="\\d*\\s*[\\u00bc-\\u00be]",o=a("One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten"),p=a(m,n,"\\b(?:"+o+")\\b"),q=a("(?:teaspoon|tablespoon|tsp|tbsp|can|cup|ounce|pound|slice|package|gram|lb|quart|gallon|kg|kilo|milliliter|pint|handful|jar|packet|stick|square|drop)s?","(?:pinch|dash|bunch|package)(?:es)?","half|halves","Ml","Oz","Pkg","g"),r=b(j+p),s=b(q+l),t=b(a("\\bTo\\s+taste\\b",j+"(?:"+p+")\\s*(?:"+q+")\\b",j+"(?:"+p+")\\s*(?:\\d+[-\\s]+(?:oz|ounce|quart|gram|ml))\\s+(?:can|jar|package|container|box)\\b"));return{noopMatcher:{match:function(){return{}}},ingredientScore:function(a,b){b=b||this.noopMatcher;var j=0,k=1,l=a;return a&&a.length>2&&(l.match(t)?(l=l.replace(t,""),k*=e):(l.match(r)&&(l=l.replace(r,""),k*=g),l.match(s)&&(l=l.replace(s,""),k*=f)),l.match(/\w/)&&(j=d*k,b.match(a).match&&(j*=h),j*=1-Math.max(0,Math.min(1,(a.length-c)*i)))),j}}}),define("modules/extractors/textAnalysis",["utils/utils","modules/extractors/ingredients"],function(a,b){"use strict";function c(b){var c=a.sanitizeString(b).match(f);return c?c.length:0}function d(c){c=a.sanitizeString(c);var d=b.ingredientScore(c);return d>=g}function e(a){var b=c(a);return b>0?b:d(a)?1:0}var f=/['"A-Z][^.!?]*(?:[.!?](?!['"]?\s|$)[^.!?]*)*[.!?]+['"]?(?=\s|$)/gm,g=1.1;return{sentenceCount:c,isIngredient:d,robustSentenceCount:e}}),define("modules/extractors/TextLengthCalculator",["jquery"],function(a){"use strict";function b(a){this.leafElementFilter=a.leafElementFilter,this.fnTextLength=a.fnTextLength}return b.prototype={textLength:function(b,c){c=c||a.spxMeta(b);var d=0;if(b)switch(b.nodeType){case 1:if(this.isLeafElement(b,c)){var e=c.textContent();d=this.fnTextLength(e)}else for(var f=b.firstChild;f;)d+=a.spxMeta(f).textLength(),f=f.nextSibling;break;case 3:d=this.fnTextLength(b.textContent)}return d},isLeafElement:function(a,b){return this.leafElementFilter.matches(a.nodeName)&&!b.subtreeMayHaveContentRegion()}},b}),define("modules/extractors/NonContent",["require","jquery","lodash"],function(a){"use strict";function b(a){this.idAndClassFilter=a.idAndClassFilter,this.tagNameFilter=a.tagNameFilter,this.microdataFilter=a.microdataFilter,this.textFilter=a.textFilter}var c=a("jquery"),d=a("lodash");return b.prototype={ignoreElementHeuristics:[function(a){var b=a.prop("tagName");return!this.tagNameFilter.matches(b)},function(a){var b=a.attr("id")+" "+a.attr("class");return!this.idAndClassFilter.matches(b)},function(a){var b=a.attr("itemtype");return!this.microdataFilter.matches(b)}],ignoreTextHeuristics:[function(a){return!this.textFilter.matches(a)}],_any:function(a,b){var c=this;return d.any(b,function(b){return b.call(c,a)})},_includedElement:function(a){return"BODY"===a[0].nodeName},ignoreElement:function(a){return!this._includedElement(a)&&this._any(a,this.ignoreElementHeuristics)},ignoreText:function(a){return this._any(a,this.ignoreTextHeuristics)},isNonContent:function(a){var b;if(a instanceof c&&(b=a,a=a[0]),a)switch(a.nodeType){case 1:return this.ignoreElement(b||c(a));case 3:return this.ignoreText(a.textContent);case 9:return!1}return!0}},b}),define("modules/extractors/ContentRegionMeta",["jquery"],function(a){"use strict";function b(a){this.topLevelElementFilter=a.topLevelElementFilter}return b.prototype={couldBeRoot:function(b,c){return b instanceof a&&(b=b[0]),1===b.nodeType&&this.topLevelElementFilter.matches(b.nodeName)&&(c||a.spxMeta(b)).isContent()}},b}),define("modules/extractors/contentConfig",["require","lodash","spxw/settings","utils/configFactory","modules/extractors/textAnalysis","modules/extractors/TextLengthCalculator","modules/extractors/NonContent","modules/extractors/ContentRegionMeta"],function(a){"use strict";function b(a){if(null!==j)throw"Cannot instantiate more than one ContentConfig";this.setConfig(a)}var c=a("lodash"),d=a("spxw/settings"),e=a("utils/configFactory"),f=a("modules/extractors/textAnalysis"),g=a("modules/extractors/TextLengthCalculator"),h=a("modules/extractors/NonContent"),i=a("modules/extractors/ContentRegionMeta"),j=null;return b.prototype={reset:function(){return this._nonContent=void 0,this._textLengthCalculator=void 0,this._contentRegionMeta=void 0,this},setConfig:function(a){return this.reset(),this.config=a,this},extend:function(a){return this.reset(),c.merge(this.config,a||{}),this},nonContent:function(){if(!this._nonContent){var a=e.instantiate(this.config.NonContent);this._nonContent=new h(a)}return this._nonContent},textLengthCalculator:function(){if(!this._textLengthCalculator){var a=e.instantiate(this.config.TextLengthCalculator);a.fnTextLength=f.robustSentenceCount,this._textLengthCalculator=new g(a)}return this._textLengthCalculator},contentRegionMeta:function(){if(!this._contentRegionMeta){var a=e.instantiate(this.config.ContentRegionMeta);this._contentRegionMeta=new i(a)}return this._contentRegionMeta}},b.getInstance=function(){return j||(j=new b(d.content)),j},b.getInstance()}),define("utils/SpxMeta",["utils/globalObject","utils/utils","utils/elementTagger","utils/configFactory","jquery","spxw/settings","modules/extractors/utils","modules/extractors/contentConfig"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){this._node=a}var j=b.dom.traverse.CONTINUE,k=b.dom.traverse.SKIP_CHILDREN,l="_spx_";return e.extend({spxMeta:function(a){var b;return a&&(b=e.data(a,l),b||(b=new i(a),e.data(a,l,b))),b}}),e.fn.extend({spx:function(){var a=this[0];return e.spxMeta(a)}}),i.prototype={contentConfig:function(){return h},node:function(){return this._node},$node:function(){return this._$node||(this._$node=e(this.node()))},tag:function(a){return c.tagElement(this.$node(),a),this},untag:function(a){return c.untagElement(this.$node(),a),this},hasTag:function(a){return c.hasTag(this.$node(),a)},dataForTag:function(a,b){var c=this._tagData;c||(c=this._tagData={});var d;return b?(this.hasTag(a)||this.tag(a),d=c[a]=b):d=c[a],d},isNonContent:function(){return null==this._nonContent&&(this._nonContent=h.nonContent().isNonContent(this._node)||g.isHiddenSubtree(this.$node())),this._nonContent},isContent:function(){return!this.isNonContent()},textContent:function(){if(null==this._textContent){var a=h.nonContent(),c=[];b.dom.traverse.inOrder(this._node,function(b){return 1==b.nodeType&&e.spxMeta(b).isNonContent()?k:(3!=b.nodeType||a.ignoreText(b.textContent)||c.push(b.textContent),j)}),this._textContent=b.sanitizeString(c.join(" "))}return this._textContent},textLength:function(){return null==this._textLength&&(this.isNonContent()?this._textLength=0:this._textLength=h.textLengthCalculator().textLength(this._node,this)),this._textLength},couldBeContentRegionRoot:function(){return h.contentRegionMeta().couldBeRoot(this._node,this)},subtreeMayHaveContentRegion:function(){if(!this._subtreeMayHaveContentRegion){var a=!1;if(this.couldBeContentRegionRoot())a=!0;else for(var b=this._node.firstChild;b&&!a;)1==b.nodeType&&(a=e.spxMeta(b).subtreeMayHaveContentRegion()),b=b.nextSibling;this._subtreeMayHaveContentRegion=a}return this._subtreeMayHaveContentRegion},summarize:function(){var a=Array.prototype.slice.call(arguments);return b.summarize.apply(b,[this.$node()].concat(a))},summarizeTextLength:function(){return this.summarize(0)+": "+this.textLength()},isLeafElement:function(){var a=this._node;return 1==a.nodeType&&h.textLengthCalculator().isLeafElement(a,this)},areChildrenProcessedForSlots:function(){return this._processedForSlots?!0:!1},setChildrenProcessedForSlots:function(a){this._processedForSlots=a},isSlotCandidate:function(){return this._slotCandidate?!0:!1},setSlotCandidate:function(a){this._slotCandidate=a}},i}),define("jquerySpx",["require","jquery","utils/SpxMeta","modules/placements/sizzlePseudos"],function(a){"use strict";var b=a("jquery"),c=(a("utils/SpxMeta"),a("modules/placements/sizzlePseudos"));return c.bind(b),b}),define("modules/disco/ContentDiscovery",["require","lodash","spxw/settings"],function(a){"use strict";function b(a,b){if(!a)throw new Error("Null root for content discovery.");this._$root=a,this._mainContentGuesses=b||d.extractor.discovery.mainContentGuesses}var c=a("lodash"),d=a("spxw/settings"),e=10;return b.prototype={run:function(){var a,b=this._$root;return c.find(this._mainContentGuesses,function(c){var d=b.find(c[0]),f=[],g=d.filter(function(a,b){return f.length<e&&/\b(?:div|article|section|main)\b/i.test(b.tagName)?(f.push(d.selector+":eq("+a+")"),!0):!1});return g.length?(g.selector=g.length===d.length?d.selector:f.join(","),a={$node:g,contentType:c[1]},!0):void 0}),a}},b}),define("modules/MainContentFinder",["require","jquerySpx","core/Reporter","utils/utils","lodash","modules/extractors/utils","utils/BaseObject","spxw/SPX","modules/disco/ContentDiscovery"],function(a){"use strict";function b(a,b){return f.retry(function(){return h.resolveSelector(a)},b,100,f.isNotBlank)}function c(a){j.Analytics.publish(null,{type:"e/content",details:{sel:g.isArray(a)?a.join(";"):a.toString()}})}var d=a("jquerySpx"),e=a("core/Reporter"),f=a("utils/utils"),g=a("lodash"),h=a("modules/extractors/utils"),i=a("utils/BaseObject"),j=a("spxw/SPX"),k=a("modules/disco/ContentDiscovery"),l=i.extend({constructor:function(a){this.mainContentSelector=a},ensureMainContent:function(a){a=a||1;var f=d.Deferred(),g=this.mainContentSelector;if(g)e.log(["mainContent"],"Looking for main content starting at:",g),b(g,a).progress(function(a){e.log(["mainContent"],"Couldn't find domain configured main content. Retries left: "+a)}).done(f.resolve).fail(function(){c(g)}).fail(f.fail);else{e.log(["mainContent"],"Attempting to auto-discover main content...");var h=new k(d.spxUIDOM("body")).run();if(null==h||null==h.$node||0===h.$node.length){c("auto");var i="Could not auto-discover main content.";e.log(["mainContent"],i),f.reject(i)}else f.resolve(h.$node,!0,h.contentType)}return f.promise()}});return l}),define("modules/debug/JqueryDebugging",[],function(){"use strict";function a(a,b){a=a||"blue",b=b||3;var c="0 0 0 "+b+"px "+a+", inset 0 0 0 "+b+"px "+a;return this.css("box-shadow",c)}function b(){var a=this.data(c);if(null==a&&(a=this.is(":visible"),this.data(c,a)),a){var b=this.data(d);null==b&&(b=this.is(":visible"));var e=b?"hidden":"visible";this.css("visibility",e),this.data(d,!b)}return this}var c="_spx_originallyVisible",d="_spx_previouslyVisible",e={INJECTED:!1,injectInto:function(c){if(!e.INJECTED){var d=c.$.fn;d.highlight=a,d.toggleOriginallyVisible=b,e.INJECTED=!0}}};return e}),define("modules/extractors/ContentRegionLocator",["require","jquery","lodash","modules/extractors/utils"],function(a){"use strict";function b(a){this.config=a}var c=a("jquery"),d=a("lodash"),e=a("modules/extractors/utils");return b.prototype={strategy:function(){var b=a(this.config.strategy);return new b(this.config)},startNodes:function(){var a=e.combineSelectors(this.config.startSelectors);if(0===a.length)throw"Invalid content root start selector: "+this.config.startSelectors;return a},findAllRegions:function(a){a=a||this.startNodes();var b=d.reduce(a,function(a,b){var d=this.findRegions(c(b));return a.add(d)},c(),this);return b},findRegions:function(a){if(!a||0===a.length)throw"findRegions: empty $root";if(a.length>1)throw"findRegions: multiple nodes in $root";var b=this.strategy();return b.findRegions(a)}},b}),define("modules/debug/ContentRegionDebugging",["require","lodash","utils/utils","spxw/settings","modules/debug/JqueryDebugging","modules/extractors/ContentRegionLocator"],function(a){"use strict";function b(a,b){b=b||j.content.ContentRegionLocator;var c=new l(b),d=c.findAllRegions(a);return d}function c(a){a=a||$.spxUIDOM("body");var b=[];return a.length>0&&i.dom.traverse.inOrder(a[0],function(a){return 1!==a.nodeType&&3!==a.nodeType||!$.spxMeta(a).isNonContent()?m:(b.push(a),n)}),$(b)}function d(a){var b=[];return a.each(function(){var a=this;i.dom.traverse.inOrder(a,function(a){var c=$.spxMeta(a);if(1===a.nodeType&&c.isContent()){if(0===c.textLength()){var d=c.textContent().trim();return d.length>0&&b.push(a),n}if(c.isLeafElement())return n}return m})}),$(b)}function e(a){a=a||b();var c=$();a.each(function(){c=c.add($(this).parents())});var d=function(b){var c=b;return h.any(a,function(a){return $.contains(a,c)})},e=$.spxUIDOM("body").find("*").filter(function(){var b=this,e=function(){return this===b};return!(d(b)||c.filter(e).length||a.filter(e).length)});return e}function f(a,f){a=a||c(),f=f||b();var g=d(f);return f.highlight("green",4),a.highlight("red",3).toggleOriginallyVisible(),g.filter(":header").highlight("chartreuse",2),g.filter(":not(:header)").highlight("purple",2),e(f).hide(),{contentregions:f,nonContent:a,zeroLength:g}}function g(a){h.merge(a,{debug:{findContentRegions:b,findNonContent:c,findNonRegions:e,highlightPage:f}})}var h=a("lodash"),i=a("utils/utils"),j=a("spxw/settings"),k=a("modules/debug/JqueryDebugging"),l=a("modules/extractors/ContentRegionLocator"),m=i.dom.traverse.CONTINUE,n=i.dom.traverse.SKIP_CHILDREN,o={INJECTED:!1,injectInto:function(a){o.INJECTED||(k.injectInto(a),g(a[" "]),o.INJECTED=!0)}};return o}),define("spxw/loader/mainContentLoader",["require","core/Reporter","spxw/SPX","spxw/ExtractionContext","modules/MainContentFinder","modules/debug/ContentRegionDebugging"],function(a){"use strict";var b=a("core/Reporter"),c=a("spxw/SPX"),d=a("spxw/ExtractionContext"),e=a("modules/MainContentFinder"),f=a("modules/debug/ContentRegionDebugging");return function(a,g,h,i){f.injectInto(c);var j=(new Date).getTime(),k=d.fromDataStore(a),l=k.domainConfig().mainContentSelector();new e(l).ensureMainContent(3).always(function(){var a=Array.prototype.slice.call(arguments);b.log(["mainContent"],"MainContentFinder took",(new Date).getTime()-j,"ms",a)}).done(function(b,c,d){var e={$node:b,autoDiscovered:c||!1,contentType:d||null};a.extend({mainContent:e}),h.resolve()}).fail(h.reject)}}),define("modules/PageConfigHeuristics",["require","utils/BaseObject","spxw/settings","spxw/ExtractionContext"],function(a){"use strict";var b=a("utils/BaseObject"),c=a("spxw/settings"),d=a("spxw/ExtractionContext");return b.extend({constructor:function(a){this.extractionContext=d.fromDataStore(a)},applyHeuristics:function(){var a=this.extractionContext.domainConfig(),b=this.extractionContext.mainContent,d=!1;if(b.autoDiscovered&&"recipe"!==b.contentType&&!a.extractors()){var e=c.extractor.discovery.defaultSlotConfigs[b.contentType];if(!e)throw new Error("Invalid auto config type: "+b.contentType);a.addContentTag("swl"),a.addContentTag("use_free_form"),a.setContent(b.$node),a.setAutoConfig(e),d=!0}return d}})}),define("spxw/loader/pageConfigHeuristicsLoader",["require","core/Reporter","modules/PageConfigHeuristics"],function(a){"use strict";var b=a("core/Reporter"),c=a("modules/PageConfigHeuristics");return function(a,d,e,f){try{var g=new c(a);g.applyHeuristics()&&b.log(["configHeuristics"],"New page config",a.get(["domainconfig"])),e.resolve()}catch(a){b.error(["configHeuristics"],a.message),e.fail(a.message,a)}}}),define("utils/TraverseMixin",[],function(){"use strict";var a={traverse:function(a){if(a(this)&&this.children)for(var b=0;b<this.children.length;++b)this.children[b].traverse(a)}};return a}),define("modules/PlacementScope",["require","lodash","utils/BaseObject","utils/utils","utils/TraverseMixin"],function(a){"use strict";var b=a("lodash"),c=a("utils/BaseObject"),d=a("utils/utils"),e=a("utils/TraverseMixin"),f=c.extend({constructor:function(a,b,c){this.parent=c,this.$node=a,this.config=b,this.children=[]},createChildScopes:function(a){for(var b=a.resolveSelector(this.$node),c=0;c<b.length;++c){var d=new f(b.eq(c),a,this);this.children.push(d);for(var e=a.children(),g=0;g<e.length;++g)d.createChildScopes(e[g])}return this},traverseSlotConfigs:function(a){this.traverse(function(c){var d=c.config._slots;return d&&b.each(d,function(b){a(b,c)}),!0})},inspect:function(a){var c=this.summarize({dbg:b.isObject(a)?a:null});return c},summarize:function(a,c){var d={},e=this.config._name;e&&(d.name=e);var f=this.config._selector||this.config._selectors;return f&&(d.selector=f),c&&this.$node===this.parent.$node||(d.node=this.$node.spx().summarize(100)),this.children.length>0&&(d.children=b.map(this.children,function(a){return a.summarize()})),a&&a.dbg&&(d.dbg=a.dbg),d}},{createScopeTree:function(a,b){if(a.length>1)throw new Error("Root has "+a.length+" nodes");return new f(a,{}).createChildScopes(b)}});return d.simpleMixin(f,e),f}),define("modules/PlacementScopeTree",["require","spxw/SPX","spxw/DomainConfig","modules/PlacementScope"],function(a){"use strict";var b=a("spxw/SPX"),c=a("spxw/DomainConfig"),d=a("modules/PlacementScope"),e={generate:function(a,e){e=e||b.$.spxUIDOM("body");var f=a.get(["domainconfig"]),g=new c(f),h=g.rootContentConfig(),i=d.createScopeTree(e,h);return a.extend({placementScopeTree:i}),i}};return e}),define("modules/Slotter",["require","utils/BaseObject","lodash"],function(a){"use strict";var b=a("utils/BaseObject"),c=a("lodash");return b.extend({constructor:function(a){this._buildSlots=function(a,b){a.addSlots(b.$node)},this._accumulateSlots=function(b,d){b.isValid()?c.each(b.newlyActivatedSlots(),a.slot,a):a.slotError(b,d.$node)}},discoverSlots:function(a){a.traverseSlotConfigs(this._buildSlots),a.traverseSlotConfigs(this._accumulateSlots)}})}),define("modules/SlotAccumulator",["require","utils/BaseObject","core/Reporter"],function(a){"use strict";function b(a,b){var c=b.get([a]);if(!c){var d={};d[a]=[],b.extend(d),c=b.get([a])}return c}var c=a("utils/BaseObject"),d=a("core/Reporter");return c.extend({constructor:function(a,c){this._slots=b("slots",a),this._slotErrors=b("slotErrors",a),this._analytics=c},slot:function(a){this._slots.push(a)},slotError:function(a,b){var c={type:"e/slotConfig",details:{name:a.name,config:a.summarize(),count:a.slots.length}};this._analytics.publish(null,c);var e="Invalid slot config: "+a.validationError;d.log(["SlotAccumulator"],e,c.details,b),this._slotErrors.push({err:e,config:a,$node:b})}})}),define("modules/SlotGenerator",["require","spxw/SPX","core/Reporter","modules/PlacementScopeTree","modules/Slotter","modules/SlotAccumulator"],function(a){"use strict";var b=a("spxw/SPX"),c=a("core/Reporter"),d=a("modules/PlacementScopeTree"),e=a("modules/Slotter"),f=a("modules/SlotAccumulator"),g={generate:function(a,g){var h=d.generate(a,g),i=new f(a,b.Analytics),j=new e(i);j.discoverSlots(h),c.log(["slotLoader"],"Found "+i._slots.length+" slot and "+i._slotErrors.length+" slot errors",i._slots,i._slotErrors)}};return g}),define("spxw/loader/slotLoader",["require","lodash","modules/SlotGenerator"],function(a){"use strict";var b=a("lodash"),c=a("modules/SlotGenerator");return function(a,d,e,f){c.generate(a),b.merge(f,{slots:a.get(["slots"])}),e.resolve()}}),define("modules/ContentNode",["require","spxw/settings","core/Reporter","modules/extractors/utils","utils/BaseObject","utils/utils","jquery","lodash","utils/TraverseMixin"],function(a){"use strict";function b(a){return a.$ele?e.getText(a.$ele,a.ignoreList||k):""}var c=a("spxw/settings"),d=a("core/Reporter"),e=a("modules/extractors/utils"),f=a("utils/BaseObject"),g=a("utils/utils"),h=a("jquery"),i=a("lodash"),j=a("utils/TraverseMixin"),k=c.extractor.globalIgnore||[],l=/\S/,m=0,n={props:[],$ele:{summarize:!0,textLen:15},text:{summarize:!0,textLen:15},header:{summarize:!0,header:{summarize:!0},parent:{summarize:!1},children:{summarize:!0}},parent:{summarize:!0,$ele:{summarize:!0,textLen:0},text:{summarize:!1},header:{summarize:!1},parent:{summarize:!1},children:{summarize:!1}},children:{summarize:!0,$ele:{summarize:!0,textLen:0},text:{summarize:!1},header:{summarize:!1},parent:{summarize:!1},children:{summarize:!1}}};Object.freeze&&Object.freeze(n);var o=f.extend({constructor:function(a,b,c,d){this.completed=!1,this.completionCallbacks=[],this.urn=a,this.$ele=b,this.hash=null,this.config=d,c&&h.extend(this,c)},isAllWhitespace:function(){return!this.getTextUnderNode().match(l)},appendToText:function(a,b){function c(b){return b.text?b.text+=a:b.text=a,b.text}return b?c(this):this.onlyWhenNotCompleted(function(){return c(this)})},onlyWhenNotCompleted:function(a){if(this.completed)throw d.log("********** FAIL: onlyWhenNotCompleted"),"ContentNode already completed";return a?a.call(this):this},onlyWhenCompleted:function(a){if(!this.completed)throw d.log("********** FAIL: onlyWhenCompleted"),"ContentNode must be completed";return a?a.call(this):this},onCompletion:function(a){this.onlyWhenNotCompleted(function(){
this.completionCallbacks.push(a)})},complete:function(){return this.onlyWhenNotCompleted(function(){return i.each(this.children,function(a){a.ensureComplete()}),this.header&&this.header.ensureComplete(),this.completed=!0,i.each(this.completionCallbacks,function(a){a.call(this)},this),this})},ensureComplete:function(){return this.completed||this.complete(),this},markIncomplete:function(){return this.completed=!1,this},forceLeaf:function(){return this.onlyWhenNotCompleted(function(){return this.complete(),delete this.children,this})},isLeaf:function(){return!!this.willBeLeaf},setHash:function(a){this.hash=a},isHeader:function(){return(this.bold||this.title)&&!!g.sanitizeString(this.getTextUnderNode())},getPath:function(){for(var a=[],b=this;b;b=b.parent)a.unshift(b.urn);return a},getElement:function(){return this.$ele&&this.$ele.length?this.$ele.get(0):void 0},getText:function(){return this.onlyWhenCompleted(function(){if(this.text||""===this.text){if(this.children&&this.children>0&&this.text)return d.log("********** FAIL: non-empty text with children"),""}else this.children&&this.children.length>0?this.text="":this.text=b(this);return this.text})},getTextUnderNode:function(){return this.onlyWhenNotCompleted(function(){return this.text?this.text:b(this)})},getCleanText:function(){return g.sanitizeString(this.getText())},getWeight:function(){return e.getTextWeight(this)},getHash:function(){return this.onlyWhenCompleted(function(){if(!this.hash){var a=null;this.children&&this.children.length>0?a="p"+this.children[0].getHash():(a=this.getCleanText(),a.length>100&&(a=a.slice(0,100))),this.hash=g.hashCode(a)}return this.hash})},traverseLeaves:function(a){this.traverse(function(b){return b.isLeaf()&&a(b),!0})},addChild:function(a){return this.onlyWhenNotCompleted(function(){return void 0===this.children&&(this.children=[]),this.children.push(a),a.parent=this,this})},addChildren:function(a){if(a)for(var b=0;b<a.length;++b)this.addChild(a[b])},findAncestor:function(a){for(var b=this.parent;b;b=b.parent)if(b.urn===a)return b;return null},findChild:function(a){if(this.children)for(var b=0;b<this.children.length;++b)if(this.children[b].urn===a)return this.children[b];return null},findChildren:function(a){var b=[];if(this.children)for(var c=0;c<this.children.length;++c)this.children[c].urn===a&&b.push(this.children[c]);return b},addTreeInfo:function(a){a=a||0,this.level=a,this.id=++m;var b=this.children;if(b)for(var c=null,d=null,e=0;e<b.length;++e)c=d,d=b[e],c&&(d.previousSibling=c,c.nextSibling=d),d.addTreeInfo(a+1);this.maxSubtreeId=m},inspect:function(a){var b=this.summarize({dbg:i.isObject(a)?a:null,props:["smell","bold"]});return b},summarize:function(a){a=h.extend(!0,{},n,a);var b={urn:this.urn};if(a.dbg&&(b.dbg=a.dbg),a.$ele.summarize&&(b.ele=this.$ele?this.$ele.spx().summarize(a.$ele.textLen):null),a.text.summarize&&this.text&&(b.text=g.slug(this.text,{beg:a.text.textLen,end:a.text.textLen})),a.header.summarize&&this.header&&(b.header=this.header.summarize(a.header)),a.parent.summarize&&this.parent&&(b.parent=this.parent.summarize(a.parent)),i.each(a.props,function(a){var c=this[a];void 0!==c&&(b[a]=c)},this),a.children.summarize&&this.children&&this.children.length>0){var c=a.children.recurse?a:a.children;b.children=i.map(this.children,function(a){return a.summarize(c)})}return b},summarizeTree:function(a){return a=h.extend(!0,{},n,a),a.parent.summarize=!1,a.children.summarize=!0,a.children.recurse=!0,this.summarize(a)}});return g.simpleMixin(o,j),o}),define("modules/extractors/helpers/ExtractorMixin",["require","modules/ContentNode","lodash"],function(a){"use strict";var b=a("modules/ContentNode"),c=a("lodash"),d={createContentNode:function(a,c,d,e){var f=new b(a,c,{ignoreList:this._ignoreList,microformat:{schema:"domain config",urn:a}});return d&&(f.text=d),this.domainConfig.useUrnIds()&&f.setHash(e||a),f},_findSlot:function(a){return c.find(this._slots,function(b){return b.name===a})}};return d}),define("utils/RegExpList",[],function(){"use strict";function a(a,b,c,d){this.strings=a||[],this.mode=b||"im",this.prefix=c||"",this.postfix=d||""}return a.prototype={push:function(a){return this.strings.push(a),this},concat:function(a){return this.strings=this.strings.concat(a),this},regExpText:function(){return[this.prefix,"(?:(?:",this.strings.join(")|(?:"),"))",this.postfix].join("")},regExp:function(){if(!this._re){var a=this.regExpText();this._re=new RegExp(a,this.mode)}return this._re},test:function(a){return this.strings.length?this.regExp().test(a):!1}},a}),define("utils/StringListFilter",["require","lodash","utils/RegExpList"],function(a){"use strict";function b(a,b,c){return a=a||{},b=b||{},c=c||null==c,{include:a,exclude:b,unknown:c}}function c(a){return e.reduce(a,function(a,b,c){return b&&a.push(c),a},[])}function d(a,c,d,e){a=a||{},this.config=b(a.include,a.exclude,a.unknown),this.mode=c||a.mode||"im",this.prefix=d||a.prefix||"",this.postfix=e||a.postfix||""}var e=a("lodash"),f=a("utils/RegExpList");return d.prototype={_createRegExpList:function(a){var b=c(a);return new f(b,this.mode,this.prefix,this.postfix)},extend:function(a){return this.includeRegExpList=void 0,this.excludeRegExpList=void 0,e.merge(this.config.include,a.include||{}),e.merge(this.config.exclude,a.exclude||{}),this},matches:function(a){return this.includeRegExpList=this.includeRegExpList||this._createRegExpList(this.config.include),this.excludeRegExpList=this.excludeRegExpList||this._createRegExpList(this.config.exclude),this.includeRegExpList.test(a)||!this.excludeRegExpList.test(a)&&this.config.unknown}},d}),define("modules/extractors/helpers/DomainConfigGuidedExtractor",["require","modules/ContentNode","utils/utils","modules/extractors/utils","jquery","spxw/SPX","modules/extractors/helpers/ExtractorMixin","utils/StringListFilter"],function(a){"use strict";function b(a,b){this.domainConfig=a,this._ignoreList=b}var c=a("modules/ContentNode"),d=a("utils/utils"),e=a("modules/extractors/utils"),f=a("jquery"),g=a("spxw/SPX"),h=a("modules/extractors/helpers/ExtractorMixin");return a("utils/StringListFilter"),b.prototype={scrape:function(a,b,c){function d(b){f||(b?(f=g.createContentNode(a,h,h.text()),c.addChild(f)):f=c)}var f,g=this,h=b.$node;if(e.scrapableNode(h,this._ignoreList)){a="ingredients"===a?"ingredient":a;for(var i=b.children,j=0;j<i.length;++j){var k=i[j],l=k.config;"_element"===l._name?this.scrape(a,k,c):(d(a&&l._name),this.scrape(l._name,k,f))}d(void 0===b.config._element)}},buildContentTree:function(){var a=g.DataStore.get(["placementScopeTree"]);if(!a)throw new Error("Missing placementScopeTree");var b=new c("temp");this.scrape(null,a,b);var d=b.children&&b.children.length&&b.children[0].urn;return b.urn=d,f.Deferred().resolve(b)}},d.simpleMixin(b,h),b}),define("modules/TextNode",["require","modules/ContentNode"],function(a){"use strict";var b=a("modules/ContentNode");return b.extend({willBeLeaf:!0})}),define("modules/extractors/FreeFormExtractor",["require","modules/ContentNode","modules/TextNode","modules/extractors/utils","jquery","lodash","utils/BaseObject","core/Reporter"],function(a){"use strict";function b(){if(0===s){var a=[["FreeFormExtractor"]].concat(Array.prototype.slice.call(arguments,0));r.error.apply(r,a)}s++}function c(a,b){a.$ele=b}function d(a,b){a.text=b}function e(a){return a.closest("article,body,main,section,div,li,h1,h2,h3,h4,h5,h6,h7,h8,h9,ul,ol,dl")}function f(a){return a.get(0).tagName+"/"+a.attr("class")}function g(a,b){var c=!1;if(a.smell===b.smell){var d=e(a.$ele),g=e(b.$ele);if(0===d.length&&0===g.length)c=!0;else if(1===d.length&&1===g.length)if(d[0]===g[0])c=!0;else{var h=f(d),i=f(g);c=h===i}}return c}function h(a){var b=o(a.get(0));return b.append=b.before,b}function i(a,b){a.urn=n.TEXT_BLOCK,d(a,a.getTextUnderNode()),c(a,b)}function j(a,b){a.bold=(a.bold||b.bold)&&(a.bold||a.isAllWhitespace())&&(b.bold||b.isAllWhitespace()),a.appendToText(b.text,!0)}function k(a,b,c,d){c=c||[];var e=c.length;if(0===e||b.length===e)return a;if(e>1){var f=c[e-1].$ele;if(f&&f.length){var g=f.get(0);if(1===g.nodeType&&!g.tagName.match(/^br$/i))for(var h=c[e-2].getElement(),i=g;i;i=i.parentElement)if(o.contains(i,h)){if(b.length>d&&o.contains(i,b[d].getElement()))break;return o(i)}}}return c[e-1].$ele}var l=a("modules/ContentNode"),m=a("modules/TextNode"),n=a("modules/extractors/utils"),o=a("jquery"),p=a("lodash"),q=a("utils/BaseObject"),r=a("core/Reporter"),s=0;return q.extend({constructor:function(a,b){this.id="FreeFormExtractor",this._waitPeriod=-1,this._walkingStartTime=null,this._pauseAfter=1e3,this._ignoreSelectors=b||[]},run:function(a){var b=new l("root"),c=o.Deferred();return this._extract(a,b).done(function(a){c.resolve({contentTree:a})}),c.promise()},_extract:function(a,b){function c(){h>g?(d=a.get(g),e._scrapeDomNode(d,b),g++,(new Date).getTime()-i>100?setTimeout(c,0):c()):(e._consolidateHeaders(a,b,!0),f.resolve(b))}var d,e=this,f=o.Deferred(),g=0,h=a.length,i=(new Date).getTime();return setTimeout(c,0),f.promise()},_scrapableChildren:function(a){var b=a.children().length,c=this;return n.scrapableNode(a,c._ignoreSelectors)===!1?!1:(b&&a.children().each(function(){n.scrapableNode(o(this),c._ignoreSelectors)||b--}),b)},_scrapeChildren:function(a,b){var c=this,d=p.filter(a,function(a){return n.scrapableNode(o(a),c._ignoreSelectors)});p.each(d,function(a){c._scrapeDomNode(a,b)})},_scrapeDomNode:function(a,b){var c=o(a);if(1===a.nodeType&&a.children.length&&this._scrapableChildren(c))b.addChildren(this._scrapeDomChildren(a));else if(n.scrapableNode(c,this._ignoreSelectors)){var d=this._createLeafNode(c);d&&b.addChild(d)}},_scrapeDomChildren:function(a){var b=new l("temp"),c=o(a),d=this;return this._scrapeChildren(a.childNodes,b),b.children&&d._coalesceText(c,b.children),b.children},_getText:function(a){return a.contents().filter(function(){return 3===this.nodeType}).text()},_createLeafNode:function(a){var b=a[0];if(3===b.nodeType)return new m(n.TEXT_SNIP,a,{text:b.data,smell:"txt"});if(1===b.nodeType){if(b.tagName.match(n.BLOCK_ELE))return new m(n.TEXT_BLOCK,a,{bold:!!b.tagName.match(n.BOLD_BLOCK_ELE),smell:f(a),ignoreList:this._ignoreSelectors});if(b.tagName.match(n.INLINE_ELE))return new l(n.TEXT_SNIP,a,{text:this._getText(a),bold:!!b.tagName.match(n.BOLD_INLINE_ELE),smell:f(a)});if(b.tagName.match(n.BREAK_ELE))return new l(n.TEXT_BREAK,a,{smell:f(a)})}},_coalesceText:function(a,d){function e(a){d.splice(a,1),++p}function g(a){for(var b=a,f=a+1,g=null,h=0;b<d.length&&(g=d[b],g.urn===n.TEXT_SNIP&&(g.isAllWhitespace()||g.bold));b++)h++;if(h>0)for(g=d[a],g.bold&&(g.urn=n.TEXT_SNIP_BOLD);h>1;){var i=d[f];j(g,i),c(g,g.$ele||i.$ele),e(f),--h}}function k(){var a=null,c=null;g(0);for(var f=1;f<d.length;f+=1-p)if(a=d[f-1],c=d[f],(a.urn===n.TEXT_BLOCK||a.urn===n.TEXT_BREAK)&&g(f),p=0,a.urn===n.TEXT_SNIP)switch(c.urn){case n.TEXT_SNIP:j(a,c),e(f);break;case n.TEXT_BREAK:i(a,h(c.$ele)),e(f);break;case n.TEXT_BLOCK:case n.GENERIC_LIST:a.isAllWhitespace()?e(f-1):i(a,a.$ele);break;case n.TEXT_SNIP_BOLD:break;default:b("Unknown content node URN: "+c.urn)}}function l(){var b=d.length-1,c=d[b];b>0&&c.urn===n.TEXT_SNIP&&(c.isAllWhitespace()?e(b):i(c,a))}function o(){if(0===d.length||1===d.length&&d[0].urn===n.TEXT_SNIP){var e=a.get(0).tagName,g=d[0];e.match(n.BLOCK_ELE)?d[0]=new m(n.TEXT_BLOCK,a,{smell:f(a),bold:g.bold||e.match(n.BOLD_BLOCK_ELE),text:g.text}):e.match(n.INLINE_ELE)&&d.length>0?(c(g,a),g.smell=f(a),g.bold=g.bold||e.match(n.BOLD_INLINE_ELE)):(e.match(n.IGNORED_ELE)||b("Unexpected extraction condition: "+e+" ("+d.length+")"),d=[])}}var p;k(),l(),o()},_consolidateHeaders:function(a,b){var c=null,d=null,e=b.children;if(b.children){for(c=0;c<e.length;c++)d=e[c],this._consolidateHeaders(d.getElement(),d);this._removeEmptyChildren(a,b.children),this._coalesceLists(a,b.children),this._createHeadedSections(a,b.children),this._coalesceDetailLists(a,b.children),this._adjustHeaderNesting(a,b.children)}},_adjustHeaderNesting:function(a,b){function c(a){a.addChildren(d),i=i.concat(d),d=[a]}var d=[],e=0,f=[],g=null,h=null,i=[];for(g=0;g<b.length;g++)h=b[g],null!=h.header&&f.push(h);f.length<2||(f.sort(function(a,b){var c=a.header.getWeight(),d=b.header.getWeight();return d>c?-1:c>d?1:0}),p.each(f,function(a){var b=a.header.getWeight();b>e?(e=b,c(a)):b===e&&d.push(a)}),this._cleanChildren(i,b))},_createHeadedSections:function(a,d){function e(b){var c=new l(b.urn,a);return c.header=b,m.push(b),n.push(c),c}function f(a){p.remove(n,function(b){return b===a}),p.remove(m,function(b){return b===a.header})}function g(a){function d(){for(var a=0,b=null,c=null,d=0;a<h.length;a++)b=h[a],c=b.getElement(),(f.is(c)||f.has(c).length)&&d++;return d===h.length}var e=!0,f=null,g=a.header,h=a.children,i=100;for((null==g||null==h||0===h.length)&&b("Unexpected headed section: "+a.$ele.spx().summarize()),f=o(g.getElement());e&&i;)i--,d()?(c(a,f),e=!1):f=f.parent()}function h(a){a&&(a.children&&a.children.length?g(a):f(a))}var i=null,j=null,k=null,m=[],n=[];for(i=0;i<d.length;i++)k=d[i],k.isHeader()?(h(j),j=e(k)):null!=j&&(j.addChild(k),m.push(k));h(j),this._cleanChildren(m,d,n)},_cleanChildren:function(a,b,c){for(var d=null,e=null;a.length;)d=a.pop(),e=p.indexOf(b,d),e!==-1&&b.splice(e,1);p.each(c,function(a){b.push(a)})},_removeEmptyChildren:function(a,b){var c=null,d=null,e=[];for(c=0;c<b.length;c++)d=b[c],null==d.children&&d.isAllWhitespace()&&null==d.header&&e.push(d);this._cleanChildren(e,b)},_coalesceDetailLists:function(a,b){function d(a){return null!=a.header&&null!=a.children&&1===a.children.length&&a.children[0].urn!==n.GENERIC_LIST}function e(a,b){return a.header.getWeight()===b.header.getWeight()&&g(a,b)}function f(){j>1&&(b.splice(m,j,function(){for(var d=new l(n.DETAIL_LIST),e=0;j>e;++e)d.addChild(b[m+e]);return c(d,k(a,b,d.children,m+j)),d}()),i=m+1),j=0}var h=null,i=null,j=0,m=0;if(b){for(i=0;i<b.length;++i)h=b[i],!(j>0)||d(h)&&e(h,b[i-1])||f(),d(h)&&(m=i-j++);f()}},_coalesceLists:function(a,b){function d(a){return a.urn===n.TEXT_BLOCK&&!a.bold&&a.getTextUnderNode().match(/[^:]$/)}function e(){j>2&&(b.splice(i,j,function(){for(var d=new l(n.GENERIC_LIST),e=0;j>e;++e)d.addChild(b[i+e]);return c(d,k(a,b,d.children,i+j)),d}()),f=i+1),j=0}var f,h,i=0,j=0;if(b){for(f=0;f<b.length;++f)h=b[f],!(j>0)||d(h)&&g(h,b[f-1])||e(),d(h)&&(i=f-j++);e()}}})}),define("modules/extractors/SimpleFreeFormExtractor",["require","modules/extractors/FreeFormExtractor"],function(a){"use strict";function b(a){a.traverse(function(a){if("generic_list"===a.urn){var b=(a.children||[])[0],c=b.$ele;if(c&&"LI"!==c.prop("tagName"))return a.urn="text_block",!1}return!0})}var c=a("modules/extractors/FreeFormExtractor");return c.extend({run:function(a){return this._super().run.call(this,a).then(function(a){return b(a.contentTree),a})}})}),define("modules/extractors/helpers/DomainConfigFreeFormExtractor",["require","modules/extractors/utils","modules/extractors/FreeFormExtractor","modules/extractors/SimpleFreeFormExtractor"],function(a){"use strict";function b(a,b){this.domainConfig=a,this._ignoreList=b}var c=a("modules/extractors/utils"),d=a("modules/extractors/FreeFormExtractor"),e=a("modules/extractors/SimpleFreeFormExtractor");return b.prototype={buildContentTree:function(){var a=this.domainConfig.useOriginalFreeFormExtractor()?d:e,b=new a(this._ignoreList),f=this.domainConfig.mainContentSelector();if(!f)throw new Error("Free form extractor requires a main content starting point");var g=c.resolveSelector(f);if(!g.length)throw new Error("Free form extractor could not find main content starting point");return b.run(g).then(function(a){return a.contentTree})}},b}),define("modules/extractors/helpers/ArticlePostProcessor",["require","lodash","utils/utils","modules/extractors/utils","modules/extractors/helpers/ExtractorMixin"],function(a){"use strict";function b(a,b,c){this.domainConfig=a,this._ignoreList=b,this._slots=c}var c=a("lodash"),d=a("utils/utils"),e=a("modules/extractors/utils"),f=a("modules/extractors/helpers/ExtractorMixin");return b.prototype={process:function(a){var b,d,f,g,h=null,i=[],j=this._findSlot("after_content.001");return a.traverse(function(a){return null==h&&(h=a.findChild("title")),(null==i||0===i.length)&&(i=a.findChildren("section"),null!=i&&i.length>0&&(f=a.$ele)),!0}),h&&(h.title=!0),g=j&&j.$node||e.findAfterListElement(a.$ele,a.children,i,a.children.length)||f,d=this.createContentNode("",g,null,"article"),d.header=h,i&&i.length&&(c.each(i,function(a){delete a.children}),b=this.createContentNode("article-body",g),b.addChildren(i),d.addChild(b)),d.ensureComplete()}},d.simpleMixin(b,f),b}),define("modules/extractors/helpers/RecipePostProcessor",["require","lodash","utils/utils","modules/extractors/utils","modules/extractors/helpers/ExtractorMixin"],function(a){"use strict";function b(a,b,c){this.domainConfig=a,this._ignoreList=b,this._slots=c}var c=a("lodash"),d=a("utils/utils"),e=a("modules/extractors/utils"),f=a("modules/extractors/helpers/ExtractorMixin");return b.prototype={process:function(a){var b=null,d=[],e=null,f=null,g=null,h=null;return a.traverse(function(a){return null==b&&(b=a.findChild("title")),(null==d||0===d.length)&&(d=a.findChildren("ingredient")),!0}),b&&(b.forceLeaf(),b.title=!0),null!=d&&0!==d.length?(c.each(d,function(a){a.forceLeaf()}),f=this._findSlot("after_recipe.001"),e=this._findSlot("after_ingredients.001"),g=this._createIngredientList(e,d,a),h=this._createRecipe(f,g,a),h.header=b,h.ensureComplete()):void 0},_findIngredientNode:function(a,b){var c;return c=a?a.$node:e.findAfterIngredientsElement(b)},_createIngredientList:function(a,b,c){var d=this._findIngredientNode(a,c),f=this.createContentNode(e.INGREDIENT_LIST,d);return f.config=a&&a.config,f.addChildren(b),f},_findRecipeNode:function(a,b){var c;return a?c=a.$node:b.traverse(function(a){return"recipe"===a.urn&&(c=a.$ele),!0}),c},_createRecipe:function(a,b,c){var d=this._findRecipeNode(a,c),e=this.createContentNode("recipe",d);return e.addChild(b),e.config=a&&a.config,e}},d.simpleMixin(b,f),b}),define("modules/extractors/helpers/NoopPostProcessor",[],function(){"use strict";function a(){}return a.prototype={process:function(a){return a}},a}),define("modules/extractors/DomainConfigExtractor",["require","core/Reporter","jquery","spxw/SPX","spxw/DomainConfig","modules/extractors/helpers/DomainConfigGuidedExtractor","modules/extractors/helpers/DomainConfigFreeFormExtractor","modules/extractors/helpers/ArticlePostProcessor","modules/extractors/helpers/RecipePostProcessor","modules/extractors/helpers/NoopPostProcessor","utils/StringListFilter"],function(a){"use strict";function b(a,b){this.id="DomainConfigExtractor",this.domainConfig=new f(a),this._ignoreList=b,this._slots=e.DataStore.get(["slots"])}var c=a("core/Reporter"),d=a("jquery"),e=a("spxw/SPX"),f=a("spxw/DomainConfig"),g=a("modules/extractors/helpers/DomainConfigGuidedExtractor"),h=a("modules/extractors/helpers/DomainConfigFreeFormExtractor"),i=a("modules/extractors/helpers/ArticlePostProcessor"),j=a("modules/extractors/helpers/RecipePostProcessor"),k=a("modules/extractors/helpers/NoopPostProcessor");a("utils/StringListFilter");var l={article:i,recipe:j};return b.prototype={run:function(){var a=d.Deferred(),b=this;return setTimeout(function(){try{b.process().done(function(c){a.resolve({contentTree:c,slots:b._slots})}).fail(a.reject)}catch(d){c.error(["DomainConfigExtractor"],"Scraping domain config",d,d.stack,b.domainConfig.config),a.reject(d.message,d.stack)}},1),a.promise()},process:function(){return this.domainConfig.useFreeFormExtractor()?this._buildFreeFormContentTree():this._buildContentTreeFromConfig()},_buildFreeFormContentTree:function(){var a=new h(this.domainConfig,this._ignoreList);return a.buildContentTree()},_buildContentTreeFromConfig:function(){var a=this,b=new g(this.domainConfig,this._ignoreList);return b.buildContentTree().then(function(b){var c=b.children&&b.children.length&&b.children[0].urn,d=a._postProcessor(c);return d.process(b)})},_postProcessor:function(a){var b=l[a]||k;return new b(this.domainConfig,this._ignoreList,this._slots)}},b}),define("modules/disco/BaseDiscovery",["utils/BaseObject","modules/ContentNode","modules/TextNode","jquery"],function(a,b,c,d){"use strict";return a.extend({init:function(a){var b=d.Deferred();return this.pageContext=a,b.resolve(),b},recognize:function(){},beforeDescent:function(){},afterDescent:function(){},postRecognize:function(){}})}),define("modules/disco/Blog",["modules/disco/BaseDiscovery","modules/ContentNode","modules/TextNode"],function(a,b,c){"use strict";return a.extend({recognize:function(a){var d;return void 0===this._stack&&(this._stack=[]),this._stack.length>0&&this.recognizer.isTitle(a)?new c("title",a,{discovery:this.recognizer.blogType+" post title"}):0===this._stack.length&&this.recognizer.isPost(a)?new b("post",a,{discovery:this.recognizer.blogType+" post"}):1===this._stack.length&&(d=this.recognizer.getSectionUrn(a))?new b(d,a,{discovery:this.recognizer.blogType+" post "+d}):void 0},beforeDescent:function(a){0===this._stack.length&&this.recognizer.isPost(a)?this._stack.push(a):1===this._stack.length&&this.recognizer.getSectionUrn(a)&&this._stack.push(a)},afterDescent:function(a){this._stack.length>0&&this._stack[this._stack.length-1]===a&&this._stack.pop()}})}),define("modules/disco/Wordpress",["modules/disco/Blog"],function(a){"use strict";return a.extend({recognizer:{blogType:"Wordpress",isPost:function(a){return a.hasClass("post")},isTitle:function(a){return a.hasClass("title")||a.hasClass("entry-title")||a.hasClass("post-title")||a.hasClass("post-headline")},getSectionUrn:function(a){if(a.hasClass("entry"))return"body";for(var b in{"entry-":1,"post-":1}){if(a.hasClass(b+"header")||a.hasClass(b+"heading"))return"header";if(a.hasClass(b+"content")||a.hasClass(b+"body"))return"body";if(a.hasClass(b+"footer"))return"footer"}}}})}),define("modules/disco/Typepad",["modules/disco/Blog"],function(a){"use strict";return a.extend({recognizer:{blogType:"Typepad",isPost:function(a){return a.hasClass("entry")&&(a.hasClass("entry-type-post")||a.attr("id")&&a.attr("id").match(/^entry-[0-9a-f]*$/))},isTitle:function(a){return a.hasClass("entry-header")},getSectionUrn:function(a){return a.hasClass("entry-body")?"body":a.hasClass("entry-footer")?"footer":void 0}}})}),define("modules/disco/BlogX",["modules/disco/Blog"],function(a){"use strict";return a.extend({recognizer:{blogType:"Blog Format X",isPost:function(a){return a.hasClass("post-entry")&&a.parent().hasClass("template-blog")},isTitle:function(a){return a.hasClass("post-title")},getSectionUrn:function(a){return a.parent().hasClass("entry-content")&&a.get(0).tagName.match(/^p$/i)?"body":void 0}}})}),define("modules/disco/HRecipe",["modules/disco/BaseDiscovery","modules/ContentNode","modules/TextNode"],function(a,b,c){"use strict";function d(a,b){var c=a.attr("class");return c&&c.match(new RegExp("\\b"+b+"\\b","i"))}function e(a){return d(a,"hRecipe")?"hRecipe":d(a,"easyrecipe")?"easyrecipe":void 0}return a.extend({_stack:[],beforeDescent:function(a){e(a)&&this._stack.push(e(a))},afterDescent:function(a){e(a)&&this._stack.pop()},recognize:function(a){var c=e(a);if(c)return new b("recipe",a,{discovery:e(a),microformat:{urn:"recipe",schema:c}});if(this._stack.length>0){if(a.hasClass("fn"))return this._makeProp("title",a,c);if(a.hasClass("ingredient"))return this._makeProp("ingredient",a,c)}},_currentFmt:function(){return this._stack[this._stack.length-1]},_makeProp:function(a,b,d){return new c(a,b,{discovery:this._currentFmt()+" "+a,smell:a,title:"title"===a,microformat:{urn:a,schema:d}})}})}),define("modules/disco/Microdata",["require","modules/disco/BaseDiscovery","modules/ContentNode","modules/TextNode","lodash","jquery"],function(a){"use strict";function b(a){k[a.type]=a}function c(a){return void 0!==a.attr("itemscope")&&null!=k[d(a)]}function d(a){return a.attr("itemtype")}function e(a){return a.attr("itemprop")}var f=a("modules/disco/BaseDiscovery"),g=a("modules/ContentNode"),h=a("modules/TextNode"),i=a("lodash"),j=a("jquery"),k={};return b({type:"http://data-vocabulary.org/Recipe",urn:"recipe",propertyMappings:{name:"title",ingredient:"ingredient"}}),b({type:"http://schema.org/Recipe",urn:"recipe",propertyMappings:{name:"title",ingredients:"ingredient"}}),b({type:"http://data-vocabulary.org/RecipeIngredient",urn:"ingredient",propertyMappings:{}}),b({type:"http://schema.org/RecipeIngredient",urn:"ingredient",propertyMappings:{}}),b({type:"http://schema.org/BlogPosting",urn:"post",propertyMappings:{name:"title"}}),f.extend({_scopes:[],beforeDescent:function(a){c(a)&&this._pushItemScope(a)},afterDescent:function(a){c(a)&&this._scopes.pop()},recognize:function(a){var b,f,i,j=e(a);return j&&(f=this._peekScope())&&(b=f.propertyMappings&&f.propertyMappings[j])?new h(b,a,{discovery:f.type+" "+j,title:"title"===b,smell:b,microformat:{urn:b,schema:f.type}}):c(a)?(i=d(a),f=k[i],b=f?f.urn:"unknown",new g(b,a,{discovery:i,microformat:{urn:b,schema:i}})):void 0},_peekScope:function(){return this._scopes[this._scopes.length-1]},_pushItemScope:function(a){this._scopes.push(k[d(a)]||{})},_getItemUrn:function(a){var b=k[d(a)];return b?b.urn:"unknown"},postRecognize:function(a,b){var c,d,e,f;"recipe"===b.urn&&(f=b.findChildren("ingredient"),1===f.length&&(c=f[0],e=i.indexOf(b.children,c),d=c.$ele.find('[itemprop="name"]:not(:has([itemprop="name"]))'),d.length>1&&(b.children.splice(e,1),d.each(function(){var a=j(this),d=new h(c.urn,a,{discovery:c.discovery,title:c.title,smell:c.urn,microformat:c.microformat});b.children.push(d)}))))}})}),define("modules/disco/PlainRecipe",["modules/disco/BaseDiscovery","modules/ContentNode","modules/TextNode"],function(a,b,c){"use strict";return a.extend({_stack:[],recognize:function(a){if(a.hasClass("recipe"))return new b("recipe",a,{discovery:"plain recipe",microformat:{urn:"recipe",schema:"plain recipe"}});if(this._stack.length>0){if(a.hasClass("title"))return this._makeProp("title",a);if(a.hasClass("ingredient"))return this._makeProp("ingredient",a)}},beforeDescent:function(a){a.hasClass("recipe")&&this._stack.push("recipe")},afterDescent:function(a){a.hasClass("recipe")&&this._stack.pop()},_makeProp:function(a,b){return new c(a,b,{discovery:"plain recipe "+a,title:"title"===a,microformat:{urn:a,schema:"plain recipe"}})}})}),define("modules/disco/classes",["modules/disco/Wordpress","modules/disco/Typepad","modules/disco/BlogX","modules/disco/HRecipe","modules/disco/Microdata","modules/disco/PlainRecipe"],function(){"use strict";return Array.prototype.slice.call(arguments)}),define("modules/extractors/MicroformatExtractor",["require","modules/ContentNode","lodash","modules/extractors/utils","modules/disco/classes","utils/globalObject","jquery"],function(a){"use strict";function b(a,b){var c=0;a&&a.length?g.each(a,function(d){d.always(function(){++c===a.length&&b()})}):b()}function c(a){function b(a){return h.findAfterIngredientsElement(a)}var d,e,g,i,j=a.children,k=[],l=null!=a.microformat?a.microformat.schema:"";if(null!=j){for(e=0;e<j.length;e++)d=j[e],d.microformat&&"ingredient"===d.microformat.urn&&(d.text=h.getText(d.$ele),delete d.children,k.push({idx:e,child:d})),c(d);if(k.length){for(g=new f(h.INGREDIENT_LIST,null,{microformat:{schema:l,urn:h.INGREDIENT_LIST}}),g.parent=a,e=0;e<k.length;e++)i=k[e],g.addChild(i.child);g.$ele=b(g),j.splice(0,j.length,g)}}}function d(a){function b(a){var c,d;if(a.microformat&&"title"===a.microformat.urn)return a;if(a.children)for(var e=0;e<a.children.length;e++)if(d=a.children[e],c=b(d),null!=c)return c}function c(){for(var a,c,f=0;f<d.length;f++)c=d[f],a=b(c),a&&(d.splice(f,1),e.header=a,f=d.length)}var d=a.children,e=a;null!=d&&c()}function e(a,b){this.id="MicroformatExtractor",this._discoveryModules=[],this._ignoreList=b}var f=a("modules/ContentNode"),g=a("lodash"),h=a("modules/extractors/utils"),i=a("modules/disco/classes"),j=a("utils/globalObject"),k=a("jquery");return e.prototype={_preDecent:function(a){for(var b=0,c=null;b<this._discoveryModules.length;b++)c=this._discoveryModules[b],c.beforeDescent(a)},_postDecent:function(a,b){var c=0,d=null;for(b=b||{};c<this._discoveryModules.length;c++)d=this._discoveryModules[c],d.afterDescent(a,b.children)},_scrapeMicroformat:function(a,b){var c=this._runDiscovery(a)||{},d=a.children(),e=c.content||new f("temp");c.content&&b.addChild(e),!e.isLeaf()&&d.length&&(this._preDecent(a),g.each(d,function(a){var b=k(a);h.scrapableNode(b,this._ignoreList)&&this._scrapeMicroformat(b,e)},this),this._postDecent(a,e)),c.recognizer?c.recognizer.postRecognize(a,e):b.addChildren(e.children)},_validMicroformat:function(a){var b=!1,c=[];return a.traverse(function(a){return a.urn===h.INGREDIENT_LIST&&c.push(a),!0}),g.each(c,function(a){var c=[];a.children&&(g.each(a.children,function(a){var b;"ingredient"===a.urn&&(b=k.trim(a.ensureComplete().getText()),c.push(b))}),b===!1&&(b=g.compact(c).length>1))}),b},_emptyScrape:function(a){var b=!1;try{b=a.children[0].children.length<1}catch(a){b=!0}return b},run:function(a){var b,e=".hRecipe, .hrecipe, .recipe, .easyrecipe, [itemtype$=Recipe]",h=this,i=k.Deferred();return b=a.is(e)?a:a.find(e),0===b.length?i.resolve():this._initModules().done(function(){var a=new f("microformat_page");b.each(function(){var b=k(this);h._scrapeMicroformat(b,a)}),a.children&&(g.each(a.children,d),g.each(a.children,c)),h._validMicroformat(a)&&!h._emptyScrape(a)?i.resolve({contentTree:a}):i.resolve()}),i.promise()},_initModules:function(){function a(a){l._discoveryModules.push(a),h.push(a.init(d))}function c(){e.resolve(),j.clearTimeout(f)}var d={},e=k.Deferred(),f=null,h=[],l=this;return g.each(i,function(b){a(new b)}),b(h,c),f=j.setTimeout(c,5e3),e.promise()},_runDiscovery:function(a){for(var b=null,c=null,d={},e=0,f=null;e<this._discoveryModules.length;e++)f=this._discoveryModules[e],b=f.recognize(a),b&&(c=f,e=this._discoveryModules.length);return null!=b&&null!=c&&(d={content:b,recognizer:c}),d}},e}),define("modules/extractors/MicrodataCollector",["require","jquerySpx","lodash","utils/BaseObject","utils/utils","modules/extractors/utils"],function(a){"use strict";function b(a,b,c){if(b=r.sanitizeValue(b)){var d=c[a];null==d&&(d=c[a]=[]),d.push(b)}}function c(a){if(null==a.getAttribute("itemprop"))return null;if(null!=a.getAttribute("itemscope"))return a;switch(a.tagName.toUpperCase()){case"META":return a.getAttribute("content")||"";case"AUDIO":case"EMBED":case"IFRAME":case"IMG":case"SOURCE":case"TRACK":case"VIDEO":return a.getAttribute("src")||"";case"A":case"AREA":case"LINK":return a.getAttribute("href")||"";case"OBJECT":return a.getAttribute("data")||"";case"DATA":return a.getAttribute("value")||"";case"TIME":var b=a.getAttribute("datetime");if(b)return b;default:return n(a).text()}}function d(a){var b=c(a);return b&&!o.isString(b)&&(b="type|"+b.getAttribute("itemtype")),b}function e(a,b){b=b||d;var c={};return s.inOrderElements(a,function(a){var d=a.getAttribute("itemprop");return d?(c[d]=b(a),s.SKIP_CHILDREN):s.CONTINUE}),c}function f(a,b){var c=e(a);return c.itemtype=b,c}function g(a,b){var c=null;return s.inOrderElements(b,function(b){return b.getAttribute("itemprop")===a?(c=b,s.STOP):b.getAttribute("itemscope")?s.SKIP_CHILDREN:s.CONTINUE}),c}function h(a,b){var c=g(a,b);return c?d(c):null}function i(a,c){return c=c||a,function(d,e,f){var g=h(a,d);b(c,g,f)}}function j(a){return function(c,d,e){var f=n(c).text();b(a,f,e)}}function k(a){return function(c,d,e){var g=f(c,d);b(a,g,e)}}function l(a,b){return function(c,d,e){e[a]=b}}function m(){var a=Array.prototype.slice.call(arguments,0);return function(b,c,d){a.each(function(a){a(b,c,d)})}}var n=a("jquerySpx"),o=a("lodash"),p=a("utils/BaseObject"),q=a("utils/utils"),r=a("modules/extractors/utils"),s=q.dom.traverse,t=i("audienceType"),u=i("breadcrumb"),v={"http://data-vocabulary.org/Breadcrumb":i("title","breadcrumb"),"http://schema.org/AboutPage":u,"http://schema.org/Audience":t,"http://schema.org/BusinessAudience":t,"http://schema.org/EducationalAudience":t,"http://schema.org/MedicalAudience":t,
"http://schema.org/PeopleAudience":t,"http://schema.org/ParentAudience":t,"http://schema.org/BreadcrumbList":j("breadcrumb"),"http://schema.org/Car":k("car"),"http://schema.org/CheckoutPage":u,"http://schema.org/CollectionPage":u,"http://schema.org/ContactPage":u,"http://schema.org/ImageGallery":u,"http://schema.org/ItemPage":u,"http://schema.org/MedicalCondition":i("name","keywords"),"http://schema.org/MedicalWebPage":u,"http://schema.org/ProfilePage":u,"http://schema.org/QAPage":u,"http://schema.org/SearchResultsPage":m(l("serp",!0),u),"http://schema.org/VideoGallery":u,"http://schema.org/WebPage":u};return p.extend({constructor:function(a){this.data={},this.schema={},this.extractors=a||v},collect:function(a){var b=a.find("[itemscope]");return o.each(b,function(a){var b=a.getAttribute("itemtype");this.schema[b]=!0;var c=this.extractors[b];c&&c(a,b,this.data)},this),this},summarize:function(){return{schema:o.keys(this.schema).sort(),data:this.data}}})}),define("modules/Extractor",["require","jquery","lodash","utils/utils","modules/extractors/utils","spxw/settings","core/Reporter","modules/extractors/DomainConfigExtractor","modules/extractors/MicroformatExtractor","modules/extractors/FreeFormExtractor","modules/extractors/SimpleFreeFormExtractor","modules/extractors/MicrodataCollector"],function(a){"use strict";function b(a){this._extractionContext=a,this._$root=a.mainContent.$node,this.item_id=a.pageId(),this._env=a.parameters,this._stratErrors=[],this._strategies=this._createExtractionStrategies(a),j.log(["extractor"],a,this)}var c,d,e=a("jquery"),f=a("lodash"),g=a("utils/utils"),h=a("modules/extractors/utils"),i=a("spxw/settings"),j=a("core/Reporter"),k=a("modules/extractors/DomainConfigExtractor"),l=a("modules/extractors/MicroformatExtractor"),m=a("modules/extractors/FreeFormExtractor"),n=a("modules/extractors/SimpleFreeFormExtractor"),o=a("modules/extractors/MicrodataCollector");c=d=i.extractor.version;var p={ff1:m,free_form:n,guided:k,micro:l};return b.VERSION=c,b.COMPATIBILITY_VERSION=d,b.prototype={_createExtractionStrategies:function(a){var b=a.domainConfig(),c=f.uniq((b.config.contentIgnore||[]).concat(i.extractor.globalIgnore||[])),d=(b.extractors()||[]).filter(function(a){return p[a]?!0:(j.error(["extractor"],"Unknown extraction strategy: ",a),!1)});if(0===d.length){var e=b.hasSlotConfig();d.push(e?"guided":"micro"),!e&&a.options.useFreeFormExtractor&&d.push("ff1")}return d=d.map(function(a){return new p[a](b.config,c)})},_nextStrategy:function(){var a=0;return this._nextStrategy=function(){var b=null,c=this;return a<this._strategies.length?(this._currentStrategy=this._strategies[a],b=this._currentStrategy.run(this._$root),b.fail(function(){c._stratErrors.push(a)}),a++):(b=e.Deferred(),setTimeout(function(){b.resolve({})},1)),b},this._nextStrategy()},start:function(){function a(d){d?b.resolve(c._wrapResult(d)):c._nextStrategy().always(a)}var b=e.Deferred(),c=this;return this._$root&&this._$root.length?this._nextStrategy().always(a):setTimeout(function(){a({})},1),b.promise()},_metaInformation:function(){function a(a,b,c,d){for(var f=d||{},h=0;h<a.length;++h){var i=e(a[h]),j=i.attr(b);j&&(j=g.mongoFieldName(j),f[j]=i.attr(c))}return f}var b=a(e.spxUIDOM("meta[name]"),"name","content");return a(e.spxUIDOM("meta[property]"),"property","content",b),a(e.spxUIDOM('link[rel="canonical"]'),"rel","href",b),a(e.spxUIDOM('link[rel="alternate"]'),"rel","href",b),b.title=e.spxUIDOM("title").text()||"",b},_microdata:function(){var a=new o,b=e(e.spxUIWindow()[0].document);return a.collect(b).summarize()},_mainContent:function(){var a,b=this._extractionContext.mainContent,c=b.$node;return c&&c.length?(a=h.summarizeElementLocation(c),a.selector=c.selector,f.merge(a,b),delete a.$node):a={},a},_slotInfo:function(){var a=this._extractionContext.slots;return{count:a?a.length:0}},_wrapResult:function(a){var b,f={sections:[],item_id:this.item_id,type:"page",meta:h.sanitizeValue(this._metaInformation()),microdata:h.sanitizeValue(this._microdata()),content:this._mainContent(),slot:this._slotInfo(),extractor:{id:this._currentStrategy.id||"unknown",cv:d,v:c,ts:(new Date).getTime(),e:this._env,xch:"0"}},g=e.extend({extraction:f,nodeLookup:{},extractorErrors:this._stratErrors},a);return j.log(["extractor"],"result:",a),a.contentTree&&(b=h.convertToContentTree(a.contentTree,f),j.log(["extractor"],"conversion:",b),f.extractor.xch=b.fingerprint,g.nodeLookup=b.lookup,g.contentTree=a.contentTree),g}},b}),define("spxw/loader/extractLoader",["require","jquery","core/Reporter","modules/Extractor","spxw/ExtractionContext"],function(a){"use strict";function b(a){return a.shouldExtract()?new e(a):g}var c=a("jquery"),d=a("core/Reporter"),e=a("modules/Extractor"),f=a("spxw/ExtractionContext"),g={start:function(){return d.log(["extractor"],"No need to extract"),c.Deferred().resolve({contentTree:null,extraction:null,extractorErrors:[],nodeLookup:{}})}};return function(a,e,g,h){var i=(new Date).getTime(),j=f.fromDataStore(a);d.log(["extractor"],"Extraction start",j.mainContent),b(j).start().then(function(a){c.extend(h,a)}).always(function(a){d.log(["extractor"],"Extraction took",(new Date).getTime()-i,"ms",a)}).done(g.resolve).fail(g.reject)}}),define("modules/spxcontroller/LocationManager",["require","core/Reporter","jquery","utils/utils"],function(a){"use strict";function b(a,b,c,f,g){this.options=d.extend(!0,{slinkTopic:"slink",$window:d.spxUIWindow(),offSiteHandler:e.noop},g),this.evtBus=a,this.anchorService=f,this.presentationService=b,this.windowManager=c,this._currentComponent={},this._gotoLocTrys=0}var c=a("core/Reporter"),d=a("jquery"),e=a("utils/utils");return b.prototype={_getPageAnchor:function(){var a=this.anchorService.getSlink();this._parseSlink(a)},_parseSlink:function(a){null!=a&&(a=this.anchorService.parseSlink(a)),this._gotoLocation(a)},_gotoLocation:function(a){var b=this;null!=a&&(c.log(["LocationManager"],"Going to location "+a.url,a),this.windowManager.loading(a.args),this.presentationService.getComponent(a,function(d){c.log(["LocationManager"],"Received Component for slink ",a,d),d.start(),d.resume(a.args),b.windowManager.load(d)},function(d,e){c.error("Error loading slink! "+d,a,e),b.windowManager.showError(d)}))},bindHashChange:function(){var a=this;this.options.$window.on("hashchange",function(){var b=a.anchorService.getSlink();b&&a._parseSlink(b)})},_handleExternalLink:function(a,b){null!=a&&this.options.offSiteHandler(a,b)},start:function(){var a=this;this.bindHashChange(),this.evtBus.subscribe(a.options.slinkTopic,function(b,d){return null==d?void c.log(["LocationManager"],"empty slink event"):void(d.isExternal?(c.log(["LocationManager"],"external slink event",d),a._handleExternalLink(d.url,d.context)):(c.log(["LocationManager"],"internal slink event",d),a._parseSlink(d.url,d.cb)))}),this._getPageAnchor()}},b}),define("modules/iframe/IFrameWidget",["require","utils/BaseObject","spxw/settings","jquery"],function(a){"use strict";function b(){this._hostjQuery=e,this._hostWindow=e.spxUIWindow()[0],this._$iframe=null,this._isRendered=!1,this._isShowing=!1,this._iframeReady=!1,this._insertFn="append",this._iframeAttrs={scrolling:"no",frameBorder:0,allowTransparency:"true"},this._iframecss={borderWidth:"0px",margin:"0 auto",display:"none"}}var c=a("utils/BaseObject"),d=a("spxw/settings"),e=a("jquery");return c.extend({constructor:b,_prepareIframe:function(){this._$iframe=this._hostjQuery("<iframe>"),this._$iframe.attr(this._iframeAttrs),this._$iframe.css(this._iframecss),this._$iframe.addClass(d.domClassNames.global+" "+d.domClassNames.created)},render:function(a){this._prepareIframe(),a[this._insertFn](this._$iframe),this.onContentWindowReady(this._$iframe[0].contentWindow)},onWidgetReady:function(){throw new Error("IFrameWidget::onWidgetReady::NotImplemented")},onContentWindowReady:function(){this._iframeReady=!0},resize:function(a,b){var c=null,d=null,e=null;this._isRendered&&(a||b?(c=a,d=b):this._iframejQuery&&this._iframeWindow&&(e=this._iframejQuery("body :first-child"),c=e.outerHeight(!0),d=e.outerWidth(!0)),null!=c&&this._$iframe.height(c),null!=d&&this._$iframe.width(d))},show:function(){this._isShowing=!0,this._iframeReady&&this._$iframe.show()},hide:function(){this._isShowing=!1,this._$iframe.hide()},remove:function(){this._$iframe.remove()}})}),define("text!html/IFrameWidget.html",[],function(){return'<!DOCTYPE HTML>\n<html>\n<head>\n	<meta http-equiv="content-type" content="text/html; charset=utf-8">\n	<title></title>\n		<style type="text/css" media="screen">\n			body {\n				padding: 0;\n				margin: 0;\n			}\n			#container {\n				display: none;\n			}\n		</style>\n		<script type="text/javascript" charset="utf-8">\n			function ready() {\n				var container = document.getElementById(\'container\');\n				var spinner = document.getElementById(\'spinner\');\n				if(typeof widgetReady === \'function\') {\n					widgetReady(window, spinner, container);\n				}\n			}\n		</script>\n</head>\n<body onload="ready()">\n	<div id="spinner"></div>\n	<div id="container"></div>\n</body>\n</html>\n'}),define("modules/iframe/SameDomainIFrameWidget",["modules/iframe/IFrameWidget","utils/utils","text!html/IFrameWidget.html","spxw/settings","jquery"],function(a,b,c,d,e){"use strict";function f(){a.apply(this,arguments),this._html=c,this._templateContext={},this._lintWorkAround=["java","script:","var d=document.open();d.domain='",this._hostWindow.document.domain,"';"]}return a.extend({constructor:f,render:function(){a.prototype.render.apply(this,arguments),this._setSameDomainContent()},_renderContent:function(){var a=e.extend(!0,{jqueryUrl:d.jquery.url,serverBase:d.serverBase,assetBase:d.assetBase},this._templateContext);return b.spxTemplate(this._html,this.dataStore,a)},_checkTouchable:function(a,c){b.isTouchable(a)&&c("body").addClass(d.domClassNames.touchable),this.onWidgetReady.apply(this,arguments)},_setSameDomainContent:function(){var a=this._$iframe[0],b=a.contentWindow,c=null,d=null,e=this;try{c=b.document,c.open()}catch(e){d=this._lintWorkAround.join(""),a.src=d+"void(0);",c=b.document}b.widgetReady=function(){e._iframeReady=!0,e._checkTouchable.apply(e,arguments),e._isShowing&&e._$iframe.show()},c.write(this._renderContent()),c.close()},onWidgetReady:function(){throw new Error("SameDomainIFrameWidget::onWidgetReady::NotImplemented")}})}),define("text!html/WindowManagerView.html",[],function(){return'<!DOCTYPE HTML>\n<html>\n  <head>\n  <meta http-equiv="content-type" content="text/html; charset=utf-8">\n<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />\n  <title></title>\n    <style type="text/css" media="screen">\n      body {\n        padding: 0;\n        margin: 0;\n      }\n      #container {\n        display: none;\n      }\n      .interstitials {\n        border-radius: 4px;\n        background: white;\n        padding: 20px;\n        text-align: center;\n        margin-top: 25px;\n        max-height: 500px;\n      }\n\n      #spinner img {\n        text-align: center;\n      }\n      #error h1{\n        font-family:\'Open Sans\';\n        font-weight:100;\n        font-size:80px;\n        color:#EA7900;\n      }\n      .message{\n        border-radius: 4px;\n        font-family:\'Open Sans\';\n        color:rgba(0,0,0,0.7);\n        background:rgba(0,0,0,0.05);\n        margin:10px;\n        padding:10px;\n      }\n      .closelink{\n        font-family:\'Open sans\';\n        font-size:12px;\n        font-weight:700;\n        color:#999;\n        cursor:pointer;\n        float:right;\n        text-transform:uppercase;\n      }\n      .closelink:hover{\n        color:#ccc;\n        cursor:pointer;\n      }\n    </style>\n    <link href=\'//fonts.googleapis.com/css?family=Arvo\' rel=\'stylesheet\' type=\'text/css\'>\n    <link href=\'//fonts.googleapis.com/css?family=Open+Sans:400,300,700\' rel=\'stylesheet\' type=\'text/css\'>\n    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"  type="text/javascript" charset="utf-8"></script>\n    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular.js"  type="text/javascript" charset="utf-8"></script>\n    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular-touch.min.js"  type="text/javascript" charset="utf-8"></script>\n\n    <script type="text/javascript" charset="utf-8">\n      function ready() {\n        var container = document.getElementById(\'container\');\n        var spinner = document.getElementById(\'spinner\');\n        var error = document.getElementById(\'error\');\n        if(typeof widgetReady === \'function\') {\n          widgetReady(window, $, spinner, container, error, angular);\n        }\n      }\n    </script>\n</head>\n<body onload="ready()">\n  <div id="spinner" class="interstitials">\n    <div class="spxclose closelink">close</div>\n    <img src="<%= assetUrl(\'images/loading_logo.gif\') %>">\n  </div>\n  <div id="error" class="interstitials" style="display:none;">\n    <div class="spxclose closelink">close</div>\n    <h1>Swoops!</h1>\n    <div class="message">Unable to reach Swoop right now...</div>\n  </div>\n  <div id="container"></div>\n</body>\n</html>\n'}),define("modules/spxcontroller/WindowFrame",["require","modules/iframe/SameDomainIFrameWidget","spxw/settings","modules/spxcontroller/SlinkAnchorService","core/Reporter","text!html/WindowManagerView.html","jquery"],function(a){"use strict";function b(a,b,e,f){c.apply(this,arguments),this._evtBus=a,this.dataStore=b,this._html=g,this._$modalRoot=h("<div>").hide(),this._$modalRoot.addClass(d.domClassNames.component),this._$iFrameRoot=h("<div>").css({height:"100%"}),this._$modalRoot.append(this._$iFrameRoot),this._$spinner=null,this._$content=null,this._rendered=!1,this._iframeWindow=null,this._$root=null,this._its$=null,this.config=e,this.onClose=f,this.landingDeferred=h.Deferred(),this.init()}var c=a("modules/iframe/SameDomainIFrameWidget"),d=a("spxw/settings"),e=a("modules/spxcontroller/SlinkAnchorService"),f=a("core/Reporter"),g=a("text!html/WindowManagerView.html"),h=a("jquery");return c.extend({constructor:b,init:function(){},onWidgetReady:function(a,b,c,d,f){var g=this,i=new e(a);this._$spinner=b(c),this._$content=b(d),this._$error=b(f),this._iframeWindow=a,this._its$=b,b(a).on("hashchange",function(){var b=i.getSlink();b=i.parseSlink(b),b&&(g._evtBus.publish("slink",{path:b.url}),a.location.hash="")}),this.getEle().find("iframe").on("click",function(a){a.stopImmediatePropagation()}),this.getEle().on("click",function(a){var b=h(a.target);0===b.parents("iframe").length&&(g.hide(),g.onClose())}),this._$content.on("click",function(a){b(a.target).hasClass("spxclose")||a.stopPropagation()}),b("body").on("click",function(a){var b=h(a.target);0===g._$content.has(b).length&&(g.hide(),g.onClose())}),h.spxUIDOM("body").on("click",function(){g.hide(),g.onClose()}),b("body").delegate(".spxclose","click",function(){g.hide(),g.onClose()}),this.landingDeferred.resolve(this._iframeWindow,b,this._$spinner,this._$error,this._$content)},renderComponent:function(a,b){var c=this;this.landingDeferred.done(function(d,e,g,h,i){try{a.preRender(i,d,e),a.render(i,d,e,function(){c.showSpinner(!1,b)})}catch(a){c.showError(""),f.error("Error rendering landing page",a)}})},render:function(a){var b=this;this._rendered||(a.append(this._$modalRoot),c.prototype.render.call(this,this._$iFrameRoot),a.on("keydown",function(a){27===a.which&&(b.hide(),b.onClose())}),this._rendered=!0)},show:function(){c.prototype.show.call(this),this._$modalRoot.show()},hide:function(){this._rendered&&(c.prototype.hide.call(this),this._$modalRoot.hide())},destroy:function(){h.spxUIDOM("body").off(),this._$modalRoot.remove()},getEle:function(){return this._$modalRoot},showSpinner:function(a,b){var c=this;b=b||function(){},this.show(),this.landingDeferred.done(function(){c._$error.hide(),a?c._$content.fadeOut(100,function(){c._$spinner.fadeIn(100,function(){b()})}):c._$spinner.fadeOut(100,function(){c._$content.fadeIn(100,function(){b()})})})},showError:function(a){var b=this;this.show(),this.landingDeferred.done(function(){b._$spinner.hide(),b._$content.hide(),b._$error.show(),a&&b._$error.find("span").text(a)})}})}),define("modules/spxcontroller/ModalWindow",["modules/spxcontroller/WindowFrame","spxw/settings"],function(a,b){"use strict";return a.extend({init:function(){this._$modalRoot.addClass(b.domClassNames.landing_page)}})}),define("text!html/ResponsiveWindow.html",[],function(){return'<!DOCTYPE HTML>\n<html>\n	<head>\n	<meta http-equiv="content-type" content="text/html; charset=utf-8">\n<meta name="viewport" content="width=device-width, initial-scale=3.0, maximum-scale=3.0, minimum-scale=3.0, user-scalable=no" />\n	<title></title>\n		<style type="text/css" media="screen">\n      body, html {\n        height:100%;\n				padding: 0;\n				margin: 0;\n      }\n			#container {\n				display: none;\n				height:100%;\n			}\n			.interstitials {\n				border-radius: 4px;\n				background: white;\n				padding: 20px;\n				text-align: center;\n				margin-top: 25px;\n		    max-height: 500px;\n			}\n\n			#spinner img {\n        text-align: center;\n        height:120px;\n      }\n      #error{\n        margin-top:0px;\n        height:100%;\n      }\n      #spinner{\n        margin-top:-40px;\n      }\n      #error h1{\n        font-family:\'Open Sans\';\n        font-weight:100;\n        font-size:80px;\n        color:#EA7900;\n      }\n      .message{\n        border-radius: 4px;\n        font-family:\'Open Sans\';\n        color:rgba(0,0,0,0.7);\n        background:rgba(0,0,0,0.05);\n        margin:10px;\n        padding:10px;\n      }\n      .closelink{\n        font-family:\'Open sans\';\n        font-size:12px;\n        font-weight:700;\n        color:#999;\n        cursor:pointer;\n        float:right;\n        text-transform:uppercase;\n      }\n      .closelink:hover{\n        color:#ccc;\n        cursor:pointer;\n      }\n		</style>\n\n		<link href="//fonts.googleapis.com/css?family=Merriweather:400,300,700,900|Josefin+Sans:100,300,400,600,700|Open+Sans:400,300,700" rel="stylesheet" type="text/css">\n		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript" charset="utf-8"></script>\n		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular.js" type="text/javascript" charset="utf-8"></script>\n		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular-touch.min.js" type="text/javascript" charset="utf-8"></script>\n\n		<script type="text/javascript" charset="utf-8">\n			function ready() {\n				var container = document.getElementById(\'container\');\n				var spinner = document.getElementById(\'spinner\');\n				var error = document.getElementById(\'error\');\n				if(typeof widgetReady === \'function\') {\n					widgetReady(window, $, spinner, container, error, angular);\n				}\n			}\n		</script>\n\n</head>\n<body onload="ready()">\n	<div id="spinner" class="interstitials">\n    <div class="spxclose closelink">close</div>\n		<img src="<%= assetUrl(\'images/loading_logo.gif\') %>">\n	</div>\n	<div id="error" class="interstitials" style="display:none;">\n    <div class="spxclose closelink">close</div>\n    <h1>Swoops!</h1>\n    <div class="message">Unable to reach Swoop right now...</div>\n	</div>\n	<div id="container"></div>\n</body>\n</html>\n'}),define("modules/spxcontroller/ResponsiveWindow",["modules/spxcontroller/WindowFrame","text!html/ResponsiveWindow.html","jquery","spxw/settings"],function(a,b,c,d){"use strict";var e={top:d.domClassNames.responsiveTop,bottom:d.domClassNames.responsiveBottom,left:d.domClassNames.responsiveLeft,right:d.domClassNames.responsiveRight};return a.extend({init:function(){var a=e[this.config.placement]||e.bottom;this._$modalRoot.addClass(d.domClassNames.responsiveLanding),this._$modalRoot.addClass(a),this._originalHeight=null,this._html=b,this._isAnimating=!1,this._animateDefer=null},showSpinner:function(a,b){var d=this;b=b||function(){},null==d._originalHeight&&(d._originalHeight=d._$modalRoot.height()),this._animateDefer=c.Deferred(),this.landingDeferred.done(function(){d.show(),d._$error.hide(),a?(d._$content.hide(),d._$spinner.show(),d._$modalRoot.css({height:"0px"}),d._$modalRoot.animate({height:75},{duration:"fast",complete:function(){d._animateDefer.resolve(),b()}})):(d._$spinner.hide(),d._$content.show(),d._$modalRoot.animate({height:d._originalHeight},{duration:"fast",complete:function(){d._$modalRoot.css({height:""}),d._animateDefer.resolve(),b()}}))})},showError:function(){function b(){c.showSpinner(!1,function(){a.prototype.showError.apply(c,arguments),c._$modalRoot.animate({height:c._originalHeight},{duration:"fast",complete:function(){c._$modalRoot.css({height:""})}})})}var c=this;this._animateDefer?this._animateDefer.done(b):b()}})}),define("modules/spxcontroller/MobileWindow",["modules/spxcontroller/WindowFrame","spxw/settings"],function(a,b){"use strict";return a.extend({init:function(){this._$modalRoot.addClass(b.domClassNames.mobile_lp)}})}),define("modules/spxcontroller/WindowManager",["require","core/Reporter","modules/spxcontroller/ModalWindow","modules/spxcontroller/ResponsiveWindow","modules/spxcontroller/MobileWindow","utils/utils","jquery"],function(a){"use strict";function b(a,b){this.dataStore=b,this.evtBus=a,this._currentWindow=null,this._currentWindowType=void 0,this.currentComponent=null}var c=a("core/Reporter"),d=a("modules/spxcontroller/ModalWindow"),e=a("modules/spxcontroller/ResponsiveWindow"),f=a("modules/spxcontroller/MobileWindow"),g=a("utils/utils"),h=a("jquery");return b.prototype={loading:function(a){var b=null;a=a||{},this._currentWindow&&this._currentWindowType===a.type?b=this._currentWindow:(this.destroyLanding(),b=this.getWindow(a)),b.render(h.spxUIDOM("body")),b.showSpinner(!0)},load:function(a,b,c){var d=this.getWindow(c),e=this;b=b||function(){},this.currentComponent?d.showSpinner(!0,function(){e.currentComponent.destroy(),e.currentComponent=a,d.renderComponent(e.currentComponent)}):(this.currentComponent=a,d.renderComponent(this.currentComponent,b))},createWindow:function(a){function b(){c.destroyLanding()}var c=this,h=null;return a=a||{},this._currentWindow?this._currentWindow:(h="responsive"===a.frame?new e(this.evtBus,this.dataStore,a,b):g.isMobile()?new f(this.evtBus,this.dataStore,a,b):new d(this.evtBus,this.dataStore,a,b),this._currentWindowType=a.frame,h)},getWindow:function(a){return null==this._currentWindow&&(this._currentWindow=this.createWindow(a)),this._currentWindow},closeLanding:function(){this.currentComponent&&this.currentComponent.pause(),this._currentWindow&&this._currentWindow.hide();try{this.destroyLanding()}catch(a){c.error("Error Destroying Component",a,this.currentComponent)}},showError:function(a){var b=this.getWindow();b.showError(a)},destroyLanding:function(){this.currentComponent&&(this.currentComponent.kill(),this.currentComponent=null),this._currentWindow&&(this._currentWindow.destroy(),this._currentWindow=null,this._currentWindowType=null)}},b}),define("modules/spxcontroller/PresentationService",["require","utils/globalObject"],function(a){"use strict";function b(a,b){this.dataStore=a,this.analytics=b}var c=a("utils/globalObject");return b.prototype={getComponent:function(b,d,e){var f=this;a(["slink!"+b.url],function(g){var h=g.config,i=g.moduleId;a([i],function(a){d(new a(h,f.dataStore,f.analytics,b,c))},function(a){e("Swoops! Not Found. Sorry",a)})},function(a){e("Cannot contact swoop",a)})}},b}),define("modules/spxcontroller/WindowController",["modules/spxcontroller/LocationManager","modules/spxcontroller/WindowManager","modules/spxcontroller/SlinkAnchorService","modules/spxcontroller/PresentationService","utils/globalObject","utils/utils","core/Reporter"],function(){"use strict";function a(a,j,l){return null==i&&(this.evtBus=a,this.slinkService=new d(f),this.windowManager=new c(a,j),this.service=new e(j,l),this.locationManager=new b(a,this.service,this.windowManager,this.slinkService,{offSiteHandler:g.getOffsiteHandler(f,l,h.for("WindowController")),slinkTopic:k}),i=this),i}var b=require("modules/spxcontroller/LocationManager"),c=require("modules/spxcontroller/WindowManager"),d=require("modules/spxcontroller/SlinkAnchorService"),e=require("modules/spxcontroller/PresentationService"),f=require("utils/globalObject"),g=require("utils/utils"),h=require("core/Reporter"),i=null,j=!1,k="slinkEvent";return a.prototype={start:function(){j===!1&&(this.locationManager.start(),j=!0)},changeLocation:function(a,b,c){var d=this.slinkService.parseUrl(a,{ctx:b,d:c});null!=d?this.evtBus.publish(k,d):h.log(["WindowController"],a)}},a}),define("modules/spxcontroller/PlacementAnalytics",["require","lodash"],function(a){"use strict";function b(a){this._opportunities={},this._views=[],this._analytics=a,this._bidders=[]}var c=a("lodash");return b.prototype={_createSummary:function(){var a=[];return c.each(this._views,function(b){"displayed"===b.status&&c.indexOf(a,b.tid)===-1&&a.push(b.tid)}),{view:a.length>0,visible:a,bidders:this._bidders}},_updateBidderList:function(a){this._bidders=this._bidders.concat(a),this._bidders=c.uniq(this._bidders)},_flatten:function(a){var b,d={},e=a.analytics;return null!=e&&null!=a.nodeInfo?(a.instructions&&(b=c.isArray(a.instructions)?a.instructions[0].component.campid:a.instructions.component.campid),d.winner=b||null,d.slotName=e.slotName,d.slotIdx=e.slotIdx||0,d.losers=e.losers||[],d.slotContent=a.nodeInfo.text||"",d.id=c.uniqueId("slot"),d.$ele=a.nodeInfo.$ele,d):void 0},createOpportunity:function(a){var b=this._flatten(a);if(null!=b)return null==b.status&&(b.status="displayTimeout",b.winner||0!==b.losers.length||(b.status="noBidders")),b},recordView:function(a,b,d,e,f){var g=c.find(this._opportunities,function(b){return b.$ele===a});e=e||{},f=f||function(){};var h={};null!=g&&"displayed"!==g.status&&(h.slotName=g.slotName,h.slotIdx=g.slotIdx,h.slotContent=g.slotContent,h.status=g.status="displayed",h.tid=b.campid||b.campaign,h.details={item:g.slotContent,match:b.context,target:!0},h.delta=d,h.type=b.type||"n",this._views.push(h)),f(h)},recordViewReject:function(a,b,d){d=d||function(){};var e=c.find(this._opportunities,function(b){return b.$ele===a});null!=e&&(e.status=b),d(e)},registerPlacement:function(a){var b=this.createOpportunity(a);if(null!=b){var d=c.clone(b.losers||[]);b.winner&&d.push(b.winner),this._updateBidderList(d),this._opportunities[b.id]=b}},sendEvent:function(){var a=c.values(this._opportunities),b=c.values(this._views);c.each(a,function(a){delete a.id,delete a.$ele}),this._analytics.sendEvent("s/am",{swoop15:!0},{o:a,v:b,s:this._createSummary()})}},b}),define("modules/placements/strategies/utils",["require","spxw/settings","jquery","lodash","utils/utils","utils/globalObject","core/Reporter"],function(a){"use strict";function b(a,b,i){var j;return i&&i._local_markup?(h.log("using user defined local_markup",i),j=d(i._local_markup)):j=b(a),j.addClass(c.domClassNames.wrapper),f.isTouchable(g)&&j.addClass(c.domClassNames.touchable),e.each(c.domClassNames.thirdPartyIgnoreClasses,function(a){j.addClass(a)}),j}var c=a("spxw/settings"),d=a("jquery"),e=a("lodash"),f=a("utils/utils"),g=a("utils/globalObject"),h=a("core/Reporter").for("strategies/utils");return{wrap:b,UI_FIT_ERROR:"uiTooLarge"}}),define("modules/placements/strategies/after",["require","utils/utils","lodash","modules/placements/strategies/utils","jquery","core/Reporter"],function(a){"use strict";function b(a){var b=parseInt(a.css("marginBottom"),10)||0,c=i("<div>"),d=a.css("float"),e="none"!==d,g=!1;if(b=Math.max(b,n),b>=15&&(b-=3),f.styleElement(c,{"margin-top":n,"margin-left":parseInt(a.css("marginLeft"),10),"margin-bottom":b,"padding-left":parseInt(a.css("paddingLeft"),10)}),i.each(a.children(),function(a,b){var c=i(b);return a>3?!0:void("none"!==c.css("float")&&(g=!0))}),e?f.styleElement(c,{float:d,clear:d}):g&&a.addClass("spx-clear-fix"),b>n){var h=n-b;e?f.styleElement(c,{top:h,position:"relative"}):f.styleElement(c,{"margin-top":h})}return c}function c(a,b,c){function d(){var c=parseInt(o.marginTop,10)||n,d=b.offset().top,e=parseInt(a.css("marginBottom"),10)||0,f=a.offset().top+a.outerHeight()+e,g=Math.floor(d-f-c);Math.abs(g)>50&&(g=0);var h,j=c-g,k=0,l=Math.max(parseInt(o.marginBottom,10)||0,n),m=b.nextAll(":visible").filter(function(){var a=i(this),b=a.css("display"),c=a.css("position");return"inline"!==b&&"inline-table"!==b&&"inline-flex"!==b&&"absolute"!==c&&"fixed"!==c}).first();if(m.length){var p=d+b.outerHeight(),q=m.offset().top;k=Math.floor(q-p-l),Math.abs(k)>50&&(k=0),h=l-k}return{topAdjustment:g,bottomAdjustment:k,css:{"margin-top":g?j:c,"margin-bottom":k?h:l}}}function e(d){var e=i.Deferred(),f=a.outerHeight(!0)+a.offset().top+30,g=b.offset().top,j=b.height(),n=a.parent().height(),o=d+c+l,q=c+m,r=g>f,s=n>o,t=j>q,u=[];return r&&!p&&u.push("too_far"),s&&u.push("parent_too_tall"),t&&u.push("wrapper_too_tall"),r&&!p||s||t?e.reject(h.UI_FIT_ERROR,{msg:u.join(","),strategy:k,isBR:p,wrapperTop:g,wrapperHeight:j,newParentHeight:n,acceptableHeight:o,componentHeight:q}):e.resolve(),e.promise()}var j=i.Deferred(),o=b[0].style,p=a.is("br");b.children().first().css({display:"inline-block"});var q=a.parent().height();a.after(b);var r=p?{css:{}}:d();if(!p){var s=r.topAdjustment+r.bottomAdjustment;s>0&&(c+=s)}return e(q).done(function(){b.hide();var a=g.merge(r,{visibility:"visible"});f.styleElement(b,a),j.resolve(b)}).fail(function(a,c){b.remove(),j.reject(a,c)}),j.promise()}function d(a,b,d){var e,f,g,k=i.Deferred();for(null==d&&(j.log(["AfterStrategy"],"Error: Component does not define min-width or max-height",d),d={"min-width":100,"max-height":200}),null==d["min-width"]&&(j.log(["AfterStrategy"],"Error: Component does not define min-width",d),d["min-width"]=100),null==d["max-height"]&&(j.log(["AfterStrategy"],"Error: Component does not define max-height",d),d["max-height"]=200),g=a.parent();"inline"===g.css("display");)g=g.parent();return e=g.innerWidth(),f=d["max-height"],e>=d["min-width"]?c(a,b,f).done(k.resolve).fail(k.reject):k.reject(h.UI_FIT_ERROR,{msg:"parent width smaller than min-width",parentWidth:e,minWidth:d["min-width"]}),k.promise()}function e(a,c){var d=h.wrap(a,b,c);return f.styleElement(d,{visibility:"hidden"}),d}var f=a("utils/utils"),g=a("lodash"),h=a("modules/placements/strategies/utils"),i=a("jquery"),j=a("core/Reporter"),k="after",l=200,m=3,n=8;return{getWrapper:e,place:d}}),define("modules/placements/strategies/IconRight",["require","modules/placements/strategies/utils","jquery","utils/utils"],function(a){"use strict";function b(a,b,c){var d,e,f=a.parent(),h=f.position().left+Math.floor(.03*f.width()),i=b.position().left;h>i&&(b.remove(),e=g.UI_FIT_ERROR,d={msg:"component rendered too close to parent's left",componentLeft:i,parentLeft:h}),c(e,d)}function c(a,c,d){var e=null,f=null,h=null,i=null;if(a[0].nodeName.match(/br/i))return void b(a,c,d);e=a.position(),f=a.offset(),h=f.top,i=e.left+3;var j,k,l,m=c.position(),n=c.offset(),o=n.top-25,p=m.left,q=i>p,r=o>h;(q||r)&&(c.remove(),j=g.UI_FIT_ERROR,l="error detected in placement ",q&&(l+=" component rendered to the left of reference "),r&&(l+=" component is below the reference"),k={msg:l,componentX:p,referenceX:i,componentTop:o,referenceBottom:h}),d(j,k)}function d(){var a=h("<div>");return i.styleElement(a,{"margin-left":j,display:"inline-block"}),a}function e(a,b){var d=h.Deferred();return a[0].nodeName.match(/br/i)?a.before(b):a.append(b),c(a,b,function(a){a?d.reject(a):(i.styleElement(b,{visibility:"visible"}),d.resolve(b))}),d.promise()}function f(a,b){var c=g.wrap(a,d,b);return c}var g=a("modules/placements/strategies/utils"),h=a("jquery"),i=a("utils/utils"),j=4;return{getWrapper:f,place:e}}),define("modules/placements/strategies/index",["require","modules/placements/strategies/after","modules/placements/strategies/IconRight"],function(a){"use strict";function b(a){var b=(a.action||"").toLowerCase(),c=e[b];if(null==c)throw"unknown strategy "+b;return c;
}var c=a("modules/placements/strategies/after"),d=a("modules/placements/strategies/IconRight"),e={iconright:d,after:c,within:c};return{getStrategy:b,_strategies:e}}),define("utils/SerialExecutor",["require","utils/BaseObject","core/Reporter","jquery","lodash"],function(a){"use strict";function b(a){function c(){a._running=null,b(a)}if(!a._running&&a._queued.length){a._running=a._queued.shift();try{var e=a._running;e.fn().done(function(){e.d.resolve.apply(null,arguments)}).fail(function(){e.d.reject.apply(null,arguments)}).always(c)}catch(a){try{d.error(["SerialExecutor"],a.message,a.stack)}catch(a){}c()}}}var c=a("utils/BaseObject"),d=a("core/Reporter"),e=a("jquery"),f=a("lodash");return c.extend({constructor:function(){this._queued=[],this._running=null},execute:function(a){if(!f.isFunction(a))throw new Error("function expected");var c=e.Deferred();return this._queued.push({fn:a,d:c}),b(this),c.promise()}})}),define("modules/ComponentManager",["require","spxw/settings","utils/utils","lodash","core/Reporter","utils/SerialExecutor"],function(a){"use strict";function b(a){this._executor=new g,this._toDisplay=[],this._inProcessOfDisplaying=[],this._displayed=[],this._displayCheckLock=!1;var b=this;a.subscribe(c.globalEvents.viewportChange,function(a,c){if(!b._displayCheckLock){b._displayCheckLock=!0;try{for(var d=b._toDisplay.length;d--;){var e=b._toDisplay.shift();b._inProcessOfDisplaying.push(e),b._detectComponentViewStatus(e,c)}}catch(a){f.error(["ComponentManager"],"unhandled checkVisibility error",a)}finally{b._displayCheckLock=!1}}})}var c=a("spxw/settings"),d=a("utils/utils"),e=a("lodash"),f=a("core/Reporter"),g=a("utils/SerialExecutor");return b.prototype={render:function(a,b,c,e,f){function g(){return a.render(b,c,e,f).then(function(){h._detectComponentViewStatus(a,d.getViewportSize())})}var h=this;return this._executor.execute(g)},_detectComponentViewStatus:function(a,b){try{a.checkVisibility(b.top,b.bottom)?this._displayed.push(a):this._toDisplay.push(a)}catch(a){f.error(["ComponentManager"],"unhandled checkVisibility error: ",a)}finally{e.remove(this._inProcessOfDisplaying,function(b){return b===a})}}},b}),define("modules/placements/PlacementPromise",["utils/BaseObject"],function(a){"use strict";var b="render_fail_pass",c=a.extend({constructor:function(a){this._promise=a},always:function(a){return this._promise.always(a),this},done:function(a){return this._promise.done(a),this},passed:function(a){return this._promise.fail(function(c){c===b&&a()}),this},fail:function(a){return this._promise.fail(function(c){c!==b&&a.apply(null,arguments)}),this}},{pass:function(a){a.reject(b)}});return c}),define("spxw/Swoop2Placements",["require","utils/BaseObject","modules/placements/strategies/index","core/Reporter","utils/utils","lodash","modules/ComponentManager","modules/placements/PlacementPromise","spxw/DomainConfig"],function(a){"use strict";var b=a("utils/BaseObject"),c=a("modules/placements/strategies/index"),d=a("core/Reporter"),e=a("utils/utils"),f=a("lodash"),g=a("modules/ComponentManager"),h=a("modules/placements/PlacementPromise"),i=a("spxw/DomainConfig"),j=b.extend({constructor:function(a,b,c){this.type=a,this.message=b,this.data=c},toString:function(){return this.type+" "+this.message}}),k=function(a){if(!f.isObject(a))throw new j("invalid","not an object",a);if(!f.isString(a.locationId))throw new j("invalid","missing locationId",a);if(!f.isString(a.path))throw new j("invalid","missing path",a);if(null==a.placementData||!f.isString(a.placementData.mod))throw new j("invalid","incomplete placementData",a);if(!f.isObject(a.properties))throw new j("invalid","missing properties",a);if(!f.isObject(a.strategy))throw new j("invalid","missing strategy",a);if(!f.isObject(a.analyticsCtx))throw new j("invalid","missing analytics context",a)},l=function(a,b){var c={};c[a.placementData.mod]=e.resolveUrl(b,a.path+"?noext=1"),requirejs.config({paths:c})},m=b.extend({constructor:function(a){this.moduleBase=a.dataStore.get(["moduleBase"])||a.dataStore.get(["serverBase"]),this.knownLocations={},this.placements=[],this.countForSlotType={},this.constrainedPlacements=[],this.placementErrors=[],this.ignoredPlacements=[],this.badLocationPlacements=[],this.locationResolver=a.locationResolver;var b=new i(a.dataStore.get(["domainconfig"])),c=b.placementConstraints().slotLimit;this.limitForSlotType={0:c.icon,1:c.medium}},addPlacements:function(a){return f.each(a,f.bind(this.addPlacement,this)),this.placements},addPlacement:function(a){try{if(k(a),a.ignore)return void this.ignoredPlacements.push(a);if(a.location=this.locationResolver.location(a.locationId),null==a.location||this.knownLocations[a.locationId])return void this.badLocationPlacements.push(a);this.knownLocations[a.locationId]=!0;var b=a.analyticsCtx.st,c=a.location;if(c.config&&c.config.name&&(a.analyticsCtx.sn=c.config.name),void 0!==this.limitForSlotType[b]&&(this.countForSlotType[b]||0)>=this.limitForSlotType[b])return void this.constrainedPlacements.push(a);l(a,this.moduleBase),this.placements.push(a);var d=this.countForSlotType[b];this.countForSlotType[b]=d?d+1:1}catch(a){this.placementErrors.push(a)}}}),n=b.extend({constructor:function(){this.lookups={}},addLocations:function(a){$.extend(this.lookups,a)},location:function(a){return this.lookups[a]}}),o=b.extend({constructor:function(a,b,c){this.evtBus=a.evtBus,this.dataStore=a.dataStore,this.analytics=a.analytics,this.clickTopic=a.clickTopic,this.slots=a.slots||[],this.extractorErrors=a.extractorErrors,this.componentManager=b,this.clickAnalyticsFactory=this.analytics.v14HintFactory(),this.locationResolver=new n,this.locationResolver.addLocations(c)}}),p=b.extend({constructor:function(a,b){function c(){var a=d.get("st0s")+d.get("st1s"),b=d.get("st0p")+d.get("st1p"),c=Math.min(d.get("st0p"),d.get("st0s")),e=Math.min(d.get("st1p"),d.get("st1s")),f=c+e;d.increment("st0o",c),d.increment("st1o",e),d.increment("us",a),d.increment("up",b),d.increment("o",f),d.increment("t",f-d._rendered)}var d=this;this._analytics=a.analytics,this._rendered=0,this._summaryAnalytics=a.analytics.summaryCollector({type:"s/c/p",wait:3e3,onBeforeSend:c},{},{st0s:0,st0p:0,st0o:0,st1s:0,st1p:0,st1o:0,b:0,e:a.extractorErrors.length,p:b.length,pa:0,pc:0,o:0,s:0,l:0,c:0,f:0,r:0,t:0,u:0,up:0,us:0}),this.get=f.bind(this._summaryAnalytics.get,this._summaryAnalytics),this.increment=f.bind(this._summaryAnalytics.increment,this._summaryAnalytics),this.start=f.bind(this._summaryAnalytics.start,this._summaryAnalytics),a.slots.forEach(function(a){null!=a.slotType&&d.increment("st"+a.slotType+"s")})},notifyPlacements:function(a){var b=this;this.increment("s",a.placementErrors.length),f.forEach(a.placementErrors,function(a){b._analytics.placementError(a),d.log(["PlacementModule"],"error in placement instruction",a)}),this.increment("pc",a.constrainedPlacements.length),this.increment("l",a.badLocationPlacements.length),f.forEach(a.badLocationPlacements,function(a){b._analytics.locationIdError(a.analyticsCtx,a.locationId),d.log(["PlacementModule"],"Missing location id "+a.locationId,a)});var c=[].concat(a.placements,a.ignoredPlacements);c.forEach(function(a){var c="st"+a.analyticsCtx.st;b.increment(c+"p"),a.location&&!a.location.slotType&&b.increment(c+"s")})},notifyBuildError:function(a,b){this.increment("b");var c=new j("build",a,b);this._analytics.placementError(c)},notifyRendered:function(a){var b=this;return a.always(function(){b._rendered++}).done(function(){b.increment("r")}).passed(function(){b.increment("pa")}).fail(function(a){b.increment("uiTooLarge"===a?"f":"c")})},notifyUnhandled:function(a,b,c){try{return c()}catch(c){this.increment("u");var e=b.location.$node.selector,f=a._template;d.error(["Swoop2Placements"],"unhandled component error",c,"for component",f,"at location",e,"for placement",b)}}}),q=b.extend({constructor:function(a){this.context=a,this.placementList=new m(this.context)},clickAnalytics:function(a){return this.context.clickAnalyticsFactory("n",a.analyticsCtx)},addPlacements:function(a){return this.placementList.addPlacements(a)},buildComponent:function(b){var d=this,e=$.Deferred();return a([b.placementData.mod],function(a){var f=new a(d.context.evtBus,d.clickAnalytics(b),c,d.context.dataStore,b.analyticsCtx);e.resolve(f)},function(a){var b=a.requireModules.join(";");e.reject(a.toString(),b)}),e.promise()},renderComponent:function(a,b){function c(c){d.log(["PlacementModule"],c,a,j,b)}function e(a,d){var e=d&&d.msg||"";g.clickAnalytics(b).placementError(a,d),c(f.isError(d)?"Component generated an exception: "+a+". "+d:"Component failed: "+a+". "+e)}var g=this,i=this.context,j=b.location,k=f.merge({},b.properties,b.config),l=i.componentManager.render(a,j,b.strategy,k,i.clickTopic);return new h(l).done(f.bind(c,null,"Render")).passed(f.bind(c,null,"Component elected not to render")).fail(e)},start:function(){}}),r=b.extend({constructor:function(a,b){this.worker=a,this.summaryAnalytics=new p(this.worker.context,b)},addPlacements:function(a){return a=this.worker.addPlacements(a),this.summaryAnalytics.notifyPlacements(this.worker.placementList),a},buildComponent:function(a){return this.worker.buildComponent(a).fail(f.bind(this.summaryAnalytics.notifyBuildError,this.summaryAnalytics))},renderComponent:function(a,b){var c=this;return this.summaryAnalytics.notifyUnhandled(a,b,function(){return c.summaryAnalytics.notifyRendered(c.worker.renderComponent(a,b))})},start:function(){this.summaryAnalytics.start()}}),s=b.extend({constructor:function(a,b){this._context=a,this._componentManager=b||new g(a.evtBus)},run:function(a,b){var c=new o(this._context,this._componentManager,a),d=new r(new q(c),b),e=d.addPlacements(b);f.each(e,function(a){d.buildComponent(a).done(function(b){d.renderComponent(b,a)})}),d.start()},_updateModulePath:function(a,b){var c=this._context.dataStore.get(["moduleBase"])||this._context.dataStore.get(["serverBase"]),d={};d[a]=e.resolveUrl(c,b+"?noext=1"),requirejs.config({paths:d})},runDebug:function(b,e,f,g,h,i){var j=this,k=this._context.analytics.v14HintFactory(),l=k("n",{});i=i||"",this._updateModulePath(e,f),a([e],function(a){var f=new a(j._context.evtBus,l,c,j._context.dataStore),k={$node:b,config:g,text:$(b).text()};j._componentManager.render(f,k,h,g,i).done(function(){d.log(["PlacementModule"],e+" component rendered",b,g,h)}).fail(function(a,b){d.log(["PlacementModule"],e+" component render ERROR",a,b)})})}});return s}),define("spxw/loader/placementLoader",["require","modules/spxcontroller/WindowController","core/Reporter","modules/spxcontroller/PlacementAnalytics","spxw/Swoop2Placements","spxw/ExtractionContext","spxw/DomainConfig","jquery","lodash"],function(a){"use strict";function b(a){a.forEach(function(a){a.slotType=a.name&&/^after_/.test(a.name)?1:null})}function c(a,b){for(var c=new h(b.config),d=0;d<a.length;++d){var e=a[d];if(j.isObject(e)&&j.isObject(e.analyticsCtx)){var f=e.analyticsCtx;f.pid=e.placementId,f.loc=e.locationId,f.s=e.score,f.is=e.strategy.action,f.pi=d+1,f.rp=e.remnant,f.pm=c.useSwoopLite()?"swl":"sw"}}}var d=a("modules/spxcontroller/WindowController"),e=a("core/Reporter"),f=(a("modules/spxcontroller/PlacementAnalytics"),a("spxw/Swoop2Placements")),g=a("spxw/ExtractionContext"),h=a("spxw/DomainConfig"),i=a("jquery"),j=a("lodash");return function(a,h,k,l,m){var n,o,p=g.fromDataStore(a),q=p.placements,r=l.nodeLookup,s=p.version,t={};return l.clickTopic=l.clickTopic||"hintClick",l.slots=l.slots||[],c(q,p),b(l.slots),function(){function a(){var a=m&&m.content&&m.content._tags||[];return j.isArray(a)||(a=[a]),a}function b(){var b=!1;return j.each(a(),function(a){return a.match(/\bswl\b/)?(b=!0,!1):void 0}),b}function c(a){return{after_title:1,after_ingredients:2,after_content:3,after_article:4}[a.name]||5}function d(){k=j.filter(n,function(a){return 1===a.slotType}),k.sort(function(a,b){var d=c(a),e=c(b);return d!=e?d-e:a.name>b.name?1:a.name<b.name?-1:0})}function f(){j.each(q,function(a){a.remnant&&(a.locationId="root")}),q=j.sortBy(q,function(a,b){var c=a.score||a.analyticsCtx.crf;return j.isNumber(c)?-c:b}),q=j.sortBy(q,function(a,b){return a.remnant?q.length+b:b});var a=0;j.each(q,function(b){g(b)&&("root"===b.locationId&&(b.targetsRoot=!0),b.locationId=b.locationId+"_"+(a+=1))})}function g(a){return a.locationId&&a.analyticsCtx&&1===a.analyticsCtx.st}function h(a,b){e.log(["PlacementModule"],"Redirecting...",a,"> to "+b.name+" slot at",b.$node),r[a.locationId]=b}function i(a){e.log(["PlacementModule"],"Ignoring...",a,"> placement."),a.ignore=!0}var k,m=p.config,n=l.slots;if(j.isArray(n))if(f(),e.log(["PlacementModule"],"Re-ordered placements:",q),d(),e.log(["PlacementModule"],"Usable medium slots:",k),b()){e.log(["PlacementModule"],"Begin ultra-lite mode"),t.ultraLite=!0;var o=k.slice(0);j.each(q,function(a){g(a)&&(o.length?h(a,o.shift()):i(a))}),e.log(["PlacementModule"],"End ultra-lite mode")}else if(k.length){var s=j.filter(q,function(a){return a.targetsRoot});if(s.length){e.log(["PlacementModule"],"Begin root targeting adjustments.");var u=j.filter(q,function(a){return g(a)&&!a.targetsRoot&&r[a.locationId]});u.length?j.each(u,function(a){s.length&&j.isNumber(a.score)&&a.score<s[0].score&&(h(s.shift(),r[a.locationId]),i(a))}):h(s.shift(),k[0]),j.each(s,i),e.log(["PlacementModule"],"End root targeting adjustments.")}}}(),n=new d(h,a,m),n.start(),h.subscribe(l.clickTopic,function(b,c){var d=c.ctx||c.analytics;a.remove("currentContext"),a.remove("landingPageContext"),a.extend({currentContext:d,landingPageContext:c.lpOverrides}),n.changeLocation(c.target,d,c.d)}),e.log(["PlacementModule"],"running placement instructions",q),t.version=s,o=new f(l),o.run(r,q),j.merge(l,{debug:{placeHint:function(a,b){var c=j.extend({},{width:300,height:150,color:"red",text:"debug",strategy:{action:"within"},cl:{hint:{}},component:{module:"hint/debug",path:void 0}},b),d=c.component.module,f=c.component.path,g=r[a],h=g&&g.$node||i.spxUIDOM(a);return 0===h.length?void e.log(["PlacementModule"],"unable to locate "+a+" for placement"):void o.runDebug(h,d,f,c,c.strategy,c.clickTopic)}}}),k.resolve(t),t}}),define("spxw/loader/pageIntakeLoader",["require","lodash","core/Reporter","utils/globalObject","jquery"],function(a){"use strict";function b(a,b){e.log("Posting Extraction");var c=a.get(["logBase"])||a.get(["serverBase"]);g.ajax({url:c+"/s/in",type:"POST",data:d.extend({_json_:JSON.stringify(b)},a.get(["resParams"]))}).done(function(){e.log("Extraction Posted")}).fail(function(a,b,c){e.log("Failed to Post Extraction",{status:b,error:c})})}function c(a,b){var c=a.get(["xch"]),f=b.extraction.extractor.xch,g=f&&f!==c,h=b.nodeLookup,i=a.get(["placements"]),j=d.any(i,function(a){if(a.locationId.match(/^root_\d+$/))return!1;var b=h[a.locationId];return!b||!b.$node});return e.log("server xch "+c+" client xch "+f+" location ids missing "+j),g||j}var d=a("lodash"),e=a("core/Reporter").for("extractor"),f=a("utils/globalObject"),g=a("jquery"),h={"-1":"no",0:"compare-xch",1:"yes"};return function(a,d,g,i){var j=a.get(["pageIntake"]),k=f.SPX_INTAKE;e.log("pageIntake value "+j+" ("+h[j]+")"),(k||1===j||0===j&&c(a,i))&&b(a,i.extraction),g.resolve()}}),define("spxw/loader/debugToolsLoader",["require","spxw/SPX"],function(a){"use strict";var b=a("spxw/SPX");return function(a,c,d,e){b[" "]={extraction:e.extraction,nodeLookup:e.nodeLookup,debug:e.debug},d.resolve()}}),define("spxw/DataStore",["require","lodash"],function(a){"use strict";function b(a,b){var d=this;this.store={},this.reporter=a,this.$=b,this.sources={memory:{getAll:function(a){var b=[];return d.$.each(a,function(a,e){var f=c.get(d.store,e);b.push(f)}),b},put:function(a,b){d.store[a]=b},get:function(a){return a?c.get(d.store,a):d.store},extend:function(a){d.store=d.$.extend(!0,d.store,a)},remove:function(a){delete d.store[a]},clear:function(){d.store={}}}}}var c=a("lodash");return b.prototype={init:function(){this.store={}},_getMethods:function(a){var b;return a?(b=this.sources[a],b?b:(this.reporter.error("DataSource Source Name Unknown "+a),null)):this.sources.memory},get:function(a,b){var c=null,d=this;return b||"string"!=typeof a||(b=a,a=void 0),c=this._getMethods(b),null==c?null:a&&a.length>1&&d.$.isArray(a[0])?c.getAll(a):c.get(a)},extend:function(a,b){var c=this._getMethods(b);return c.extend(a)},remove:function(a,b){var c=this._getMethods(b);return c.remove(a)},put:function(a,b,c){var d=this._getMethods(c);return d.put(a,b)},clear:function(a){var b=this._getMethods(a);return b.clear()},flush:function(a){var b=this._getMethods(a);b.flush&&b.flush()},setCookie:function(a,b,c,d){var e=this._getMethods(d);e.setCookie&&e.setCookie(a,b,c)}},b}),define("spxw/Analytics",["require","utils/utils","lodash"],function(a){"use strict";function b(a){c.decorators.pubsub(this),this.ready=!1;var b=this,e=[],f=this.publish;this.publish=function(c,d){if(b.ready)f.call(b,c,d);else{var g={topic:c,args:d};a.reporter.log(["Analytics"],"Queueing analytics message",g),e.push(g)}},a.subscribe("SPX.Analytics.initialized",function(){b.ready=!0,e.length>0&&(a.reporter.log(["Analytics"],"Flushing "+e.length+" queued analytics messages."),d.each(e,function(a){f.call(b,a.topic,a.args)}),e=[])})}var c=a("utils/utils"),d=a("lodash");return b}),define("utils/WhichOne",["require","lodash","jquery","utils/BaseObject","modules/extractors/utils"],function(a){"use strict";function b(a){return i.isObject(a)?!i.isEmpty(a):a}function c(a){var c=0,d=!0;return i.all(m,function(e,f){if(f in a){var g=a[f],h=e.call(a,g);d=d&&b(h),c++}return d}),d&&c>0}function d(a){return i.filter(a,function(a,b){return"_"!==b[0]?(a._name=b,!0):!1})}function e(a){return i.sortBy(a,function(a){return-(a._priority||0)})}function f(a,b){var c=b._defaults;return c?i.map(a,function(a){return j.extend(!0,{},c,a)}):a}function g(a){return i.find(a,function(a){var b=!1,c=i.all(n,function(c,d){var e=a[d];return void 0!==e?(b=!0,c(e)):!0});if(!b)throw new Error("No precondition matched");return c})}function h(a){return a?(delete a._priority,i.each(n,function(b,c){delete a[c]}),a):a}var i=a("lodash"),j=a("jquery"),k=a("utils/BaseObject"),l=a("modules/extractors/utils"),m={_even:function(a){return a%2===0},_selector:i.bind(l.resolveSelector,l),_selectors:i.bind(l.resolveSelector,l),_allSelectors:function(a){return i.all(a,function(a){return l.resolveSelector(a).length})}},n={_if:c,_matchAlways:function(a){return a===!0}};return k.extend({pick:function(a){return h(g(f(e(d(a)),a)))}})}),define("utils/services",["require","core/Reporter","lodash","jquery"],function(a){"use strict";var b=a("core/Reporter").for("Services"),c=a("lodash"),d=a("jquery"),e={JSONP:function(b,e,f,g){return function(h){var i=d.Deferred(),j=null,k=g||a;return e=e||{},c.extend(e,h,f.get(["resParams"]),{callback:"SPX.define",ts:(new Date).getTime()}),j=c.template(b)(e),k([j],function(a){i.resolve(a)},function(a){i.reject(a)}),i.promise()}}},f={defineService:function(a,c,d,f,g){if(a=a||"JSONP",!(a in e)){var h="Unknown service type "+a;throw b.log(h),new Error(h)}return e[a](c,d,f,g)},invokeService:function(a,b,e,f){var g=d.Deferred();return b(a).done(function(a){c.isString(f)&&!c.isEmpty(f)?c.set(e,f.split("."),a):c.extend(e,a),g.resolve()}).fail(function(a){g.reject(a)}),g.promise()}};return f}),define("utils/JSONProcessor",["require","utils/utils","core/Reporter","jquery","lodash","utils/services"],function(a){"use strict";function b(a){return a.replace(n,"")}function c(a,c,d,e,f,g){var h=c.match(m),i=null,j=null,k=null,l=!1;return null!=h&&(i=b(h[0].replace(n,"")),i in q||(j=f[i],"function"==typeof j&&(delete e[c],k=c.replace(h,""),j(d,k,e,g,a),l=!0))),l}function d(a,b){k.each(a,function(d,f){c(b,f,d,a,r,e)})}function e(a,b){var f=!1;return k.isEmpty(a)||k.isString(a)?a:(d(a,b),h.walkObject(a,function(a,d,g,h){c(b,d,g,h,s,e)&&f===!1&&(f=!0)}),f&&e(a,b),a)}function f(a,c,d,e,f,g){var h=c.match(m),i=null,j=null,k=null,l=null;return null!=h&&(i=b(h[0].replace(n,"")),"invoker"===i&&(j=f[i],"function"==typeof j&&(delete e[c],k=c.replace(h,""),l=j(d,k,e,g,a)))),l}function g(a,b){var c=j.Deferred(),d=0;return(k.isEmpty(a)||k.isString(a))&&c.resolve(a),h.walkObject(a,function(e,g,h,i){var j=null;try{j=f(b,g,h,i,s)}catch(a){c.reject({type:"config",error:a})}null!=j&&(d++,j.done(function(){0===--d&&c.resolve(a)}).fail(function(a){c.reject({type:"service",error:a})}))}),0===d&&c.resolve(a),c.promise()}var h=a("utils/utils"),i=a("core/Reporter"),j=a("jquery"),k=a("lodash"),l=a("utils/services"),m=/__[A-Za-z]+_/,n=/_+/g,o={},p={},q={invoker:1},r={lookupLoad:function(a,b,c,d){var e=a.value;e&&d&&(e=d(e)),o[b]=e}},s={service:function(a,b,c,d,e){var f=l.defineService(a.serviceType,a.urlTemplate,a.params,e);k.isString(a.urlTemplate)?p[b]=f:i.log(["JSONProcessor"],"Missing urlTemplate for service definition "+b,a)},invoker:function(a,b,c,d,e){var f=p[a.serviceName],g=null,h=null;if(null==f)throw h="Unknown service "+a.serviceName,i.log(["JSONProcessor"],h,a),new Error(h);return g=l.invokeService(a.params,f,c,a.path)},weightedChoice:function(a,b,c){var d=null;k.isArray(a)&&(d=h.getWeightedRandom(a),c[b]=d.value)},weightedChoiceExtend:function(a,b,c){var d=null;k.isArray(a)&&(d=h.getWeightedRandom(a),k.extend(c,d.value))},lookup:function(a,b,c,d,e){var f,g=a.key;if("dataStore"===a.lookup)f=e.get(g.split("."));else{var h=o[a.lookup];h&&h[g]&&(f=h[g])}c[b]=f||a.default||a.defaultVal},choose:function(a,b,c,d,e){a=d(a,e),c[b]=k.isObject(a.choices)&&a.choices[a.value]||a.default},template:function(a,b,c,d,e){var f=a.template||"",g=a.context||{},j="";try{j=h.spxTemplate(f,e,g)}catch(c){i.log(["JSONProcessor"],"Error processing JSON template",c,a,b)}c[b]=j}};return{process:e,invokeServices:g}}),define("utils/DeferredChain",["require","jquery","lodash","utils/BaseObject","utils/utils"],function(a){"use strict";var b,c=a("jquery"),d=a("lodash"),e=a("utils/BaseObject"),f=a("utils/utils"),g=function(a){return function(){throw"DeferredChain.begin() must be called with a promise before "+a+"() can be called"}},h=function(a,b){a.done(function(){b.resolve.apply(this,arguments)}),a.fail(function(){b.reject.apply(this,arguments)}),a.progress(function(){b.notify.apply(this,arguments)})},i=function(a,b,c){return function(){var d=Array.prototype.slice.call(arguments,0);d.push(b);var e;try{e=a.apply(c,d)}catch(a){b.reject(a.message,a)}f.isPromise(e)?h(e,b):"pending"===b.state()&&(void 0===e?b.resolve():b.resolve(e))}},j=function(a,c){return c=c._originalPromise?c._originalPromise:c.promise(),new b(a.context,c)};return b=e.extend({constructor:function(a,b){this.context=a,this._originalPromise=b},begin:function(){throw"DeferredChain.begin() can be called only once"},chain:function(a){var b=c.Deferred();return this._originalPromise.done(i(a,b,this.context)).fail(b.reject),j(this,b)},guard:function(a){if(!d.isFunction(a))throw"DeferredChain.guard() must be called with a function";var b=this;return this.chain(function(){var c=Array.prototype.slice.call(arguments,0),d=c.pop(),e=a.apply(b.context,c);if(f.isPromise(e)){var g=new Error("DeferredChain.guard(func) func must be synchronous");d.reject(g.message,g)}else e?d.resolve():d.reject()})}}),d.each(d.keys(c.Deferred().promise()),function(a){b.prototype[a]=function(){var b=this._originalPromise[a].apply(this,arguments);return f.isPromise(b)&&(b=j(this,b)),b}}),e.extend({constructor:function(a){this.context=a},begin:function(a){var b=c.Deferred();return h(a,b),j(this,b)},chain:g("chain"),guard:g("guard")},{immediate:function(a,b){var d,e=c.Deferred(),g=new this(a).begin(e.promise());try{d=b.call(a,g),e.resolve()}catch(a){e.reject(a.message,a)}if(!f.isPromise(d))throw new Error("Promise expected: "+d);return d},runPipeline:function(a,b,d){var e=c.Deferred();return this.immediate(d,function(c){return c=c.chain(function(){return b}),a.forEach(function(a){c=c.chain(a)}),c}).done(e.resolve).fail(e.reject),e.promise()}})}),define("spxw/pageConfigurator",["require","lodash","utils/utils","utils/WhichOne","core/Reporter","utils/JSONProcessor","utils/DeferredChain"],function(a){"use strict";function b(a,b){for(var c="",d=0;d<a.length;d++){var e=a.charCodeAt(d);c+=e>=65&&90>=e?String.fromCharCode((e-65+b)%26+65):e>=97&&122>=e?String.fromCharCode((e-97+b)%26+97):a.charAt(d)}return c}var c=a("lodash"),d=a("utils/utils"),e=a("utils/WhichOne"),f=a("core/Reporter"),g=a("utils/JSONProcessor"),h=a("utils/DeferredChain"),i=5,j=250,k=[function(a){return g.process(a,this)},function(a){var b=a._ctx;return c.isObject(b)&&(f.log(["pageConfigurator"],"Extending analytics context",b),c.merge(this.analyticsCTX,b)),a},function(a){var b=a._delay;if(c.isNumber(b)){f.log(["pageConfigurator"],"Delaying page config resolution by "+b+"ms.");var d=$.Deferred();return setTimeout(function(){f.log(["pageConfigurator"],"Continuing page config resolution."),d.resolve(a)},b),d.promise()}return a},function(a){var b=this,c=1e3*(a._retry||i),g=Math.ceil(c/j),h=(a._tags||"").toString();if(/\bmulti\b/i.test(h)){f.log(["pageConfigurator"],"Re-writing multi-config starting with ",a);var k=a.urls;delete a.urls;var l=$.Deferred();return d.retry(function(){return(new e).pick(a)},g,j,d.isPresent).done(function(a){k&&(a.urls=k),b.resParams&&a._name&&(b.resParams.pg=(b.resParams.pg||"")+"/"+a._name),l.resolve(a)}).fail(function(){var a=new Error("pageConfigurator: No config found in WhichOne after "+c+"ms");a.spxEvent={type:"e/domainConfig"},l.reject(a)}),l.promise()}return a}];return{configure:function(a){var c=a['"l,w,u,i,q,v,k,w,v,n,q,o"'.split(",").join("")];c&&(a.domainconfig=JSON.parse(b(c,18)));var d=a.domainconfig||{};return f.log(["pageConfigurator"],"Processing ",d),h.runPipeline(k,d,a).done(function(b){f.log(["pageConfigurator"],{received:d,updated:b}),a.domainconfig=b})}}}),define("spxw/BookmarkletHandler",["require","utils/globalObject","modules/Bookmarklet"],function(a){"use strict";var b=a("utils/globalObject"),c=a("modules/Bookmarklet"),d='<strong id="SPXClear" style="cursor:pointer;text-decoration:underline">Click here to override. </strong>';return function(a,e){a.oldSPX?a.oldSPX&&null===a.oldSPX.isBookmarklet?(c.create(d).onClickOn(a.oldSPX.DataStore,"Setting Override, page will refresh when complete...").show(),b.SPX=a.oldSPX):a.oldSPX.isBookmarklet===!1?((new c).hide(),a.isBookmarklet=!0,e()):b.SPX=a.oldSPX:e()}}),define("utils/AppAssembler",["require","jquery","lodash","core/Reporter"],function(a){"use strict";function b(a,b,c,f){var g=this;this._context=d.merge({analytics:c,evtBus:b,dataStore:a},f||{}),this._halt=!1,b.subscribe("halt",function(a,b){g._halt=!0,e.log(["AppAssembler"],"Halting execution!",b)})}var c=a("jquery"),d=a("lodash"),e=a("core/Reporter");return b.prototype={_runStep:function(b){var d=c.Deferred(),f=d.promise();if(this._halt)return d.reject("Halt Signal"),f;var g=this._context;return e.log(["AppAssembler"],"Running "+b,g),a([b],function(a){try{a(g.dataStore,g.evtBus,d,g,g.analytics)}catch(a){throw e.log(["AppAssembler"],"Error: "+b+" failed",a),a}},function(a){throw e.log(["AppAssember"],"Failed to load mod "+b,a),a}),d.fail(function(){e.log(["AppAssembler"],"Failed to complete: "+b)}),f},go:function(a){function b(d){c._runStep(d).done(function(){var c=a.shift();c?b(c):e.log(["AppAssembler"],"App run complete")})}var c=this;b(a.shift())}},b}),define("appDefinition",["require"],function(a){"use strict";return["spxw/loader/userLoader","spxw/loader/analyticsSessionLoader","spxw/loader/resParamsLoader","spxw/loader/stopSpxLoader","spxw/loader/initLoader","spxw/loader/uiLoader","spxw/loader/globalEventsLoader","spxw/loader/mainContentLoader","spxw/loader/pageConfigHeuristicsLoader","spxw/loader/slotLoader","spxw/loader/extractLoader","spxw/loader/placementLoader","spxw/loader/pageIntakeLoader","spxw/loader/debugToolsLoader"]}),require.config({enforceDefine:!0,shim:{_jquery:{exports:"jQuery"},easyXDM:{exports:"easyXDM"}},paths:{_jquery:SPX._settings.jqueryUrl||"//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min",easyXDM:"libs/easyxdm"},waitSeconds:0}),require.onError=function(a){"use strict";var b="color:black;background:red;";console&&console.log&&(console.log("%c Error Loading Module",b),console.log(a.message),console.log(a.stack))},define("spxw/spxMain",["require","rsvp","utils/globalObject","utils/utils","spxw/SPX","jquery","lodash","core/Reporter","spxw/DataStore","spxw/settings","spxw/Analytics","core/storage/PersistentStore","spxw/pageConfigurator","modules/analytics.spx","spxw/BookmarkletHandler","utils/AppAssembler","appDefinition"],function(a){"use strict";function b(){return new k.Promise(function(a,b){v.configure(n.settings).done(function(a){n.DataStore.put("domainconfig",a)}).then(a,b)})}function c(){n.subscribe("SPX.handle.message",function(a,b){q.log(["requests"],"SPX.handle",b);var c=b.data;c&&n.DataStore.extend(c)}),n.error=function(a){q.log(["SPXMain"],"Server error",a),n.handle(a),n.errorReason=a},n.settings=s,n.$=m.extendJQuery(o),n.reporter=q,n.DataStore=new r(q,o),n.Analytics=new t(n),n.utils=m,n.require=a,n.define=define,o.extend(!0,n.settings,n._settings),s.analyticsCTX=s.analyticsCTX||{},n.DataStore.extend(n.settings),d(n.settings),k.on("error",function(a){q.error(["SpxMain"],"Uncaught error in promise chain",a)})}function d(a){a.urlSettings&&a.urlSettings.mp&&(a.resParams.mp=a.urlSettings.mp)}function e(a){w.initAnalytics(a)}function f(){s.analyticsCTX.tsi=n.elapsedTime();var a=l.performance&&l.performance.timing;return a&&a.domLoading&&n.epoch&&(s.analyticsCTX.tsl=n.epoch-a.domLoading,a.domInteractive&&(s.analyticsCTX.tsdr=a.domInteractive-a.domLoading)),n.DataStore.extend(n.settings),e(n.settings)}function g(){n.makeReady();var a=new y(n.DataStore,n,n.Analytics);a.go(z)}function h(a){p.isObject(a)&&p.isObject(a.spxEvent)?(n.Analytics.publish(null,a.spxEvent),q.log(["SPXMain"],"*** ERROR with event "+a,a)):q.error(["SPXMain"],a||"Cannot get ready.",a),u.initialized&&e(n.settings)}function i(a){return p.isObject(a)&&"isBookmarklet"in a}function j(){var a=i(l)||i(l.SPX)||i(n)||i(n.oldSPX);return q.isDevMode=a||!!n._settings.user,n._settings.serverBase&&n._settings.domain?(c(),q.log(["SPXMain"],"Waiting for DOM and jQuery..."),void k.all([u.init(n.settings.providerUrl),o.allDOMReady()]).then(b).then(f).then(g).catch(h)):void q.error(["SPXMain"],"No domain or serverBase. Aborting.")}var k=a("rsvp"),l=a("utils/globalObject"),m=a("utils/utils"),n=a("spxw/SPX"),o=a("jquery"),p=a("lodash"),q=a("core/Reporter"),r=a("spxw/DataStore"),s=a("spxw/settings"),t=a("spxw/Analytics"),u=a("core/storage/PersistentStore"),v=a("spxw/pageConfigurator"),w=a("modules/analytics.spx"),x=a("spxw/BookmarkletHandler"),y=a("utils/AppAssembler"),z=a("appDefinition");x(n,j)}),define("modules/ComponentProperties",["require","utils/BaseObject","utils/utils","lodash","core/Reporter","utils/JSONProcessor"],function(a){"use strict";function b(a){var b=a.cl;if(b){if(!g.isObject(b))throw"Bad client data "+b}else a.cl={}}function c(a){var b=a.cl.hint;if(b){if(!g.isObject(b))throw"Bad hint data "+b;delete a.cl.hint}return b||{}}function d(a,b){var c={};return g.each(a,function(a,d){var e=b[d];c[e||d]=a}),c}var e=a("utils/BaseObject"),f=a("utils/utils"),g=a("lodash"),h=a("core/Reporter"),i=a("utils/JSONProcessor");return e.extend({constructor:function(a,b,c,d,e){this._dataStore=c,this._hintAnalytics=d,this._defaultTemplate=b,this._lookup=e||{},this._originalProperties=g.cloneDeep(a),this.properties=a},promise:function(){var a=$.Deferred(),e=this;return this._resolveJSON().then(function(a){return f.failDeferredOnException(function(){b(a);var f=c(a);return a=g.extend(a,f),a=d(a,e._lookup),a.type=a.type||"static",a.template=a.template||e._defaultTemplate,e.properties=a,a})}).done(a.resolve).fail(a.reject),a.promise()},_resolveJSON:function(){var a=$.Deferred(),b=i.process(this.properties,this._dataStore);return i.invokeServices(b,this._dataStore).done(a.resolve).fail(g.bind(this._errorHandler(a),this)),a.promise()},_errorHandler:function(a){var b=this;return function(c){var d=b._fail(c);f.rejectWithException(a,d)}},_fail:function(a){var b=a.type,c=a.error;return"config"===b?this._hintAnalytics.configError(c.message,this._originalProperties):"service"===b?this._hintAnalytics.serviceError(c.message,this._originalProperties):h.error(["ComponentProperties"],"unknown error",a.type,a.error,this._originalProperties),
c}})}),define("modules/components/PositionAnalytics",["require","utils/globalObject","spxw/SPX","utils/utils","core/Reporter"],function(a){"use strict";function b(){}function c(a,c){return function(){try{return a.apply(b,arguments)}catch(a){return g.error("Error in obtaining data: ",a),c}}}var d=a("utils/globalObject"),e=a("spxw/SPX"),f=a("utils/utils"),g=a("core/Reporter").for("PositionAnalytics");return b._click=function(a,b){var c=$(b.target),d=a.css("position");a.css("position","relative");var e=c.position();return a.css("position",d),{cp:{cx:b.clientX,cy:b.clientY,s:c.hasClass("swoop-container"),te:f.sanitizeString(f.summarize(c,70)),th:c.outerHeight(),tl:e.left,tt:e.top,tw:c.outerWidth(),x:b.pageX,y:b.pageY}}},b._view=function(){return{vp:{wxo:d.pageXOffset,wyo:d.pageYOffset}}},b._hint=function(a){var c=a[0],d=$(c.parentElement),e=a.children(),g=a.offset(),h=a.css("position");a.css("position","relative");var i=e.position();a.css("position",h);var j=d?f.sanitizeString(f.summarize(d,70)):null,k=d?d.outerHeight():null,l=d?d.outerWidth():null,m=d?d.offset():null,n=d?m.left:null,o=d?m.top:null,p=a.outerHeight()?a.outerHeight():null,q=b._safeCssProperty(a,"margin-bottom"),r=b._safeCssProperty(a,"margin-left"),s=b._safeCssProperty(a,"margin-top"),t=b._safeCssProperty(a,"margin-right");return{vp:{hh:e.outerHeight(),hl:i.left,ht:i.top,hw:e.outerWidth(),p:j,ph:k,pl:n,pt:o,pw:l,sh:p,sl:g.left,smb:q,sml:r,smr:t,smt:s,st:g.top,sw:a.outerWidth()}}},b._page=function(){var a,b=$(d),c=$(d.document),g=b?b.height():null,h=b?b.width():null,i=c?c.height():null,j=c?c.width():null;e.DataStore&&e.DataStore.get(["mainContent"])&&(a=e.DataStore.get(["mainContent"]).$node);var k=a?f.sanitizeString(f.summarize(a,70)):null,l=a?a.outerHeight():null,m=a?a.outerWidth():null,n=a?a.offset():null,o=a?n.left:null,p=a?n.top:null;return{vp:{dh:i,dw:j,mce:k,mch:l,mcl:o,mct:p,mcw:m,vh:Math.max(d.document.documentElement.clientHeight,d.innerHeight||0),vw:Math.max(d.document.documentElement.clientWidth,d.innerWidth||0),wh:g,ww:h}}},b._safeCssProperty=function(a,b){try{return parseInt(a.css(b))}catch(a){return 0}},b.page=c(b._page,{}),b.hint=c(b._hint,{}),b.view=c(b._view,{}),b.click=c(b._click,{}),b}),define("modules/components/ClickHandler",["require","spxw/settings","modules/components/DOMAnalytics","modules/components/PositionAnalytics","utils/utils","lodash"],function(a){"use strict";function b(a){this.$wrapper=a.wrapper,this.clickTopic=a.clickTopic,this.evtBus=a.evtBus,this.hintData=a.hintData,this.componentClickCallback=a.onClick,this.hintAnalytics=a.hintAnalytics,this.defaultTarget=a.defaultTarget,this.creativeOptions=a.creativeOptions,this.domInsertionTs=a.domInsertionTs,this.controller=a.controller,this.clickCount=0}var c=a("spxw/settings"),d=a("modules/components/DOMAnalytics"),e=a("modules/components/PositionAnalytics"),f=a("utils/utils"),g=a("lodash");b.prototype.attach=function(){this.$wrapper.on("click",g.throttle(this._getHandler(),c.hintComponents.clickThrottleRate,{trailing:!1}))},b.prototype.detach=function(){this.$wrapper.off("click")},b.prototype._getHandler=function(){var a=this;return function(b){b.preventDefault(),b.stopPropagation();var c=(new Date).getTime(),f=c-a.domInsertionTs,h={ctx:{cts:c,data:a.hintData},details:{ttc:f}},i=a.controller.analyticsData(),j=g.merge(e.page(),e.hint(a.$wrapper),e.view(),e.click(a.$wrapper,b),i.context),k=d.fromElements(a.$wrapper[0],b.target);g.merge(h.ctx,k.ctxFields(),j),g.merge(h.details,i.details);var l=a._acquireTarget(k);g.merge(h.details,k.detailFields(),{tgt:l});var m=a._validateClick(f);if(g.isEmpty(m)){a.clickCount+=1,h.details.cc=a.clickCount;var n=a.hintAnalytics.click(h.ctx,h.details);a.componentClickCallback(b),a._sendEventBusMsg(n.ctx,l)}else m.forEach(function(a){g.merge(h.details,a.details)}),a.hintAnalytics.clickIgnored(h.ctx,h.details)}},b.prototype._sendEventBusMsg=function(a,b){this.evtBus.publish(this.clickTopic,{target:b,ctx:a,lpOverrides:this._lpOverrides()})},b.prototype._validateClick=function(a){return g.flatten([this._validateTimeToClick(a)])};var h=200;return b.prototype._validateTimeToClick=function(a){var b=g.get(this.creativeOptions,"mints",0)+h,c=[];return b>a&&c.push({message:"click_too_fast",details:{minttc:b}}),c},b.prototype._acquireTarget=function(a){var b=this.defaultTarget,c=a.detailFields();c&&/(^http.+|^swoop.+)/i.test(c.tgt)&&(b=c.tgt);var d=this._segmentClickParams(g.merge({},this.creativeOptions.targetParams,this.controller.clickTargetParams()));return b=f.appendQueryParams(b,d.query),b=f.appendHashParams(b,d.hash)},b.prototype._segmentClickParams=function(a){var b={},c={};return g.each(a,function(a,d){g.startsWith(d,"#")?b[d.substr(1)]=a:c[d]=a}),{hash:b,query:c}},b.prototype._lpOverrides=function(){return this.creativeOptions.slider?this.creativeOptions:this.creativeOptions.lp||{}},b}),define("modules/HintComponent",["require","jquery","lodash","utils/BaseObject","utils/DeferredChain","utils/utils","core/Reporter","modules/ComponentProperties","modules/components/PositionAnalytics","modules/components/ClickHandler"],function(a){"use strict";function b(a,b,c){var d=a.offset().top;return d>b&&c>d}function c(a){var b=a.properties.clientData,c=b&&b.tracker;c&&p.spxUIDOM("body").append(c)}function d(a){var b=p("<img height='1' width='1' style='display:none'>");b.attr("src",a),p.spxUIDOM("body").append(b)}function e(a){var b=a.find("[data-view-beacon]");b.length>0&&d(b.data("view-beacon"))}function f(a){var b=p(a).data("click-beacon");b&&d(b)}function g(a){var b=this;return new v(a,this._template,this._dataStore,this._hintAnalytics,this._lookup).promise().done(function(a){b.properties=a})}function h(a){try{this._insertionStrategy=this._strategies.getStrategy(this.insertionStrategyName)}catch(b){u.log(["Placement"],"Unknown strategy ",this.insertionStrategyName),this._hintAnalytics.strategyError(this.insertionStrategyName),a.reject("Unknown Strategy")}}function i(a){try{this._css=t.spxTemplate(this._css,this._dataStore,{})}catch(b){u.log(["Placement"],"error expanding CSS: "+b.message+"\n"+b.stack),a.reject("Template Expansion Error")}}function j(){t.loading.loadCss(this._css)}function k(){this.$wrapper=this._insertionStrategy.getWrapper(this.$node,this.config)}function l(){return this._controller.bootstrap(this.$wrapper,this.properties,this._analyticsCtx,this._template)}function m(){return this._controller.render()}function n(a){var b=this,c="iconRight"===b.insertionStrategyName.action?"inline-block":"block";return this._insertionStrategy.place(this.$node,this.$wrapper,this._componentConfig).done(function(d){b.$ele=d,t.styleElement(b.$ele,{display:c,opacity:"1"}),b._domInsertionTs=(new Date).getTime();var e=b._controller.analyticsData(),f=q.merge(w.page(),w.hint(b.$wrapper),e.context);b._hintAnalytics.placementReady(f,e.details),a.resolve(d)}).fail(a.reject)}function o(){this.clickHandler=new x({wrapper:this.$wrapper,clickTopic:this.clickTopic,evtBus:this._evtBus,hintData:this._data,hintAnalytics:this._hintAnalytics,defaultTarget:this.properties.target,creativeOptions:this.properties.clientData||{},onClick:this.onClick.bind(this),domInsertionTs:this._domInsertionTs,controller:this._controller}),this.clickHandler.attach()}var p=a("jquery"),q=a("lodash"),r=a("utils/BaseObject"),s=a("utils/DeferredChain"),t=a("utils/utils"),u=a("core/Reporter"),v=a("modules/ComponentProperties"),w=a("modules/components/PositionAnalytics"),x=a("modules/components/ClickHandler");return r.extend({constructor:function(a,b,c,d,e,f,g,h,i,j){if(this._evtBus=a,this._hintAnalytics=b,this._strategies=c,this._controller=f,this._dataStore=d,this._analyticsCtx=e,this._data={da:0},this._template=g||"",this._css=h||"",q.isObject(i))this._lookup=i;else try{this._lookup=JSON.parse(i)}catch(a){this._lookup={},u.log(["HintComponent"],"error parsing short property names (lookup.json)",i)}if(q.isObject(j))this._componentConfig=j;else try{this._componentConfig=JSON.parse(j)}catch(a){this._componentConfig={},u.log(["HintComponent"],"error parsing component config (config.json)",j)}this.properties=null,this.$ele=null,this.$wrapper=null,this._insertionStrategy=null,this.status="initialized"},render:function(a,b,c,d){return t.failDeferredOnException(function(){return this.insertionStrategyName=b,this.clickTopic=d,this.$node=a.$node,this.config=a.config,new s(this).begin(g.call(this,c)).chain(this.onProperties).chain(h).chain(i).chain(j).chain(k).chain(l).chain(function(){this.status="bootstrapped"}).chain(m).chain(this.onBeforePlacement).chain(n).chain(o).chain(this.onAfterPlacement).chain(function(){this.status="placed"})},this)},checkVisibility:function(a,d){if(this._data.da+=1,"placed"!==this.status||!b(this.$ele,a,d))return!1;this.status="displayed",c(this),this._data.at=(new Date).getTime();var e=this._controller.analyticsData(),f=q.merge(w.page(),w.hint(this.$wrapper),w.view(),e.context,{data:this._data}),g=q.merge(e.details,this._data);return this._hintAnalytics.visible(f,g),this.onAfterDisplay(),!0},destroy:function(){this.$ele&&(this.$ele.off("click mouseenter mouseleave"),this.$ele.remove(),this.$ele=null,this.status="initialized")},onProperties:function(){},onBeforePlacement:function(){},onAfterPlacement:function(){this.$ele.before(document.createComment("googleoff: all")).after(document.createComment("googleon: all"))},onAfterDisplay:function(){e(this.$ele)},onClick:function(a){f(a.target)}})}),define("text!modules/components/hints/image/template.html",[],function(){return'<div class="spx-image <%- rc.style %>"\n	 data-purpose="lp"\n	 data-target="<%- rc.target%>"\n	 data-pitch="<%- rc.headline %> <%- rc.img %> <%- rc.description1 %> <%- rc.description2 %> <%- rc.style %>">\n\n	<% if(rc.overhang) { %>\n	<!-- overhang -->\n	<div class="spx-image-container spx-clear-fix spx-image-overhang">\n\n		<div class="spx-image-text spx-bold"><%- rc.headline %></div>\n\n		<div class="spx-image-content-wrapper spx-clear-fix">\n			<img src="<%- rc.img %>" class="spx-image-img">\n\n			<div class="spx-image-details">\n				<div class="spx-image-text"><%- rc.description1 %></div>\n\n				<% if(rc.description2 && rc.description2.length) { %>\n				<div class="spx-linked-text spx-image-text"><%- rc.description2 %></div>\n				<% } %>\n\n				<div class="spx-image-by">ads by <strong class="spx-image-highlight">Swoop</strong></div>\n			</div>\n		</div>\n\n	</div>\n	<!-- ./overhang -->\n	<% } else if (rc.oneline) { %>\n	<!-- oneline -->\n	<div class="spx-image-container spx-clear-fix">\n\n		<div class="spx-image-content-wrapper">\n			<img src="<%- rc.img %>" class="spx-image-img">\n\n			<div class="spx-image-details">\n				<div class="spx-image-text spx-bold"><%- rc.headline %></div>\n\n				<div class="spx-description-oneline">\n					<span class="spx-image-text"><%- rc.description1 %></span>\n\n					<% if(rc.description2 && rc.description2.length) { %>\n					<span class="spx-image-text spx-linked-text"><%- rc.description2 %></span>\n					<% } %>\n				</div>\n\n				<div class="spx-image-by">ads by <strong class="spx-image-highlight">Swoop</strong></div>\n			</div>\n		</div>\n\n	</div>\n	<!-- ./oneline -->\n	<% } else { %>\n	<!-- default -->\n	<div class="spx-image-container spx-clear-fix spx-image-border">\n		<div class="spx-image-content-wrapper spx-clear-fix">\n			<img src="<%- rc.img %>" class="spx-image-img">\n\n			<div class="spx-image-details">\n				<div class="spx-image-text spx-linked-text"><%- rc.headline %></div>\n				<div class="spx-image-text"><%- rc.description1 %></div>\n\n				<% if(rc.description2 && rc.description2.length) { %>\n				<div class="spx-image-text"><%- rc.description2 %></div>\n				<% } %>\n			</div>\n		</div>\n	</div>\n\n	<% if (rc.style === \'default\') { %>\n	<div class="spx-image-by spx-image-powered spx-clear-fix">\n		Powered by <strong class="spx-image-highlight">Swoop</strong>\n	</div>\n	<% } %>\n	<!-- ./default -->\n	<% } %>\n</div>\n'}),define("text!modules/components/hints/image/style.css",[],function(){return"/*MIXINS*/\n\n/* MIXINS */\n\n/* MIXINS */\n\n/* line 3, ../../../../sass/_utils.scss */\n\n.spx-block {\n  display: block !important;\n}\n\n/* line 6, ../../../../sass/_utils.scss */\n\n.spx-inline {\n  display: inline !important;\n}\n\n/* line 9, ../../../../sass/_utils.scss */\n\n.spx-underline {\n  text-decoration: underline !important;\n}\n\n/* line 12, ../../../../sass/_utils.scss */\n\n.spx-linked-text {\n  color: #256bb8 !important;\n  padding-bottom: 1px !important;\n  text-decoration: underline !important;\n}\n\n/* line 17, ../../../../sass/_utils.scss */\n\n.spx-linked-text:hover {\n  color: #2c89e9 !important;\n}\n\n/* line 21, ../../../../sass/_utils.scss */\n\n.spx-gray-text {\n  color: #808080 !important;\n}\n\n/* line 25, ../../../../sass/_utils.scss */\n\n.spx-bold {\n  font-weight: bold !important;\n}\n\n/* line 20, ../../../../sass/_mixins.scss */\n\n.spx-clear-fix:before,\n.spx-clear-fix:after {\n  content: \"\" !important;\n  display: table !important;\n}\n\n/* line 25, ../../../../sass/_mixins.scss */\n\n.spx-clear-fix:after {\n  clear: both !important;\n}\n\n/* line 8, style.scss */\n\n.swoop-container .spx-image {\n  display: inline-block !important;\n}\n\n/* line 11, style.scss */\n\n.swoop-container .spx-image .spx-image-text {\n  font-family: 'lucida grande', tahoma, verdana, arial, sans-serif !important;\n  font-size: 12px !important;\n  line-height: 15px !important;\n}\n\n/* line 17, style.scss */\n\n.swoop-container .spx-image .spx-image-by {\n  color: #aaaaaa !important;\n  font-size: 9px !important;\n  line-height: 15px !important;\n  padding-top: 1px !important;\n}\n\n/* line 23, style.scss */\n\n.swoop-container .spx-image .spx-image-by .spx-image-highlight {\n  color: #ffbe8b !important;\n}\n\n/* line 27, style.scss */\n\n.swoop-container .spx-image .spx-image-by.spx-image-powered {\n  -moz-border-radius: 0 0 6px 6px !important;\n  -webkit-border-radius: 0 !important;\n  border-radius: 0 0 6px 6px !important;\n  background: white !important;\n  float: right !important;\n  margin: -6px 8px 0 0 !important;\n  padding: 0 4px !important;\n}\n\n/* line 36, style.scss */\n\n.swoop-container .spx-image .spx-image-container {\n  background: white !important;\n  color: #333 !important;\n  padding: 6px 9px 6px 0 !important;\n}\n\n/* line 41, style.scss */\n\n.swoop-container .spx-image .spx-image-container.spx-image-border {\n  -moz-border-radius: 6px !important;\n  -webkit-border-radius: 6px !important;\n  border-radius: 6px !important;\n  border: 1px dotted #ffbe8b !important;\n  margin-bottom: 2px !important;\n  padding: 6px 9px 6px 6px !important;\n}\n\n/* line 49, style.scss */\n\n.swoop-container .spx-image .spx-image-container.spx-image-overhang .spx-image-content-wrapper {\n  padding-top: 2px !important;\n}\n\n/* line 54, style.scss */\n\n.swoop-container .spx-image .spx-image-container .spx-image-content-wrapper {\n  position: relative !important;\n}\n\n/* line 57, style.scss */\n\n.swoop-container .spx-image .spx-image-container .spx-image-content-wrapper .spx-image-img {\n  left: 0 !important;\n  position: absolute !important;\n  top: 0 !important;\n}\n\n/* line 62, style.scss */\n\n.spx-image-border .swoop-container .spx-image .spx-image-container .spx-image-content-wrapper .spx-image-img {\n  left: 6px !important;\n  top: 6px !important;\n}\n\n/* line 69, style.scss */\n\n.swoop-container .spx-image .spx-image-container .spx-image-img {\n  margin-right: 8px !important;\n  max-width: 50px !important;\n}\n\n/* line 74, style.scss */\n\n.swoop-container .spx-image .spx-image-container .spx-image-details {\n  margin-left: 58px !important;\n  min-height: 50px !important;\n}\n\n/* line 78, style.scss */\n\n.spx-image-border .swoop-container .spx-image .spx-image-container .spx-image-details {\n  margin-left: 64px !important;\n}\n\n/* line 82, style.scss */\n\n.swoop-container .spx-image .spx-image-container .spx-image-details .spx-description-oneline {\n  min-height: 17px !important;\n}"}),define("text!modules/components/hints/image/lookup.json",[],function(){return'{\n  "cl": "clientData",\n  "s": "style",\n  "t": "target",\n  "h": "headline",\n  "d1": "description1",\n  "d2": "description2",\n  "i": "img",\n  "o": "overhang",\n  "ol": "oneline"\n}\n'}),define("text!modules/components/hints/image/config.json",[],function(){return'{\n	"min-width": 200,\n	"max-height": 200\n}\n'}),define("modules/components/Controller",["require","lodash","spxw/SPX","core/Reporter"],function(a){"use strict";function b(a){this.config=a}var c=a("lodash"),d=a("spxw/SPX").Analytics,e=a("core/Reporter").for("Controller");return b.prototype.bootstrap=function(a,b,c,d){this._analyticsCtx=c,this._properties=b,this._container=a,this._template=d},b.prototype.render=function(){try{var a=c.template(this._template,{variable:"rc"})(this._properties);this._container.html(a)}catch(a){e.log("Template error: ",a),d.componentError(a,this._analyticsCtx,null)}},b.prototype.clickTargetParams=function(){return{}},b.prototype.analyticsData=function(){return{context:{},details:{}}},b}),define("hint/image",["require","modules/HintComponent","text!modules/components/hints/image/template.html","text!modules/components/hints/image/style.css","text!modules/components/hints/image/lookup.json","text!modules/components/hints/image/config.json","modules/components/Controller","spxw/SPX"],function(a){"use strict";var b=a("modules/HintComponent"),c=a("text!modules/components/hints/image/template.html"),d=a("text!modules/components/hints/image/style.css"),e=a("text!modules/components/hints/image/lookup.json"),f=a("text!modules/components/hints/image/config.json"),g=a("modules/components/Controller"),h=a("spxw/SPX");return b.extend({constructor:function(){var a=new g({analytics:h.Analytics,dataStore:h.DataStore}),b=Array.prototype.slice.call(arguments,0);Array.prototype.push.apply(b,[a,c,d,e,f]),this._super().constructor.apply(this,b)}})}),define("text!modules/components/hints/link/template.html",[],function(){return'<div class="spx-link spx-button-base"\n	 data-purpose="lp">\n\n	<div class="spx-link-wrapper">\n		<!-- button -->\n		<div class="spx-button-default\n     			spx-shine-<%- rc.shine %>\n     			spx-button-<%- rc.style %>">\n\n			<div class="spx-button-logo"></div>\n			<div class="spx-button-cta spx-button-ad-<%- rc.adText %>">\n				<%- rc.cta %>\n			</div>\n		</div>\n\n		<!-- display link -->\n		<div class="spx-link-source">\n			<%- rc.destination %>\n		</div>\n	</div>\n</div>\n'}),define("text!modules/components/hints/link/style.css",[],function(){return"/* MIXINS */\n\n/*\n !!! see: 'src/sass/_button.scss' for base styles\n */\n\n/* line 20, ../../../../sass/_mixins.scss */\n\n.swoop-container .spx-link:before,\n.swoop-container .spx-link:after {\n  content: \"\" !important;\n  display: table !important;\n}\n\n/* line 25, ../../../../sass/_mixins.scss */\n\n.swoop-container .spx-link:after {\n  clear: both !important;\n}\n\n/* line 12, style.scss */\n\n.swoop-container .spx-link-wrapper {\n  float: left !important;\n}\n\n/* line 15, style.scss */\n\n.swoop-container .spx-link-wrapper .spx-link-source {\n  clear: left !important;\n  color: #b6b6b6 !important;\n  font-size: 12px !important;\n  font-style: italic !important;\n  font-weight: 800 !important;\n  padding: 5px 14px 0 0 !important;\n  text-align: right !important;\n  text-decoration: none !important;\n}"}),define("text!modules/components/hints/link/lookup.json",[],function(){return'{\n  "cl": "clientData",\n  "t": "target",\n  "s": "style",\n  "cta": "cta",\n  "d": "destination",\n  "f": "font",\n  "l": "light",\n  "dp": "depth",\n  "sh": "shine"\n}\n'}),define("text!modules/components/hints/link/config.json",[],function(){return'{\n	"min-width": 200,\n	"max-height": 150\n}\n'}),define("hint/link",["require","modules/HintComponent","text!modules/components/hints/link/template.html","text!modules/components/hints/link/style.css","text!modules/components/hints/link/lookup.json","text!modules/components/hints/link/config.json","modules/components/Controller","spxw/SPX"],function(a){"use strict";var b=a("modules/HintComponent"),c=a("text!modules/components/hints/link/template.html"),d=a("text!modules/components/hints/link/style.css"),e=a("text!modules/components/hints/link/lookup.json"),f=a("text!modules/components/hints/link/config.json"),g=a("modules/components/Controller"),h=a("spxw/SPX");return b.extend({constructor:function(){var a=new g({analytics:h.Analytics,dataStore:h.DataStore}),b=Array.prototype.slice.call(arguments,0);Array.prototype.push.apply(b,[a,c,d,e,f]),this._super().constructor.apply(this,b)}})}),define("text!modules/components/hints/button/template.html",[],function(){return'<div class="spx-button spx-button-base"\n	 data-purpose="lp">\n\n	<div class="spx-button-default\n     			spx-button-shine-<%- rc.shine %>\n     			spx-button-<%- rc.style %>">\n\n		<div class="spx-button-logo"></div>\n		<div class="spx-button-cta spx-button-ad-<%- rc.adText %>">\n			<%- rc.cta %>\n		</div>\n	</div>\n</div>\n\n'}),define("text!modules/components/hints/button/style.css",[],function(){return"/*\n !!! see: 'src/sass/_button.scss' for styles\n */"}),define("text!modules/components/hints/button/lookup.json",[],function(){return'{\n  "cl": "clientData",\n  "t": "target",\n  "f": "font",\n  "l": "light",\n  "dp": "depth",\n  "s": "style",\n  "sh": "shine",\n  "cta": "cta",\n  "at": "adText",\n  "atl": "adTextLeft"\n}\n'}),define("text!modules/components/hints/button/config.json",[],function(){return'{\n	"min-width": 120,\n	"max-height": 180\n}\n'}),define("hint/button",["require","modules/HintComponent","text!modules/components/hints/button/template.html","text!modules/components/hints/button/style.css","text!modules/components/hints/button/lookup.json","text!modules/components/hints/button/config.json","modules/components/Controller","spxw/SPX"],function(a){"use strict";var b=a("modules/HintComponent"),c=a("text!modules/components/hints/button/template.html"),d=a("text!modules/components/hints/button/style.css"),e=a("text!modules/components/hints/button/lookup.json"),f=a("text!modules/components/hints/button/config.json"),g=a("modules/components/Controller"),h=a("spxw/SPX");return b.extend({constructor:function(){var a=new g({analytics:h.Analytics,dataStore:h.DataStore}),b=Array.prototype.slice.call(arguments,0);Array.prototype.push.apply(b,[a,c,d,e,f]),this._super().constructor.apply(this,b)}})}),define("text!modules/components/hints/button_bubble/template.html",[],function(){return'<div class=spx-button-bubble\n	 data-purpose="lp">\n\n	<div class="spx-bb-box">\n		<div class="spx-bb-item spx-bb-cta">\n			<%- rc.cta %>\n		</div>\n		<div class="spx-bb-item spx-bb-arrow"></div>\n		<div class="spx-bb-item spx-bb-logo"></div>\n	</div>\n</div>\n'}),define("text!modules/components/hints/button_bubble/style.css",[],function(){return'/* MIXINS */\n\n/* line 17, style.scss */\n\n.swoop-container .spx-button-bubble {\n  display: block !important;\n  font-family: "Trebuchet MS", Helvetica, sans-serif !important;\n  margin-bottom: 4px !important;\n}\n\n/* line 20, ../../../../sass/_mixins.scss */\n\n.swoop-container .spx-button-bubble:before,\n.swoop-container .spx-button-bubble:after {\n  content: "" !important;\n  display: table !important;\n}\n\n/* line 25, ../../../../sass/_mixins.scss */\n\n.swoop-container .spx-button-bubble:after {\n  clear: both !important;\n}\n\n/* line 23, style.scss */\n\n.swoop-container .spx-button-bubble .spx-bb-box {\n  display: -moz-box !important;\n  -moz-box-orient: horizontal !important;\n  display: -webkit-box !important;\n  -webkit-box-orient: horizontal !important;\n  display: -ms-flexbox !important;\n  -ms-flex-direction: row !important;\n  display: -webkit-flex !important;\n  -webkit-flex-direction: row !important;\n  display: flex !important;\n  flex-direction: row !important;\n  display: -webkit-flex !important;\n  display: flex !important;\n  -webkit-flex-direction: row !important;\n  flex-direction: row !important;\n  -webkit-align-items: center !important;\n  align-items: center !important;\n  -webkit-justify-content: flex-end !important;\n  justify-content: flex-end !important;\n  -ms-flex-align: center !important;\n  float: right !important;\n}\n\n/* line 44, style.scss */\n\n.swoop-container .spx-button-bubble .spx-bb-cta {\n  -moz-border-radius: 8px !important;\n  -webkit-border-radius: 8px !important;\n  border-radius: 8px !important;\n  background: #f80 !important;\n  color: #fff !important;\n  font-size: 14px !important;\n  font-weight: 800 !important;\n  padding: 8px 12px !important;\n  width: auto !important;\n  flex-basis: auto !important;\n}\n\n/* line 54, style.scss */\n\n.swoop-container .spx-button-bubble .spx-bb-cta:hover {\n  background-color: #fc8302 !important;\n}\n\n/* line 59, style.scss */\n\n.swoop-container .spx-button-bubble .spx-bb-arrow {\n  border: solid transparent !important;\n  border-color: transparent !important;\n  border-left-color: #ff8800 !important;\n  border-width: 8px 6px 8px 8px !important;\n  content: " " !important;\n  height: 0 !important;\n  width: 0 !important;\n  pointer-events: none !important;\n}\n\n/* line 69, style.scss */\n\n.swoop-container .spx-button-bubble .spx-bb-arrow:hover {\n  border-left-color: #fc8302 !important;\n}\n\n/* line 74, style.scss */\n\n.swoop-container .spx-button-bubble .spx-bb-logo {\n  -webkit-flex-basis: 23px !important;\n  flex-basis: 23px !important;\n  -webkit-flex-shrink: 0 !important;\n  flex-shrink: 0 !important;\n  width: 23px !important;\n  min-height: 13px !important;\n  background-repeat: no-repeat !important;\n  background-position: center !important;\n  background-image: url(\'<%= assetUrl("images/orange-swoop-icon.png")%>\') !important;\n}'}),define("text!modules/components/hints/button_bubble/lookup.json",[],function(){return'{\n	"cl": "clientData",\n	"t": "target",\n	"s": "style",\n	"cta": "cta"\n}\n'}),define("text!modules/components/hints/button_bubble/config.json",[],function(){return'{\n	"min-width": 0,\n	"max-height": 180\n}\n'}),define("hint/button_bubble",["require","modules/HintComponent","text!modules/components/hints/button_bubble/template.html","text!modules/components/hints/button_bubble/style.css","text!modules/components/hints/button_bubble/lookup.json","text!modules/components/hints/button_bubble/config.json","modules/components/Controller","spxw/SPX"],function(a){"use strict";var b=a("modules/HintComponent"),c=a("text!modules/components/hints/button_bubble/template.html"),d=a("text!modules/components/hints/button_bubble/style.css"),e=a("text!modules/components/hints/button_bubble/lookup.json"),f=a("text!modules/components/hints/button_bubble/config.json"),g=a("modules/components/Controller"),h=a("spxw/SPX");return b.extend({constructor:function(){var a=new g({analytics:h.Analytics,dataStore:h.DataStore}),b=Array.prototype.slice.call(arguments,0);Array.prototype.push.apply(b,[a,c,d,e,f]),this._super().constructor.apply(this,b)}})}),define("text!modules/components/hints/full_text/template.html",[],function(){return'<div class="\n	spx-full-text\n	spx-ft-base\n	spx-ft-<%- rc.style %>"\n	data-purpose="lp"\n	data-pitch="<%- rc.headline %>"\n	data-target="<%- rc.target %>">\n\n	<!-- wrapper for vertical alignment -->\n	<div class="spx-ft-wrapper">\n\n		<!-- elements are structure different for IAB variation to get 100% width effect -->\n		<% if(rc.style === \'iab\') { %>\n		<!-- arrow -->\n		<div class="spx-ft-cta">\n			<div class="spx-ft-cta-circle spx-ft-button"></div>\n		</div>\n		<!-- ./arrow -->\n		<% } %>\n\n		<!-- text -->\n		<div class="spx-ft-text">\n			<div class="spx-ft-headline"><%- rc.headline %></div>\n\n			<div class="spx-ft-description">\n				<%- rc.description1 %>\n				<%- rc.description2 %>\n				<%- rc.mid_text %>\n				<span class="spx-ft-url"><%- rc.displayUrl %></span>\n			</div>\n\n			<!-- isi -->\n			<% if (rc.isiUrl && rc.isiText) { %>\n			<div data-target="<%- rc.isiUrl %>" class="spx-ft-isi">\n				<%- rc.isiText %>\n			</div>\n			<% } %>\n\n			<% if (rc.isiUrl && !rc.isiText) { %>\n			<div class="spx-ft-isi">\n				Click to see full safety and prescribing information, including boxed warning.\n				<span class="spx-underline  spx-ft-isi" data-target="<%- rc.isiUrl %>">More info</span>\n			</div>\n			<% } %>\n\n			<% if (!rc.isiUrl && rc.isiText) { %>\n			<div class="spx-ft-isi">\n				<%- rc.isiText %>\n			</div>\n			<% } %>\n			<!-- ./isi -->\n		</div>\n		<!-- ./text -->\n\n		<% if(rc.style !== \'iab\') { %>\n		<!-- arrow -->\n		<div class="spx-ft-cta">\n			<div class="spx-ft-cta-circle spx-ft-button"></div>\n		</div>\n		<!-- ./arrow -->\n		<% } %>\n\n\n	</div>\n</div>\n'}),define("text!modules/components/hints/full_text/style.css",[],function(){return'/*MIXINS*/\n\n/*\n !!! see: \'src/sass/_ft.scss\' for base styles that are shared with form\n */\n\n/* line 9, style.scss */\n\n.swoop-container .spx-full-text {\n  /*\n  	Variation: 78\n  	Car & Driver custom hint\n  */\n}\n\n/* line 10, style.scss */\n\n.swoop-container .spx-full-text .spx-ft-text {\n  max-width: 380px !important;\n}\n\n/* line 16, style.scss */\n\n.swoop-container .spx-full-text.spx-ft-compliant .spx-ft-url,\n.swoop-container .spx-full-text.spx-ft-white-bg .spx-ft-url {\n  color: #808080 !important;\n}\n\n/* line 21, style.scss */\n\n.swoop-container .spx-full-text.spx-ft-white-bg {\n  background: #fff !important;\n  border: 1px solid #CA0004 !important;\n  padding: 5px 10px !important;\n}\n\n/* line 27, style.scss */\n\n.swoop-container .spx-full-text .spx-ft-cta {\n  max-width: 50px !important;\n}\n\n/* line 31, style.scss */\n\n.swoop-container .spx-full-text .spx-ft-cta-circle {\n  -moz-border-radius: 20px !important;\n  -webkit-border-radius: 20px !important;\n  border-radius: 20px !important;\n  -moz-box-shadow: inset 0 -7px 4px 0 rgba(255, 255, 255, 0.2), inset 0 -4px 0 0 rgba(111, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2) !important;\n  -webkit-box-shadow: inset 0 -7px 4px 0 rgba(255, 255, 255, 0.2), inset 0 -4px 0 0 rgba(111, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2) !important;\n  box-shadow: inset 0 -7px 4px 0 rgba(255, 255, 255, 0.2), inset 0 -4px 0 0 rgba(111, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2) !important;\n  background-image: url("<%= assetUrl(\'images/spx_two_tone_arrow.png\')%>") !important;\n  background-position: center 11px !important;\n  background-size: 15px !important;\n  height: 40px !important;\n  width: 40px !important;\n}\n\n/* line 43, style.scss */\n\n.swoop-container .spx-full-text .spx-ft-cta-circle:hover {\n  -moz-box-shadow: 0 0 0 0 rgba(255, 255, 255, 0) !important;\n  -webkit-box-shadow: 0 0 0 0 rgba(255, 255, 255, 0) !important;\n  box-shadow: 0 0 0 0 rgba(255, 255, 255, 0) !important;\n}\n\n/* line 53, style.scss */\n\n.swoop-container .spx-full-text.spx-ft-iab {\n  background: #f5f5f5 !important;\n  box-sizing: border-box !important;\n  display: block !important;\n  font-family: "Open Sans", Helvetica, Arial, sans-serif !important;\n  padding: 10px !important;\n  text-align: left !important;\n  width: 100% !important;\n}\n\n/* line 62, style.scss */\n\n.swoop-container .spx-full-text.spx-ft-iab .spx-ft-wrapper {\n  position: relative !important;\n}\n\n/* line 66, style.scss */\n\n.swoop-container .spx-full-text.spx-ft-iab .spx-ft-text {\n  display: block !important;\n  max-width: none !important;\n  padding-right: 55px !important;\n}\n\n/* line 71, style.scss */\n\n.swoop-container .spx-full-text.spx-ft-iab .spx-ft-text .spx-ft-headline {\n  line-height: 22px !important;\n}\n\n/* line 75, style.scss */\n\n.swoop-container .spx-full-text.spx-ft-iab .spx-ft-text .spx-ft-description,\n.swoop-container .spx-full-text.spx-ft-iab .spx-ft-text .spx-ft-isi {\n  font-family: "Open Sans", Helvetica, Arial, sans-serif !important;\n  font-size: 12px !important;\n  line-height: 18px !important;\n}\n\n/* line 82, style.scss */\n\n.swoop-container .spx-full-text.spx-ft-iab .spx-ft-text .spx-ft-url {\n  color: #089ADB !important;\n  white-space: nowrap !important;\n}\n\n/* line 89, style.scss */\n\n.swoop-container .spx-full-text.spx-ft-iab .spx-ft-cta {\n  display: block !important;\n  position: absolute !important;\n  right: 0 !important;\n  top: 50% !important;\n  height: 40px !important;\n  margin-top: -20px !important;\n}';
}),define("text!modules/components/hints/full_text/lookup.json",[],function(){return'{\n  "cl": "clientData",\n  "t": "target",\n  "h": "headline",\n  "d1": "description1",\n  "d2": "description2",\n  "du": "displayUrl",\n  "at": "adText",\n  "iu": "isiUrl",\n  "it": "isiText",\n  "s": "style"\n}\n'}),define("text!modules/components/hints/full_text/config.json",[],function(){return'{\n	"min-width": 200,\n	"max-height": 150\n}\n'}),define("hint/full_text",["require","modules/HintComponent","text!modules/components/hints/full_text/template.html","text!modules/components/hints/full_text/style.css","text!modules/components/hints/full_text/lookup.json","text!modules/components/hints/full_text/config.json","modules/components/Controller","spxw/SPX"],function(a){"use strict";var b=a("modules/HintComponent"),c=a("text!modules/components/hints/full_text/template.html"),d=a("text!modules/components/hints/full_text/style.css"),e=a("text!modules/components/hints/full_text/lookup.json"),f=a("text!modules/components/hints/full_text/config.json"),g=a("modules/components/Controller"),h=a("spxw/SPX");return b.extend({constructor:function(){var a=new g({analytics:h.Analytics,dataStore:h.DataStore}),b=Array.prototype.slice.call(arguments,0);Array.prototype.push.apply(b,[a,c,d,e,f]),this._super().constructor.apply(this,b)}})}),define("text!modules/components/hints/icon/template.html",[],function(){return'<div style="cursor:pointer;padding:0;margin:0;text-indent:0px;" class="spx-icon">\n	<img alt="campaignIcon"\n		 data-purpose="landingPage_campaigns"\n		 style="max-width:none;background:none;box-shadow:none;border:none;margin:0;padding:0;position:relative;top:1px;"\n		 data-target="campaignsLandingPage"\n		 src="//s3.amazonaws.com/cdn.shopximity.com/images/<%- rc.style %>.png">\n	<% if(rc.cta && rc.cta.length) { %>\n	<span style="display:inline-block;margin:-1px 0 0 3px;vertical-align:middle;font-size:10px;">\n		<%- rc.cta %>\n	</span>\n	<% } %>\n</div>\n'}),define("text!modules/components/hints/icon/style.css",[],function(){return"/*MIXINS*/\n\n/* line 7, style.scss */\n\n.gserp .title {\n  font-family: 'Arial', 'sans-serif' !important;\n  font-size: 13px !important;\n  color: blue !important;\n  text-decoration: underline !important;\n}\n\n/* line 13, style.scss */\n\n.gserp .url {\n  font-family: 'Arial', 'sans-serif' !important;\n  font-size: 13px !important;\n  color: #0e8f0e !important;\n}\n\n/* line 18, style.scss */\n\n.gserp .desc1 {\n  font-family: 'Arial', 'sans-serif' !important;\n  font-size: 13px !important;\n}\n\n/* line 22, style.scss */\n\n.gserp .desc2 {\n  font-family: 'Arial', 'sans-serif' !important;\n  font-size: 13px !important;\n}"}),define("text!modules/components/hints/icon/lookup.json",[],function(){return'{\n  "cl": "clientData",\n  "t": "target",\n  "ot": "cta",\n  "s": "style"\n}\n'}),define("text!modules/components/hints/icon/config.json",[],function(){return'{\n	"min-width": 50,\n	"max-height": 50\n}\n\n'}),define("hint/icon",["require","modules/HintComponent","text!modules/components/hints/icon/template.html","text!modules/components/hints/icon/style.css","text!modules/components/hints/icon/lookup.json","text!modules/components/hints/icon/config.json","modules/components/Controller","spxw/SPX"],function(a){"use strict";var b=a("modules/HintComponent"),c=a("text!modules/components/hints/icon/template.html"),d=a("text!modules/components/hints/icon/style.css"),e=a("text!modules/components/hints/icon/lookup.json"),f=a("text!modules/components/hints/icon/config.json"),g=a("modules/components/Controller"),h=a("spxw/SPX");return b.extend({constructor:function(){var a=new g({analytics:h.Analytics,dataStore:h.DataStore}),b=Array.prototype.slice.call(arguments,0);Array.prototype.push.apply(b,[a,c,d,e,f]),this._super().constructor.apply(this,b)}})}),define("modules/IabComponent",["require","lodash","modules/HintComponent"],function(a){"use strict";var b=a("lodash"),c=a("modules/HintComponent"),d=4;return c.extend({onProperties:function(a,b){if(this._hasValidProperties()){var c=this._componentConfig;c["min-height"]=a.height,c["max-height"]=c["min-height"]+d,c["min-width"]=a.width,b.resolve()}else b.reject("Invalid component properties",a);return b},onBeforePlacement:function(){this._setComponentHtml(this._placeholderDiv())},onAfterPlacement:function(){this._setComponentHtml(this.properties.adTag),c.prototype.onAfterPlacement.call(this)},_hasValidProperties:function(){var a=this.properties;return b.isObject(a)&&b.isString(a.adTag)&&b.isNumber(a.height)&&b.isNumber(a.width)},_placeholderDiv:function(){var a=this.properties;return'<div class="spx-hint-placeholder" style="width: '+a.width+"px; height: "+a.height+'px;"></div>'},_setComponentHtml:function(a){this.$wrapper.find(".hint-wrapper").html(a)}})}),define("text!modules/components/hints/criteo/template.html",[],function(){return'<div class="hint-wrapper" data-purpose="lp" style="cursor:pointer;margin:0;padding:0;">\n</div>\n'}),define("text!modules/components/hints/criteo/style.css",[],function(){return""}),define("text!modules/components/hints/criteo/lookup.json",[],function(){return'{\n  "cl": "clientData",\n  "t": "target",\n  "mh": "maxHeight",\n  "mw": "maxWidth"\n}\n'}),define("text!modules/components/hints/criteo/config.json",[],function(){return'{\n	"min-width": 180,\n	"max-height": 300\n}\n'}),define("text!modules/integrations/criteoTemplate.jst",[],function(){return"<iframe data-unit-name='<%= unitName %>' src='<%= url %>' framespacing='0' frameborder='no' scrolling='no' width='<%= width %>' height='<%= height %>'></iframe>\n"}),define("modules/integrations/CriteoIntegration",["require","utils/utils","core/Reporter","jquery","lodash","modules/placements/PlacementPromise","text!modules/integrations/criteoTemplate.jst"],function(a){"use strict";function b(){var a="3422",b="crtg_swoop",c=o,d=Math.floor(99999999999*Math.random()),e=location.protocol+"//rtax.criteo.com/delivery/rta/rta.js?netId="+window.escape(a);return e+="&cookieName="+window.escape(b),e+="&rnd="+d,e+="&varName="+window.escape(c),e+="&cookiecreation=0"}function c(){return f||(h.log(["integrations/CriteoIntegration"],"Attempting Criteo bid request"),f=g.loading.loadScript(b(),m).done(function(){h.log(["integrations/CriteoIntegration"],"Received response from Criteo")}).fail(function(){h.log(["integrations/CriteoIntegration"],"Failed to receive response from Criteo")})),f}function d(a,b){var c=a.$node.innerWidth(),d=a.properties.maxWidth;j.isNumber(d)&&(c=Math.min(c,d));var e=j.filter(b,function(a){var b=n[a];return j.isObject(b)?b.width<=c:!1});return e}function e(a){var b=this;b.hintComponent=a;var d=i.Deferred();b.promise=d.promise();var e={bidder:"criteo"};c().done(function(){try{var c=window[o];b.bidResponse=c;var f;e.bidResponse=c,0===b.getAcceptedUnits().length?(f="s/c/rp",h.log(["integrations/CriteoIntegration"],"No accepted bids received from Criteo"),k.pass(d)):(f="s/c/r",d.resolve()),a._hintAnalytics.remnantInventory(f,e)}catch(a){g.rejectWithException(d,a)}}).fail(function(){h.log(["integrations/CriteoIntegration"],"Bid request failed"),a._hintAnalytics.remnantInventory("s/c/rt",e),k.pass(d)})}var f,g=a("utils/utils"),h=a("core/Reporter"),i=a("jquery"),j=a("lodash"),k=a("modules/placements/PlacementPromise"),l=a("text!modules/integrations/criteoTemplate.jst"),m=1e4,n={swoop180x45:{width:180,height:45,criteoId:"161358",shortenedId:"1qplwcW",performance:.65},swoop240x55:{width:240,height:55,criteoId:"161356",shortenedId:"UChBPS",performance:1},swoop430x70:{width:430,height:70,criteoId:"161357",shortenedId:"1qM6Jxy",performance:2},swoop320:{width:320,height:50,criteoId:"155652",shortenedId:"1vSSlRl",performance:.75},swoop300x50:{width:300,height:50,criteoId:"158313",shortenedId:"1mNwRpc",performance:.6501},swoop300x100:{width:300,height:100,criteoId:"158314",shortenedId:"1lWT7ag",performance:1.5},swoopCA320:{width:320,height:50,criteoId:"171572",shortenedId:"1u5TnYU",performance:.83},swoopCA180:{width:180,height:45,criteoId:"171584",shortenedId:"1pcxwxr",performance:.72},swoopCA240:{width:240,height:55,criteoId:"171585",shortenedId:"1oaL3dO",performance:1.11},swoopCA300:{width:300,height:100,criteoId:"171586",shortenedId:"1CngUZF",performance:1.67},swoopCA50:{width:300,height:50,criteoId:"171587",shortenedId:"1rd0tsL",performance:.7201},swoopCA430:{width:430,height:70,criteoId:"171588",shortenedId:"ZZGuIC",performance:2.22},swoopUK320:{width:320,height:50,criteoId:"171574",shortenedId:"1xTpuyR",performance:.67},swoopUK180:{width:180,height:45,criteoId:"171576",shortenedId:"1u60q3T",performance:.59},swoopUK240:{width:240,height:55,criteoId:"171578",shortenedId:"1w999Xo",performance:.9},swoopUK300:{width:300,height:100,criteoId:"171579",shortenedId:"1w99g5e",performance:1.34},swoopUK50:{width:300,height:50,criteoId:"171580",shortenedId:"1oaLqoS",performance:.58},swoopUK430:{width:430,height:70,criteoId:"171581",shortenedId:"1venjGC",performance:1.78}},o="crtg_swoop",p="http://bit.ly/";return e.prototype={getAcceptedUnits:function(){var a=this.bidResponse;if(!j.isString(a)||0===a.length)return[];var b=[],c=a.split(";");return c&&c.length>0&&(b=j.filter(c,function(a){var b=a.split("=");return 2===b.length&&j.isString(b[0])&&b[0].length>0&&1===parseInt(b[1],10)?!0:!1}),b=j.map(b,function(a){return a.replace("=1","")})),b},getEligibleUnits:function(){var a=this.getAcceptedUnits();return a.length>0&&(a=j.filter(a,function(a){return j.isObject(n[a])}),a=d(this.hintComponent,a)),a},selectUnit:function(a){if(!j.isArray(a)||0===a.length)return null;var b=j.max(a,function(a){return n[a].performance});return b},getDimensions:function(a){var b=n[a];return b?{width:b.width,height:b.height}:null},getTemplate:function(a){var b=n[a];if(!b)return null;var c={unitName:a,width:b.width,height:b.height,url:p+b.shortenedId+"?rnd="+j.random(99999999999)};return g.spxTemplate(l)(c)}},e}),define("hint/criteo",["require","core/Reporter","utils/utils","modules/IabComponent","text!modules/components/hints/criteo/template.html","text!modules/components/hints/criteo/style.css","text!modules/components/hints/criteo/lookup.json","text!modules/components/hints/criteo/config.json","modules/integrations/CriteoIntegration","modules/placements/PlacementPromise","modules/components/Controller","spxw/SPX"],function(a){"use strict";var b=a("core/Reporter"),c=a("utils/utils"),d=a("modules/IabComponent"),e=a("text!modules/components/hints/criteo/template.html"),f=a("text!modules/components/hints/criteo/style.css"),g=a("text!modules/components/hints/criteo/lookup.json"),h=a("text!modules/components/hints/criteo/config.json"),i=a("modules/integrations/CriteoIntegration"),j=a("modules/placements/PlacementPromise"),k=a("modules/components/Controller"),l=a("spxw/SPX");return d.extend({constructor:function(){var a=new k({analytics:l.Analytics,dataStore:l.DataStore}),b=Array.prototype.slice.call(arguments,0);Array.prototype.push.apply(b,[a,e,f,g,h]),d.apply(this,b)},onProperties:function(a,d){var e=this;e.properties.target="#";var f=new i(e);return f.promise.done(function(){try{b.log(["hint/criteo"],'Criteo script loaded. Response received: "'+f.bidResponse+'"');var g=f.getEligibleUnits(),h=f.selectUnit(g);b.log(["hint/criteo"],'Selected unit "'+h+'" amongst eligible units:',g);var i="",k={bidder:"criteo",bidResponse:f.bidResponse,eligibleUnits:g.join(";")};h?(i="s/c/rs",k.selectedUnit=h,k.selectionStrategy="performance",e._setupIabProperties(f,h,d),e._super().onProperties.call(e,a,d)):(i="s/c/re",0===g.length?k.r="eligibility":k.r="selection_error",b.log(["hint/criteo"],"Couldn't find a Criteo unit suitable for display"),j.pass(d)),e._hintAnalytics.remnantInventory(i,k)}catch(a){c.rejectWithException(d,a)}}).fail(d.reject),d},_setupIabProperties:function(a,b){var c=this.properties;c.adTag=a.getTemplate(b);var d=a.getDimensions(b);c.width=d.width,c.height=d.height}})}),define("text!modules/components/hints/form/template.html",[],function(){return'<div class="spx-form spx-ft-base <%- rc.fixed_under ? \'spx-form-under\' : \'\' %>"\n	   data-purpose="lp"\n	   data-target="<%- rc.target %>">\n\n	<!-- wrapper for vertical alignment -->\n	<div class="spx-ft-wrapper">\n\n		<!-- text -->\n		<div class="spx-ft-text">\n			<div class="spx-ft-headline"><%- rc.headline %></div>\n\n			<div class="spx-ft-description">\n				<%- rc.description1 %>\n				<%- rc.description2 %>\n				From\n				<%- rc.displayUrl %>\n			</div>\n\n			<!-- isi -->\n			<% if (rc.isiUrl && rc.isiText) { %>\n			<div data-target="<%- rc.isiUrl %>" class="spx-ft-isi">\n				<%- rc.isiText %>\n			</div>\n			<% } %>\n\n			<% if (rc.isiUrl && !rc.isiText) { %>\n			<div class="spx-ft-isi" >\n				Click to see full safety and prescribing information, including boxed warning.\n				<span class="spx-underline spx-ft-isi" data-target="<%- rc.isiUrl %>">More info</span>\n			</div>\n			<% } %>\n\n			<% if (!rc.isiUrl && rc.isiText) { %>\n			<div class="spx-ft-isi">\n				<%- rc.isiText %>\n			</div>\n			<% } %>\n			<!-- ./isi -->\n		</div>\n\n		<!-- form -->\n		<div class="spx-form-container">\n			<!-- input & button -->\n			<div class="spx-form-input-container">\n				<div class="spx-form-params">\n					<input type="text" class="spx-form-input" placeholder="<%- rc.paramPlaceholder %>">\n				</div>\n\n				<div class="spx-ft-cta">\n					<div class="spx-form-button spx-ft-button"><%- rc.paramCTA %></div>\n				</div>\n			</div>\n		</div>\n	</div> <!-- ./ alignment wrapper -->\n</div>\n\n'}),define("text!modules/components/hints/form/style.css",[],function(){return"/*MIXINS*/\n\n/*\n !!! see: 'src/sass/_ft.scss' for base styles that are shared with full_text\n */\n\n/* line 9, style.scss */\n\n.swoop-container .spx-form {\n  padding: 10px 0 !important;\n}\n\n/* line 12, style.scss */\n\n.swoop-container .spx-form .spx-form-container {\n  display: inline-block !important;\n  padding-top: 4px !important;\n  vertical-align: middle !important;\n}\n\n/* line 18, style.scss */\n\n.swoop-container .spx-form .spx-ft-text {\n  display: inline-block !important;\n  padding-bottom: 4px !important;\n}\n\n/* line 24, style.scss */\n\n.swoop-container .spx-form .spx-form-input-container {\n  -moz-border-radius: 10px !important;\n  -webkit-border-radius: 10px !important;\n  border-radius: 10px !important;\n  background-color: #fff !important;\n  border: 1px solid #E5E5E5 !important;\n}\n\n/* line 29, style.scss */\n\n.swoop-container .spx-form .spx-form-input-container .spx-form-params {\n  display: table-cell !important;\n  vertical-align: middle !important;\n}\n\n/* line 33, style.scss */\n\n.swoop-container .spx-form .spx-form-input-container .spx-form-params .spx-form-input {\n  border: none !important;\n  padding: 5px !important;\n  line-height: 1em !important;\n  font-size: 13px !important;\n  margin-left: 3px !important;\n}\n\n/* line 61, ../../../../../vendor/bundle/ruby/2.1.0/gems/compass-core-1.0.3/stylesheets/compass/css3/_user-interface.scss */\n\n.swoop-container .spx-form .spx-form-input-container .spx-form-params .spx-form-input:-moz-placeholder {\n  color: #bfbfbf !important;\n}\n\n/* line 64, ../../../../../vendor/bundle/ruby/2.1.0/gems/compass-core-1.0.3/stylesheets/compass/css3/_user-interface.scss */\n\n.swoop-container .spx-form .spx-form-input-container .spx-form-params .spx-form-input::-moz-placeholder {\n  color: #bfbfbf !important;\n}\n\n/* line 67, ../../../../../vendor/bundle/ruby/2.1.0/gems/compass-core-1.0.3/stylesheets/compass/css3/_user-interface.scss */\n\n.swoop-container .spx-form .spx-form-input-container .spx-form-params .spx-form-input:-ms-input-placeholder {\n  color: #bfbfbf !important;\n}\n\n/* line 56, ../../../../../vendor/bundle/ruby/2.1.0/gems/compass-core-1.0.3/stylesheets/compass/css3/_user-interface.scss */\n\n.swoop-container .spx-form .spx-form-input-container .spx-form-params .spx-form-input::-webkit-input-placeholder {\n  color: #bfbfbf !important;\n}\n\n/* line 46, style.scss */\n\n.swoop-container .spx-form .spx-form-input-container .spx-form-button {\n  -moz-border-radius: 6px !important;\n  -webkit-border-radius: 6px !important;\n  border-radius: 6px !important;\n  -moz-box-shadow: inset 0 -10px 23px 0 rgba(195, 35, 35, 0.6) !important;\n  -webkit-box-shadow: inset 0 -10px 23px 0 rgba(195, 35, 35, 0.6) !important;\n  box-shadow: inset 0 -10px 23px 0 rgba(195, 35, 35, 0.6) !important;\n  background-image: url(\"<%= assetUrl('images/spx_two_tone_arrow.png')%>\") !important;\n  background-position: right 9px bottom 11px !important;\n  background-size: 10px !important;\n  color: #fff !important;\n  font-size: 14px !important;\n  font-weight: 800 !important;\n  height: 32px !important;\n  line-height: 32px !important;\n  margin: 4px !important;\n  padding: 0 27px 0 8px !important;\n  text-align: left !important;\n}\n\n/* line 61, style.scss */\n\n.swoop-container .spx-form .spx-form-input-container .spx-form-button:active {\n  -moz-box-shadow: inset 0 10px 23px 0 rgba(195, 35, 35, 0.6) !important;\n  -webkit-box-shadow: inset 0 10px 23px 0 rgba(195, 35, 35, 0.6) !important;\n  box-shadow: inset 0 10px 23px 0 rgba(195, 35, 35, 0.6) !important;\n}\n\n/* line 68, style.scss */\n\n.swoop-container .spx-form.spx-form-under .spx-ft-text {\n  padding-bottom: 8px !important;\n}\n\n/* line 72, style.scss */\n\n.swoop-container .spx-form.spx-form-under .spx-form-container {\n  display: table !important;\n}"}),define("text!modules/components/hints/form/lookup.json",[],function(){return'{\n  "cl": "clientData",\n  "t": "target",\n  "h": "headline",\n  "d1": "description1",\n  "d2": "description2",\n  "du": "displayUrl",\n  "at": "adText",\n  "pn": "paramName",\n  "pph": "paramPlaceholder",\n  "pcta": "paramCTA",\n  "style_small": "style_small",\n  "style_secondary": "style_secondary",\n  "fixed_under": "fixed_under",\n  "iu": "isiUrl",\n  "it": "isiText"\n}\n'}),define("text!modules/components/hints/form/config.json",[],function(){return'{\n	"min-width": 200,\n	"max-height": 350\n}\n'}),define("hint/form",["require","modules/HintComponent","text!modules/components/hints/form/template.html","text!modules/components/hints/form/style.css","text!modules/components/hints/form/lookup.json","text!modules/components/hints/form/config.json","modules/components/Controller","spxw/SPX","lodash"],function(a){"use strict";function b(){h.call(this)}var c=a("modules/HintComponent"),d=a("text!modules/components/hints/form/template.html"),e=a("text!modules/components/hints/form/style.css"),f=a("text!modules/components/hints/form/lookup.json"),g=a("text!modules/components/hints/form/config.json"),h=a("modules/components/Controller"),i=a("spxw/SPX"),j=a("lodash");return b.prototype=j.create(h.prototype,{constructor:b}),b.prototype._targetParams=function(){var a={},b=this._container.find(".spx-form-input").val();return j.isEmpty(b)&&(b=this._analyticsCtx.z),a[this._properties.paramName]=b,a},b.prototype.render=function(){h.prototype.render.call(this),this._container.find(".spx-form-input").on("click",function(a){a.stopPropagation()})},b.prototype.clickTargetParams=function(){return this._targetParams()},b.prototype.analyticsData=function(){return{context:{},details:{tp:this._targetParams()}}},c.extend({constructor:function(){var a=new b({analytics:i.Analytics,dataStore:i.DataStore}),c=Array.prototype.slice.call(arguments,0);Array.prototype.push.apply(c,[a,d,e,f,g]),this._super().constructor.apply(this,c)}})}),define("text!modules/components/hints/adwords/template.html",[],function(){return'<div class="\n	 spx-adwords\n	 spx-<%- rc.style %>\n	 spx-<%- rc.wrap %>"\n	 data-purpose="lp"\n	 data-target="<%- rc.target%>"\n	 data-pitch="<%- rc.headline %> <%- rc.displayUrl %> <%- rc.description1 %> <%- rc.description2 %>">\n\n	<div class="spx-linked-text spx-aw-headline spx-ad-<%- rc.adText %> spx-<%- rc.title %>"><%- rc.headline %></div>\n\n	<!-- display URL under headline for original adwords variations -->\n	<% if(rc.style === \'gorgeous\') { %>\n	<div class="spx-aw-url spx-text spx-<%- rc.color %>-text"><%- rc.displayUrl %></div>\n	<% } %>\n\n	<div class="spx-text spx-d"><%- rc.description1 %></div>\n	<div class="spx-text spx-d"><%- rc.description2 %></div>\n\n	<% if(rc.style === \'circle\') { %>\n	<div class="spx-aw-url spx-text spx-<%- rc.color %>-text"><%- rc.displayUrl %></div>\n	<% } %>\n\n	<!-- isi -->\n	<% if(rc.isiUrl && rc.isiText) { %>\n	<div data-target="<%- rc.isiUrl%>" class="spx-gray-text">\n		<%- rc.isiText%>\n	</div>\n	<% } %>\n\n	<% if(rc.isiUrl && !rc.isiText) { %>\n	<div class="spx-gray-text">\n		Click to see full safety and prescribing information, including boxed warning.\n		<span class="spx-underline spx-gray-text spx-inline" data-target="<%- rc.isiUrl%>">More info</span>\n	</div>\n	<% } %>\n\n	<% if(rc.isiText && !rc.isiUrl) { %>\n	<div class="spx-gray-text">\n		<%- rc.isiText %>\n	</div>\n	<% } %>\n	<!-- ./isi -->\n\n	<!-- site links -->\n	<% if(rc.links) { %>\n	<ul class="spx-aw-sitelinks">\n		<% _.forEach(rc.links, function(link, index) { %>\n		<li\n			class="spx-aw-sl spx-linked-text"\n			data-target="<%- link.url %>"\n			data-choice="<%- index + 1 %>">\n\n			<%- link.text %>\n\n		</li>\n		<% }); %>\n	</ul>\n	<% } %>\n\n\n</div>\n'}),define("text!modules/components/hints/adwords/style.css",[],function(){return"/* line 2, style.scss */\n\n.swoop-container .spx-adwords {\n  display: inline-block !important;\n  font-family: 'Arial', 'sans-serif' !important;\n  font-size: 13px !important;\n}\n\n/* line 10, style.scss */\n\n.swoop-container .spx-adwords.spx-circle {\n  background: url('<%= assetUrl(\"images/white-swoop-circle.png\")%>') no-repeat left center !important;\n  padding-left: 39px !important;\n}\n\n/* line 14, style.scss */\n\n.swoop-container .spx-adwords.spx-circle * {\n  line-height: 18px !important;\n}\n\n/* line 18, style.scss */\n\n.swoop-container .spx-adwords.spx-circle .spx-linked-text {\n  color: #2980b9 !important;\n  text-decoration: none !important;\n}\n\n/* line 22, style.scss */\n\n.swoop-container .spx-adwords.spx-circle .spx-linked-text:hover {\n  text-decoration: underline !important;\n}\n\n/* line 27, style.scss */\n\n.swoop-container .spx-adwords.spx-circle .spx-aw-headline {\n  font-weight: bold !important;\n}\n\n/* line 31, style.scss */\n\n.swoop-container .spx-adwords.spx-circle .spx-d {\n  color: #000 !important;\n}\n\n/* line 35, style.scss */\n\n.swoop-container .spx-adwords.spx-circle .spx-aw-url {\n  color: #878787 !important;\n  display: inline-block !important;\n}\n\n/* line 40, style.scss */\n\n.swoop-container .spx-adwords.spx-circle .spx-aw-sl {\n  padding-top: 0 !important;\n}\n\n/* line 48, style.scss */\n\n.swoop-container .spx-adwords.spx-oneline .spx-d {\n  display: inline-block !important;\n}\n\n/* line 53, style.scss */\n\n.swoop-container .spx-adwords .spx-bold {\n  font-weight: bold !important;\n  text-decoration: none !important;\n}\n\n/* line 57, style.scss */\n\n.swoop-container .spx-adwords .spx-bold:hover {\n  color: #0079be !important;\n  text-decoration: underline !important;\n}\n\n/* line 62, style.scss */\n\n.swoop-container .spx-adwords .spx-aw-url {\n  color: #0e8f0e !important;\n}\n\n/* line 66, style.scss */\n\n.swoop-container .spx-adwords .spx-gray-text {\n  color: #878787 !important;\n}\n\n/* line 70, style.scss */\n\n.swoop-container .spx-adwords .spx-ad-on {\n  background: url('<%= assetUrl(\"images/ad_icon.png\")%>') no-repeat left !important;\n  padding-left: 21px !important;\n}\n\n/* line 75, style.scss */\n\n.swoop-container .spx-adwords .spx-aw-sl {\n  display: inline-block !important;\n  padding: 5px 0 0 5px !important;\n  text-decoration: none !important;\n}\n\n/* line 80, style.scss */\n\n.swoop-container .spx-adwords .spx-aw-sl:first-of-type {\n  padding-left: 0 !important;\n}\n\n/* line 84, style.scss */\n\n.swoop-container .spx-adwords .spx-aw-sl:not(:first-of-type):before {\n  color: #a0a0a0 !important;\n  content: \"\\2013\" !important;\n  display: inline-block !important;\n  padding-right: 5px !important;\n}"}),define("text!modules/components/hints/adwords/lookup.json",[],function(){return'{\n  "cl": "clientData",\n  "t": "target",\n  "h": "headline",\n  "d1": "description1",\n  "d2": "description2",\n  "du": "displayUrl",\n  "at": "adText",\n  "iu": "isiUrl",\n  "it": "isiText",\n  "li": "links",\n  "s": "style"\n}\n'}),define("text!modules/components/hints/adwords/config.json",[],function(){return'{\n	"min-width": 200,\n	"max-height": 150\n}\n'}),define("hint/adwords",["require","modules/HintComponent","text!modules/components/hints/adwords/template.html","text!modules/components/hints/adwords/style.css","text!modules/components/hints/adwords/lookup.json","text!modules/components/hints/adwords/config.json","modules/components/Controller","spxw/SPX"],function(a){"use strict";var b=a("modules/HintComponent"),c=a("text!modules/components/hints/adwords/template.html"),d=a("text!modules/components/hints/adwords/style.css"),e=a("text!modules/components/hints/adwords/lookup.json"),f=a("text!modules/components/hints/adwords/config.json"),g=a("modules/components/Controller"),h=a("spxw/SPX");return b.extend({constructor:function(){var a=new g({analytics:h.Analytics,dataStore:h.DataStore}),b=Array.prototype.slice.call(arguments,0);Array.prototype.push.apply(b,[a,c,d,e,f]),this._super().constructor.apply(this,b)}})}),define("text!modules/components/hints/adwords_iab/template.html",[],function(){return'<div class="spx-adwords-iab\n			spx-ai-<%- rc.style %>"\n	 data-purpose="lp"\n	 data-target="<%- rc.target%>"\n	 data-pitch="<%- rc.headline %> <%- rc.displayUrl %> <%- rc.description1 %> <%- rc.description2 %>">\n\n	<div class="spx-ai-headline"><%- rc.headline %></div>\n	<div class="spx-ai-url"><%- rc.displayUrl %></div>\n	<div class="spx-ai-desc">\n		<div class="spx-ai-b"><%- rc.description1 %></div>\n		<div class="spx-ai-w">\n			<div class="spx-ai-i"><%- rc.description2 %></div>\n			<!-- arrow -->\n			<% if(rc.style == \'content\') { %>\n			<div class="spx-ai-arrow"></div>\n			<% } %>\n		</div>\n	</div>\n\n	<!-- isi -->\n	<% if(rc.isiUrl && rc.isiText) { %>\n	<div data-target="<%- rc.isiUrl %>" class="spx-ai-isi">\n		<%- rc.isiText %>\n	</div>\n	<% } %>\n\n	<% if(rc.isiUrl && !rc.isiText) { %>\n	<div class="spx-ai-isi">\n		Click to see full safety and prescribing information, including boxed warning.\n		<span class="spx-underline spx-ai-isi spx-inline" data-target="<%- rc.isiUrl %>">More info</span>\n	</div>\n	<% } %>\n\n	<% if(rc.isiText && !rc.isiUrl) { %>\n	<div class="spx-ai-isi">\n		<%- rc.isiText %>\n	</div>\n	<% } %>\n	<!-- ./isi -->\n\n</div>\n'}),define("text!modules/components/hints/adwords_iab/style.css",[],function(){return'/* line 1, style.scss */\n\n.swoop-container {\n  /*\n  	default styles\n  	variation: 600\n  */\n}\n\n/* line 7, style.scss */\n\n.swoop-container .spx-adwords-iab {\n  background: #fff !important;\n  color: #111111 !important;\n  display: block !important;\n  margin: 0 6px -6px 6px !important;\n  padding: 20px !important;\n  text-align: left !important;\n  /*\n  	content styles\n  	variations: 601\n  */\n}\n\n/* line 15, style.scss */\n\n.swoop-container .spx-adwords-iab .spx-ai-headline {\n  color: #003da5 !important;\n  font-size: 21px !important;\n  line-height: 27px !important;\n}\n\n/* line 20, style.scss */\n\n.swoop-container .spx-adwords-iab .spx-ai-headline:hover {\n  text-decoration: underline !important;\n}\n\n/* line 25, style.scss */\n\n.swoop-container .spx-adwords-iab .spx-ai-url {\n  color: #003da5 !important;\n  font-size: 13px !important;\n  line-height: 17px !important;\n  padding: 3px 0 6px 0 !important;\n  word-wrap: break-word !important;\n}\n\n/* line 32, style.scss */\n\n.swoop-container .spx-adwords-iab .spx-ai-url:hover {\n  text-decoration: underline !important;\n}\n\n/* line 37, style.scss */\n\n.swoop-container .spx-adwords-iab .spx-ai-desc,\n.swoop-container .spx-adwords-iab .spx-ai-isi {\n  color: #111111 !important;\n  font-size: 16px !important;\n  line-height: 22px !important;\n}\n\n/* line 43, style.scss */\n\n.swoop-container .spx-adwords-iab .spx-ai-desc div[class^="spx-"],\n.swoop-container .spx-adwords-iab .spx-ai-desc span[class^="spx-"],\n.swoop-container .spx-adwords-iab .spx-ai-isi div[class^="spx-"],\n.swoop-container .spx-adwords-iab .spx-ai-isi span[class^="spx-"] {\n  display: inline !important;\n}\n\n/* line 49, style.scss */\n\n.swoop-container .spx-adwords-iab .spx-ai-isi {\n  color: #969696 !important;\n}\n\n/* line 57, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content {\n  background: #ffffff url(\'<%= assetUrl("images/orange-swoop-18w.png")%>\') no-repeat 10px 50% !important;\n  border: 1px solid rgba(0, 0, 0, 0.1) !important;\n  border-radius: 2px !important;\n  box-shadow: rgba(0, 0, 0, 0.1) 0 1px 3px !important;\n  color: #6b6b6b !important;\n  display: inline-block !important;\n  margin: 0 !important;\n  padding: 10px 20px 10px 38px !important;\n}\n\n/* line 67, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content:hover {\n  background-color: #fafafa !important;\n}\n\n/* line 70, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content:hover .spx-ai-headline {\n  text-decoration: underline !important;\n}\n\n/* line 75, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-headline {\n  color: #003da5 !important;\n  font-size: 16px !important;\n  font-weight: bold !important;\n  line-height: 20px !important;\n}\n\n/* line 82, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc,\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-isi {\n  font-size: 14px !important;\n  line-height: 20px !important;\n}\n\n/* line 87, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc div,\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-isi div {\n  line-height: 20px !important;\n}\n\n/* line 92, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc {\n  color: #333333 !important;\n}\n\n/* line 95, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc .spx-ai-b,\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc .spx-ai-w {\n  display: block !important;\n}\n\n/* line 100, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc .spx-ai-w {\n  white-space: nowrap !important;\n}\n\n/* line 103, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc .spx-ai-w div {\n  display: inline-block !important;\n  white-space: normal !important;\n}\n\n/* line 110, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-desc .spx-ai-arrow {\n  background: url(\'<%= assetUrl("images/orange-arrows.png")%>\') no-repeat !important;\n  display: inline-block !important;\n  height: 14px !important;\n  position: relative !important;\n  top: 2px !important;\n  width: 23px !important;\n}\n\n/* line 120, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-isi {\n  color: #afafaf !important;\n  font-size: 13px !important;\n  line-height: 20px !important;\n  max-width: 280px !important;\n}\n\n/* line 127, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-url {\n  color: #969696 !important;\n  font-size: 13px !important;\n  line-height: 20px !important;\n  padding: 3px 0 2px 0 !important;\n}\n\n/* line 133, style.scss */\n\n.swoop-container .spx-adwords-iab.spx-ai-content .spx-ai-url:hover {\n  text-decoration: none !important;\n}'}),define("text!modules/components/hints/adwords_iab/lookup.json",[],function(){return'{\n  "cl": "clientData",\n  "t": "target",\n  "h": "headline",\n  "d1": "description1",\n  "d2": "description2",\n  "du": "displayUrl",\n  "at": "adText",\n  "iu": "isiUrl",\n  "it": "isiText",\n  "s": "style"\n}\n'}),define("text!modules/components/hints/adwords_iab/config.json",[],function(){return'{\n	"min-width": 200,\n	"max-height": 250\n}\n'}),define("hint/adwords_iab",["require","modules/HintComponent","text!modules/components/hints/adwords_iab/template.html","text!modules/components/hints/adwords_iab/style.css","text!modules/components/hints/adwords_iab/lookup.json","text!modules/components/hints/adwords_iab/config.json","modules/components/Controller","spxw/SPX"],function(a){
"use strict";var b=a("modules/HintComponent"),c=a("text!modules/components/hints/adwords_iab/template.html"),d=a("text!modules/components/hints/adwords_iab/style.css"),e=a("text!modules/components/hints/adwords_iab/lookup.json"),f=a("text!modules/components/hints/adwords_iab/config.json"),g=a("modules/components/Controller"),h=a("spxw/SPX");return b.extend({constructor:function(){var a=new g({analytics:h.Analytics,dataStore:h.DataStore}),b=Array.prototype.slice.call(arguments,0);Array.prototype.push.apply(b,[a,c,d,e,f]),this._super().constructor.apply(this,b)}})}),require(["spxw/spxMain","modules/analytics.spx"])}();